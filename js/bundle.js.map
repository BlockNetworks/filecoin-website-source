{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./src/sass/site.scss","webpack:///./src/js/global/state.ts","webpack:///./src/js/global/utils.ts","webpack:///./src/js/global/constants.ts","webpack:///./src/js/global/emitter.ts","webpack:///./src/js/global/window.ts","webpack:///./src/js/header.ts","webpack:///./src/js/components/accordion.ts","webpack:///./src/js/gsap-bonus/utils/strings.js","webpack:///./src/js/gsap-bonus/SplitText.js","webpack:///./src/js/global/page.ts","webpack:///./src/js/home/shaders/FlowMapShader.ts","webpack:///./src/js/home/pathItem.ts","webpack:///./src/js/home/LinePath3.ts","webpack:///./src/js/home/tube.ts","webpack:///./src/js/global/audioController.ts","webpack:///./src/js/home/paths.ts","webpack:///./src/js/home/city.ts","webpack:///./src/js/home/cities.ts","webpack:///./src/js/global/spritesheet.ts","webpack:///./src/js/home/shaders/ParticleShader.ts","webpack:///./src/js/home/Particles.ts","webpack:///./src/js/home/sprite2d.ts","webpack:///./src/js/global/preload.ts","webpack:///./src/js/home/overlayFactory.ts","webpack:///./src/js/home/cityScene.ts","webpack:///./src/js/home/globe.ts","webpack:///./src/js/home/timer.ts","webpack:///./src/js/home/animations.ts","webpack:///./src/js/home/hero3d.ts","webpack:///./src/js/home/controls.ts","webpack:///./src/js/home/home.ts","webpack:///./src/js/components/slideshow.ts","webpack:///./src/js/components/minegraph.ts","webpack:///./src/js/provide/provide.ts","webpack:///./src/js/components/carousel.ts","webpack:///./src/js/components/videoOverlay.ts","webpack:///./src/js/build/build.ts","webpack:///./src/js/ecosystem/ecosystemAvatars.ts","webpack:///./src/js/components/ecograph.ts","webpack:///./src/js/ecosystem/ecosystem.ts","webpack:///./src/js/components/storeCarousel.ts","webpack:///./src/js/store/store.ts","webpack:///./src/js/components/newsletter.ts","webpack:///./src/js/footer.ts","webpack:///./src/js/alertBar.ts","webpack:///./src/js/global/redirects.ts","webpack:///./src/js/blog/blog.ts","webpack:///./src/js/global/sharing.ts","webpack:///./src/js/blog/blogSingle.ts","webpack:///./src/js/index.ts"],"names":["webpackJsonpCallback","data","moduleId","chunkId","chunkIds","moreModules","executeModules","i","resolves","length","Object","prototype","hasOwnProperty","call","installedChunks","push","modules","parentJsonpFunction","shift","deferredModules","apply","checkDeferredModules","result","deferredModule","fulfilled","j","depId","splice","__webpack_require__","s","installedModules","0","exports","module","l","m","c","d","name","getter","o","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","p","jsonpArray","window","oldJsonpFunction","slice","super","_value","this","newValue","lastValue","emit","current","previous","state","stateItems","callback","on","off","Math","PI","clamp","num","min","max","loadJSON","url","Promise","resolve","req","XMLHttpRequest","onreadystatechange","readyState","status","json","JSON","parse","responseText","open","send","hexNumToStr","dec","toString","translatePoint","v","point","clone","obj","updateMatrixWorld","localToWorld","reversePath","array","unshift","loadTexture","reject","texture","img","Image","onload","image","needsUpdate","src","rewriteRelLinks","links","pathArray","location","pathname","replace","BASE_PATH","split","locale","slug","newPath","relPath","forEach","el","parentElement","dataset","charAt","setAttribute","ALL_SLUGS","slugs","substr","fullUrl","urlParts","urlPart","toLowerCase","trim","dir","getDynamicBasePath","LOCALE_CHINESE","LOCALE_ENGLISH","LANG_CODE","basePath","base","substring","lastIndexOf","getLanguageCode","GLOBE_RADIUS","GLOBE_RADIUS_FAR","GLOBE_RADIUS_CLOSE","CURVE_MIN_ALTITUDE","CURVE_MAX_ALTITUDE","DAY","GLOBE","COLOR_PURPLE_RGBA","COLOR_BLUE_RGBA","COLOR_RED_RGBA","COLOR_WHITE_RGBA","COLOR_ORANGE_RGBA","COLOR_GRAY_BLUE_RGBA","COLOR_MODES","COLOR_MODES_BG","EVENT_RESIZE","addEventListener","event","resizeHandler","scrollHandler","width","innerWidth","height","innerHeight","halfWidth","round","halfHeight","y","scrollY","deltaY","lastScrollY","Action","element","openItems","content","resizeTrigger","mainItems","querySelectorAll","subItems","subItemsLi","init","contents","e","onMainItemClick","querySelector","onSubItemClick","classList","add","style","display","emitResize","target","contains","remove","closeSubItems","openSubItems","targetIndex","gsap","fromTo","opacity","duration","delay","wrapper","getBoundingClientRect","to","ease","onUpdate","onComplete","_targets","removeEventListener","header","hidden","lastY","hoverState","document","navigation","backgroundWrapper","navItems","subNavItems","languageAnchors","communityButton","communityDropdown","communityAnchors","navHandleButton","hamburger","backgrounds","onSubNavItemClick","onLanguageClick","onMouseEnter","onMouseLeave","toggleCommunityDropdown","toggleMobileNav","hideMobileNav","setColorHandler","onScrollHandler","onResizeHandler","menuAccordion","speed","show","cookie","LANG_COOKIE_KEY","href","set","clearProps","hideCommunityDropdown","hide","showCommunityDropdown","showMobileNav","x","autoAlpha","anchor","parentNav","closest","parentAnchor","history","pushState","getAttribute","navSlugFiltered","search","activeItem","filter","removeProperty","transitionDelay","delayedCall","emojiExp","_doc","_win","_coreInitted","_stripExp","_multipleSpacesExp","_getComputedStyle","getComputedStyle","_isArray","Array","isArray","_slice","_toArray","leaveStrings","type","_isAbsolute","vars","position","absolute","_findSpecialChars","text","chars","_cssClassFunc","cssClass","tag","iterate","indexOf","join","_swapText","oldText","newText","nodeType","firstChild","nextSibling","nodeValue","_pushReversed","a","merge","_isBeforeWordDelimiter","root","wordDelimiter","next","_next","textContent","parentNode","_parent","_deWordify","child","children","childNodes","_isSplit","previousSibling","insertBefore","removeChild","_getStyleAsNumber","computedStyle","parseFloat","_setPositionsAfterSplit","allChars","allWords","allLines","origWidth","origHeight","node","nodes","isChild","curLine","addWordSpaces","lineNode","lineWidth","offset","cs","paddingLeft","lineOffsetY","borderTopAndBottom","borderLeftAndRight","padTopAndBottom","padLeftAndRight","lineThreshold","textAlign","charArray","wordArray","lineArray","span","types","lines","words","linesClass","iterateLine","spaceNodesToRemove","getElementsByTagName","offsetTop","abs","nodeName","_x","offsetLeft","_y","_w","offsetWidth","_h","offsetHeight","_wordEnd","left","top","appendChild","_isFirst","createTextNode","innerHTML","createElement","offsetParent","cssText","className","String","fromCharCode","clientHeight","clientWidth","_splitRawText","wordStart","charStart","splitText","character","hasTagStart","testResult","space","wordEnd","wordIsOpen","specialChars","container","parent","getText","reduceWhiteSpace","charCodeAt","outerHTML","_split","test","SplitText","elements","_originals","isSplit","revert","wordsClass","charsClass","reverse","originals","version","home","transitionSpeed","parallaxDistance","onScrollToHandler","scrollEl","headerHeight","scrollTo","sectionColorCheck","requestId","requestAnimationFrame","parallaxBind","addListeners","observerVideos","IntersectionObserver","entries","entry","onIntersectVideo","threshold","observerSections","boundingRect","boundingClientRect","section","hasAttribute","isIntersecting","onIntersectSection","previousElementSibling","rootMargin","videos","observe","sectionAnchors","removeListeners","unobserve","innerRect","innerEl","parallaxSections","sectionsWrapper","parallaxMedias","ctaButtons","anchoredLinks","parallax","scroll","resetToHome","sections","imagesToLoad","from","headerColorDelay","animateIn","hideZoom","zIndex","item","onAnchoredLinkClick","checkHash","registerPlugin","ScrollToPlugin","preventDefault","hash","introAnimateIn","elementsAnimateIn","title","tl","timeline","perspective","stagger","copy","cta","media","resetBackground","destroy","currColor","rect","bottom","map","color","newLimit","perc","diff","limit","transform","video","paused","play","pause","setActiveSubNavItem","vertex","fragment","mesh","visible","_progress","repeat","progress","onStart","SplinePathItem","path","getPointAt","LinePathItem","getLinearPoint","points","intPoint","floor","weight","p1","p2","lerp","nulls","coords","material","radius","curveMinAltitude","curveMaxAltitude","spline","startLat","startLng","endLat","endLng","start","end","altitude","distanceTo","interpolate","midCoord1","midCoord2","mid1","mid2","getSplineFromCoords","geometry","attachNulls","pathCoords","segments","renderOrder","audioItems","musicAudioItems","sfxAudioItems","audioCtx","AudioContext","webkitAudioContext","assets","getValue","assetId","useBuffer","maxGain","musicMuted","navigator","maxTouchPoints","msMaxTouchPoints","all","keys","audioItem","request","responseType","self","undecodedAudio","response","decodeAudioData","buffer","id","fadeIn","pauseOnComplete","fadeOut","isMuted","_musicMuted","mute","_sfxMuted","suspend","resume","isPlaying","muted","_maxGain","gainNode","audioController","createGain","connect","destination","gain","sourceNode","createBufferSource","audioElement","Audio","preload","source","createMediaElementSource","disconnect","stop","allCoords","hashRepeat","shareMaterial","tubes","materials","pathFollowers","hashSoundDelay","uniforms","uvOffset","uTubeLength","textureColor","textureVisibleAmount","textureAlphaAmount","globalAlpha","featherAmount","reverseDirection","shaderMaterial","side","transparent","vertexShader","FlowMapShader","fragmentShader","depthTest","depthWrite","curveMesh","index","tube","random","getLength","hash_texture_url","then","wrapS","setAllUniforms","hashSound","solidSound","completeSound","outSound","overwrite","stopHash","killTweensOf","staggerDelay","animateHash","onCompleteParams","except","stopAllHashes","reset","object3d","tubeIndex","pathItem","prop","City","lat","long","latitude","longitude","citiesKey","cities","addCity","assets3d","cn","city_data_cn","filecoin","city_data_fc","loaded","addCities","city","spriteWidth","parseInt","spriteHeight","totalFrames","backgroundImage","backgroundSize","totalWidth","backgroundPosition","ParticleItem","zPosition","particleItems","particleColor","isGlobeParticles","particleType","spot_texture_url","indicesByName","attachedSprites","positions","Float32Array","positionAttributes","alpha","dpr","hero3d","ParticleShader","fog","cloud","particleItem","attributes","setXYZ","z","setX","sprite2d","particleItemId","spriteId","sprite","particleIndex","withSprites","animateInSprites","blending","animateOutSprites","animateOut","blendSrc","blendDst","blendEquation","premultipliedAlpha","attachedSprite","localPos","getX","getY","getZ","coord2d","camera","vector","project","projectVector","xOffset","yOffset","soundIn","soundOut","_scale","_pinHeight","cloneNode","verticalLine","textField","initHeight","scale","layout","animatedIn","onStartParams","marginTop","pinHeight","label","innerText","dataSrc","imgEl","overlayFactory","introAnimations","sprites2dElement","sprites","loadImage","iconClient","iconDoc","iconDocBlack","iconMiner","iconMinerOrange","iconPackage","iconRequest","iconCoinSpin","iconTextField","iconQuestionIn","questionToCheck","checkToBlock","blockOut","blockApproved","blockDeclined","initGlobeIntro","initGlobeChapter1","initCityChapter1","initGlobeChapter2","initCityChapter2","initCityChapter3","initCityChapter4","initGlobeChapter4","initialized","ch1_remoteUserCNParticle","render","ch1_remoteUserFCAfricaParticle","ch1_remoteUserLocalTransferParticle","ch1_cityMinerLongTransferParticles","ch1_cityMinerShortTransferParticles","ch1_coinSpinParticle","ch1_cnNetworkParticles","ch2_cityPackageParticles","ch2_packageUserParticles","ch2_packageMinerParticles","ch2_packageChosenMinerParticles","ch3_cityMinerParticles","ch3_spritesheetParticles","ch4_clientParticles","ch4_chosenMinerParticles","instance","pathSet","pathsCoords","particleItemsClient","particleItemsMiners","cityTransfer","client","miner","globe","globeContainer","undefined","addPathFollower","makeFollowSphere","clientParticle","minerParticles","introAnimation","city_source","city_kuala","city_bangalore","city_chennai","city_delhi","city_beijing","city_ningxia","city_mumbai","city_bahrain","city_songea","city_lilongwe","city_wisner","city_kc","paths","ch1_remoteUserPaths","setSounds","ch1_fastTransferAfricaPaths","attachSprite2d","filecoinNetworkParticles","ch1_remoteUserFCAfrica2d","ch1_localTransferPaths","longPath","ch1_longCityTransferPaths","cityContainer","rotation","getNulls","ch1_cityStorageLong2d","ch1_cityUserLong2d","ch1_cityDocLong2d","ch1_shortCityTransferPaths","ch1_cityUserShort2d","ch1_cityStorageShort2d","ch1_cityDocShort2d","minerPos","cityScene","getCamera","ch1_minerTransferPaths","coinSpin3dPos","ch1_coinSpin2d","ch1_coinSpritesheet","ch2_cityPackageDoc2d","ch2_cityPackageUser2d","data_rates","non_chosen_miners","chosen_miners","all_miners","concat","client_city","ch2_globePackageDoc2d","ch2_globeClient2d","minerCityItems","setText","chosenMinerCityItems","minerCoords","ch2_packageMinerPaths","chosenMinerCoords","ch2_packageChosenMinerPaths","minerPosIn","minerRotateY","ch3_minerTransferPathIn","rotateY","serverPosIn","serverRotY","ch3_serverTransferPathIn","serverPosOut","ch3_serverTransferPathOut","pt_id","serverIconNull","questionInSprite","ch3_questionInSpritesheet","questionToCheckSprite","ch3_questionToCheckSpritesheet","ch3_checkToBlockSpritesheet","ch3_blockOutSpritesheet","ch3_blockApprovedSpritesheet","ch3_blockDeclinedSpritesheet","coinSprite","ch3_coinSpritesheet","minerPaymentpath","ch4_minerPaymentPaths","ch4_minerPaymentPaths_reverse","minerSprite","ch4_coinSpritesheet","ch4_minerParticles","city_src","citiesMiners1","citiesMiners2","citiesMiners3","citiesClients1","cities6","cityClients2","cities8","ch4_newyorkParticles","ch4_miners1Particles","ch4_globePaths1","ch4_miners2Particles","ch4_globePaths2","ch4_miners3Particles","ch4_globePaths3","ch4_clients1Particles","ch4_globePaths4","ch4_miners4Particles","ch4_clients2Particles","ch4_globePaths5","ch4_clients3Particles","ch4_globePaths6","minerBuildingDeskMaterials","minerBuildingDriveMaterials","cityBuildingColorTop","cityBuildingColorBottom","GLTFLoader","load","city_model_url","gltf","meshScene","scene","canvasTextureContext","createCanvasTexture","bridge","getObjectByName","canvasTexture","flatShading","roads","buildings","landMass","cityBuildingColorStop","parseNulls","parseServerBuilding","parseMinerBuilding","animateMaterialColor","canvas","flipY","getContext","cameraSourceNulls","cameraTargetNulls","spriteNulls","spriteNull","ch1_citySpotsParticles","minerBuildingOutside","minerBuildingOutsideMaterial","minerBuildingFloorsBot","srcMaterial","encoding","minerBuildingFloorsMid","srcMaterial1","minerBuildingTopFloor","srcMaterial2","minerBuildingTopFloorMaterial","minerBuildingDesk","traverse","minerMaterial","minerBuildingNasFront","minerBuildingNasFrontMaterial","minerBuildingNasBack","minerBuildingNasBackMaterial","serverBuildingOutside","serverBuildingOutsideMaterial","serverBuildingInside","drive","srcDriveMaterial","serverDriveMaterial","serverRackMaterial","cabinetFronts","cabinetFrontsMaterial","backTechMaterial","driveNull","showRacksSets","g","b","hideMiner","hideRacksSets","deactivateDrives","hideServerRacks","dayOrNight","buildingColorTop","buildingColorBottom","landColor","roadColor","updateCanvasTextureGradient","ctx","clearRect","gradient","createLinearGradient","addColorStop","fillStyle","fillRect","targetObj","sourceObj","multiplyScalar","easeAmount","currentGlobeRotation","targetGlobeRotation","lastDragDistance","introIdleSpeed","rootMesh","globeTexture","globe_texture_url","bumpMapTexture","globe_texture_bump_url","backGlowDarkTexture","globe_texture_back_glow_url","loadAtmosphere","setupGlobeLayers","globe_model_atmosphere_url","atmosphere","srcMaterialAtmos","backGlowDarkSprite","sphereMaterial","bumpMap","bumpScale","sphereMesh","delta","back_glow_scale","lookAt","dragStartPoint","dragDistance","dragDelta","sub","getActStartEndTime","chapter","currentChapterIndex","act","currentActIndex","startTimer","gsapTimer","kill","acts","gotoAct","chapterIndex","actIndex","lastChapterIndex","lastChapter","chapterData","chapterActIndex","actDuration","nextAct","LOOK_AT","GLOBE_ZOOM_IN_POSITION","GLOBE_ZOOM_OUT_POSITION","GLOBE_PACKAGE_POSITION","GLOBE_PACKAGE_LOOKAT","CITY_ZOOM_OUT_POSITION","GLOBE_LANDING_ROTATION","GLOBE_HOME_ROTATION","GLOBE_LOCAL_TRANSFER_ROTATION","GLOBE_PACKAGE_ROTATION","showIntroPaths","animateIntroPath","delayIn","delayOut","animateInSolid","pathItems","hideIntroPaths","goto_landing","hideAll","hideCity","showGlobe","resetRotation","nightToDay","play1_1","actData","dayToNight","fadeInScene","remoteUserParticle","showHideText","titles","play1_2","getSprite","pulse","getPathFollowers","play1_3","play1_4","removeUserSprite2d","play1_5","hideGlobe","fadeScene","cam1","lookAtPosition","cam2","tweens","gotoCityPoint","timeScale","setHoverDistance","fadeMinerBuildingWall","play1_6","cameraNulls1Pos","minerCam","hideMinerBuildingFloors","showMiner","hideDrives","hidePoint","play2_1","fadeOutScene","toColor","LIGHT_SCENE_BG","cameraNulls","updateLighting","play2_2","rotY","play2_3","play3_1","cameraBuildingPosition","docSprite","cam","cameraMinerSrc","cameraMinerTarget","tween1","tween2","hoverEase","fadeServerBuildingWall","hideServerBuildingWall","DEFAULT_HOVER_EASE","showServerRacks","pathInUniforms","pathOutUniforms","activateDrives","checkToBlockSprite","blockOutSprite","blockApprovedSprite","blockDeclinedSprite","yoyo","showServerBuildingWall","cameraPanTo","play4_1","paymentPath","paymentPathR","clientParticles","chosenMinerParticles","clientSprite","requestSprite","blackDocSprite","coinSheet","cameraZoomToSrc","cameraZoomToTarget","play4_2","rotDelta","rotDelta2","showDelay","hideDelay","titleExperienceEl","timeOfDay","globeOrCity","col","background","LIGHT_AMBIENT_LIGHT_GLOBE","LIGHT_AMBIENT_LIGHT_CITY","ambientLight","LIGHT_POINT_LIGHT","intensity","LIGHT_POINT_LIGHT_INT_GLOBE","LIGHT_POINT_LIGHT_INT_CITY","pointLight","DARK_SCENE_BG","DARK_AMBIENT_LIGHT_GLOBE","DARK_AMBIENT_LIGHT_CITY","DARK_POINT_LIGHT_GLOBE","DARK_POINT_LIGHT_CITY","pointLightPos","DARK_POINT_LIGHT_INT_GLOBE","DARK_POINT_LIGHT_INT_CITY","setValue","updateDOMColors","animateOutBackGlowDark","glowDelay","animateInBackGlowDark","fadeToColor","fadeFromColor","targetPosition","isSceneSwitch","far","targetCityPosition","cameraContainer","timer","hoverLookAt","mouseX","mouseY","hoverDistance","hoverLookAtDistance","onMouseMove","clientX","clientY","resizeGlobeStill","renderer","setPixelRatio","aspect","updateProjectionMatrix","setSize","renderLoop","_myReq","normalizeRotation","lastRootExport","iconsContainer","fadePlane","webglContainer","contentContainer","globeStill","mainEl","chapters","assetEl","isWebGLAvailable","enabled","setData","setupEnvironment","setupEvents","antialias","domElement","bgColor","globe_still_url","resetHoverEase","animateInWebgl","h","w","setHoverLookAtDistance","exportRoot","cancelAnimationFrame","backgroundColor","distance","playButtonHandler","chapterMenuClick","currentTarget","previousChapterButtonHandler","nextChapterButtonHandler","sfxToggleHandler","sfxMuted","musicToggleHandler","audioControllerSoundToggleHandler","sfxToggle","musicToggle","progressBar","timerRing","timerRingCircle","playButton","playIcon","pauseIcon","chapterMenu","chapterMenuItems","previousChapterButton","nextChapterButton","chapterItem","strokeDashArrayLength","strokeDasharray","strokeDashoffset","timerTween","animateProgressTo","progressBarTween","chapterItemEl","startButtonHandler","introPlay","pauseButtonHandler","onBlurHandler","resumeOnFocus","onFocusHandler","keyUpHandler","keyCode","chapterSwitchHandler","stopAll","onDragAreaDownHandler","startDrag","dragArea","onDragAreaMoveHandler","drag","onDragAreaUpHandler","stopDrag","onActChange","part","onChapterChange","controls","getChapterDuration","updateChapterMenu","animateProgressFromTo","menuEl","statsEl","statsItemsEl","titleInitialEl","introControls","introPlayIcon","introLoader","introLoadingLabel","introExploreLabel","disclaimer","enableDrag","body","animationInComplete","started","hideMenu","hideStats","disableDrag","resumeAll","pauseAll","currIndex","imageItems","copyItems","btnPrev","btnNext","showActive","onPrevClick","onNextClick","onNavClick","hideCurrent","animating","tls","line","lineBg","lineLength","getTotalLength","dots","coins1","coins2","coins3","resetProps","coins","tweenCoins","resetAnimation","slideshow","graph","accordion","mobileOnly","prevX","enable","disable","itemW","carouselWrapper","carousel_count","carouselItems","initDraggable","activeID","navDotsWrapper","swipeDir","slideSpeed","slideMeth","opacityDisabled","opacitySpeed","setupDraggable","setupDots","navigateSlide","addHandlers","Draggable","draggable","edgeResistance","dragResistance","bounds","onDrag","updateDirections","onThrowUpdate","throwProps","lockAxis","onDragStart","evt","onDragEnd","removeHandlers","dotHTML","insertAdjacentHTML","navDots","xTarget","slideDone","elActive","getDirection","endX","onToggleItemClick","navDot","onNavDotClick","onNavDotMouseEnter","onNavDotMouseLeave","onItemMouseDown","onItemMouseEnter","onItemMouseUp","mainElement","videoId","fadeDuration","onAnchorClick","link","RegExp","testURL","ampersandPosition","openModal","modalElement","onCloseClick","carousels","videoOverlays","settingMobile","carouselElements","videoOverlayElements","overlay","accordionElement","toolsAccordion","console","log","percHeader","grid","avatars","cols","observer","labelsY","labelsX","chartWrapper","bars","count","weekLabelsWrapper","commitLabelsWrapper","initWeekLabels","initCommitLabels","presetAnimation","inc","scaleX","bar","scaleY","transformOrigin","fetchData","fetch","listHeight","list","itemHeight","dataItems","dataItemWrapper","icon","mediaItems","showDuration","onItemClick","autoNext","newIndex","showMedia","goDown","goUp","nextElementSibling","steps","auto","setTransitioning","storeCarousel","error","form","inputEmail","onSubmit","onFocus","apiKey","listId","MC_callback","msg","includes","linkHref","match","showError","showSuccess","email","validateEmail","script","footer","newsletter","closeButton","pushContent","close","redirectsObj","catch","redirects","origin","cookieArr","cookiePair","decodeURIComponent","getCookie","language","isNavOpen","screenMode","activeDoubleClass","selectedCategory","navSelected","closeNav","onFilterLinkClick","postsContainer","checkLazySizes","loadNextSet","prevMode","matchMedia","matches","setFilterPosts","tagName","filterLinks","category","filterPosts","subtitle","coverFeatures","posts","hiddenContainer","dispatchEvent","Event","counter","categories","wrapPosts","newEl","totalCounter","Sharing","shareCopy","facebookEl","twitterEl","linkedinEl","copyLinkEl","copyLinkAlertEl","onFacebookClick","onTwitterClick","onLinkedInClick","screen","facebookWindow","URL","focus","twitterWindow","linkedinWindow","textArea","select","execCommand","err","TweenMax","toggle","onToggleClick","isSocialVisible","networks","shareElement","sharing","relatedArticlesCarousel","carousel","App","clickBlocker","alertBarEl","check","redirectLang","initListeners","router","navaid","onRouteChange","sectionState","setActiveNavItem","clicksDisabled","listen","currentSection","xmlCheck","trackPageView","newSection","ga"],"mappings":"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","file":"bundle.js","sourcesContent":[" \t// install a JSONP callback for chunk loading\n \tfunction webpackJsonpCallback(data) {\n \t\tvar chunkIds = data[0];\n \t\tvar moreModules = data[1];\n \t\tvar executeModules = data[2];\n\n \t\t// add \"moreModules\" to the modules object,\n \t\t// then flag all \"chunkIds\" as loaded and fire callback\n \t\tvar moduleId, chunkId, i = 0, resolves = [];\n \t\tfor(;i < chunkIds.length; i++) {\n \t\t\tchunkId = chunkIds[i];\n \t\t\tif(Object.prototype.hasOwnProperty.call(installedChunks, chunkId) && installedChunks[chunkId]) {\n \t\t\t\tresolves.push(installedChunks[chunkId][0]);\n \t\t\t}\n \t\t\tinstalledChunks[chunkId] = 0;\n \t\t}\n \t\tfor(moduleId in moreModules) {\n \t\t\tif(Object.prototype.hasOwnProperty.call(moreModules, moduleId)) {\n \t\t\t\tmodules[moduleId] = moreModules[moduleId];\n \t\t\t}\n \t\t}\n \t\tif(parentJsonpFunction) parentJsonpFunction(data);\n\n \t\twhile(resolves.length) {\n \t\t\tresolves.shift()();\n \t\t}\n\n \t\t// add entry modules from loaded chunk to deferred list\n \t\tdeferredModules.push.apply(deferredModules, executeModules || []);\n\n \t\t// run deferred modules when all chunks ready\n \t\treturn checkDeferredModules();\n \t};\n \tfunction checkDeferredModules() {\n \t\tvar result;\n \t\tfor(var i = 0; i < deferredModules.length; i++) {\n \t\t\tvar deferredModule = deferredModules[i];\n \t\t\tvar fulfilled = true;\n \t\t\tfor(var j = 1; j < deferredModule.length; j++) {\n \t\t\t\tvar depId = deferredModule[j];\n \t\t\t\tif(installedChunks[depId] !== 0) fulfilled = false;\n \t\t\t}\n \t\t\tif(fulfilled) {\n \t\t\t\tdeferredModules.splice(i--, 1);\n \t\t\t\tresult = __webpack_require__(__webpack_require__.s = deferredModule[0]);\n \t\t\t}\n \t\t}\n\n \t\treturn result;\n \t}\n\n \t// The module cache\n \tvar installedModules = {};\n\n \t// object to store loaded and loading chunks\n \t// undefined = chunk not loaded, null = chunk preloaded/prefetched\n \t// Promise = chunk loading, 0 = chunk loaded\n \tvar installedChunks = {\n \t\t0: 0\n \t};\n\n \tvar deferredModules = [];\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \tvar jsonpArray = window[\"webpackJsonp\"] = window[\"webpackJsonp\"] || [];\n \tvar oldJsonpFunction = jsonpArray.push.bind(jsonpArray);\n \tjsonpArray.push = webpackJsonpCallback;\n \tjsonpArray = jsonpArray.slice();\n \tfor(var i = 0; i < jsonpArray.length; i++) webpackJsonpCallback(jsonpArray[i]);\n \tvar parentJsonpFunction = oldJsonpFunction;\n\n\n \t// add entry module to deferred list\n \tdeferredModules.push([15,1]);\n \t// run deferred modules when ready\n \treturn checkDeferredModules();\n","module.exports = __webpack_public_path__ + \"../css/site.css\";","import Emitter from \"@hellomonday/emitter\";\n\nconst STATE_CHANGE_EVENT = 'stateChangeEvent';\n\nexport class State {\n\n    readonly stateItems: any = {};\n\n    constructor() {\n        this.stateItems = {};\n    }\n\n    setValue(key: string, value: any) {\n        if (!this.stateItems[key]) {\n            this.stateItems[key] = new StateItem(value);\n        } else {\n            this.stateItems[key].value = value;\n        }\n    }\n\n    getValue(key: string) {\n        return this.stateItems[key] ? this.stateItems[key].value : null;\n    }\n\n    on(key:string, callback: Function) {\n        if (!this.stateItems[key]) {\n            this.stateItems[key] = new StateItem();\n        }\n        this.stateItems[key].on(STATE_CHANGE_EVENT, callback);\n    }\n\n    off(key: string) {\n        if (this.stateItems[key]) {\n            this.stateItems[key].off(STATE_CHANGE_EVENT);\n        }\n    }\n}\n\nclass StateItem extends Emitter {\n\n    private _value: string = '';\n\n    constructor(value = '') {\n        super();\n        this.value = value;\n    }\n\n    get value() {\n        return this._value;\n    }\n\n    set value(newValue) {\n        const lastValue = this.value;\n        this._value = newValue;\n        this.emit(STATE_CHANGE_EVENT, {current: this.value, previous: lastValue});\n    }\n}\n\nexport const state = new State();","import * as THREE from 'three';\n// @ts-ignore\nimport { geoInterpolate } from 'd3-geo';\nimport {\n    GLOBE_RADIUS,\n    CURVE_MIN_ALTITUDE,\n    CURVE_MAX_ALTITUDE,\n    LOCALE,\n    LOCALE_CHINESE,\n    ALL_SLUGS,\n    BASE_PATH, LOCALE_ENGLISH\n} from './constants';\nimport {Vector2, Vector3} from \"three\";\nimport {PerspectiveCamera} from \"three\";\nimport coordPos from \"@hellomonday/coord-pos\";\nimport {Object3D} from \"three\";\nimport {Texture} from \"three\";\nimport {state} from \"./state\";\n\nconst DEGREE_TO_RADIAN = Math.PI / 180;\n\nexport function clamp(num:number, min:number, max:number) {\n    return num <= min ? min : (num >= max ? max : num);\n}\n\nexport function getSplineFromCoords(coords: Array<any>,\n                                    curveMinAltitude: number = CURVE_MIN_ALTITUDE,\n                                    curveMaxAltitude: number = CURVE_MAX_ALTITUDE) {\n    const startLat = coords[0];\n    const startLng = coords[1];\n    const endLat = coords[2];\n    const endLng = coords[3];\n\n    // spline vertices\n    const start = new Vector3(...coordPos(startLat, startLng, GLOBE_RADIUS));\n    const end =  new Vector3(...coordPos(endLat, endLng, GLOBE_RADIUS));\n    const altitude = clamp(start.distanceTo(end) * .75, curveMinAltitude, curveMaxAltitude);\n    const interpolate = geoInterpolate([startLng, startLat], [endLng, endLat]);\n    const midCoord1 = interpolate(0.25);\n    const midCoord2 = interpolate(0.75);\n    const mid1 = new Vector3(...coordPos(midCoord1[1], midCoord1[0], GLOBE_RADIUS + altitude));\n    const mid2 = new Vector3(...coordPos(midCoord2[1], midCoord2[0], GLOBE_RADIUS + altitude));\n\n    const spline = new THREE.CubicBezierCurve3(start, mid1, mid2, end);\n    return {\n        start,\n        end,\n        spline: spline\n    };\n}\n\nexport function projectVector(position: Vector3, camera: PerspectiveCamera, width: number, height: number) {\n    let vector = new THREE.Vector3();\n    vector.set( position.x, position.y, position.z );\n    vector.project( camera );\n    vector.x = (   vector.x + 1 ) * width  / 2 ;\n    vector.y = ( - vector.y + 1 ) * height / 2 ;\n    vector.z = 0;\n    return vector;\n}\n\nexport function loadJSON(url: string) : Promise<Array<any>> {\n    return new Promise(resolve => {\n        const req = new XMLHttpRequest();\n        req.onreadystatechange = function() {\n            if (this.readyState == 4 && this.status == 200) {\n                const json = JSON.parse(this.responseText);\n                resolve(json);\n            }\n        };\n        req.open(\"GET\", url, true);\n        req.send();\n    });\n}\n\nexport function hexNumToStr(dec: number) {\n    return '#' + dec.toString(16);\n}\n\nexport function translatePoint(v: Vector3, object: Object3D) {\n    let point: Vector3 = v.clone();\n    let obj = object.clone();\n    obj.updateMatrixWorld();\n    obj.localToWorld(point);\n    return point;\n}\n\nexport function reversePath(array: Array<number>) {\n    let reversePath = [];\n    for (let i = 0; i < array.length; i+=3) {\n        reversePath.unshift(array[i+2]);\n        reversePath.unshift(array[i+1]);\n        reversePath.unshift(array[i]);\n    }\n    return reversePath;\n}\n\nexport function contains(a: Array<any>, obj: any) {\n    for (var i = 0; i < a.length; i++) {\n        if (a[i] === obj) {\n            return true;\n        }\n    }\n    return false;\n}\n\nexport function loadTexture(url: string)  {\n    return new Promise<Texture>((resolve, reject) => {\n        let texture = new Texture();\n        let img = new Image();\n        img.onload = (data) => {\n            texture.image = img;\n            texture.needsUpdate = true;\n            resolve(texture);\n        }\n        // on fail call reject\n        img.src = url;\n    })\n}\n\nexport function setCookie(cookie: string) {\n    document.cookie = cookie;\n}\n\nexport function getCookie(name: string) {\n    var cookieArr = document.cookie.split(\";\");\n    for(var i = 0; i < cookieArr.length; i++) {\n        var cookiePair = cookieArr[i].split(\"=\");\n        if(name == cookiePair[0].trim()) {\n            return decodeURIComponent(cookiePair[1]);\n        }\n    }\n    return null;\n}\n\nexport function cubicOut(t: number) {\n    var f = t - 1.0\n    return f * f * f + 1.0\n}\n\nexport function quadOut(t: number) {\n    return -t * (t - 2.0)\n}\n\nexport function getDynamicBasePath(url: string, slugs: Array<string>) {\n    if (url.substr(-1) != '/') url += '/';\n    let fullUrl = '';\n    const urlParts = url.split('/');\n    for (let i = 0; i < urlParts.length; i++) {\n        const urlPart = urlParts[i];\n        for (let j = 0; j < slugs.length; j++) {\n            const slug = slugs[j].toLowerCase().replace('/', '').trim();\n            const dir = urlPart.toLowerCase().trim();\n            if (slug.length && slug == dir) {\n                return fullUrl;\n            }\n        }\n        fullUrl += urlPart;\n        if (i < urlParts.length - 1) {\n            fullUrl += '/';\n        }\n    }\n    return fullUrl;\n}\n\nexport function getLanguageCode(basePath: string) {\n    // remove last slash of base path\n    const base = basePath.replace(/\\/$/, '');\n    // get the string after last slash of base path\n    const localeSlug = base.substring(base.lastIndexOf('/') + 1);\n    return localeSlug === LOCALE_CHINESE ? LOCALE_CHINESE : LOCALE_ENGLISH;\n}\n\nexport function rewriteRelLinks(links: NodeListOf<Element>) {\n    const path = window.location.pathname.replace(BASE_PATH, '');\n    const pathArray = path.split('/');\n    let locale = BASE_PATH.split('/')[BASE_PATH.split('/').length-2] + '/';\n    if (locale === '/') locale = '';\n\n    // Build up relative path\n    let relPath = '';\n    for (let i=1; i< pathArray.length; i++) {\n        relPath = relPath + '../';\n    }\n\n    // Rewrite urls\n    let slug;\n    let newPath;\n    [...links].forEach((el) => {\n        slug = el.parentElement.dataset.slug;\n\n        // When no slug is found\n        if (!slug) slug = '/';\n\n        // Remove first slash\n        if (slug.charAt(0) === '/') slug = slug.slice(1);\n\n        if (slug === 'en/')\n            newPath = relPath + \"../\" + slug;\n        else\n            newPath = relPath + slug.replace(locale, '');\n\n        el.setAttribute('href', newPath);\n    })\n}\n\nexport function isTouch() {\n    return ('ontouchstart' in window) ||\n        (navigator.maxTouchPoints > 0) ||\n        (navigator.msMaxTouchPoints > 0);\n}\n","// Slugs\nexport const SLUG_HOME = '';\nexport const SLUG_PROVIDE = 'provide/';\nexport const SLUG_BUILD = 'build/';\nexport const SLUG_ECOSYSTEM = 'ecosystem/';\nexport const SLUG_STORE = 'store/';\nexport const SLUG_BLOG = 'blog/';\nexport const SLUG_BLOG_CATEGORY = 'blog/:category';\nexport const SLUG_BLOG_SINGLE = 'blog/:category/:post';\n\n// Locale settings\nimport {getDynamicBasePath, getLanguageCode} from \"./utils\";\nexport const ALL_SLUGS = [SLUG_HOME, SLUG_PROVIDE, SLUG_BUILD, SLUG_ECOSYSTEM, SLUG_STORE, SLUG_BLOG, SLUG_BLOG_CATEGORY, SLUG_BLOG_SINGLE];\nexport const BASE_PATH = getDynamicBasePath(window.location.pathname, ALL_SLUGS);\nexport const LOCALE = 'locale';\nexport const LOCALE_CHINESE = 'zh-cn';\nexport const LOCALE_CHINESE_CODE = 'zh';\nexport const LOCALE_ENGLISH = 'en';\nexport const LANG_CODE = getLanguageCode(BASE_PATH);\nexport const CURRENT_SECTION = 'current_section';\n\n// magic numbers\nexport const GLOBE_RADIUS = 200;\nexport const GLOBE_RADIUS_FAR = GLOBE_RADIUS + .8;\nexport const GLOBE_RADIUS_CLOSE = GLOBE_RADIUS + .4;\nexport const PI_TWO = Math.PI * 2;\nexport const PI_HALF = Math.PI / 2;\nexport const CURVE_MIN_ALTITUDE = 10;\nexport const CURVE_MAX_ALTITUDE = 20;\n\n// 3d state\nexport const TIME_OF_DAY = 'timeOfDay';\nexport const NIGHT = 'night';\nexport const DAY = 'day';\nexport const GLOBE_OR_CITY = 'globe_or_city';\nexport const GLOBE = 'globe';\nexport const CITY = 'city';\nexport const ASSETS_3D = 'assets3d';\nexport const CHAPTERS_3D = 'chapters3d';\n\n// blog states\nexport const BLOG_CATEGORY = 'blog_category';\nexport const BLOG_SCROLL_Y = 'blog_scroll_y';\n\n// Colors\nexport const CURVE_COLOR = 0x64BFC9;\nexport const COLOR_PURPLE = 0xb7acff;\nexport const COLOR_PURPLE_RGBA = [.71, .67, 1, 1];\nexport const COLOR_GREEN = 0x78C3BC;\nexport const COLOR_GREEN_RGBA = [.47, .76, .73, 1];\nexport const COLOR_BLUE = 0x3b91f7;\nexport const COLOR_BLUE_RGBA = [.23, .56, .96, .1];\nexport const COLOR_FADED_BLUE_RGBA = [.23, .56, .96, .5];\nexport const COLOR_RED_RGBA = [1, 0, 0, 1];\nexport const COLOR_WHITE = 0xffffff;\nexport const COLOR_WHITE_RGBA = [1, 1, 1, 1];\nexport const COLOR_BLACK = 0x000000;\nexport const COLOR_BLACK_RGBA = [0, 0, 0, 1];\nexport const COLOR_ORANGE = 0xff7800;\nexport const COLOR_ORANGE_RGBA = [1, .5, 0, 1];\nexport const COLOR_GRAY_BLUE = 0x3E89C6;\nexport const COLOR_GRAY_BLUE_RGBA = [.24, .53, .77, 1];\nexport const COLOR_MODES = [\n    'mode-transparent-dark',\n    'mode-transparent-light',\n    'mode-dark',\n    'mode-gray-light',\n    'mode-gray-dark',\n    'mode-light',\n    'mode-blue'\n];\nexport const COLOR_MODES_BG = [\n    'mode-transparent-dark--bg',\n    'mode-transparent-light--bg',\n    'mode-dark--bg',\n    'mode-gray-light--bg',\n    'mode-gray-dark--bg',\n    'mode-light--bg',\n    'mode-blue--bg'\n];\n\n// Icon types\nexport const ICON_CLIENT = '.icon-client';\nexport const ICON_REQUEST = '.icon-request';\nexport const ICON_MINER = '.icon-miner';\nexport const ICON_MINER_ORANGE = '.icon-miner-orange';\nexport const ICON_DOC = '.icon-doc';\nexport const ICON_PACKAGE = '.icon-package';\nexport const TEXT_FIELD = '.text-field';\nexport const ICON_COIN_SPIN = '.icon-coin-spin';\nexport const ICON_QUESTION_IN = '.icon-question-in';\nexport const ICON_QUESTION_TO_CHECK = '.icon-question-to-check';\nexport const ICON_CHECK_TO_BLOCK = '.icon-check-to-block';\nexport const ICON_BLOCK_OUT = '.icon-block-out';\nexport const ICON_BLOCK_APPROVED = '.icon-block-approved';\nexport const ICON_BLOCK_DECLINED = '.icon-block-declined';\nexport const ICON_DOC_BLACK = '.icon-doc-black';\n\n// Breakpoints matching sass 'for-size' mixin.\nexport const BP_S = 600;\nexport const BP_M = 900;\nexport const BP_MM = 1024;\nexport const BP_L = 1440;\nexport const BP_XL = 1600;\n\nexport const LANG_COOKIE_KEY = \"fc_lang\";\nexport const LANG_COOKIE_VALUE = \"true\";\n\n","import Emitter from \"@hellomonday/emitter\";\n\nexport const emitter = new Emitter();\n","import {emitter} from \"./emitter\";\n\nexport const EVENT_RESIZE = 'events_resize';\nexport const EVENT_SCROLL = 'events_scroll';\nexport const EVENT_SCROLL_TO = 'events_scroll_to';\nexport const EVENT_HEADER_COLOR = 'events_header_color';\n\nexport class Window {\n    public static width: number;\n    public static height: number;\n    public static halfWidth: number;\n    public static halfHeight: number;\n    public static lastScrollY: number = 0;\n\n    constructor() {\n        window.addEventListener('resize', (event: Event) => this.resizeHandler(event));\n        window.addEventListener('scroll', (event: Event) => this.scrollHandler(event));\n        this.resizeHandler();\n    }\n\n    private resizeHandler(event?: Event): void {\n        Window.width = window.innerWidth;\n        Window.height = window.innerHeight;\n        Window.halfWidth = Math.round(Window.width * 0.5);\n        Window.halfHeight = Math.round(Window.height * 0.5);\n        emitter.emit(EVENT_RESIZE, {\n            width: Window.width,\n            height: Window.height\n        });\n    }\n\n    private scrollHandler(event: Event): void {\n        emitter.emit(EVENT_SCROLL, {\n            y: window.scrollY,\n            deltaY: window.scrollY - Window.lastScrollY\n        });\n        Window.lastScrollY = window.scrollY;\n    }\n}\n\ndeclare global {\n    interface Window {\n        ga: any;\n        lazySizesConfig: any;\n    }\n}\n","import {\n    EVENT_HEADER_COLOR,\n    EVENT_RESIZE, EVENT_SCROLL,\n    EVENT_SCROLL_TO, Window\n} from \"./global/window\";\nimport {emitter} from \"./global/emitter\";\nimport {gsap} from \"gsap\";\nimport {BP_M, COLOR_MODES, LANG_COOKIE_KEY, LANG_COOKIE_VALUE, LOCALE_CHINESE} from \"./global/constants\";\nimport {Accordion} from \"./components/accordion\";\nimport {setCookie} from \"./global/utils\";\n\nexport enum Action {\n    show = 'show',\n    hide = 'hide'\n}\n\nexport interface StatePayload {\n    state: Action;\n}\n\nclass Header {\n    public element: HTMLElement;\n    public backgroundWrapper: HTMLElement;\n    private navigation: HTMLElement;\n    private backgrounds: NodeList;\n    private languageAnchors: NodeList;\n    private communityButton: HTMLElement;\n    private communityDropdown: HTMLElement;\n    private communityAnchors: NodeList;\n    private navItems: NodeListOf<HTMLElement>;\n    private subNavItems: NodeListOf<HTMLElement>;\n    private navHandleButton: HTMLElement;\n    private hamburger: HTMLElement;\n    private menuAccordion: Accordion;\n    private hidden: boolean = false;\n    private lastY: number = 0;\n    private hoverState: boolean = false;\n\n    constructor() {\n        this.element = document.querySelector('.nav-header');\n        this.navigation = this.element.querySelector('.navigation-container');\n        this.backgroundWrapper = this.element.querySelector('.background');\n        this.navItems = this.element.querySelectorAll('nav > ul > li[data-slug]');\n        this.subNavItems = this.element.querySelectorAll('.submenu li');\n        this.languageAnchors = this.element.querySelectorAll('.languages a');\n        this.communityButton = this.element.querySelector('.community-nav button');\n        this.communityDropdown = this.element.querySelector('.community-nav .dropdown');\n        this.communityAnchors = this.element.querySelectorAll('.community-nav a');\n        this.navHandleButton = this.element.querySelector('.nav-handle');\n        this.hamburger = this.element.querySelector('.hamburger');\n        this.backgrounds = this.element.querySelectorAll('.background .div');\n\n        this.subNavItems.forEach((el) => {\n            el.addEventListener('click',\n                (e) => this.onSubNavItemClick(e));\n        }, this);\n\n        this.languageAnchors.forEach((el) => {\n            el.addEventListener('click',\n                (e) => this.onLanguageClick(e));\n        }, this);\n\n        this.communityAnchors.forEach((el) => {\n            el.addEventListener('click',\n                (e) => this.onLanguageClick(e));\n        }, this);\n\n        this.element.addEventListener('mouseenter' , (e) => this.onMouseEnter());\n        this.element.addEventListener('mouseleave' , (e) => this.onMouseLeave());\n        this.communityButton.addEventListener('click', (e) => this.toggleCommunityDropdown(e));\n        this.navHandleButton.addEventListener('click', (e) => this.toggleMobileNav(e));\n        this.backgroundWrapper.addEventListener('click', (e) => this.hideMobileNav());\n\n        emitter.on(EVENT_HEADER_COLOR, this.setColorHandler.bind(this));\n        emitter.on(EVENT_SCROLL, this.onScrollHandler.bind(this));\n        emitter.on(EVENT_RESIZE, this.onResizeHandler.bind(this));\n\n        this.menuAccordion = new Accordion(this.element.querySelector('.Accordion'), [], false, false);\n    }\n\n    resetToHome(speed: number = .5) {\n        gsap.to([this.navigation], {\n            duration: speed,\n            opacity: 0,\n            onComplete: () => {\n                this.element.classList.add('zoom');\n            }});\n    }\n\n    animateIn(delay: number = 0, speed: number = .5) {\n        gsap.to([this.element, this.navigation], {\n            duration: speed,\n            opacity: 1,\n            delay: delay\n        });\n    }\n\n    onMouseLeave() {\n        this.hoverState = false;\n    }\n\n    onMouseEnter() {\n        this.hoverState = true;\n        this.show();\n    }\n\n    onLanguageClick(e: any) {\n        setCookie(LANG_COOKIE_KEY + '=' + LANG_COOKIE_VALUE + ';path=/;')\n        window.location.href = e.target.href;\n        return false;\n    }\n\n    onResizeHandler() {\n        if (Window.width > BP_M) {\n            this.navHandleButton.classList.remove('active');\n            this.hamburger.classList.remove('is-active');\n            gsap.set(this.navigation, {clearProps: 'all'});\n            gsap.set(this.backgroundWrapper, {clearProps: 'all'});\n        }\n    }\n\n    onScrollHandler() {\n\n        // Community explorer selector\n        if (this.communityButton.classList.contains('active')) {\n            this.hideCommunityDropdown();\n        }\n\n        if (this.element.classList.contains('zoom'))\n            return;\n\n        // Toggle header display\n        if (Window.lastScrollY <= window.scrollY && Window.lastScrollY > 0 && Window.width > BP_M) {\n            if (this.lastY > 20) {\n                this.hide();\n                this.lastY = 0;\n            } else {\n                this.lastY += 1;\n            }\n        } else {\n            this.show();\n            this.lastY = 0;\n        }\n    }\n\n    toggleCommunityDropdown(e: any) {\n        if (e.target.classList.contains('active')) {\n            this.hideCommunityDropdown();\n        } else {\n            this.showCommunityDropdown();\n        }\n    }\n\n    toggleMobileNav(e: any) {\n        if (e.target.classList.contains('active')) {\n            this.hideMobileNav();\n        } else {\n            this.showMobileNav();\n        }\n    }\n\n    hideMobileNav() {\n        if (Window.width < BP_M) {\n            this.navHandleButton.classList.remove('active');\n            this.hamburger.classList.remove('is-active');\n            gsap.to(this.navigation, {duration: .8, x: '0%',  ease: 'Power3.easeOut' });\n            gsap.to(this.backgroundWrapper, {duration: .8, autoAlpha: 0});\n        }\n    }\n\n    showMobileNav() {\n        this.navHandleButton.classList.add('active');\n        this.hamburger.classList.add('is-active');\n        gsap.to(this.navigation, {duration: .8, x: '-100%',  ease: 'Power3.easeOut' });\n        gsap.to(this.backgroundWrapper, {duration: .8, autoAlpha: 1});\n    }\n\n    hideCommunityDropdown() {\n        this.communityButton.classList.remove('active');\n        this.communityDropdown.classList.remove('active');\n    }\n\n    showCommunityDropdown() {\n        this.communityButton.classList.add('active');\n        this.communityDropdown.classList.add('active');\n    }\n\n    onSubNavItemClick(e: any) {\n        const el = e.target;\n        const anchor = el.dataset.anchor;\n        const parentNav = e.target.closest('[data-slug]')\n        const parentAnchor = parentNav.querySelector('a');\n\n        if (parentNav.classList.contains('active')) {\n            // Scroll down\n            emitter.emit(EVENT_SCROLL_TO, { anchor });\n        } else {\n            // Deeplink\n            history.pushState({},'', `${parentAnchor.getAttribute('href')}#${anchor}`);\n        }\n    }\n\n    setActiveNavItem(slug: string) {\n        this.navItems.forEach((el) => {\n            const navSlug = el.getAttribute('data-slug');\n            const navSlugFiltered = navSlug.replace('/'+LOCALE_CHINESE,'').substr(1);\n            el.classList.remove('active');\n\n            if (navSlugFiltered == slug || slug.search(navSlugFiltered) === 0) {\n                el.classList.add('active');\n            }\n        });\n\n        this.subNavItems.forEach((el) => el.classList.remove('active'));\n    }\n\n    setActiveSubNavItem(anchor: string) {\n        let activeItem;\n        let subItems;\n\n        activeItem = [...this.navItems].filter(el => {\n            if (el.classList.contains('active')) {\n                return el;\n            }\n        })[0];\n\n        if (activeItem) {\n            subItems = activeItem.querySelectorAll('[data-anchor]');\n\n            if (subItems) {\n                subItems.forEach((el) => {\n                    const element = el as HTMLElement;\n\n                    if (element.dataset.anchor === anchor)\n                        element.parentElement.classList.add('active');\n                    else\n                        element.parentElement.classList.remove('active');\n                })\n            }\n        }\n    }\n\n    resetBackground() {\n        if (Window.width < BP_M) {\n            this.navHandleButton.classList.remove(...COLOR_MODES);\n            this.element.classList.remove(...COLOR_MODES);\n        }\n\n        this.backgroundWrapper.style.removeProperty('opacity');\n    }\n\n    hide() {\n        if (this.hidden || this.hoverState) return;\n        this.hidden = true;\n\n        gsap.to([this.navigation, this.backgroundWrapper], {duration: .5, y: '-100%'});\n    }\n\n    show() {\n        if (!this.hidden) return;\n        this.hidden = false;\n\n        gsap.to([this.navigation, this.backgroundWrapper], {duration: .5, y: '0%'});\n    }\n\n    hideZoom() {\n        if (!this.element.classList.contains('zoom')) return false;\n\n        const duration = .8;\n        const ease = 'Power4.easeOut';\n\n        gsap.to(this.navigation, {\n            duration,\n            opacity: 0,\n            y: -30,\n            ease,\n            onComplete: ()=> {\n                this.element.classList.remove('zoom');\n                gsap.to(this.navigation, {\n                    duration,\n                    opacity: 1,\n                    y: 0,\n                    ease\n                });\n            }});\n    }\n\n    private setColorHandler({mode, delay = 0}: any) {\n        if (Window.width < BP_M) {\n            this.element.classList.remove(...COLOR_MODES);\n            this.element.classList.add('mode-light');\n\n            if (!this.navHandleButton.classList.contains(mode)) {\n                this.navHandleButton.classList.remove(...COLOR_MODES);\n                this.navHandleButton.classList.add(mode);\n            }\n        } else if (!this.element.classList.contains(mode)) {\n\n            this.element.classList.remove(...COLOR_MODES);\n\n            // Delay background for page change\n            if (delay) {\n                gsap.set(this.backgrounds, {transitionDelay: delay});\n                gsap.delayedCall(delay, ()=> {\n                    gsap.set(this.backgrounds, {clearProps: 'transition-delay'});\n                })\n            }\n\n            this.element.classList.add(mode);\n        }\n    }\n}\n\nexport const header = new Header();\n","import {gsap} from \"gsap\";\nimport {emitter} from \"../global/emitter\";\nimport {EVENT_RESIZE, Window} from \"../global/window\";\n\nexport class Accordion {\n    public element: HTMLElement;\n    private mainItems: NodeListOf<HTMLElement>;\n    private subItems: NodeListOf<HTMLElement>;\n    private subItemsLi: NodeListOf<HTMLElement>;\n    private contents: NodeListOf<HTMLElement>;\n    private openItems: Array<number> = [];\n    private content: boolean;\n    private resizeTrigger: boolean;\n\n    constructor(element: HTMLElement, openItems: Array<number> = [], content: boolean = false, resizeTrigger: boolean = true) {\n        this.element = element;\n        this.openItems = openItems;\n        this.content = content;\n        this.resizeTrigger = resizeTrigger;\n        this.mainItems = this.element.querySelectorAll('.main-item');\n        this.subItems = this.element.querySelectorAll('.sub-items');\n        this.subItemsLi = this.element.querySelectorAll('.sub-items .list-item');\n        this.init();\n    }\n\n    private init() {\n        if (this.content)\n            this.contents = this.element.querySelectorAll('.content .wrapper');\n\n        this.mainItems.forEach((el) => {\n            el.addEventListener('click',\n                (e) => this.onMainItemClick(e));\n        }, this);\n\n        this.subItemsLi.forEach((el) => {\n            if (el.querySelector('button')) {\n                el.querySelector('button').addEventListener('click',\n                    (e) => this.onSubItemClick(e));\n            }\n        }, this);\n\n        // Open menu items\n        if ( this.openItems.length) {\n            for (const i of this.openItems) {\n                [...this.mainItems][i].classList.add('open');\n                this.subItems[i].style.height = 'auto';\n            }\n\n            // Show first item.\n            if (this.content) {\n                this.subItemsLi[0].classList.add('active');\n                [...this.contents][this.openItems[0]].style.display = 'block';\n            }\n        }\n\n        this.emitResize();\n    }\n\n    private emitResize() {\n        if (!this.resizeTrigger) return;\n\n        emitter.emit(EVENT_RESIZE, {\n            width: Window.width,\n            height: Window.height\n        });\n    }\n\n    private onMainItemClick(e: any) {\n        const el = e.target;\n\n        if (el.classList.contains('open')) {\n            el.classList.remove('open')\n            this.closeSubItems(el);\n        } else {\n            el.classList.add('open')\n            this.openSubItems(el);\n        }\n    }\n\n    private onSubItemClick(e: any) {\n        const target = e.target;\n        let targetIndex = 0;\n\n        for (let i = 0; i < this.subItemsLi.length; i++) {\n            this.subItemsLi[i].classList.remove('active');\n            if (this.subItemsLi[i] === target.parentElement) {\n                targetIndex = i;\n            }\n        }\n        this.subItemsLi[targetIndex].classList.add('active');\n\n        // Animate in content.\n        if (this.content) {\n            this.contents.forEach((el, i) => {\n                if (i === targetIndex) {\n                    el.style.display = 'block';\n                    gsap.fromTo(el,\n                        {display: 'block', opacity: 0},\n                        {opacity: 1, duration: .3, delay: .1})\n                } else {\n                    el.style.display = 'none';\n                }\n            });\n        }\n\n        this.emitResize();\n    }\n\n    private openSubItems(el: HTMLElement) {\n        const wrapper = el.parentElement.querySelector('.sub-items') as HTMLElement;\n        const subItems = wrapper.querySelectorAll('.list-item');\n        let height = 0;\n\n        subItems.forEach((el) => {\n            height +=  el.getBoundingClientRect().height;\n        });\n\n        // Animate in topics.\n        gsap.to(wrapper, {\n            duration: .4,\n            height: height,\n            ease: 'Power4.easeOut',\n            onUpdate: () => {\n                this.emitResize();\n            },\n            onComplete: function() {\n                this._targets[0].style.height = 'auto';\n            }\n        });\n    }\n\n    private closeSubItems(el: HTMLElement) {\n        const wrapper = el.parentElement.querySelector('.sub-items') as HTMLElement;\n        gsap.to(wrapper, {\n            duration: .4,\n            height: 0,\n            ease: 'Power4.easeOut',\n            onUpdate: () => {\n                this.emitResize();\n            }\n        });\n    }\n\n\n    public destroy() {\n        this.mainItems.forEach((el) => {\n            el.removeEventListener('click',\n                (e) => this.onMainItemClick(e));\n        }, this);\n\n        this.subItems.forEach((el) => {\n            if (el.querySelector('button')) {\n                el.querySelector('button').removeEventListener('click',\n                    (e) => this.onSubItemClick(e));\n            }\n        }, this);\n    }\n}\n","/*!\n * strings: 3.2.6\n * https://greensock.com\n *\n * Copyright 2008-2020, GreenSock. All rights reserved.\n * Subject to the terms at https://greensock.com/standard-license or for\n * Club GreenSock members, the agreement issued with that membership.\n * @author: Jack Doyle, jack@greensock.com\n*/\n/* eslint-disable */\n\nlet _trimExp = /(^\\s+|\\s+$)/g;\n\nexport const emojiExp = /([\\uD800-\\uDBFF][\\uDC00-\\uDFFF](?:[\\u200D\\uFE0F][\\uD800-\\uDBFF][\\uDC00-\\uDFFF]){2,}|\\uD83D\\uDC69(?:\\u200D(?:(?:\\uD83D\\uDC69\\u200D)?\\uD83D\\uDC67|(?:\\uD83D\\uDC69\\u200D)?\\uD83D\\uDC66)|\\uD83C[\\uDFFB-\\uDFFF])|\\uD83D\\uDC69\\u200D(?:\\uD83D\\uDC69\\u200D)?\\uD83D\\uDC66\\u200D\\uD83D\\uDC66|\\uD83D\\uDC69\\u200D(?:\\uD83D\\uDC69\\u200D)?\\uD83D\\uDC67\\u200D(?:\\uD83D[\\uDC66\\uDC67])|\\uD83C\\uDFF3\\uFE0F\\u200D\\uD83C\\uDF08|(?:\\uD83C[\\uDFC3\\uDFC4\\uDFCA]|\\uD83D[\\uDC6E\\uDC71\\uDC73\\uDC77\\uDC81\\uDC82\\uDC86\\uDC87\\uDE45-\\uDE47\\uDE4B\\uDE4D\\uDE4E\\uDEA3\\uDEB4-\\uDEB6]|\\uD83E[\\uDD26\\uDD37-\\uDD39\\uDD3D\\uDD3E\\uDDD6-\\uDDDD])(?:\\uD83C[\\uDFFB-\\uDFFF])\\u200D[\\u2640\\u2642]\\uFE0F|\\uD83D\\uDC69(?:\\uD83C[\\uDFFB-\\uDFFF])\\u200D(?:\\uD83C[\\uDF3E\\uDF73\\uDF93\\uDFA4\\uDFA8\\uDFEB\\uDFED]|\\uD83D[\\uDCBB\\uDCBC\\uDD27\\uDD2C\\uDE80\\uDE92])|(?:\\uD83C[\\uDFC3\\uDFC4\\uDFCA]|\\uD83D[\\uDC6E\\uDC6F\\uDC71\\uDC73\\uDC77\\uDC81\\uDC82\\uDC86\\uDC87\\uDE45-\\uDE47\\uDE4B\\uDE4D\\uDE4E\\uDEA3\\uDEB4-\\uDEB6]|\\uD83E[\\uDD26\\uDD37-\\uDD39\\uDD3C-\\uDD3E\\uDDD6-\\uDDDF])\\u200D[\\u2640\\u2642]\\uFE0F|\\uD83C\\uDDFD\\uD83C\\uDDF0|\\uD83C\\uDDF6\\uD83C\\uDDE6|\\uD83C\\uDDF4\\uD83C\\uDDF2|\\uD83C\\uDDE9(?:\\uD83C[\\uDDEA\\uDDEC\\uDDEF\\uDDF0\\uDDF2\\uDDF4\\uDDFF])|\\uD83C\\uDDF7(?:\\uD83C[\\uDDEA\\uDDF4\\uDDF8\\uDDFA\\uDDFC])|\\uD83C\\uDDE8(?:\\uD83C[\\uDDE6\\uDDE8\\uDDE9\\uDDEB-\\uDDEE\\uDDF0-\\uDDF5\\uDDF7\\uDDFA-\\uDDFF])|(?:\\u26F9|\\uD83C[\\uDFCB\\uDFCC]|\\uD83D\\uDD75)(?:\\uFE0F\\u200D[\\u2640\\u2642]|(?:\\uD83C[\\uDFFB-\\uDFFF])\\u200D[\\u2640\\u2642])\\uFE0F|(?:\\uD83D\\uDC41\\uFE0F\\u200D\\uD83D\\uDDE8|\\uD83D\\uDC69(?:\\uD83C[\\uDFFB-\\uDFFF])\\u200D[\\u2695\\u2696\\u2708]|\\uD83D\\uDC69\\u200D[\\u2695\\u2696\\u2708]|\\uD83D\\uDC68(?:(?:\\uD83C[\\uDFFB-\\uDFFF])\\u200D[\\u2695\\u2696\\u2708]|\\u200D[\\u2695\\u2696\\u2708]))\\uFE0F|\\uD83C\\uDDF2(?:\\uD83C[\\uDDE6\\uDDE8-\\uDDED\\uDDF0-\\uDDFF])|\\uD83D\\uDC69\\u200D(?:\\uD83C[\\uDF3E\\uDF73\\uDF93\\uDFA4\\uDFA8\\uDFEB\\uDFED]|\\uD83D[\\uDCBB\\uDCBC\\uDD27\\uDD2C\\uDE80\\uDE92]|\\u2764\\uFE0F\\u200D(?:\\uD83D\\uDC8B\\u200D(?:\\uD83D[\\uDC68\\uDC69])|\\uD83D[\\uDC68\\uDC69]))|\\uD83C\\uDDF1(?:\\uD83C[\\uDDE6-\\uDDE8\\uDDEE\\uDDF0\\uDDF7-\\uDDFB\\uDDFE])|\\uD83C\\uDDEF(?:\\uD83C[\\uDDEA\\uDDF2\\uDDF4\\uDDF5])|\\uD83C\\uDDED(?:\\uD83C[\\uDDF0\\uDDF2\\uDDF3\\uDDF7\\uDDF9\\uDDFA])|\\uD83C\\uDDEB(?:\\uD83C[\\uDDEE-\\uDDF0\\uDDF2\\uDDF4\\uDDF7])|[#\\*0-9]\\uFE0F\\u20E3|\\uD83C\\uDDE7(?:\\uD83C[\\uDDE6\\uDDE7\\uDDE9-\\uDDEF\\uDDF1-\\uDDF4\\uDDF6-\\uDDF9\\uDDFB\\uDDFC\\uDDFE\\uDDFF])|\\uD83C\\uDDE6(?:\\uD83C[\\uDDE8-\\uDDEC\\uDDEE\\uDDF1\\uDDF2\\uDDF4\\uDDF6-\\uDDFA\\uDDFC\\uDDFD\\uDDFF])|\\uD83C\\uDDFF(?:\\uD83C[\\uDDE6\\uDDF2\\uDDFC])|\\uD83C\\uDDF5(?:\\uD83C[\\uDDE6\\uDDEA-\\uDDED\\uDDF0-\\uDDF3\\uDDF7-\\uDDF9\\uDDFC\\uDDFE])|\\uD83C\\uDDFB(?:\\uD83C[\\uDDE6\\uDDE8\\uDDEA\\uDDEC\\uDDEE\\uDDF3\\uDDFA])|\\uD83C\\uDDF3(?:\\uD83C[\\uDDE6\\uDDE8\\uDDEA-\\uDDEC\\uDDEE\\uDDF1\\uDDF4\\uDDF5\\uDDF7\\uDDFA\\uDDFF])|\\uD83C\\uDFF4\\uDB40\\uDC67\\uDB40\\uDC62(?:\\uDB40\\uDC77\\uDB40\\uDC6C\\uDB40\\uDC73|\\uDB40\\uDC73\\uDB40\\uDC63\\uDB40\\uDC74|\\uDB40\\uDC65\\uDB40\\uDC6E\\uDB40\\uDC67)\\uDB40\\uDC7F|\\uD83D\\uDC68(?:\\u200D(?:\\u2764\\uFE0F\\u200D(?:\\uD83D\\uDC8B\\u200D)?\\uD83D\\uDC68|(?:(?:\\uD83D[\\uDC68\\uDC69])\\u200D)?\\uD83D\\uDC66\\u200D\\uD83D\\uDC66|(?:(?:\\uD83D[\\uDC68\\uDC69])\\u200D)?\\uD83D\\uDC67\\u200D(?:\\uD83D[\\uDC66\\uDC67])|\\uD83C[\\uDF3E\\uDF73\\uDF93\\uDFA4\\uDFA8\\uDFEB\\uDFED]|\\uD83D[\\uDCBB\\uDCBC\\uDD27\\uDD2C\\uDE80\\uDE92])|(?:\\uD83C[\\uDFFB-\\uDFFF])\\u200D(?:\\uD83C[\\uDF3E\\uDF73\\uDF93\\uDFA4\\uDFA8\\uDFEB\\uDFED]|\\uD83D[\\uDCBB\\uDCBC\\uDD27\\uDD2C\\uDE80\\uDE92]))|\\uD83C\\uDDF8(?:\\uD83C[\\uDDE6-\\uDDEA\\uDDEC-\\uDDF4\\uDDF7-\\uDDF9\\uDDFB\\uDDFD-\\uDDFF])|\\uD83C\\uDDF0(?:\\uD83C[\\uDDEA\\uDDEC-\\uDDEE\\uDDF2\\uDDF3\\uDDF5\\uDDF7\\uDDFC\\uDDFE\\uDDFF])|\\uD83C\\uDDFE(?:\\uD83C[\\uDDEA\\uDDF9])|\\uD83C\\uDDEE(?:\\uD83C[\\uDDE8-\\uDDEA\\uDDF1-\\uDDF4\\uDDF6-\\uDDF9])|\\uD83C\\uDDF9(?:\\uD83C[\\uDDE6\\uDDE8\\uDDE9\\uDDEB-\\uDDED\\uDDEF-\\uDDF4\\uDDF7\\uDDF9\\uDDFB\\uDDFC\\uDDFF])|\\uD83C\\uDDEC(?:\\uD83C[\\uDDE6\\uDDE7\\uDDE9-\\uDDEE\\uDDF1-\\uDDF3\\uDDF5-\\uDDFA\\uDDFC\\uDDFE])|\\uD83C\\uDDFA(?:\\uD83C[\\uDDE6\\uDDEC\\uDDF2\\uDDF3\\uDDF8\\uDDFE\\uDDFF])|\\uD83C\\uDDEA(?:\\uD83C[\\uDDE6\\uDDE8\\uDDEA\\uDDEC\\uDDED\\uDDF7-\\uDDFA])|\\uD83C\\uDDFC(?:\\uD83C[\\uDDEB\\uDDF8])|(?:\\u26F9|\\uD83C[\\uDFCB\\uDFCC]|\\uD83D\\uDD75)(?:\\uD83C[\\uDFFB-\\uDFFF])|(?:\\uD83C[\\uDFC3\\uDFC4\\uDFCA]|\\uD83D[\\uDC6E\\uDC71\\uDC73\\uDC77\\uDC81\\uDC82\\uDC86\\uDC87\\uDE45-\\uDE47\\uDE4B\\uDE4D\\uDE4E\\uDEA3\\uDEB4-\\uDEB6]|\\uD83E[\\uDD26\\uDD37-\\uDD39\\uDD3D\\uDD3E\\uDDD6-\\uDDDD])(?:\\uD83C[\\uDFFB-\\uDFFF])|(?:[\\u261D\\u270A-\\u270D]|\\uD83C[\\uDF85\\uDFC2\\uDFC7]|\\uD83D[\\uDC42\\uDC43\\uDC46-\\uDC50\\uDC66\\uDC67\\uDC70\\uDC72\\uDC74-\\uDC76\\uDC78\\uDC7C\\uDC83\\uDC85\\uDCAA\\uDD74\\uDD7A\\uDD90\\uDD95\\uDD96\\uDE4C\\uDE4F\\uDEC0\\uDECC]|\\uD83E[\\uDD18-\\uDD1C\\uDD1E\\uDD1F\\uDD30-\\uDD36\\uDDD1-\\uDDD5])(?:\\uD83C[\\uDFFB-\\uDFFF])|\\uD83D\\uDC68(?:\\u200D(?:(?:(?:\\uD83D[\\uDC68\\uDC69])\\u200D)?\\uD83D\\uDC67|(?:(?:\\uD83D[\\uDC68\\uDC69])\\u200D)?\\uD83D\\uDC66)|\\uD83C[\\uDFFB-\\uDFFF])|(?:[\\u261D\\u26F9\\u270A-\\u270D]|\\uD83C[\\uDF85\\uDFC2-\\uDFC4\\uDFC7\\uDFCA-\\uDFCC]|\\uD83D[\\uDC42\\uDC43\\uDC46-\\uDC50\\uDC66-\\uDC69\\uDC6E\\uDC70-\\uDC78\\uDC7C\\uDC81-\\uDC83\\uDC85-\\uDC87\\uDCAA\\uDD74\\uDD75\\uDD7A\\uDD90\\uDD95\\uDD96\\uDE45-\\uDE47\\uDE4B-\\uDE4F\\uDEA3\\uDEB4-\\uDEB6\\uDEC0\\uDECC]|\\uD83E[\\uDD18-\\uDD1C\\uDD1E\\uDD1F\\uDD26\\uDD30-\\uDD39\\uDD3D\\uDD3E\\uDDD1-\\uDDDD])(?:\\uD83C[\\uDFFB-\\uDFFF])?|(?:[\\u231A\\u231B\\u23E9-\\u23EC\\u23F0\\u23F3\\u25FD\\u25FE\\u2614\\u2615\\u2648-\\u2653\\u267F\\u2693\\u26A1\\u26AA\\u26AB\\u26BD\\u26BE\\u26C4\\u26C5\\u26CE\\u26D4\\u26EA\\u26F2\\u26F3\\u26F5\\u26FA\\u26FD\\u2705\\u270A\\u270B\\u2728\\u274C\\u274E\\u2753-\\u2755\\u2757\\u2795-\\u2797\\u27B0\\u27BF\\u2B1B\\u2B1C\\u2B50\\u2B55]|\\uD83C[\\uDC04\\uDCCF\\uDD8E\\uDD91-\\uDD9A\\uDDE6-\\uDDFF\\uDE01\\uDE1A\\uDE2F\\uDE32-\\uDE36\\uDE38-\\uDE3A\\uDE50\\uDE51\\uDF00-\\uDF20\\uDF2D-\\uDF35\\uDF37-\\uDF7C\\uDF7E-\\uDF93\\uDFA0-\\uDFCA\\uDFCF-\\uDFD3\\uDFE0-\\uDFF0\\uDFF4\\uDFF8-\\uDFFF]|\\uD83D[\\uDC00-\\uDC3E\\uDC40\\uDC42-\\uDCFC\\uDCFF-\\uDD3D\\uDD4B-\\uDD4E\\uDD50-\\uDD67\\uDD7A\\uDD95\\uDD96\\uDDA4\\uDDFB-\\uDE4F\\uDE80-\\uDEC5\\uDECC\\uDED0-\\uDED2\\uDEEB\\uDEEC\\uDEF4-\\uDEF8]|\\uD83E[\\uDD10-\\uDD3A\\uDD3C-\\uDD3E\\uDD40-\\uDD45\\uDD47-\\uDD4C\\uDD50-\\uDD6B\\uDD80-\\uDD97\\uDDC0\\uDDD0-\\uDDE6])|(?:[#\\*0-9\\xA9\\xAE\\u203C\\u2049\\u2122\\u2139\\u2194-\\u2199\\u21A9\\u21AA\\u231A\\u231B\\u2328\\u23CF\\u23E9-\\u23F3\\u23F8-\\u23FA\\u24C2\\u25AA\\u25AB\\u25B6\\u25C0\\u25FB-\\u25FE\\u2600-\\u2604\\u260E\\u2611\\u2614\\u2615\\u2618\\u261D\\u2620\\u2622\\u2623\\u2626\\u262A\\u262E\\u262F\\u2638-\\u263A\\u2640\\u2642\\u2648-\\u2653\\u2660\\u2663\\u2665\\u2666\\u2668\\u267B\\u267F\\u2692-\\u2697\\u2699\\u269B\\u269C\\u26A0\\u26A1\\u26AA\\u26AB\\u26B0\\u26B1\\u26BD\\u26BE\\u26C4\\u26C5\\u26C8\\u26CE\\u26CF\\u26D1\\u26D3\\u26D4\\u26E9\\u26EA\\u26F0-\\u26F5\\u26F7-\\u26FA\\u26FD\\u2702\\u2705\\u2708-\\u270D\\u270F\\u2712\\u2714\\u2716\\u271D\\u2721\\u2728\\u2733\\u2734\\u2744\\u2747\\u274C\\u274E\\u2753-\\u2755\\u2757\\u2763\\u2764\\u2795-\\u2797\\u27A1\\u27B0\\u27BF\\u2934\\u2935\\u2B05-\\u2B07\\u2B1B\\u2B1C\\u2B50\\u2B55\\u3030\\u303D\\u3297\\u3299]|\\uD83C[\\uDC04\\uDCCF\\uDD70\\uDD71\\uDD7E\\uDD7F\\uDD8E\\uDD91-\\uDD9A\\uDDE6-\\uDDFF\\uDE01\\uDE02\\uDE1A\\uDE2F\\uDE32-\\uDE3A\\uDE50\\uDE51\\uDF00-\\uDF21\\uDF24-\\uDF93\\uDF96\\uDF97\\uDF99-\\uDF9B\\uDF9E-\\uDFF0\\uDFF3-\\uDFF5\\uDFF7-\\uDFFF]|\\uD83D[\\uDC00-\\uDCFD\\uDCFF-\\uDD3D\\uDD49-\\uDD4E\\uDD50-\\uDD67\\uDD6F\\uDD70\\uDD73-\\uDD7A\\uDD87\\uDD8A-\\uDD8D\\uDD90\\uDD95\\uDD96\\uDDA4\\uDDA5\\uDDA8\\uDDB1\\uDDB2\\uDDBC\\uDDC2-\\uDDC4\\uDDD1-\\uDDD3\\uDDDC-\\uDDDE\\uDDE1\\uDDE3\\uDDE8\\uDDEF\\uDDF3\\uDDFA-\\uDE4F\\uDE80-\\uDEC5\\uDECB-\\uDED2\\uDEE0-\\uDEE5\\uDEE9\\uDEEB\\uDEEC\\uDEF0\\uDEF3-\\uDEF8]|\\uD83E[\\uDD10-\\uDD3A\\uDD3C-\\uDD3E\\uDD40-\\uDD45\\uDD47-\\uDD4C\\uDD50-\\uDD6B\\uDD80-\\uDD97\\uDDC0\\uDDD0-\\uDDE6])\\uFE0F)/;\n\nexport function getText(e) {\n\tlet type = e.nodeType,\n\t\tresult = \"\";\n\tif (type === 1 || type === 9 || type === 11) {\n\t\tif (typeof(e.textContent) === \"string\") {\n\t\t\treturn e.textContent;\n\t\t} else {\n\t\t\tfor (e = e.firstChild; e; e = e.nextSibling ) {\n\t\t\t\tresult += getText(e);\n\t\t\t}\n\t\t}\n\t} else if (type === 3 || type === 4) {\n\t\treturn e.nodeValue;\n\t}\n\treturn result;\n}\n\nexport function splitInnerHTML(element, delimiter, trim) {\n\tlet node = element.firstChild,\n\t\tresult = [];\n\twhile (node) {\n\t\tif (node.nodeType === 3) {\n\t\t\tresult.push(...emojiSafeSplit((node.nodeValue + \"\").replace(/^\\n+/g, \"\").replace(/\\s+/g, \" \"), delimiter, trim));\n\t\t} else if ((node.nodeName + \"\").toLowerCase() === \"br\") {\n\t\t\tresult[result.length-1] += \"<br>\";\n\t\t} else {\n\t\t\tresult.push(node.outerHTML);\n\t\t}\n\t\tnode = node.nextSibling;\n\t}\n\treturn result;\n}\n\n/*\n//smaller kb version that only handles the simpler emoji's, which is often perfectly adequate.\n\nlet _emoji = \"[\\uE000-\\uF8FF]|\\uD83C[\\uDC00-\\uDFFF]|\\uD83D[\\uDC00-\\uDFFF]|[\\u2694-\\u2697]|\\uD83E[\\uDD10-\\uDD5D]|[\\uD800-\\uDBFF][\\uDC00-\\uDFFF]\",\n\t_emojiExp = new RegExp(_emoji),\n\t_emojiAndCharsExp = new RegExp(_emoji + \"|.\", \"g\"),\n\t_emojiSafeSplit = (text, delimiter, trim) => {\n\t\tif (trim) {\n\t\t\ttext = text.replace(_trimExp, \"\");\n\t\t}\n\t\treturn ((delimiter === \"\" || !delimiter) && _emojiExp.test(text)) ? text.match(_emojiAndCharsExp) : text.split(delimiter || \"\");\n\t};\n */\nexport function emojiSafeSplit(text, delimiter, trim) {\n\ttext += \"\"; // make sure it's cast as a string. Someone may pass in a number.\n\tif (trim) {\n\t\ttext = text.replace(_trimExp, \"\");\n\t}\n\tif (delimiter && delimiter !== \"\") {\n\t\treturn text.replace(/>/g, \"&gt;\").replace(/</g, \"&lt;\").split(delimiter);\n\t}\n\tlet result = [],\n\t\tl = text.length,\n\t\ti = 0,\n\t\tj, character;\n\tfor (; i < l; i++) {\n\t\tcharacter = text.charAt(i);\n\t\tif ((character.charCodeAt(0) >= 0xD800 && character.charCodeAt(0) <= 0xDBFF) || (text.charCodeAt(i+1) >= 0xFE00 && text.charCodeAt(i+1) <= 0xFE0F)) { //special emoji characters use 2 or 4 unicode characters that we must keep together.\n\t\t\tj = ((text.substr(i, 12).split(emojiExp) || [])[1] || \"\").length || 2;\n\t\t\tcharacter = text.substr(i, j);\n\t\t\tresult.emoji = 1;\n\t\t\ti += j - 1;\n\t\t}\n\t\tresult.push(character === \">\" ? \"&gt;\" : (character === \"<\") ? \"&lt;\" : character);\n\t}\n\treturn result;\n}","/*!\n * SplitText: 3.2.6\n * https://greensock.com\n *\n * @license Copyright 2008-2020, GreenSock. All rights reserved.\n * Subject to the terms at https://greensock.com/standard-license or for\n * Club GreenSock members, the agreement issued with that membership.\n * @author: Jack Doyle, jack@greensock.com\n*/\n/* eslint-disable */\nimport { emojiExp, getText } from \"./utils/strings.js\";\n\nlet _doc, _win, _coreInitted,\n\t_stripExp = /(?:\\r|\\n|\\t\\t)/g, //find carriage returns, new line feeds and double-tabs.\n\t_multipleSpacesExp = /(?:\\s\\s+)/g,\n\t_initCore = () => {\n\t\t_doc = document;\n\t\t_win = window;\n\t\t_coreInitted = 1;\n\t},\n\t_bonusValidated = 1, //<name>SplitText</name>\n\t_getComputedStyle = element => _win.getComputedStyle(element),\n\t_isArray = Array.isArray,\n\t_slice = [].slice,\n\t_toArray = (value, leaveStrings) => { //takes any value and returns an array. If it's a string (and leaveStrings isn't true), it'll use document.querySelectorAll() and convert that to an array. It'll also accept iterables like jQuery objects.\n\t\tlet type;\n\t\treturn _isArray(value) ? value : ((type = typeof value) === \"string\" && !leaveStrings && value) ? _slice.call(_doc.querySelectorAll(value), 0) : (value && type === \"object\" && \"length\" in value) ? _slice.call(value, 0) : value ? [value] : [];\n\t},\n\t_isAbsolute = vars => (vars.position === \"absolute\" || vars.absolute === true),\n\t//some characters are combining marks (think diacritics/accents in European languages) which involve 2 or 4 characters that combine in the browser to form a single character. Pass in the remaining text and an array of the special characters to search for and if the text starts with one of those special characters, it'll spit back the number of characters to retain (often 2 or 4). Used in the specialChars features that was introduced in 0.6.0.\n\t_findSpecialChars = (text, chars) => {\n\t\tlet i = chars.length,\n\t\t\ts;\n\t\twhile (--i > -1) {\n\t\t\ts = chars[i];\n\t\t\tif (text.substr(0, s.length) === s) {\n\t\t\t\treturn s.length;\n\t\t\t}\n\t\t}\n\t},\n\t_divStart = \" style='position:relative;display:inline-block;'\",\n\t_cssClassFunc = (cssClass = \"\", tag) => {\n\t\tlet iterate = ~cssClass.indexOf(\"++\"),\n\t\t\tnum = 1;\n\t\tif (iterate) {\n\t\t\tcssClass = cssClass.split(\"++\").join(\"\");\n\t\t}\n\t\treturn () => \"<\" + tag + _divStart + (cssClass ? \" class='\" + cssClass + (iterate ? num++ : \"\") + \"'>\" : \">\");\n\t},\n\t_swapText = (element, oldText, newText) => {\n\t\tlet type = element.nodeType;\n\t\tif (type === 1 || type === 9 || type === 11) {\n\t\t\tfor (element = element.firstChild; element; element = element.nextSibling) {\n\t\t\t\t_swapText(element, oldText, newText);\n\t\t\t}\n\t\t} else if (type === 3 || type === 4) {\n\t\t\telement.nodeValue = element.nodeValue.split(oldText).join(newText);\n\t\t}\n\t},\n\t_pushReversed = (a, merge) => {\n\t\tlet i = merge.length;\n\t\twhile (--i > -1) {\n\t\t\ta.push(merge[i]);\n\t\t}\n\t},\n\t_isBeforeWordDelimiter = (e, root, wordDelimiter) => {\n\t\tlet next;\n\t\twhile (e && e !== root) {\n\t\t\tnext = e._next || e.nextSibling;\n\t\t\tif (next) {\n\t\t\t\treturn next.textContent.charAt(0) === wordDelimiter;\n\t\t\t}\n\t\t\te = e.parentNode || e._parent;\n\t\t}\n\t},\n\t_deWordify = e => {\n\t\tlet children = _toArray(e.childNodes),\n\t\t\tl = children.length,\n\t\t\ti, child;\n\t\tfor (i = 0; i < l; i++) {\n\t\t\tchild = children[i];\n\t\t\tif (child._isSplit) {\n\t\t\t\t_deWordify(child);\n\t\t\t} else {\n\t\t\t\tif (i && child.previousSibling.nodeType === 3) {\n\t\t\t\t\tchild.previousSibling.nodeValue += (child.nodeType === 3) ? child.nodeValue : child.firstChild.nodeValue;\n\t\t\t\t} else if (child.nodeType !== 3) {\n\t\t\t\t\te.insertBefore(child.firstChild, child);\n\t\t\t\t}\n\t\t\t\te.removeChild(child);\n\t\t\t}\n\t\t}\n\t},\n\t_getStyleAsNumber = (name, computedStyle) => parseFloat(computedStyle[name]) || 0,\n\t_setPositionsAfterSplit = (element, vars, allChars, allWords, allLines, origWidth, origHeight) => {\n\t\tlet cs = _getComputedStyle(element),\n\t\t\tpaddingLeft = _getStyleAsNumber(\"paddingLeft\", cs),\n\t\t\tlineOffsetY = -999,\n\t\t\tborderTopAndBottom = _getStyleAsNumber(\"borderBottomWidth\", cs) + _getStyleAsNumber(\"borderTopWidth\", cs),\n\t\t\tborderLeftAndRight = _getStyleAsNumber(\"borderLeftWidth\", cs) + _getStyleAsNumber(\"borderRightWidth\", cs),\n\t\t\tpadTopAndBottom = _getStyleAsNumber(\"paddingTop\", cs) + _getStyleAsNumber(\"paddingBottom\", cs),\n\t\t\tpadLeftAndRight = _getStyleAsNumber(\"paddingLeft\", cs) + _getStyleAsNumber(\"paddingRight\", cs),\n\t\t\tlineThreshold = _getStyleAsNumber(\"fontSize\", cs) * 0.2,\n\t\t\ttextAlign = cs.textAlign,\n\t\t\tcharArray = [],\n\t\t\twordArray = [],\n\t\t\tlineArray = [],\n\t\t\twordDelimiter = vars.wordDelimiter || \" \",\n\t\t\ttag = vars.tag ? vars.tag : (vars.span ? \"span\" : \"div\"),\n\t\t\ttypes = vars.type || vars.split || \"chars,words,lines\",\n\t\t\tlines = (allLines && ~types.indexOf(\"lines\")) ? [] : null,\n\t\t\twords = ~types.indexOf(\"words\"),\n\t\t\tchars = ~types.indexOf(\"chars\"),\n\t\t\tabsolute = _isAbsolute(vars),\n\t\t\tlinesClass = vars.linesClass,\n\t\t\titerateLine = ~((linesClass || \"\").indexOf(\"++\")),\n\t\t\tspaceNodesToRemove = [],\n\t\t\ti, j, l, node, nodes, isChild, curLine, addWordSpaces, style, lineNode, lineWidth, offset;\n\t\tif (iterateLine) {\n\t\t\tlinesClass = linesClass.split(\"++\").join(\"\");\n\t\t}\n\n\t\t//copy all the descendant nodes into an array (we can't use a regular nodeList because it's live and we may need to renest things)\n\t\tj = element.getElementsByTagName(\"*\");\n\t\tl = j.length;\n\t\tnodes = [];\n\t\tfor (i = 0; i < l; i++) {\n\t\t\tnodes[i] = j[i];\n\t\t}\n\n\t\t//for absolute positioning, we need to record the x/y offsets and width/height for every <div>. And even if we're not positioning things absolutely, in order to accommodate lines, we must figure out where the y offset changes so that we can sense where the lines break, and we populate the lines array.\n\t\tif (lines || absolute) {\n\t\t\tfor (i = 0; i < l; i++) {\n\t\t\t\tnode = nodes[i];\n\t\t\t\tisChild = (node.parentNode === element);\n\t\t\t\tif (isChild || absolute || (chars && !words)) {\n\t\t\t\t\toffset = node.offsetTop;\n\t\t\t\t\tif (lines && isChild && Math.abs(offset - lineOffsetY) > lineThreshold && (node.nodeName !== \"BR\" || i === 0)) { //we found some rare occasions where a certain character like &#8209; could cause the offsetTop to be off by 1 pixel, so we build in a threshold.\n\t\t\t\t\t\tcurLine = [];\n\t\t\t\t\t\tlines.push(curLine);\n\t\t\t\t\t\tlineOffsetY = offset;\n\t\t\t\t\t}\n\t\t\t\t\tif (absolute) { //record offset x and y, as well as width and height so that we can access them later for positioning. Grabbing them at once ensures we don't trigger a browser paint & we maximize performance.\n\t\t\t\t\t\tnode._x = node.offsetLeft;\n\t\t\t\t\t\tnode._y = offset;\n\t\t\t\t\t\tnode._w = node.offsetWidth;\n\t\t\t\t\t\tnode._h = node.offsetHeight;\n\t\t\t\t\t}\n\t\t\t\t\tif (lines) {\n\t\t\t\t\t\tif ((node._isSplit && isChild) || (!chars && isChild) || (words && isChild) || (!words && node.parentNode.parentNode === element && !node.parentNode._isSplit)) {\n\t\t\t\t\t\t\tcurLine.push(node);\n\t\t\t\t\t\t\tnode._x -= paddingLeft;\n\t\t\t\t\t\t\tif (_isBeforeWordDelimiter(node, element, wordDelimiter)) {\n\t\t\t\t\t\t\t\tnode._wordEnd = true;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (node.nodeName === \"BR\" && ((node.nextSibling && node.nextSibling.nodeName === \"BR\") || i === 0)) { //two consecutive <br> tags signify a new [empty] line. Also, if the entire block of content STARTS with a <br>, add a line.\n\t\t\t\t\t\t\tlines.push([]);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tfor (i = 0; i < l; i++) {\n\t\t\tnode = nodes[i];\n\t\t\tisChild = (node.parentNode === element);\n\t\t\tif (node.nodeName === \"BR\") {\n\t\t\t\tif (lines || absolute) {\n\t\t\t\t\tif (node.parentNode) {\n\t\t\t\t\t\tnode.parentNode.removeChild(node);\n\t\t\t\t\t}\n\t\t\t\t\tnodes.splice(i--, 1);\n\t\t\t\t\tl--;\n\t\t\t\t} else if (!words) {\n\t\t\t\t\telement.appendChild(node);\n\t\t\t\t}\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tif (absolute) {\n\t\t\t\tstyle = node.style;\n\t\t\t\tif (!words && !isChild) {\n\t\t\t\t\tnode._x += node.parentNode._x;\n\t\t\t\t\tnode._y += node.parentNode._y;\n\t\t\t\t}\n\t\t\t\tstyle.left = node._x + \"px\";\n\t\t\t\tstyle.top = node._y + \"px\";\n\t\t\t\tstyle.position = \"absolute\";\n\t\t\t\tstyle.display = \"block\";\n\t\t\t\t//if we don't set the width/height, things collapse in older versions of IE and the origin for transforms is thrown off in all browsers.\n\t\t\t\tstyle.width = (node._w + 1) + \"px\"; //IE is 1px short sometimes. Avoid wrapping\n\t\t\t\tstyle.height = node._h + \"px\";\n\t\t\t}\n\n\t\t\tif (!words && chars) {\n\t\t\t\t//we always start out wrapping words in their own <div> so that line breaks happen correctly, but here we'll remove those <div> tags if necessary and renest the characters directly into the element rather than inside the word <div>\n\t\t\t\tif (node._isSplit) {\n\t\t\t\t\tnode._next = node.nextSibling;\n\t\t\t\t\tnode.parentNode.appendChild(node); //put it at the end to keep the order correct.\n\n\t\t\t\t} else if (node.parentNode._isSplit) {\n\t\t\t\t\tnode._parent = node.parentNode;\n\t\t\t\t\tif (!node.previousSibling && node.firstChild) {\n\t\t\t\t\t\tnode.firstChild._isFirst = true;\n\t\t\t\t\t}\n\t\t\t\t\tif (node.nextSibling && node.nextSibling.textContent === \" \" && !node.nextSibling.nextSibling) { //if the last node inside a nested element is just a space (like T<span>nested </span>), remove it otherwise it'll get placed in the wrong order. Don't remove it right away, though, because we need to sense when words/characters are before a space like _isBeforeWordDelimiter(). Removing it now would make that a false negative.\n\t\t\t\t\t\tspaceNodesToRemove.push(node.nextSibling);\n\t\t\t\t\t}\n\t\t\t\t\tnode._next = (node.nextSibling && node.nextSibling._isFirst) ? null : node.nextSibling;\n\t\t\t\t\tnode.parentNode.removeChild(node);\n\t\t\t\t\tnodes.splice(i--, 1);\n\t\t\t\t\tl--;\n\t\t\t\t} else if (!isChild) {\n\t\t\t\t\toffset = (!node.nextSibling && _isBeforeWordDelimiter(node.parentNode, element, wordDelimiter)); //if this is the last letter in the word (and we're not breaking by lines and not positioning things absolutely), we need to add a space afterwards so that the characters don't just mash together\n\t\t\t\t\tif (node.parentNode._parent) {\n\t\t\t\t\t\tnode.parentNode._parent.appendChild(node);\n\t\t\t\t\t}\n\t\t\t\t\tif (offset) {\n\t\t\t\t\t\tnode.parentNode.appendChild(_doc.createTextNode(\" \"));\n\t\t\t\t\t}\n\t\t\t\t\tif (tag === \"span\") {\n\t\t\t\t\t\tnode.style.display = \"inline\"; //so that word breaks are honored properly.\n\t\t\t\t\t}\n\t\t\t\t\tcharArray.push(node);\n\t\t\t\t}\n\t\t\t} else if (node.parentNode._isSplit && !node._isSplit && node.innerHTML !== \"\") {\n\t\t\t\twordArray.push(node);\n\t\t\t} else if (chars && !node._isSplit) {\n\t\t\t\tif (tag === \"span\") {\n\t\t\t\t\tnode.style.display = \"inline\";\n\t\t\t\t}\n\t\t\t\tcharArray.push(node);\n\t\t\t}\n\t\t}\n\n\t\ti = spaceNodesToRemove.length;\n\t\twhile (--i > -1) {\n\t\t\tspaceNodesToRemove[i].parentNode.removeChild(spaceNodesToRemove[i]);\n\t\t}\n\n\t\tif (lines) {\n\t\t\t//the next 7 lines just give us the line width in the most reliable way and figure out the left offset (if position isn't relative or absolute). We must set the width along with text-align to ensure everything works properly for various alignments.\n\t\t\tif (absolute) {\n\t\t\t\tlineNode = _doc.createElement(tag);\n\t\t\t\telement.appendChild(lineNode);\n\t\t\t\tlineWidth = lineNode.offsetWidth + \"px\";\n\t\t\t\toffset = (lineNode.offsetParent === element) ? 0 : element.offsetLeft;\n\t\t\t\telement.removeChild(lineNode);\n\t\t\t}\n\t\t\tstyle = element.style.cssText;\n\t\t\telement.style.cssText = \"display:none;\"; //to improve performance, set display:none on the element so that the browser doesn't have to worry about reflowing or rendering while we're renesting things. We'll revert the cssText later.\n\t\t\t//we can't use element.innerHTML = \"\" because that causes IE to literally delete all the nodes and their content even though we've stored them in an array! So we must loop through the children and remove them.\n\t\t\twhile (element.firstChild) {\n\t\t\t\telement.removeChild(element.firstChild);\n\t\t\t}\n\t\t\taddWordSpaces = (wordDelimiter === \" \" && (!absolute || (!words && !chars)));\n\t\t\tfor (i = 0; i < lines.length; i++) {\n\t\t\t\tcurLine = lines[i];\n\t\t\t\tlineNode = _doc.createElement(tag);\n\t\t\t\tlineNode.style.cssText = \"display:block;text-align:\" + textAlign + \";position:\" + (absolute ? \"absolute;\" : \"relative;\");\n\t\t\t\tif (linesClass) {\n\t\t\t\t\tlineNode.className = linesClass + (iterateLine ? i+1 : \"\");\n\t\t\t\t}\n\t\t\t\tlineArray.push(lineNode);\n\t\t\t\tl = curLine.length;\n\t\t\t\tfor (j = 0; j < l; j++) {\n\t\t\t\t\tif (curLine[j].nodeName !== \"BR\") {\n\t\t\t\t\t\tnode = curLine[j];\n\t\t\t\t\t\tlineNode.appendChild(node);\n\t\t\t\t\t\tif (addWordSpaces && node._wordEnd) {\n\t\t\t\t\t\t\tlineNode.appendChild(_doc.createTextNode(\" \"));\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (absolute) {\n\t\t\t\t\t\t\tif (j === 0) {\n\t\t\t\t\t\t\t\tlineNode.style.top = (node._y) + \"px\";\n\t\t\t\t\t\t\t\tlineNode.style.left = (paddingLeft + offset) + \"px\";\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tnode.style.top = \"0px\";\n\t\t\t\t\t\t\tif (offset) {\n\t\t\t\t\t\t\t\tnode.style.left = (node._x - offset) + \"px\";\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tif (l === 0) { //if there are no nodes in the line (typically meaning there were two consecutive <br> tags, just add a non-breaking space so that things display properly.\n\t\t\t\t\tlineNode.innerHTML = \"&nbsp;\";\n\t\t\t\t} else if (!words && !chars) {\n\t\t\t\t\t_deWordify(lineNode);\n\t\t\t\t\t_swapText(lineNode, String.fromCharCode(160), \" \");\n\t\t\t\t}\n\t\t\t\tif (absolute) {\n\t\t\t\t\tlineNode.style.width = lineWidth;\n\t\t\t\t\tlineNode.style.height = node._h + \"px\";\n\t\t\t\t}\n\t\t\t\telement.appendChild(lineNode);\n\t\t\t}\n\t\t\telement.style.cssText = style;\n\t\t}\n\n\t\t//if everything shifts to being position:absolute, the container can collapse in terms of height or width, so fix that here.\n\t\tif (absolute) {\n\t\t\tif (origHeight > element.clientHeight) {\n\t\t\t\telement.style.height = (origHeight - padTopAndBottom) + \"px\";\n\t\t\t\tif (element.clientHeight < origHeight) { //IE8 and earlier use a different box model - we must include padding and borders\n\t\t\t\t\telement.style.height = (origHeight + borderTopAndBottom)+ \"px\";\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (origWidth > element.clientWidth) {\n\t\t\t\telement.style.width = (origWidth - padLeftAndRight) + \"px\";\n\t\t\t\tif (element.clientWidth < origWidth) { //IE8 and earlier use a different box model - we must include padding and borders\n\t\t\t\t\telement.style.width = (origWidth + borderLeftAndRight)+ \"px\";\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\t_pushReversed(allChars, charArray);\n\t\tif (words) {\n\t\t\t_pushReversed(allWords, wordArray);\n\t\t}\n\t\t_pushReversed(allLines, lineArray);\n\t},\n\t_splitRawText = (element, vars, wordStart, charStart) => {\n\t\tlet tag = vars.tag ? vars.tag : (vars.span ? \"span\" : \"div\"),\n\t\t\ttypes = vars.type || vars.split || \"chars,words,lines\",\n\t\t\t//words = (types.indexOf(\"words\") !== -1),\n\t\t\tchars = ~types.indexOf(\"chars\"),\n\t\t\tabsolute = _isAbsolute(vars),\n\t\t\twordDelimiter = vars.wordDelimiter || \" \",\n\t\t\tspace = wordDelimiter !== \" \" ? \"\" : (absolute ? \"&#173; \" : \" \"),\n\t\t\twordEnd = \"</\" + tag + \">\",\n\t\t\twordIsOpen = 1,\n\t\t\tspecialChars = vars.specialChars ? (typeof(vars.specialChars) === \"function\" ? vars.specialChars : _findSpecialChars) : null, //specialChars can be an array or a function. For performance reasons, we always set this local \"specialChars\" to a function to which we pass the remaining text and whatever the original vars.specialChars was so that if it's an array, it works with the _findSpecialChars() function.\n\t\t\ttext, splitText, i, j, l, character, hasTagStart, testResult,\n\t\t\tcontainer = _doc.createElement(\"div\"),\n\t\t\tparent = element.parentNode;\n\n\t\tparent.insertBefore(container, element);\n\t\tcontainer.textContent = element.nodeValue;\n\t\tparent.removeChild(element);\n\t\telement = container;\n\t\ttext = getText(element);\n\t\thasTagStart = text.indexOf(\"<\") !== -1;\n\n\t\tif (vars.reduceWhiteSpace !== false) {\n\t\t\ttext = text.replace(_multipleSpacesExp, \" \").replace(_stripExp, \"\");\n\t\t}\n\t\tif (hasTagStart) {\n\t\t\ttext = text.split(\"<\").join(\"{{LT}}\"); //we can't leave \"<\" in the string, or when we set the innerHTML, it can be interpreted as a node\n\t\t}\n\t\tl = text.length;\n\t\tsplitText = ((text.charAt(0) === \" \") ? space : \"\") + wordStart();\n\t\tfor (i = 0; i < l; i++) {\n\t\t\tcharacter = text.charAt(i);\n\t\t\tif (specialChars && (testResult = specialChars(text.substr(i), vars.specialChars))) { // look for any specialChars that were declared. Remember, they can be passed in like {specialChars:[\"\", \"\", \"\"]} or a function could be defined instead. Either way, the function should return the number of characters that should be grouped together for this \"character\".\n\t\t\t\tcharacter = text.substr(i, testResult || 1);\n\t\t\t\tsplitText += (chars && character !== \" \") ? charStart() + character + \"</\" + tag + \">\" : character;\n\t\t\t\ti += testResult - 1;\n\t\t\t} else if (character === wordDelimiter && text.charAt(i-1) !== wordDelimiter && i) {\n\t\t\t\tsplitText += wordIsOpen ? wordEnd : \"\";\n\t\t\t\twordIsOpen = 0;\n\t\t\t\twhile (text.charAt(i + 1) === wordDelimiter) { //skip over empty spaces (to avoid making them words)\n\t\t\t\t\tsplitText += space;\n\t\t\t\t\ti++;\n\t\t\t\t}\n\t\t\t\tif (i === l-1) {\n\t\t\t\t\tsplitText += space;\n\t\t\t\t} else if (text.charAt(i + 1) !== \")\") {\n\t\t\t\t\tsplitText += space + wordStart();\n\t\t\t\t\twordIsOpen = 1;\n\t\t\t\t}\n\n\t\t\t} else if (character === \"{\" && text.substr(i, 6) === \"{{LT}}\") {\n\t\t\t\tsplitText += chars ? charStart() + \"{{LT}}\" + \"</\" + tag + \">\" : \"{{LT}}\";\n\t\t\t\ti += 5;\n\n\t\t\t} else if ((character.charCodeAt(0) >= 0xD800 && character.charCodeAt(0) <= 0xDBFF) || (text.charCodeAt(i+1) >= 0xFE00 && text.charCodeAt(i+1) <= 0xFE0F)) { //special emoji characters use 2 or 4 unicode characters that we must keep together.\n\t\t\t\tj = ((text.substr(i, 12).split(emojiExp) || [])[1] || \"\").length || 2;\n\t\t\t\tsplitText += (chars && character !== \" \") ? charStart() + text.substr(i, j) + \"</\" + tag + \">\" : text.substr(i, j);\n\t\t\t\ti += j - 1;\n\t\t\t} else {\n\t\t\t\tsplitText += (chars && character !== \" \") ? charStart() + character + \"</\" + tag + \">\" : character;\n\t\t\t}\n\t\t}\n\t\telement.outerHTML = splitText + (wordIsOpen ? wordEnd : \"\");\n\t\tif (hasTagStart) {\n\t\t\t_swapText(parent, \"{{LT}}\", \"<\"); //note: don't perform this on \"element\" because that gets replaced with all new elements when we set element.outerHTML.\n\t\t}\n\t},\n\t_split = (element, vars, wordStart, charStart) => {\n\t\tlet children = _toArray(element.childNodes),\n\t\t\tl = children.length,\n\t\t\tabsolute = _isAbsolute(vars),\n\t\t\ti, child;\n\t\tif (element.nodeType !== 3 || l > 1) {\n\t\t\tvars.absolute = false;\n\t\t\tfor (i = 0; i < l; i++) {\n\t\t\t\tchild = children[i];\n\t\t\t\tif (child.nodeType !== 3 || /\\S+/.test(child.nodeValue)) {\n\t\t\t\t\tif (absolute && child.nodeType !== 3 && _getComputedStyle(child).display === \"inline\") { //if there's a child node that's display:inline, switch it to inline-block so that absolute positioning works properly (most browsers don't report offsetTop/offsetLeft properly inside a <span> for example)\n\t\t\t\t\t\tchild.style.display = \"inline-block\";\n\t\t\t\t\t\tchild.style.position = \"relative\";\n\t\t\t\t\t}\n\t\t\t\t\tchild._isSplit = true;\n\t\t\t\t\t_split(child, vars, wordStart, charStart); //don't split lines on child elements\n\t\t\t\t}\n\t\t\t}\n\t\t\tvars.absolute = absolute;\n\t\t\telement._isSplit = true;\n\t\t\treturn;\n\t\t}\n\t\t_splitRawText(element, vars, wordStart, charStart);\n\t};\n\nexport class SplitText {\n\n\tconstructor(element, vars) {\n\t\tif (!_coreInitted) {\n\t\t\t_initCore();\n\t\t}\n\t\tthis.elements = _toArray(element);\n\t\tthis.chars = [];\n\t\tthis.words = [];\n\t\tthis.lines = [];\n\t\tthis._originals = [];\n\t\tthis.vars = vars || {};\n\t\tif (_bonusValidated) {\n\t\t\tthis.split(vars);\n\t\t}\n\t}\n\n\tsplit(vars) {\n\t\tif (this.isSplit) {\n\t\t\tthis.revert();\n\t\t}\n\t\tthis.vars = vars = vars || this.vars;\n\t\tthis._originals.length = this.chars.length = this.words.length = this.lines.length = 0;\n\t\tlet i = this.elements.length,\n\t\t\ttag = vars.tag ? vars.tag : (vars.span ? \"span\" : \"div\"),\n\t\t\twordStart = _cssClassFunc(vars.wordsClass, tag),\n\t\t\tcharStart = _cssClassFunc(vars.charsClass, tag),\n\t\t\torigHeight, origWidth, e;\n\t\t//we split in reversed order so that if/when we position:absolute elements, they don't affect the position of the ones after them in the document flow (shifting them up as they're taken out of the document flow).\n\t\twhile (--i > -1) {\n\t\t\te = this.elements[i];\n\t\t\tthis._originals[i] = e.innerHTML;\n\t\t\torigHeight = e.clientHeight;\n\t\t\torigWidth = e.clientWidth;\n\t\t\t_split(e, vars, wordStart, charStart);\n\t\t\t_setPositionsAfterSplit(e, vars, this.chars, this.words, this.lines, origWidth, origHeight);\n\t\t}\n\t\tthis.chars.reverse();\n\t\tthis.words.reverse();\n\t\tthis.lines.reverse();\n\t\tthis.isSplit = true;\n\t\treturn this;\n\t}\n\n\trevert() {\n\t\tlet originals = this._originals;\n\t\tif (!originals) {\n\t\t\tthrow(\"revert() call wasn't scoped properly.\");\n\t\t}\n\t\tthis.elements.forEach((e, i) => e.innerHTML = originals[i]);\n\t\tthis.chars = [];\n\t\tthis.words = [];\n\t\tthis.lines = [];\n\t\tthis.isSplit = false;\n\t\treturn this;\n\t}\n\n\tstatic create(element, vars) {\n\t\treturn new SplitText(element, vars);\n\t}\n\n}\n\nSplitText.version = \"3.2.6\";\n\nexport { SplitText as default };","import {emitter} from \"./emitter\";\nimport {header} from \"../header\";\nimport {gsap} from \"gsap\";\nimport { ScrollToPlugin } from \"gsap/ScrollToPlugin\";\nimport {BP_S, COLOR_MODES, COLOR_MODES_BG} from \"./constants\";\nimport {\n    EVENT_SCROLL,\n    EVENT_SCROLL_TO,\n    EVENT_HEADER_COLOR,\n    EVENT_RESIZE,\n    Window\n} from \"./window\";\nimport {clamp} from \"./utils\";\n//@ts-ignore\nimport {SplitText} from \"../gsap-bonus/SplitText\";\n\nexport class Page {\n    public element: HTMLElement;\n    public sectionsWrapper: HTMLElement;\n    public imagesToLoad: Array<HTMLImageElement>;\n    private home: boolean;\n    private sections: NodeListOf<HTMLElement>;\n    private sectionAnchors: NodeListOf<HTMLElement>;\n    private parallaxMedias: NodeListOf<HTMLElement>;\n    private parallaxSections: NodeListOf<HTMLElement>;\n    private ctaButtons: NodeListOf<HTMLElement>;\n    private requestId: number|null;\n    private headerColorDelay: number;\n    private transitionSpeed: number = .5;\n    private parallaxDistance: number = 0;\n    private parallaxBind: FrameRequestCallback;\n    private videos: NodeListOf<HTMLVideoElement>;\n    private observerVideos: IntersectionObserver;\n    private observerSections: IntersectionObserver;\n    private anchoredLinks: NodeListOf<HTMLElement>;\n\n    constructor(element: HTMLElement, home: boolean = false) {\n        this.element = element;\n        this.home = home;\n\n        this.sectionsWrapper = document.querySelector('.sections');\n        this.parallaxMedias = this.element.querySelectorAll('.parallax--media');\n        this.parallaxSections = this.element.querySelectorAll('.parallax-section');\n        this.ctaButtons = this.element.querySelectorAll('button.cta');\n        this.videos = this.element.querySelectorAll('video[playsinline]');\n        this.anchoredLinks = this.element.querySelectorAll('a[href^=\"./#\"]');\n\n        this.parallaxBind = this.parallax.bind(this);\n        this.init();\n    }\n\n    init() {\n        if (!this.home) {\n            this.sections = this.element.querySelectorAll('section');\n            this.sectionAnchors = this.element.querySelectorAll('section[data-anchor]');\n            this.imagesToLoad = Array.from(this.element.querySelectorAll('img[data-src]'));\n\n            emitter.on(EVENT_SCROLL, this.onScrollHandler);\n            emitter.on(EVENT_RESIZE, this.onScrollHandler);\n            emitter.on(EVENT_RESIZE, this.onResizeHandler);\n            emitter.on(EVENT_SCROLL_TO, this.onScrollToHandler);\n\n            this.headerColorDelay = this.transitionSpeed;\n            this.onScrollHandler();\n            this.onResizeHandler();\n            this.headerColorDelay = 0;\n\n            header.animateIn();\n            header.hideZoom();\n\n            this.parallaxSections.forEach((e, i)=>{\n                (e.querySelector('.section-wrapper') as HTMLElement).style.zIndex = `${i + 1}`;\n            });\n\n            for (const item of this.anchoredLinks) {\n                item.addEventListener('click', this.onAnchoredLinkClick.bind(this));\n            }\n\n            this.checkHash();\n            gsap.registerPlugin(ScrollToPlugin);\n            this.addListeners();\n        } else {\n            this.sectionsWrapper.classList.remove(...COLOR_MODES_BG);\n            emitter.emit(EVENT_HEADER_COLOR, {mode: 'mode-transparent-dark'});\n            window.scroll(0, 0);\n            header.resetToHome();\n        }\n    }\n\n    onAnchoredLinkClick(e: any) {\n        e.preventDefault();\n        const target = e.target.getAttribute('href').split('#')[1];\n\n        this.onScrollToHandler({anchor: target});\n    }\n\n    checkHash() {\n        const anchor = window.location.hash ? window.location.hash.split('#')[1] : '';\n        const scrollEl = anchor ? this.element.querySelector(`[data-anchor=${anchor}]`) : '';\n        const offset = 5;\n        let headerHeight: number;\n        let top: number;\n\n        if (anchor && scrollEl) {\n            headerHeight = header.element.getBoundingClientRect().height;\n            top = (scrollEl.getBoundingClientRect().top + window.scrollY - headerHeight) + offset;\n            window.scroll(0, top);\n        } else {\n            window.scroll(0, 0);\n        }\n    }\n\n    animateIn(speed = this.transitionSpeed) {\n        return new Promise((resolve) => {\n            gsap.to(this.element, {\n                duration: this.transitionSpeed,\n                opacity: 1,\n                onComplete: () => {\n                    this.introAnimateIn(this.element, resolve);\n                    this.elementsAnimateIn();\n                }\n            });\n        });\n    }\n\n    introAnimateIn(el: HTMLElement, resolve: any) {\n        const title = el.querySelector('.intro .title') as HTMLElement;\n\n        const tl = gsap.timeline(),\n            mySplitText = new SplitText(title, {type:\"words,chars\"}),\n            chars = mySplitText.chars; //an array of all the divs that wrap each character\n\n        title.style.opacity = '1';\n\n        gsap.set(title, {perspective: 400});\n\n        tl.from(chars, {\n            duration: .8,\n            opacity: 0,\n            y: 80,\n            ease: \"Power4.easeOut\",\n            stagger: 0.01, onComplete: () => {\n                resolve();\n            }}, \"+=0\");\n    }\n\n    elementsAnimateIn() {\n        if (this.home) return false;\n\n        const copy = this.element.querySelector('.intro .copy');\n        const cta = this.element.querySelector('.intro .top-header .cta-container');\n        const media = this.element.querySelector('.intro .media');\n\n        gsap.to([copy, cta, media], {duration: .5, delay: 1, opacity: 1});\n    }\n\n    animateOut() {\n        return new Promise(resolve => {\n            header.resetBackground();\n            gsap.to(this.element, {\n                duration: this.transitionSpeed,\n                opacity: 0,\n                onComplete: () => {\n                    this.destroy();\n                    resolve();\n                }\n            });\n        });\n    }\n\n    onScrollToHandler = ({anchor}: any, duration: number = 1) => {\n        const scrollEl = this.element.querySelector(`[data-anchor=${anchor}]`);\n        const headerHeight = header.element.getBoundingClientRect().height;\n        const offset = 5;\n        const top = (scrollEl.getBoundingClientRect().top + window.scrollY - headerHeight) + offset;\n\n        gsap.to(window, {duration, scrollTo: { y: top }, ease: 'Power4.easeInOut'});\n    }\n\n    sectionColorCheck() {\n        const headerHeight = header.element.getBoundingClientRect().height;\n        let currColor = 'mode-light';\n\n        // Toggle header color\n        this.sections.forEach((el)=> {\n            let rect = el.getBoundingClientRect();\n\n            if (rect.top <= headerHeight && rect.bottom >= 0 && rect.height > 0) {\n                COLOR_MODES.map((color) => {\n                    currColor = el.classList.contains(color) ? color : currColor;\n                });\n                emitter.emit(EVENT_HEADER_COLOR, {mode: currColor, delay: this.headerColorDelay});\n            }\n        });\n\n        if (!this.sectionsWrapper.classList.contains(`${currColor}--bg`)) {\n            this.sectionsWrapper.classList.remove(...COLOR_MODES_BG);\n            this.sectionsWrapper.classList.add(`${currColor}--bg`);\n        }\n    }\n\n    onScrollHandler = (init: boolean = false) => {\n        this.sectionColorCheck();\n\n        if (this.requestId) return;\n            this.requestId = window.requestAnimationFrame(this.parallaxBind);\n    }\n\n    parallax() {\n        let rect, innerRect;\n        let innerEl: HTMLElement;\n        let top, newLimit, perc, diff: number;\n        let limit: any;\n\n        // Adjust to change height of scroll area\n        limit = Window.height * 2;\n\n        this.parallaxMedias.forEach((el)=> {\n            rect = el.getBoundingClientRect();\n            innerEl = el.querySelector('.ratio > *') as HTMLElement;\n            innerRect = innerEl.getBoundingClientRect();\n\n            top = rect.top - Window.height;\n            newLimit = -Math.abs(limit);\n            perc = clamp(top / newLimit, 0, 1);\n            diff = innerRect.height - rect.height;\n\n            innerEl.style.transform = `translateY(-${diff * perc}px)`\n        });\n\n        this.parallaxSections.forEach((el) => {\n            rect = el.getBoundingClientRect();\n            innerEl = el.querySelector('.section-wrapper') as HTMLElement;\n\n            top = rect.top - Window.height;\n            perc =  clamp(top / (Window.height), -1, 0);\n\n            innerEl.style.transform = `translateY(${this.parallaxDistance * perc}px)`;\n        });\n\n        this.requestId = null;\n    }\n\n    addListeners = () => {\n        // Reset check for section height to parallax.\n        document.addEventListener('lazybeforeunveil', () => {\n            this.onResizeHandler();\n        });\n\n        // Video playback.\n        this.observerVideos = new IntersectionObserver(\n            (entries) => {\n                for (let entry of entries) {\n                    this.onIntersectVideo(entry)\n                }\n            },\n            {threshold: [0] }\n        );\n\n        this.observerSections = new IntersectionObserver(\n            (entries) => {\n                for (let entry of entries) {\n                    const boundingRect = entry.boundingClientRect;\n                    const section = entry.target as HTMLElement;\n\n                    if (boundingRect.top <= 0 || !section.hasAttribute('data-anchor'))\n                        return false\n\n                    if (entry.isIntersecting) {\n                        this.onIntersectSection(section);\n                    } else if (entry.target.previousElementSibling) {\n                        this.onIntersectSection(section.previousElementSibling);\n                    }\n                }\n            },\n            { rootMargin: '0px 0px -50% 0px' }\n        );\n\n        this.videos.forEach((el) => { this.observerVideos.observe(el) });\n        this.sectionAnchors.forEach((el) => { this.observerSections.observe(el) });\n    }\n\n    onIntersectVideo( e: any ) {\n        const video = e.target as HTMLVideoElement;\n        if (e.isIntersecting && video.paused) {\n            video.play();\n        } else if (!e.isIntersecting && !video.paused) {\n            video.pause();\n        }\n    }\n\n    onIntersectSection( t: any ) {\n        const section = t as HTMLElement;\n        const anchor = section.dataset.anchor;\n\n        if (anchor) {\n            window.location.hash = anchor;\n            header.setActiveSubNavItem(anchor)\n        }\n    }\n\n    removeListeners = () => {\n        document.removeEventListener('lazybeforeunveil', () => {\n            this.onResizeHandler();\n        });\n\n        this.videos.forEach((el) => { this.observerVideos.unobserve(el) })\n        this.sectionAnchors.forEach((el) => { this.observerSections.unobserve(el) })\n    }\n\n    onResizeHandler = () => {\n        let innerRect;\n        let innerEl: HTMLElement;\n\n        this.parallaxDistance = Window.width < BP_S ? 50 : 100;\n\n        this.parallaxSections.forEach((el) => {\n            innerEl = el.querySelector('.section-wrapper') as HTMLElement;\n            innerRect = innerEl.getBoundingClientRect();\n            el.style.height = `${innerRect.height - this.parallaxDistance}px`\n        })\n    }\n\n    destroy() {\n        emitter.off(EVENT_SCROLL, this.onScrollHandler);\n        emitter.off(EVENT_RESIZE, this.onScrollHandler);\n        emitter.off(EVENT_RESIZE, this.onResizeHandler);\n        emitter.off(EVENT_SCROLL_TO, this.onScrollToHandler);\n        this.removeListeners();\n    }\n}\n","const vertex = `\n    varying vec2 vUv;\n    varying float vDistanceToCamera;\n    void main()\n    {\n        vUv = uv;\n        vec4 mvPosition = modelViewMatrix * vec4(position, 1.0);\n        vec4 worldPosition = modelMatrix * vec4(position, 1.0);\n        vDistanceToCamera = abs(distance(cameraPosition, vec3(worldPosition)));\n        gl_Position = projectionMatrix * mvPosition;\n    }\n`;\nconst fragment = `\n    #ifdef GL_ES\n    precision highp float;\n    #endif\n\n    varying vec2 vUv;\n    varying float vDistanceToCamera;\n\n    uniform vec2 uvOffset;\n    uniform float uTubeLength;\n    uniform vec4 color;\n    uniform vec4 textureColor;\n    uniform sampler2D texture;\n    uniform float offset;\n    uniform float globalAlpha;\n    uniform float textureVisibleAmount;\n    uniform float textureAlphaAmount;\n    uniform float featherAmount;\n    uniform float reverseDirection;\n\n    void main(void)\n    {\n        if (offset == 0.) \n            discard;\n        float uv = float(vUv);\n        const float hashDensity = 120.;\n        float hashRepeat = uTubeLength * (hashDensity / vDistanceToCamera);\n        vec4 t1 = texture2D(texture, ((uv + uvOffset) * hashRepeat));\n        float uvDir = mix(1. - uv, uv, reverseDirection); \n        float alpha = mix(uv, 1., featherAmount) * step(1. - offset, uvDir);\n        float textureAlpha = float(t1.a * alpha) * textureAlphaAmount;\n        alpha = mix(textureAlpha, alpha, step(uv, 1. - textureVisibleAmount));\n        vec3 finalColor = mix(t1.rgb * textureColor.rgb, color.rgb, step(uv, 1. - textureVisibleAmount));\n        gl_FragColor = vec4(finalColor, alpha * globalAlpha); //t1\n    }\n`;\n\nexport default {vertex, fragment};\n","/*\nAn item that can be attached to follow a Line or Curve path\n */\n\nimport {Curve, Object3D, Vector3} from \"three\";\nimport {gsap} from \"gsap\";\nimport {LinePath3} from \"./LinePath3\";\n\nexport class PathItem {\n    public mesh: Object3D;\n    private _progress: number;\n\n    constructor(mesh: Object3D) {\n        this.mesh = mesh;\n        this.mesh.visible = false;\n    }\n\n    set progress(value: number) {\n        this._progress = value;\n        this.mesh.position.copy(this.position);\n    }\n\n    get progress() {\n        return this._progress;\n    }\n\n    get position(): Vector3 {\n        return new Vector3();\n    }\n\n    animateIn(speed: number = 1, delay: number = 0, repeat: number = 0, onComplete: Function = null) {\n        gsap.set(this, {progress: 0, delay: delay});\n        gsap.to(this, speed, {\n            progress: 1,\n            delay: delay,\n            ease: 'Power1.easeInOut',\n            repeat: repeat,\n            onStart: () => {\n                this.mesh.visible = true;\n            },\n            onComplete: () => {\n                this.mesh.visible = false;\n                if (onComplete) {\n                    onComplete();\n                }\n            }\n        });\n    }\n\n    animateOut(speed: number = 1, delay: number = 0) {\n        gsap.to(this, speed, {\n            progress: 0,\n            delay: delay,\n            ease: 'Power1.easeInOut'\n        });\n    }\n\n    reset() {\n        this.progress = 0;\n        this.mesh.visible = false;\n    }\n}\n\nexport class SplinePathItem extends PathItem {\n    private path: Curve<any>;\n\n    constructor(mesh: Object3D, path: Curve<any>) {\n        super(mesh);\n        this.path = path;\n        this.progress = 0;\n    }\n\n    get position(): Vector3 {\n        return this.path.getPointAt(this.progress);\n    }\n}\n\nexport class LinePathItem extends PathItem {\n    private path: LinePath3;\n\n    constructor(mesh: Object3D, path: LinePath3) {\n        super(mesh);\n        this.path = path;\n        this.progress = 0;\n    }\n\n    get position(): Vector3 {\n        return this.path.getLinearPoint(this.progress);\n    }\n}\n","/*\nClass for generating straight paths given a set of points\n */\n\nimport * as THREE from \"three\";\n\nexport class LinePath3 extends THREE.CatmullRomCurve3 {\n    getLinearPoint(t: number) {\n        const points = this.points;\n        const l = points.length;\n        const point = (l - 1) * t;\n        let intPoint = Math.floor(point);\n        let weight = point - intPoint;\n        if ( weight === 0 && intPoint === l - 1 ) {\n            intPoint = l - 2;\n            weight = 1;\n        }\n        const p1 = points[intPoint % l];\n        const p2 = points[(intPoint + 1) % l];\n        return p1.clone().lerp(p2, weight);\n   }\n}","/*\nAn extruded tube that's used to create curves over the globe or in the city.\n */\n\nimport {\n    Curve,\n    Mesh,\n    Object3D,\n    ShaderMaterial,\n    TubeBufferGeometry,\n    Vector3\n} from \"three\";\nimport {getSplineFromCoords} from \"../global/utils\";\nimport {LinePath3} from \"./LinePath3\";\n\nconst TUBE_RADIUS_SEGMENTS = 5;\nconst DEFAULT_TUBE_RADIUS = .1;\n\nexport class Tube {\n    public path: Curve<any>;\n    public mesh: Mesh;\n    public material: ShaderMaterial;\n    public geometry: TubeBufferGeometry;\n    public nulls: Array<Object3D> = [];\n\n    attachNulls(coords: Array<any>) {\n        for (let i = 0; i < coords.length; i+=3) {\n            let obj = new Object3D();\n            this.mesh.add(obj);\n            obj.position.set(coords[i], coords[i+1], coords[i+2]);\n            this.nulls.push(obj);\n        }\n    }\n}\n\nexport class SplineTube extends Tube {\n    constructor(coords: Array<any>,\n                material: ShaderMaterial,\n                radius: number = DEFAULT_TUBE_RADIUS,\n                curveMinAltitude: number = undefined,\n                curveMaxAltitude: number = undefined) {\n        super();\n        const { spline } = getSplineFromCoords(coords, curveMinAltitude, curveMaxAltitude);\n        this.path = spline;\n        this.geometry = new TubeBufferGeometry(this.path, 50, radius, TUBE_RADIUS_SEGMENTS, false);\n        this.mesh = new Mesh(this.geometry, material);\n        this.material = material;\n        this.attachNulls(coords);\n    }\n}\n\nexport class LineTube extends Tube {\n    constructor(coords: Array<any>, material: ShaderMaterial, radius: number = DEFAULT_TUBE_RADIUS) {\n        super();\n        let pathCoords = [];\n        for (let i = 0; i < coords.length; i+=3) {\n            pathCoords.push(new Vector3(coords[i], coords[i+1], coords[i+2]));\n        }\n        this.path = new LinePath3(pathCoords);\n        const segments = (pathCoords.length - 1);\n        //material.uniforms.uvRepeat.value.x = material.uniforms.uvRepeat.value.x * (this.path.getLength() / 100);\n        this.geometry = new TubeBufferGeometry(this.path, segments, radius, TUBE_RADIUS_SEGMENTS, false);\n        this.mesh = new Mesh(this.geometry, material);\n        this.mesh.renderOrder = 5;\n        this.material = material;\n        this.attachNulls(coords);\n    }\n}\n","import Emitter from \"@hellomonday/emitter\";\nimport {state} from \"./state\";\nimport {ASSETS_3D} from \"./constants\";\nimport {gsap} from \"gsap\";\nimport {preload} from \"./preload\";\nimport {isTouch} from \"./utils\";\n\nexport const AUDIO_BE3 = 'be3';\nexport const AUDIO_BE5 = 'be5';\nexport const AUDIO_CA1 = 'ca1';\nexport const AUDIO_CA2 = 'ca2';\nexport const AUDIO_CA3 = 'ca3';\nexport const AUDIO_CHA = 'cha';\nexport const AUDIO_CH1_MUSIC = 'ch1_music';\nexport const AUDIO_CH2_MUSIC = 'ch2_music';\nexport const AUDIO_CH3_MUSIC = 'ch3_music';\nexport const AUDIO_CH4_MUSIC = 'ch4_music';\nexport const AUDIO_CITY = 'city';\nexport const AUDIO_CW = 'cw';\nexport const AUDIO_DLT1 = 'dlt1';\nexport const AUDIO_DLT2 = 'dlt2';\nexport const AUDIO_DLT3 = 'dlt3';\nexport const AUDIO_QIN = 'qin';\nexport const AUDIO_Q2C = 'q2c';\nexport const AUDIO_C2B = 'c2b';\nexport const AUDIO_BCIN = 'bcin';\nexport const AUDIO_REDX = 'redx';\nexport const AUDIO_COIN = 'coin';\nexport const AUDIO_FS1 = 'fs1';\nexport const AUDIO_FS2 = 'fs2';\nexport const AUDIO_FW1 = 'fw1';\nexport const AUDIO_FW2 = 'fw2';\nexport const AUDIO_FW3 = 'fw3';\nexport const AUDIO_GR1 = 'gr1';\nexport const AUDIO_GR2 = 'gr2';\nexport const AUDIO_GR3 = 'gr3';\nexport const AUDIO_GR4 = 'gr4';\nexport const AUDIO_GR5 = 'gr5';\nexport const AUDIO_GVA1 = 'gva1';\nexport const AUDIO_IAMB = 'iamb';\nexport const AUDIO_LW1 = 'lw1';\nexport const AUDIO_LW2 = 'lw2';\nexport const AUDIO_MA = 'ma';\nexport const AUDIO_MW = 'mw';\nexport const AUDIO_PW1 = 'pw1';\nexport const AUDIO_PW2 = 'pw2';\nexport const AUDIO_SL1 = 'sl1';\nexport const AUDIO_SL2 = 'sl2';\nexport const AUDIO_SL3 = 'sl3';\nexport const AUDIO_TA = 'ta';\nexport const AUDIO_TW1 = 'tw1';\nexport const AUDIO_TW2 = 'tw2';\nexport const AUDIO_TW3 = 'tw3';\nexport const AUDIO_CLK = 'clk';\n\nexport const MUSIC_MUTE_CHANGE = 'music_mute_change';\nexport const SFX_MUTE_CHANGE = 'sfx_mute_change';\n\nexport class AudioController extends Emitter{\n\n    public audioCtx: AudioContext;\n    private audioItems: {[key: string]: AudioItem} = {};\n    private musicAudioItems: {[key: string]: AudioItem} = {};\n    private sfxAudioItems: {[key: string]: AudioItem} = {};\n    private _sfxMuted: boolean;\n    private _musicMuted: boolean;\n\n    constructor() {\n        super();\n    }\n\n    private init() {\n        // @ts-ignore\n        this.audioCtx = new(window.AudioContext || window.webkitAudioContext);\n        const assets = state.getValue(ASSETS_3D);\n        for (const assetId in assets) {\n            const url = assets[assetId];\n            if (url.indexOf('.ogg') > -1 || url.indexOf('.mp3') > -1) {\n                this.audioItems[assetId] = new AudioItem(assetId, url)\n                if (assetId == AUDIO_CH1_MUSIC || assetId == AUDIO_CH2_MUSIC ||\n                    assetId == AUDIO_CH3_MUSIC || assetId == AUDIO_CH4_MUSIC) {\n                    this.musicAudioItems[assetId] = this.audioItems[assetId];\n                } else {\n                    this.sfxAudioItems[assetId] = this.audioItems[assetId];\n                }\n            }\n        };\n\n        this.audioItems[AUDIO_GVA1].useBuffer = false;\n        this.audioItems[AUDIO_CITY].useBuffer = false;\n        this.audioItems[AUDIO_IAMB].useBuffer = false;\n        this.audioItems[AUDIO_CH1_MUSIC].useBuffer = false;\n        this.audioItems[AUDIO_CH2_MUSIC].useBuffer = false;\n        this.audioItems[AUDIO_CH3_MUSIC].useBuffer = false;\n        this.audioItems[AUDIO_CH4_MUSIC].useBuffer = false;\n\n        this.audioItems[AUDIO_CLK].maxGain = -1;\n        this.audioItems[AUDIO_CH1_MUSIC].maxGain = -.6;\n        this.audioItems[AUDIO_CH2_MUSIC].maxGain = -.6;\n        this.audioItems[AUDIO_CH3_MUSIC].maxGain = -.6;\n        this.audioItems[AUDIO_CH4_MUSIC].maxGain = -.6;\n\n        this.musicMuted = true;\n    }\n\n    public async load() {\n        if (isTouch()) {\n            return;\n        }\n        this.init();\n        await Promise.all(Object.keys(this.audioItems).map(async (assetId) => {\n            return new Promise(resolve => {\n                const audioItem = this.audioItems[assetId];\n                if (audioItem.useBuffer) {\n                    const request = new XMLHttpRequest();\n                    request.open(\"GET\", audioItem.url);\n                    request.responseType = \"arraybuffer\";\n                    const self = this;\n                    request.onload = function() {\n                        let undecodedAudio = request.response;\n                        self.audioCtx.decodeAudioData(undecodedAudio, (data: AudioBuffer) => audioItem.buffer = data);\n                        resolve();\n                    };\n                    request.send();\n                } else {\n                    resolve();\n                }\n            });\n        }));\n    }\n\n    public play(id: string, delay: number = 0) {\n        const audioItem = this.get(id);\n        if (!audioItem) return;\n        if (delay == 0) {\n            audioItem.play();\n        } else {\n            gsap.delayedCall(delay, () => {\n                audioItem.play();\n            });\n        }\n    }\n\n    public pause(id: string, delay: number = 0) {\n        const audioItem = this.get(id);\n        if (!audioItem) return;\n        gsap.delayedCall(delay, () => {\n            audioItem.pause();\n        });\n    }\n\n    public fadeIn(id: string, delay: number = 0, duration: number = .5) {\n        const audioItem = this.get(id);\n        if (!audioItem) return;\n        gsap.delayedCall(delay, () => {\n            audioItem.fadeIn(duration);\n        });\n    }\n\n    public fadeOut(id: string, delay: number = 0, duration: number = .5, pauseOnComplete: boolean = true) {\n        const audioItem = this.get(id);\n        if (!audioItem) return;\n        gsap.delayedCall(delay, () => {\n            audioItem.fadeOut(duration, pauseOnComplete);\n        });\n    }\n\n    public get(id: string) {\n        return this.audioItems[id];\n    }\n\n    public stopAll() {\n        Object.keys(this.audioItems).forEach((id) => {\n            this.audioItems[id].pause();\n        });\n    };\n\n    public set musicMuted(isMuted: boolean) {\n        this._musicMuted = isMuted;\n        Object.keys(this.musicAudioItems).forEach((id) => {\n            this.musicAudioItems[id].mute(isMuted);\n        });\n        this.emit(MUSIC_MUTE_CHANGE, {isMuted: isMuted});\n    }\n\n    public get musicMuted() {\n        return this._musicMuted;\n    }\n\n    public set sfxMuted(isMuted: boolean) {\n        this._sfxMuted = isMuted\n        Object.keys(this.sfxAudioItems).forEach((id) => {\n            this.sfxAudioItems[id].mute(isMuted);\n        });\n        this.emit(SFX_MUTE_CHANGE, {isMuted: isMuted});\n    }\n\n    public get sfxMuted() {\n        return this._sfxMuted;\n    }\n\n    public pauseAll() {\n        if (this.audioCtx) {\n            this.audioCtx.suspend();\n        }\n    }\n\n    public resumeAll() {\n        if (this.audioCtx) {\n            this.audioCtx.resume();\n        }\n    }\n}\n\nexport class AudioItem {\n\n    public id: string;\n    public url: string;\n    public audioElement: HTMLAudioElement;\n    public buffer: AudioBuffer;\n    public sourceNode: AudioBufferSourceNode;\n    public gainNode: GainNode;\n    public useBuffer: boolean = true;\n    public isPlaying: boolean = false;\n    public muted: boolean = false;\n    private _maxGain: number = 0;\n\n    constructor(id: string, url: string) {\n        this.id = id;\n        this.url = url;\n\n        this.gainNode = audioController.audioCtx.createGain();\n        this.gainNode.connect(audioController.audioCtx.destination);\n    }\n\n    public set maxGain(value: number) {\n        this._maxGain = value;\n        if (!this.muted) {\n            this.gainNode.gain.value = value;\n        }\n    }\n\n    public get maxGain() {\n        return this._maxGain;\n    }\n\n    play() {\n        if (this.buffer) {\n            this.sourceNode = audioController.audioCtx.createBufferSource();\n            this.sourceNode.buffer = this.buffer;\n            this.sourceNode.connect(audioController.audioCtx.destination);\n            this.sourceNode.connect(this.gainNode);\n            this.sourceNode.start(0);\n        } else {\n            if (!this.audioElement) {\n                this.audioElement = new Audio(this.url);\n                this.audioElement.preload = 'auto';\n                const source = audioController.audioCtx.createMediaElementSource(this.audioElement);\n                source.connect(this.gainNode);\n                source.connect(audioController.audioCtx.destination);\n            }\n            this.audioElement.play();\n        }\n        this.isPlaying = true;\n        if (!this.muted) {\n            this.gainNode.gain.value = this.maxGain;\n        }\n    }\n\n    pause() {\n        if (this.sourceNode) {\n            this.sourceNode.disconnect();\n            this.sourceNode.stop(0);\n            this.sourceNode = null;\n        } else {\n            if (this.audioElement) {\n                this.audioElement.pause();\n            }\n        }\n        this.isPlaying = false;\n    }\n\n    fadeIn(duration: number = .5) {\n        if (this.muted) {\n            return;\n        }\n        gsap.to(this.gainNode.gain, duration, {value: this.maxGain});\n    }\n\n    fadeOut(duration: number = .5, pauseOnComplete: boolean = true) {\n        gsap.to(this.gainNode.gain, duration, {\n            value: -1,\n            onComplete: () => {\n                if (pauseOnComplete) {\n                    this.pause();\n                }\n            }\n        });\n    }\n\n    mute(isMuted: boolean) {\n        this.muted = isMuted;\n        this.gainNode.gain.value = isMuted ? -1 : this.maxGain;\n    }\n}\n\nexport const audioController = new AudioController();","import * as THREE from 'three';\nimport {\n    DoubleSide, Mesh,\n    Object3D,\n    ShaderMaterial, Texture\n} from \"three\";\nimport FlowMapShader from './shaders/FlowMapShader';\nimport {ASSETS_3D, COLOR_BLUE_RGBA, COLOR_WHITE_RGBA} from \"../global/constants\";\nimport {gsap} from \"gsap\";\nimport {LinePathItem, PathItem, SplinePathItem} from \"./pathItem\";\nimport {LinePath3} from \"./LinePath3\";\nimport {LineTube, SplineTube, Tube} from \"./tube\";\nimport {contains, loadTexture} from \"../global/utils\";\nimport {state} from \"../global/state\";\nimport {AUDIO_DLT1, AUDIO_SL1, AUDIO_TA, audioController} from \"../global/audioController\";\n\nexport const PATH_TYPE_LINE = 'pathTypeLine';\nexport const PATH_TYPE_SPLINE = 'pathTypeSpline';\n\nexport default class Paths {\n    public container: Object3D;\n    public type: string;\n    public tubes: Array<Tube> = [];\n    public materials: Array<ShaderMaterial> = [];\n    public pathFollowers: Array<PathItem[]> = [];\n    public hashSoundDelay: number = 0;\n    private curveMesh: Mesh;\n    private allCoords: Array<any>;\n    private hashRepeat: number;\n    private shareMaterial: boolean;\n    private curveMinAltitude: number;\n    private curveMaxAltitude: number;\n    private radius: number;\n    private parent: Object3D;\n    private hashSound: string;\n    private solidSound: string;\n    private completeSound: string;\n    private outSound: string;\n\n    constructor(allCoords: Array<any>,\n                parent: Object3D,\n                hashRepeat: number,\n                radius: number,\n                type: string = PATH_TYPE_SPLINE,\n                shareMaterial: boolean = true,\n                curveMinAltitude: number = undefined,\n                curveMaxAltitude: number = undefined) {\n\n        this.allCoords = allCoords;\n        this.parent = parent;\n        this.type = type;\n        this.hashRepeat = hashRepeat;\n        this.shareMaterial = shareMaterial;\n        this.curveMinAltitude = curveMinAltitude;\n        this.curveMaxAltitude = curveMaxAltitude;\n        this.radius = radius;\n\n        this.init();\n    }\n\n    async init() {\n        let uniforms = {\n            color: {type: 'v', value: new THREE.Vector4(...COLOR_BLUE_RGBA)},\n            uvOffset: {type: 'v', value: new THREE.Vector2(0, 0)},\n            //uvRepeat: {type: 'v', value: new THREE.Vector2(this.hashRepeat, 1)},\n            uTubeLength: {type: 'f', value: 0},\n            texture: {type: \"t\", value: new Texture()},\n            textureColor: {type: 'v', value: new THREE.Vector4(...COLOR_WHITE_RGBA)},\n            textureVisibleAmount: {type: \"f\", value: 1},\n            textureAlphaAmount: {type: \"f\", value: 1},\n            globalAlpha: {type: \"f\", value: 1},\n            featherAmount: {type: \"f\", value: 0},\n            reverseDirection: {type: \"f\", value: 0},\n            offset: {type: \"f\", value: 0}\n        };\n\n        const shaderMaterial: ShaderMaterial = new THREE.ShaderMaterial({\n            uniforms: uniforms,\n            side: DoubleSide,\n            transparent: true,\n            vertexShader: FlowMapShader.vertex,\n            fragmentShader: FlowMapShader.fragment,\n            depthTest: true,\n            depthWrite: true\n        });\n\n        if (this.shareMaterial) {\n            this.materials.push(shaderMaterial);\n        }\n\n        this.curveMesh = new THREE.Mesh();\n        this.curveMesh.visible = false;\n        [...this.allCoords].forEach((coords, index) => {\n\n            let tube: Tube;\n            const material: ShaderMaterial = this.shareMaterial ? this.materials[0] : shaderMaterial.clone();\n            if (!this.shareMaterial) {\n                material.uniforms.uvOffset.value.x = Math.random();\n                this.materials.push(material);\n            }\n            if (this.type == PATH_TYPE_SPLINE) {\n                tube = new SplineTube(coords, material, this.radius, this.curveMinAltitude, this.curveMaxAltitude);\n            } else {\n                tube = new LineTube(coords, material, this.radius);\n            }\n\n            //todo move scale outside - adjust for city scale\n            material.uniforms.uTubeLength.value = tube.path.getLength() * (this.type == PATH_TYPE_LINE ? 10 : 1);\n\n            this.tubes.push(tube);\n            this.curveMesh.add(tube.mesh);\n        });\n\n        this.materials.forEach((material) => {\n            material.uniforms.textureVisibleAmount.value = 1;\n            material.uniforms.offset.value = 0;\n        });\n\n        const hashTexture = state.getValue(ASSETS_3D).hash_texture_url;\n        loadTexture(hashTexture).then(value => {\n            value.wrapS = THREE.RepeatWrapping;\n            this.setAllUniforms('texture', value);\n        });\n\n        this.container = new Object3D();\n        this.container.add(this.curveMesh);\n        this.parent.add(this.container);\n    }\n\n    setSounds(hashSound: string = null, solidSound: string = null, completeSound: string = null, outSound: string = null) {\n        this.hashSound = hashSound;\n        this.solidSound = solidSound;\n        this.completeSound = completeSound;\n        this.outSound = outSound;\n    }\n\n    animateHash(delay: number = 0, speed: number = 10) {\n        this.materials.forEach((material) => {\n            gsap.set(material.uniforms.uvOffset.value, {x: 0, delay: delay});\n            gsap.to(material.uniforms.uvOffset.value, speed, {\n                x: -1,\n                ease: 'none',\n                delay: delay,\n                overwrite: true,\n                onComplete: () => {\n                    material.uniforms.uvOffset.value.x = 0;\n                }\n            });\n        });\n    }\n\n    private stopAllHashes() {\n        this.materials.forEach((material) => {\n            this.stopHash(material)\n        });\n    }\n\n    private stopHash(material: ShaderMaterial) {\n        material.uniforms.uvOffset.value.x = 0;\n        gsap.killTweensOf(material.uniforms.uvOffset.value);\n    }\n\n    animateIn(speed: number = 1, delay: number = 0, staggerDelay: number = 0, onComplete: any = () => {}) {\n        if (this.hashSound) {\n            audioController.play(this.hashSound, delay + this.hashSoundDelay);\n        }\n        this.materials.forEach((material, index) => {\n            material.uniforms.offset.value = 0;\n            gsap.to(material.uniforms.offset, speed, {\n                value: 1,\n                delay: delay + (staggerDelay * index),\n                ease: 'Power1.easeInOut',\n                onStart: () => {\n                    this.animateHash();\n                    this.curveMesh.visible = true;\n                },\n                onComplete: onComplete,\n                onCompleteParams: [material]\n            });\n        });\n    }\n\n    animateInSolid(speed: number = 1, delay: number = 0, staggerDelay: number = 0, onComplete: any = () => {}) {\n        if (this.solidSound && speed > 0) {\n            audioController.play(this.solidSound, delay);\n        }\n        this.materials.forEach((material, index) => {\n            material.uniforms.textureVisibleAmount.value = 1;\n            gsap.to(material.uniforms.textureVisibleAmount, speed, {\n                value: 0,\n                delay: delay + (staggerDelay * index),\n                ease: 'Power1.easeInOut',\n                onStart: () => {\n                    this.curveMesh.visible = true;\n                },\n                onComplete: () => {\n                    if (index == 0) {\n                        if (this.hashSound) {\n                            audioController.fadeOut(this.hashSound);\n                        }\n                        if (this.completeSound) {\n                            audioController.play(this.completeSound);\n                        }\n                    }\n                    this.stopHash(material);\n                    if (onComplete) {\n                        onComplete(material, index);\n                    }\n                }\n            });\n        });\n    }\n\n    animateOut(speed: number = 1, delay: number = 0, staggerDelay: number = 0, onComplete: any = () => {}, except: Array<number> = []) {\n        if (this.solidSound && speed > 0) {\n            audioController.fadeOut(this.solidSound, delay);\n        }\n        if (this.outSound && speed > 0) {\n            audioController.play(this.outSound, delay);\n        }\n        this.materials.forEach((material, index) => {\n            if (!contains(except, index)) {\n                gsap.to(material.uniforms.offset, speed, {\n                    value: 0,\n                    delay: delay + (staggerDelay * index),\n                    ease: 'Power1.easeInOut',\n                    onComplete: (material, index, onComplete) => {\n                        if (this.outSound && index == 0) {\n                            audioController.fadeOut(this.outSound);\n                        }\n                        onComplete(material, index);\n                    },\n                    onCompleteParams: [material, index, onComplete]\n                });\n            }\n        });\n    }\n\n    reset() {\n        this.stopAllHashes();\n        this.curveMesh.visible = false;\n        this.setAllUniforms('reverseDirection', 0);\n        for (let i = 0; i < this.pathFollowers.length; i++) {\n            const tube = this.pathFollowers[i];\n            if (tube) {\n                for (let j = 0; j < tube.length; j++) {\n                    const follower = tube[j];\n                    follower.reset();\n                }\n            }\n        }\n    }\n\n    addPathFollower(object3d: Object3D, tubeIndex: number) {\n        let pathItem: PathItem;\n        const tube = this.tubes[tubeIndex];\n        if (this.type == PATH_TYPE_SPLINE) {\n            pathItem = new SplinePathItem(object3d, tube.path);\n        }\n        else {\n            pathItem = new LinePathItem(object3d, tube.path as LinePath3);\n        }\n        tube.mesh.add(pathItem.mesh);\n\n        if (!this.pathFollowers[tubeIndex]) {\n            this.pathFollowers[tubeIndex] = [];\n        }\n        this.pathFollowers[tubeIndex].push(pathItem);\n    }\n\n    get material() {\n        return this.materials[0];\n    }\n\n    setAllUniforms(prop: string, value: any) {\n        this.materials.forEach((material, index) => {\n            (material as any).uniforms[prop].value = value;\n        });\n    }\n\n    getPathFollowers(tubeIndex: number) {\n        return this.pathFollowers[tubeIndex];\n    }\n\n    getNulls(tubeIndex: number) {\n        return this.tubes[tubeIndex].nulls;\n    }\n}","/*\nCity data type that packages the name with long/lat data\n */\n\nexport class City {\n\n    public name: string;\n    public latitude: number;\n    public longitude: number;\n\n    constructor(name: string, lat: number, long: number) {\n        this.name = name;\n        this.latitude = lat;\n        this.longitude = long;\n    }\n}\n","/*\nCity Manager that imports, defines and gives access to all city location data.\n */\n\nimport {City} from \"./city\";\nimport {loadJSON} from \"../global/utils\";\nimport {state} from \"../global/state\";\nimport {ASSETS_3D} from \"../global/constants\";\n\nexport const citiesKey: {[key: string]: City} = {};\nexport const CITY_KERIYA = 'Keriya';\nexport const CITY_SONGEA = 'Songea';\nexport const CITY_LILONGWE  = \"Lilongwe\";\nexport const CITY_WISNER = 'wisner';\nexport const CITY_KC = 'Kansas City';\nexport const CITY_CHICAGO = 'Chicago';\nexport const CITY_CHARLOTTE = 'Charlotte';\nexport const CITY_QUEBEC = 'Quebec';\nexport const CITY_TORONTO = 'Toronto';\nexport const CITY_NYC = 'New York';\nexport const CITY_OUTER_QUEBEC = 'Outer Quebec';\nexport const CITY_BARCELONA = 'Barcelona';\nexport const CITY_LONDON = 'London';\nexport const CITY_AMSTERDAM = 'Amsterdam';\nexport const CITY_BERLIN = 'Berlin';\nexport const CITY_OSLO = 'Oslo';\nexport const CITY_PARIS = 'Paris';\nexport const CITY_VIENNA = 'Vienna';\nexport const CITY_DUBLIN = 'Dublin';\nexport const CITY_GLASGOW = 'Glasgow';\nexport const CITY_EDINBURGH = 'Edinburgh';\nexport const CITY_HAMBURG = 'Hamburg';\nexport const CITY_MUNICH = 'Munich';\nexport const CITY_PRAGUE = 'Prague';\nexport const CITY_MADRID = 'Madrid';\nexport const CITY_LISBON = 'Lisbon';\nexport const CITY_COPENHAGEN = 'Copenhagen';\nexport const CITY_MILAN = 'Milan';\nexport const CITY_ZURICH = 'Zurich';\nexport const CITY_COLOGNE = 'Cologne';\nexport const CITY_BRUSSELS = 'Brussels';\nexport const CITY_STOCKHOLM = 'Stockholm';\nexport const CITY_ROME= 'Rome';\nexport const CITY_ZAGREB = 'Zagreb';\nexport const CITY_BUDAPEST = 'Budapest';\nexport const CITY_NAPLES = 'Naples';\nexport const CITY_BUCHAREST = 'Bucharest';\nexport const CITY_WARSAW = 'Warsaw';\nexport const CITY_MARSEILLE = 'Marseille';\nexport const CITY_HELSINKI = 'Helsinki';\nexport const CITY_ATHENS = 'Athens';\nexport const CITY_TIRANA = 'Tirana';\nexport const CITY_SOFIA = 'Sofia';\nexport const CITY_BELGRADE = 'Belgrade';\nexport const CITY_ISTANBUL = 'Istanbul';\nexport const CITY_MALAGA = 'Malaga';\nexport const CITY_SHANGHAI = 'Shanghai';\nexport const CITY_CHENGDU = 'Chengdu';\nexport const CITY_XIAOJIN = 'Xiaojin';\nexport const CITY_ZHENGZHOU = 'Zhengzhou';\nexport const CITY_HENGYANG = 'Hengyang';\nexport const CITY_CHONGQING = 'Chongqing';\nexport const CITY_XIAN = 'Xian';\nexport const CITY_HONG_KONG = 'Hong Kong';\nexport const CITY_SAO_PAULO = 'Sao Paulo';\nexport const CITY_MEXICO_CITY = 'Mexico City';\nexport const CITY_BUENOS_AIRES = 'Buenos Aires';\nexport const CITY_MIAMI = 'Miami';\nexport const CITY_LOS_ANGELES = 'Los Angeles';\nexport const CITY_SANTIAGO = 'Santiago';\nexport const CITY_LIMA = 'Lima';\nexport const CITY_DALLAS = 'Dallas';\nexport const CITY_WINNIPEG = 'Winnipeg';\nexport const CITY_HOUSTON = 'Houston';\nexport const CITY_CALGARY = 'Calgary';\nexport const CITY_WASHINGTON = 'Washington';\nexport const CITY_PANAMA_CITY = 'Panama City';\nexport const CITY_ATLANTA = 'Atlanta';\nexport const CITY_MONTREAL = 'Montreal';\nexport const CITY_SAN_JOSE = 'San Jose';\nexport const CITY_LA_PAZ = 'La Paz';\nexport const CITY_BOGOTA = 'Bogota';\nexport const CITY_BELEM = 'Belem';\nexport const CITY_HAVANA = 'Havana';\nexport const CITY_CARACAS = 'Caracas';\nexport const CITY_FORTALEZA = 'Fortaleza';\nexport const CITY_CORDOBA = 'Cordoba';\nexport const CITY_BRASILIA = 'Brasilia';\nexport const CITY_DAKAR = 'Dakar';\nexport const CITY_SALVADOR = 'Salvador';\nexport const CITY_RABAT = 'Rabat';\nexport const CITY_MOSCOW = 'Moscow';\nexport const CITY_KAMPALA = 'Kampala';\nexport const CITY_CAPE_TOWN = 'Cape Town';\nexport const CITY_CAIRO = 'Cairo';\nexport const CITY_BANGUI = 'Bangui';\nexport const CITY_LUANDA = 'Luanda';\nexport const CITY_KHARTOUM = 'Khartoum';\nexport const CITY_TRIPOLI = 'Tripoli';\nexport const CITY_BRAZZAVILLE = 'Brazzaville';\nexport const CITY_BAMAKO = 'Bamako';\nexport const CITY_NIAMEY = 'Niamey';\nexport const CITY_ALEXANDRIA = 'Alexandria';\nexport const CITY_NOUAKCHOTT = 'Nouakchott';\nexport const CITY_ABUJA = 'Abuja';\nexport const CITY_VANCOUVER = 'Vancouver';\nexport const CITY_DENVER = 'Denver';\nexport const CITY_SAN_FRANCISCO = 'San Francisco';\nexport const CITY_SAN_ANTONIO = 'San Antonio';\nexport const CITY_MANAUS = 'Manaus';\nexport const CITY_MONTEVIDEO = 'Montevideo';\nexport const CITY_CUIABA = 'Cuiaba';\nexport const CITY_MOGADISHU = 'Mogadishu';\nexport const CITY_NAIROBI = 'Nairobi';\nexport const CITY_LOME = 'Lome';\nexport const CITY_MAPUTO = 'Maputo';\nexport const CITY_LUSAKA = 'Lusaka';\nexport const CITY_ALGIERS = 'Algiers';\nexport const CITY_NDJAMENA = 'NDjamena';\nexport const CITY_TAMENTIT = 'Tamentit';\nexport const CITY_LUBUMBASHI = 'Lubumbashi';\nexport const CITY_JOHANNESBURG = 'Johannesburg';\nexport const CITY_RIGA = 'Riga';\nexport const CITY_ADDIS_ABABA = 'Addis Ababa';\nexport const CITY_BAGHDAD = 'Baghdad';\nexport const CITY_NEW_DELHI = 'New Delhi';\nexport const CITY_MUMBAI = 'Mumbai';\nexport const CITY_ASHGABAT  = 'Ashgabat';\nexport const CITY_BISHKEK = 'Bishkek';\nexport const CITY_URUMQI = 'Urumqi';\nexport const CITY_KIEV = 'Kiev';\nexport const CITY_KERMAN = 'Kerman';\nexport const CITY_ADEN = 'Aden';\nexport const CITY_PERM = 'Perm';\nexport const CITY_BEIJING = 'Beijing';\nexport const CITY_BANGKOK = 'Bangkok';\nexport const CITY_DHAKA = 'Dhaka';\nexport const CITY_TOKYO = 'Tokyo';\nexport const CITY_TAIPEI = 'Taipei';\nexport const CITY_NANJING = 'Nanjing';\nexport const CITY_KRASNOYARSK = 'Krasnoyarsk';\nexport const CITY_OMSK = 'Omsk';\nexport const CITY_KUALA_LUMPUR = 'Kuala Lumpur, Malaysia';\nexport const CITY_BANGALORE = 'Bangalore, India';\nexport const CITY_CHENNAI = 'Chennai, India';\nexport const CITY_NINGXIA = 'Ningxia, China';\nexport const CITY_BAHRAIN = 'Bahrain';\nexport const CITY_ISLAMABAD = 'Islamabad';\nexport const CITY_JAKARTA = 'Jakarta';\nexport const CITY_PERTH = 'Perth';\nexport const CITY_BRISBANE = 'Brisbane';\nexport const CITY_MELBOURNE = 'Melbourne';\nexport const CITY_IRKUTSK = 'Irkutsk';\nexport const CITY_PYONGYANG = 'Pyongyang';\nexport const CITY_HONOLULU = 'Honolulu';\nexport const CITY_AUCKLAND = 'Auckland';\nexport const CITY_SYDNEY = 'Sydney';\nexport const CITY_ISAAC = 'Isaac';\nexport const CITY_LAWN_HILL = 'Lawn Hill';\nexport const CITY_MABEL_CREEK = 'Mabel Creek';\nexport const CITY_TELFER = 'Telfer';\nexport const CITY_KAIRUKU_HIRI = 'Kairuku-Hiri';\nexport const CITY_SERAM_ISLAND = 'Seram Island';\nexport const CITY_SOUTH_SULAWESI = 'South Sulawesi';\nexport const CITY_BELAGA = 'District Belaga';\nexport const CITY_BINH_PHUOC = 'Binh Phuoc';\nexport const CITY_LAMON_BAY = 'Lamon Bay';\nexport const CITY_LANG_SON = 'Lng Son';\nexport const CITY_WEST_PAPAU = 'West Papau';\n\nexport class Cities{\n\n    public cn: any;\n    public filecoin: any;\n    public loaded: boolean;\n\n    constructor() {\n        this.addCity(CITY_KERIYA, 39.192981, 90.798783);\n        this.addCity(CITY_SONGEA, -10.649220, 35.641817);\n        this.addCity(CITY_WISNER, 40.919835, -91.823537);\n        this.addCity(CITY_OUTER_QUEBEC, 49.0827035,-79.8104387);\n        this.addCity(CITY_XIAOJIN, 31.216362, 101.155618);\n        this.addCity(CITY_TAMENTIT, 27.877672, 0.646661);\n    }\n\n    public addCities(data: any) {\n        for (let i = 0; i < data.length; i++) {\n            this.addCity(data[i].name, data[i].latitude, data[i].longitude);\n        }\n    }\n\n    public async load() {\n        const assets3d = state.getValue(ASSETS_3D);\n        this.cn = await loadJSON(assets3d.city_data_cn);\n        this.filecoin = await loadJSON(assets3d.city_data_fc);\n        return new Promise(resolve => {\n            if (this.loaded) {\n                resolve();\n                return;\n            }\n            this.addCities(this.cn);\n            this.addCities(this.filecoin);\n            resolve();\n        });\n    }\n\n    public addCity(name: string, lat: number, long: number) {\n        const city: City = new City(name, lat, long);\n        citiesKey[city.name] = city;\n        return city;\n    }\n}\nexport const cities = new Cities();","import Emitter from \"@hellomonday/emitter\";\nimport {gsap} from \"gsap\";\n\nexport const ANIMATION_DONE = 'animation_done';\n\nexport class Spritesheet extends Emitter{\n\n    public element: HTMLElement;\n    public duration: number;\n    private url: string;\n    private spriteWidth: number;\n    private spriteHeight: number;\n    private totalFrames: number;\n    private totalWidth: number;\n\n    constructor(element: HTMLElement) {\n        super();\n        this.element = element;\n        this.url = this.element.getAttribute('data-src');\n        this.spriteWidth = parseInt(this.element.getAttribute('data-spritesheet-width'));\n        this.spriteHeight = parseInt(this.element.getAttribute('data-spritesheet-height'));\n        this.totalFrames = parseInt(this.element.getAttribute('data-spritesheet-frames'));\n        this.element.style.backgroundImage = \"url('\"+ this.url +\"')\";\n        this.element.style.backgroundSize = (this.spriteWidth * this.totalFrames) + \"px \" + this.spriteHeight + \"px\";\n        this.element.style.width = this.spriteWidth + 'px';\n        this.element.style.height = this.spriteHeight + 'px';\n        this.totalWidth = (this.totalFrames - 1) * this.spriteWidth;\n        this.duration = this.totalFrames / 30;\n    }\n\n    play(delay: number = 0, speed: number = null, repeat: number = 0, onComplete: Function = null) {\n        if (speed) {\n            this.duration = speed;\n        }\n        gsap.set(this.element, {delay: delay, backgroundPosition: '0'});\n        gsap.to(this.element, this.duration, {\n            repeat: repeat,\n            backgroundPosition: (\"-\"+ this.totalWidth+ \"px\"),\n            ease: 'steps('+ (this.totalFrames - 1) +')',\n            delay: delay,\n            onComplete: () => {\n                if (onComplete) {\n                    onComplete();\n                }\n            }\n        });\n    }\n\n    reset() {\n        gsap.killTweensOf(this.element);\n        gsap.set(this.element, {backgroundPosition: '0'});\n    }\n}","const vertex = `\n    uniform float isGlobeParticles;\n    uniform float dpr;\n    uniform float globalAlpha;\n    attribute float alpha;\n    attribute float random;\n    varying float vAlpha;\n    \n    float map(float value, float min1, float max1, float min2, float max2) {\n      return min2 + (value - min1) * (max2 - min2) / (max1 - min1);\n    }\n    \n    void main() {\n        vec4 mvPosition = modelViewMatrix * vec4(position, 1.0);\n        vec4 worldPosition = modelMatrix * vec4(position, 1.0);\n           \n        // Adjust particle alpha for Z depth\n        float dAlpha = step(0., worldPosition.z);\n        vAlpha = mix(1., dAlpha, isGlobeParticles);\n        \n        // Adjust particles to fade in staggered\n        float minAlphaIn = random * .5;\n        float maxAlphaIn = minAlphaIn + .5;\n        vAlpha = map(globalAlpha, minAlphaIn, maxAlphaIn, 0., 1.) * vAlpha;\n        vAlpha = clamp(vAlpha, 0., 1.);\n                   \n        // Size of particle\n        float dSize = worldPosition.z / 30. + .01;\n        float maxScale = 1.3;\n        float startScale = .7;\n        float scaleUp = clamp(map(vAlpha, 0., startScale, 0., maxScale), 0., maxScale);\n        float scaleDown = clamp(map(vAlpha, startScale, 1., maxScale, 1.), maxScale, 1.);\n        float scale = mix(scaleUp, scaleDown, step(startScale, vAlpha));\n        \n        gl_PointSize = (mix(5., dSize, isGlobeParticles) * scale) * dpr;\n        gl_Position = projectionMatrix * mvPosition;\n    }\n`;\nconst fragment = `\n    uniform sampler2D texture;\n    uniform vec3 color;\n    varying float vGlobalAlpha;\n    varying float vAlpha;\n    \n    void main() {\n        gl_FragColor = vec4( color, vAlpha );\n        gl_FragColor = gl_FragColor * texture2D( texture, gl_PointCoord );\n    }\n`;\n\n\nexport default {vertex, fragment};\n","/*\nUsed for creating particle clouds and single particles that you can attach sprites to.\n */\n\nimport {\n    BufferAttribute,\n    BufferGeometry,\n    Color,\n    Object3D, Points,\n    ShaderMaterial,\n    Texture,\n    Vector3\n} from \"three\";\nimport {gsap} from \"gsap\";\nimport ParticleShader from './shaders/ParticleShader';\nimport {loadTexture, projectVector} from \"../global/utils\";\nimport {camera, hero3d, scene} from \"./hero3d\";\nimport {Window} from \"../global/window\";\nimport Sprite2d from \"./sprite2d\";\nimport coordPos from \"@hellomonday/coord-pos\";\nimport {City} from \"./city\";\nimport {ASSETS_3D, DAY, GLOBE_RADIUS_FAR, TIME_OF_DAY} from \"../global/constants\";\nimport * as THREE from \"three\";\nimport {state} from \"../global/state\";\n\nexport class ParticleItem {\n    public id: string;\n    public position: Vector3;\n    constructor(id: string, position: Vector3 = null) {\n        this.id = id;\n        this.position = position;\n    }\n}\n\nexport class ParticleCityItem extends ParticleItem {\n    public city: City;\n    constructor(city: City, zPosition: number = GLOBE_RADIUS_FAR) {\n        super(city.name, new Vector3(...coordPos(city.latitude, city.longitude, zPosition)));\n        this.city = city;\n    }\n}\n\nexport default class Particles {\n    public material: ShaderMaterial;\n    private indicesByName: any = {};\n    private attachedSprites: any = {};\n    private cloud: Points;\n    private positionAttributes: BufferAttribute;\n    private geometry: BufferGeometry;\n\n    constructor(particleItems: Array<ParticleItem>, particleColor: number, container: Object3D,\n                isGlobeParticles: boolean = true, particleType: string = state.getValue(ASSETS_3D).spot_texture_url) {\n\n        this.geometry = new BufferGeometry();\n        let positions = new Float32Array(particleItems.length * 3);\n        this.positionAttributes = new BufferAttribute(positions, 3);\n        this.geometry.setAttribute('position', this.positionAttributes);\n\n        let alpha = new Float32Array(particleItems.length);\n        this.geometry.setAttribute('alpha', new BufferAttribute(alpha, 1));\n\n        let random = new Float32Array(particleItems.length);\n        this.geometry.setAttribute('random', new BufferAttribute(random, 1));\n\n        let uniforms = {\n            color: { value: new Color( particleColor ) },\n            texture: {type: \"t\", value: new Texture()},\n            globalAlpha: {type: \"f\", value: 0},\n            dpr: {type: \"f\", value: hero3d.dpr},\n            isGlobeParticles: {type: \"f\", value: isGlobeParticles}\n        };\n\n        // point cloud material\n        this.material = new ShaderMaterial( {\n            uniforms: uniforms,\n            vertexShader: ParticleShader.vertex,\n            fragmentShader: ParticleShader.fragment,\n            transparent: true,\n            fog: false,\n            depthWrite: false,\n            depthTest: false\n        });\n\n        this.cloud = new Points( this.geometry, this.material );\n        this.cloud.visible = false;\n        container.add(this.cloud);\n\n        for (let i = 0; i < particleItems.length; i++) {\n            const particleItem = particleItems[i];\n            this.geometry.attributes.position.setXYZ(i, particleItem.position.x, particleItem.position.y, particleItem.position.z);\n            this.geometry.attributes.random.setX(i, Math.random());\n            this.geometry.attributes.alpha.setX(i, 1);\n            this.indicesByName[particleItem.id] = i;\n        }\n\n        loadTexture(particleType).then(value => {\n           this.material.uniforms.texture.value = value;\n        });\n    }\n\n    public attachSprite2d(sprite2d: Sprite2d, particleItemId: string = null, spriteId: string = null) {\n        const index = particleItemId ? this.indicesByName[particleItemId] : 0;\n        const id = spriteId ? spriteId : 'sprite' + Object.keys(this.attachedSprites).length;\n        this.attachedSprites[id] = {sprite: sprite2d, particleIndex: index};\n    }\n\n    public getSprite(spriteId: string = null): Sprite2d {\n        if (spriteId) {\n            return this.attachedSprites[spriteId].sprite;\n        } else {\n            return this.attachedSprites[Object.keys(this.attachedSprites)[0]].sprite;\n        }\n    }\n\n    public animateIn(speed: number = 1, delay: number = 0, withSprites: boolean = false) {\n        gsap.to(this.material.uniforms.globalAlpha, speed, {value: 1, delay: delay, ease: 'none', onStart: () => {\n                this.cloud.visible = true;\n            }});\n        if (withSprites) {\n            this.animateInSprites(speed, delay);\n        }\n        this.blending = state.getValue(TIME_OF_DAY) == DAY ? false : true;\n    }\n\n    public animateInSprites(speed: number = 1, delay: number = 0) {\n        Object.keys(this.attachedSprites).forEach( (id) => {\n            this.attachedSprites[id].sprite.animateIn(speed, delay);\n        });\n    }\n\n    public animateOut(speed: number = 1, delay: number = 0, withSprites: boolean = false) {\n        gsap.to(this.material.uniforms.globalAlpha, speed, {value: 0, delay: delay, ease: 'none', onComplete: () => {\n            this.cloud.visible = false;\n            }});\n        if (withSprites) {\n            this.animateOutSprites(speed, delay);\n        }\n    }\n\n    public animateOutSprites(speed: number = 1, delay: number = 0) {\n        Object.keys(this.attachedSprites).forEach( (id) => {\n            this.attachedSprites[id].sprite.animateOut(speed, delay);\n        });\n    }\n\n    public set blending(value: boolean) {\n        if (value) {\n            this.material.blending = THREE.CustomBlending;\n            this.material.blendSrc = THREE.SrcAlphaFactor;\n            this.material.blendDst = THREE.DstAlphaFactor;\n            this.material.blendEquation = THREE.AddEquation;\n            this.material.premultipliedAlpha = true;\n        } else {\n            this.material.blending = THREE.NormalBlending;\n            this.material.premultipliedAlpha = false;\n        }\n        this.material.needsUpdate = true;\n    }\n\n    public render() {\n        Object.keys(this.attachedSprites).forEach( (id) => {\n            let attachedSprite = this.attachedSprites[id];\n            let sprite2d = attachedSprite.sprite;\n            if (sprite2d.element.style.display == 'block' || sprite2d.needsUpdate) {\n                const index = attachedSprite.particleIndex;\n                const position = this.geometry.attributes.position;\n                const localPos = new Vector3(position.getX(index), position.getY(index), position.getZ(index));\n                const worldPosition = this.cloud.localToWorld(localPos);\n                const coord2d = projectVector(worldPosition, camera, Window.width, Window.height);\n                gsap.set(sprite2d.element, {x: coord2d.x - sprite2d.xOffset, y: coord2d.y - sprite2d.yOffset});\n                sprite2d.needsUpdate = false;\n            }\n        });\n        this.material.uniforms.dpr.value = hero3d.dpr;\n    }\n\n    public reset(delay: number = 0) {\n        gsap.set(this.material.uniforms.globalAlpha, {value: 0, delay: delay});\n    }\n}","/*\nA 2d dom element (icon). These are always attached to a 3d point in space.\n */\n\nimport {gsap} from \"gsap\";\nimport {preload} from \"../global/preload\";\nimport {audioController} from \"../global/audioController\";\n\nexport default class Sprite2d {\n    public element: HTMLElement;\n    public verticalLine: HTMLElement;\n    public textField: HTMLElement;\n    public width: number;\n    public height: number;\n    public xOffset: number = 0;\n    public yOffset: number = 0;\n    public needsUpdate: boolean;\n    private animatedIn: boolean;\n    private soundIn: string;\n    private soundOut: string;\n    private initHeight: number;\n    private _scale: number = 1;\n    private _pinHeight = 0;\n    private id: string;\n\n    constructor(element: HTMLElement, id: string = null, soundIn: string = null, soundOut: string = null) {\n        this.id = id;\n        this.soundIn = soundIn;\n        this.soundOut = soundOut;\n        this.element = element.parentElement.appendChild(element.cloneNode(true)) as HTMLElement;\n        this.verticalLine = this.element.querySelector('.vertical-line');\n        this.textField = this.element.querySelector('.text-field .text');\n    }\n\n    layout() {\n        const style = getComputedStyle(this.element);\n        this.width =  parseInt(style.width, 10);\n        this.height = parseInt(style.height, 10);\n        if (!this.initHeight) {\n            this.initHeight = this.height;\n        }\n        this.xOffset = this.width / 2;\n        this.yOffset = this.verticalLine ? 0 : this.height / 2;\n        this._pinHeight = this.height;\n    }\n\n    set scale(scale: number) {\n        this._scale = scale;\n    }\n\n    get scale() {\n        return this._scale;\n    }\n\n    animateIn(speed: number = 1, delay: number = 0) {\n        this.layout();\n        this.needsUpdate = true;\n\n        const onStart = (speed: number) => {\n            if (this.soundIn && speed > 0 && !this.animatedIn) {\n                audioController.play(this.soundIn);\n            }\n            this.animatedIn = true;\n        }\n\n        if (this.verticalLine || this.textField) {\n            gsap.to(this.element, speed, {delay: delay, opacity: 1, display: 'block',\n                onStart: onStart, onStartParams: [speed]});\n        } else {\n            gsap.set(this.element, {scale: .2, delay: delay})\n            gsap.to(this.element, speed, {delay: delay, opacity: 1, scale: this.scale, display: 'block', ease: 'Back.easeOut',\n                onStart: onStart, onStartParams: [speed]});\n        }\n    }\n\n    animateOut(speed: number = 1, delay: number = 0) {\n\n        const onStart = (speed: number) => {\n            if (this.soundOut && speed > 0 && this.animatedIn) {\n                audioController.play(this.soundOut);\n            }\n            this.animatedIn = false;\n        }\n\n        if (this.verticalLine || this.textField) {\n            gsap.to(this.element, speed, {delay: delay, opacity: 0, display: 'none',\n                onStart: onStart, onStartParams: [speed]} );\n        } else {\n            gsap.to(this.element, speed, {delay: delay, opacity: 0, scale: .2, display: 'none', ease: 'Back.easeOut',\n                onStart: onStart, onStartParams: [speed]});\n        }\n    }\n\n    pulse(speed: number = 1, delay: number = 0) {\n        gsap.set(this.element, {scale: .5, delay: delay})\n        gsap.to(this.element, speed, {delay: delay, opacity: 1, scale: this.scale, display: 'block', ease: 'Back.easeOut'});\n    }\n\n    set pinHeight(height: number) {\n        this._pinHeight = height;\n        this.element.style.height = height + 'px';\n        this.element.style.marginTop = (-height) + 'px';\n    }\n\n    get pinHeight() {\n        return this._pinHeight;\n    }\n\n    reset(delay: number = 0) {\n        if (this.verticalLine) {\n            gsap.set(this.verticalLine, {clearProps:\"all\", delay: delay});\n            this.pinHeight = this.initHeight;\n        }\n    }\n\n    setText(label: string) {\n        if (this.textField) {\n            this.textField.innerText = label;\n        }\n        return this;\n    }\n}","import Emitter from \"@hellomonday/emitter\";\n\nexport class Preload extends Emitter{\n    public loadImage(image: HTMLElement) {\n        let dataSrc = image.getAttribute('data-src');\n        if (!dataSrc) dataSrc = image.getAttribute('data-source');\n        if (!dataSrc) { return; }\n        return new Promise(resolve => {\n            const imgEl = new Image();\n            imgEl.onload = () => {\n                image.setAttribute('src', dataSrc);\n                image.setAttribute('loaded', 'true');\n                resolve();\n            };\n            const isLoaded = image.getAttribute('loaded');\n            if (isLoaded != 'true') {\n                imgEl.setAttribute('src', dataSrc);\n            } else {\n                resolve();\n            }\n        });\n    }\n}\nexport const preload = new Preload();\n","/*\nFactory that creates all Paths, Spritesheets, 2d sprites, etc used in the 3d experience.\n */\n\nimport Paths, {PATH_TYPE_LINE} from \"./paths\";\nimport {\n    cities,\n    citiesKey,\n    CITY_ABUJA,\n    CITY_ADDIS_ABABA,\n    CITY_ADEN,\n    CITY_ALEXANDRIA,\n    CITY_ALGIERS,\n    CITY_AMSTERDAM,\n    CITY_ASHGABAT,\n    CITY_ATHENS,\n    CITY_ATLANTA,\n    CITY_AUCKLAND,\n    CITY_BAGHDAD,\n    CITY_BAHRAIN,\n    CITY_BAMAKO,\n    CITY_BANGALORE,\n    CITY_BANGKOK,\n    CITY_BANGUI,\n    CITY_BARCELONA,\n    CITY_BEIJING, CITY_BELAGA,\n    CITY_BELEM,\n    CITY_BELGRADE,\n    CITY_BERLIN, CITY_BINH_PHUOC,\n    CITY_BISHKEK,\n    CITY_BOGOTA,\n    CITY_BRASILIA,\n    CITY_BRAZZAVILLE,\n    CITY_BRISBANE,\n    CITY_BRUSSELS,\n    CITY_BUCHAREST,\n    CITY_BUDAPEST,\n    CITY_BUENOS_AIRES,\n    CITY_CAIRO,\n    CITY_CALGARY,\n    CITY_CAPE_TOWN,\n    CITY_CARACAS,\n    CITY_CHARLOTTE,\n    CITY_CHENGDU,\n    CITY_CHENNAI,\n    CITY_CHICAGO,\n    CITY_CHONGQING,\n    CITY_COLOGNE,\n    CITY_COPENHAGEN,\n    CITY_CORDOBA,\n    CITY_CUIABA,\n    CITY_DAKAR,\n    CITY_DALLAS,\n    CITY_DENVER,\n    CITY_DHAKA,\n    CITY_DUBLIN,\n    CITY_EDINBURGH,\n    CITY_FORTALEZA,\n    CITY_GLASGOW,\n    CITY_HAMBURG,\n    CITY_HAVANA,\n    CITY_HELSINKI,\n    CITY_HENGYANG,\n    CITY_HONG_KONG,\n    CITY_HONOLULU,\n    CITY_HOUSTON,\n    CITY_IRKUTSK, CITY_ISAAC,\n    CITY_ISLAMABAD,\n    CITY_ISTANBUL,\n    CITY_JAKARTA,\n    CITY_JOHANNESBURG, CITY_KAIRUKU_HIRI,\n    CITY_KAMPALA,\n    CITY_KC,\n    CITY_KERIYA,\n    CITY_KERMAN,\n    CITY_KHARTOUM,\n    CITY_KIEV,\n    CITY_KRASNOYARSK,\n    CITY_KUALA_LUMPUR,\n    CITY_LA_PAZ, CITY_LAMON_BAY, CITY_LANG_SON, CITY_LAWN_HILL,\n    CITY_LILONGWE,\n    CITY_LIMA,\n    CITY_LISBON,\n    CITY_LOME,\n    CITY_LONDON,\n    CITY_LOS_ANGELES,\n    CITY_LUANDA,\n    CITY_LUBUMBASHI,\n    CITY_LUSAKA, CITY_MABEL_CREEK,\n    CITY_MADRID,\n    CITY_MALAGA,\n    CITY_MANAUS,\n    CITY_MAPUTO,\n    CITY_MARSEILLE,\n    CITY_MELBOURNE,\n    CITY_MEXICO_CITY,\n    CITY_MIAMI,\n    CITY_MILAN,\n    CITY_MOGADISHU,\n    CITY_MONTEVIDEO,\n    CITY_MONTREAL,\n    CITY_MOSCOW,\n    CITY_MUMBAI,\n    CITY_NAIROBI,\n    CITY_NANJING,\n    CITY_NAPLES,\n    CITY_NDJAMENA,\n    CITY_NEW_DELHI,\n    CITY_NIAMEY,\n    CITY_NINGXIA,\n    CITY_NOUAKCHOTT,\n    CITY_NYC,\n    CITY_OMSK,\n    CITY_OSLO,\n    CITY_OUTER_QUEBEC,\n    CITY_PANAMA_CITY,\n    CITY_PARIS,\n    CITY_PERM,\n    CITY_PERTH,\n    CITY_PRAGUE,\n    CITY_PYONGYANG,\n    CITY_QUEBEC,\n    CITY_RABAT,\n    CITY_RIGA,\n    CITY_ROME,\n    CITY_SALVADOR,\n    CITY_SAN_ANTONIO,\n    CITY_SAN_FRANCISCO,\n    CITY_SAN_JOSE,\n    CITY_SANTIAGO,\n    CITY_SAO_PAULO, CITY_SERAM_ISLAND,\n    CITY_SHANGHAI,\n    CITY_SOFIA,\n    CITY_SONGEA, CITY_SOUTH_SULAWESI,\n    CITY_STOCKHOLM, CITY_SYDNEY,\n    CITY_TAIPEI,\n    CITY_TAMENTIT, CITY_TELFER,\n    CITY_TIRANA,\n    CITY_TOKYO,\n    CITY_TORONTO,\n    CITY_TRIPOLI,\n    CITY_URUMQI,\n    CITY_VANCOUVER,\n    CITY_VIENNA,\n    CITY_WARSAW,\n    CITY_WASHINGTON, CITY_WEST_PAPAU,\n    CITY_WINNIPEG,\n    CITY_WISNER,\n    CITY_XIAN,\n    CITY_XIAOJIN,\n    CITY_ZAGREB,\n    CITY_ZHENGZHOU,\n    CITY_ZURICH\n} from \"./cities\";\nimport {\n    COLOR_BLUE,\n    COLOR_BLUE_RGBA,\n    COLOR_ORANGE,\n    COLOR_ORANGE_RGBA,\n    COLOR_PURPLE_RGBA,\n    COLOR_WHITE,\n    GLOBE_RADIUS_CLOSE,\n    ICON_CLIENT,\n    ICON_COIN_SPIN,\n    ICON_DOC,\n    ICON_DOC_BLACK,\n    ICON_PACKAGE,\n    ICON_REQUEST,\n    ICON_MINER,\n    TEXT_FIELD,\n    ICON_MINER_ORANGE,\n    ICON_QUESTION_IN,\n    ICON_QUESTION_TO_CHECK,\n    ICON_CHECK_TO_BLOCK,\n    ICON_BLOCK_OUT,\n    ICON_BLOCK_APPROVED,\n    ICON_BLOCK_DECLINED,\n    LOCALE_CHINESE,\n    COLOR_WHITE_RGBA,\n    COLOR_BLACK,\n    COLOR_GRAY_BLUE_RGBA,\n    LANG_CODE\n} from \"../global/constants\";\nimport {Mesh, MeshBasicMaterial, SphereGeometry, Vector3, Vector4} from \"three\";\nimport {cityContainer, cityScene} from \"./cityScene\";\nimport {Spritesheet} from \"../global/spritesheet\";\nimport {reversePath} from \"../global/utils\";\nimport Particles, {ParticleCityItem, ParticleItem} from \"./Particles\";\nimport Sprite2d from \"./sprite2d\";\nimport {City} from \"./city\";\nimport {hero3d} from \"./hero3d\";\nimport * as THREE from \"three\";\nimport {preload} from \"../global/preload\";\nimport {\n    AUDIO_CA1,\n    AUDIO_CA2,\n    AUDIO_CA3, AUDIO_COIN,\n    AUDIO_CW, AUDIO_DLT1, AUDIO_DLT2, AUDIO_DLT3, AUDIO_FS1, AUDIO_FS2, AUDIO_FW1, AUDIO_FW3, AUDIO_LW1, AUDIO_LW2,\n    AUDIO_MA,\n    AUDIO_MW,\n    AUDIO_PW1,\n    AUDIO_PW2, AUDIO_SL1, AUDIO_SL2, AUDIO_SL3, AUDIO_TA, AUDIO_TW1\n} from \"../global/audioController\";\n\nclass OverlayFactory {\n    public initialized: boolean;\n    public filecoinNetworkParticles: Particles;\n\n    // intro\n    public introAnimations: Array<any> = [];\n\n    //chap 1\n    public ch1_remoteUserPaths: Paths;\n    public ch1_fastTransferAfricaPaths: Paths;\n    public ch1_localTransferPaths: Paths;\n    public ch1_longCityTransferPaths: Paths;\n    public ch1_shortCityTransferPaths: Paths;\n    public ch1_minerTransferPaths: Paths;\n    public ch1_remoteUserFCAfrica2d: Sprite2d;\n    public ch1_cityUserLong2d: Sprite2d;\n    public ch1_cityStorageLong2d: Sprite2d;\n    public ch1_cityDocLong2d: Sprite2d;\n    public ch1_cityUserShort2d: Sprite2d;\n    public ch1_cityDocShort2d: Sprite2d\n    public ch1_cityStorageShort2d: Sprite2d;\n    public ch1_coinSpin2d: Sprite2d;\n    public ch1_coinSpritesheet: Spritesheet;\n    public ch1_remoteUserCNParticle: Particles;\n    public ch1_remoteUserFCAfricaParticle: Particles;\n    public ch1_remoteUserLocalTransferParticle: Particles;\n    public ch1_cnNetworkParticles: Particles;\n    public ch1_citySpotsParticles: Particles;\n    public ch1_cityMinerLongTransferParticles: Particles;\n    public ch1_cityMinerShortTransferParticles: Particles;\n    public ch1_coinSpinParticle: Particles;\n\n    //chap 2\n    public ch2_packageMinerPaths: Paths;\n    public ch2_packageChosenMinerPaths: Paths;\n    public ch2_cityPackageUser2d: Sprite2d;\n    public ch2_cityPackageDoc2d: Sprite2d;\n    public ch2_globePackageDoc2d: Sprite2d;\n    public ch2_globeClient2d: Sprite2d;\n    public ch2_cityPackageParticles: Particles;\n    public ch2_packageMinerParticles: Particles;\n    public ch2_packageChosenMinerParticles: Particles;\n    public ch2_packageUserParticles: Particles;\n\n    //chap 3\n    public ch3_minerTransferPathIn: Paths;\n    public ch3_serverTransferPathIn: Paths;\n    public ch3_serverTransferPathOut: Paths;\n    public ch3_cityMinerParticles: Particles;\n    public ch3_spritesheetParticles: Particles;\n    public ch3_questionInSpritesheet: Spritesheet;\n    public ch3_questionToCheckSpritesheet: Spritesheet;\n    public ch3_checkToBlockSpritesheet: Spritesheet;\n    public ch3_blockOutSpritesheet: Spritesheet;\n    public ch3_blockApprovedSpritesheet: Spritesheet;\n    public ch3_blockDeclinedSpritesheet: Spritesheet;\n    public ch3_coinSpritesheet: Spritesheet;\n\n    //chap 4\n    public ch4_minerPaymentPaths: Paths;\n    public ch4_minerPaymentPaths_reverse: Paths;\n    public ch4_globePaths1: Paths;\n    public ch4_globePaths2: Paths;\n    public ch4_globePaths3: Paths;\n    public ch4_globePaths4: Paths;\n    public ch4_globePaths5: Paths;\n    public ch4_globePaths6: Paths;\n    public ch4_coinSpritesheet: Spritesheet;\n    public ch4_clientParticles: Particles;\n    public ch4_chosenMinerParticles: Particles;\n    public ch4_newyorkParticles: Particles;\n    public ch4_minerParticles: Particles;\n    public ch4_miners1Particles: Particles;\n    public ch4_miners2Particles: Particles;\n    public ch4_miners3Particles: Particles;\n    public ch4_miners4Particles: Particles;\n    public ch4_clients1Particles: Particles;\n    public ch4_clients2Particles: Particles;\n    public ch4_clients3Particles: Particles;\n\n    // icons\n\n    private sprites2dElement = document.querySelector('.sprites2d');\n    private iconClient: HTMLElement;\n    private iconDoc: HTMLElement;\n    private iconDocBlack: HTMLElement;\n    private iconMiner: HTMLElement;\n    private iconPackage: HTMLElement;\n    private iconRequest: HTMLElement;\n    private iconCoinSpin : HTMLElement;\n    private iconTextField: HTMLElement;\n    private iconMinerOrange: HTMLElement;\n    private iconQuestionIn: HTMLElement;\n    private questionToCheck: HTMLElement;\n    private checkToBlock: HTMLElement;\n    private blockOut: HTMLElement;\n    private blockApproved: HTMLElement;\n    private blockDeclined: HTMLElement;\n\n    public async load() {\n        const sprites = Array.from(this.sprites2dElement.querySelectorAll('[data-src]'));\n        await Promise.all(sprites.map(async (sprite) => {\n            await preload.loadImage(sprite as HTMLImageElement);\n        }));\n    }\n\n    public init() {\n        this.iconClient = this.sprites2dElement.querySelector(ICON_CLIENT);\n        this.iconDoc = this.sprites2dElement.querySelector(ICON_DOC);\n        this.iconDocBlack = this.sprites2dElement.querySelector(ICON_DOC_BLACK);\n        this.iconMiner = this.sprites2dElement.querySelector(ICON_MINER);\n        this.iconMinerOrange = this.sprites2dElement.querySelector(ICON_MINER_ORANGE);\n        this.iconPackage = this.sprites2dElement.querySelector(ICON_PACKAGE);\n        this.iconRequest = this.sprites2dElement.querySelector(ICON_REQUEST);\n        this.iconCoinSpin = this.sprites2dElement.querySelector(ICON_COIN_SPIN);\n        this.iconTextField = this.sprites2dElement.querySelector(TEXT_FIELD);\n        this.iconQuestionIn = this.sprites2dElement.querySelector(ICON_QUESTION_IN);\n        this.questionToCheck = this.sprites2dElement.querySelector(ICON_QUESTION_TO_CHECK);\n        this.checkToBlock = this.sprites2dElement.querySelector(ICON_CHECK_TO_BLOCK);\n        this.blockOut = this.sprites2dElement.querySelector(ICON_BLOCK_OUT);\n        this.blockApproved = this.sprites2dElement.querySelector(ICON_BLOCK_APPROVED);\n        this.blockDeclined = this.sprites2dElement.querySelector(ICON_BLOCK_DECLINED);\n\n        this.initGlobeIntro();\n        this.initGlobeChapter1();\n        this.initCityChapter1();\n        this.initGlobeChapter2();\n        this.initCityChapter2();\n        this.initCityChapter3();\n        this.initCityChapter4();\n        this.initGlobeChapter4();\n        this.initialized = true;\n    }\n\n    public render() {\n        if (this.initialized) {\n            // Chapter 1\n            this.ch1_remoteUserCNParticle.render();\n            this.ch1_remoteUserFCAfricaParticle.render();\n            this.ch1_remoteUserLocalTransferParticle.render();\n            this.ch1_cityMinerLongTransferParticles.render();\n            this.ch1_cityMinerShortTransferParticles.render();\n            this.ch1_coinSpinParticle.render();\n            this.ch1_cnNetworkParticles.render();\n\n            // Chapter 2\n            this.ch2_cityPackageParticles.render();\n            this.ch2_packageUserParticles.render();\n            this.ch2_packageMinerParticles.render();\n            this.ch2_packageChosenMinerParticles.render();\n\n            // Chapter 3\n            this.ch3_cityMinerParticles.render();\n            this.ch3_spritesheetParticles.render();\n\n            // Chapter 4\n            this.ch4_clientParticles.render();\n            this.ch4_chosenMinerParticles.render();\n        }\n    }\n\n    public hideAll() {\n        for (let property in this) {\n            const instance = this[property] as any;\n            if (instance.animateOut) {\n                if(instance.animateOutSprites) {\n                    instance.animateOut(0, 0, true);\n                } else {\n                    instance.animateOut(0, 0);\n                }\n            }\n            if (instance.reset) {\n                instance.reset();\n            }\n        }\n    }\n\n    /*\n    Intro globe overlays\n     */\n    private initGlobeIntro() {\n        const pathSets = [\n            [\n                [citiesKey[CITY_VANCOUVER], citiesKey[CITY_LOS_ANGELES]],\n                [citiesKey[CITY_VANCOUVER], citiesKey[CITY_CALGARY]]\n            ],\n            [\n                [citiesKey[CITY_SAN_FRANCISCO], citiesKey[CITY_DENVER]],\n                [citiesKey[CITY_SAN_FRANCISCO], citiesKey[CITY_SAN_ANTONIO]],\n                [citiesKey[CITY_SAN_FRANCISCO], citiesKey[CITY_HONOLULU]],\n            ],\n            [\n                [citiesKey[CITY_NYC], citiesKey[CITY_AMSTERDAM]],\n                [citiesKey[CITY_NYC], citiesKey[CITY_BARCELONA]],\n                [citiesKey[CITY_NYC], citiesKey[CITY_ATHENS]]\n            ],\n            [\n                [citiesKey[CITY_HOUSTON], citiesKey[CITY_WINNIPEG]],\n                [citiesKey[CITY_HOUSTON], citiesKey[CITY_MIAMI]],\n            ],\n            [\n                [citiesKey[CITY_MEXICO_CITY], citiesKey[CITY_DALLAS]],\n                [citiesKey[CITY_MEXICO_CITY], citiesKey[CITY_LIMA]]\n            ],\n            [[citiesKey[CITY_CALGARY], citiesKey[CITY_WASHINGTON]]],\n            [\n                [citiesKey[CITY_CHICAGO], citiesKey[CITY_PANAMA_CITY]],\n                [citiesKey[CITY_CHICAGO], citiesKey[CITY_LOS_ANGELES]]\n            ],\n            [\n                [citiesKey[CITY_ATLANTA], citiesKey[CITY_MONTREAL]],\n                [citiesKey[CITY_ATLANTA], citiesKey[CITY_VANCOUVER]]\n            ],\n            [[citiesKey[CITY_SAN_JOSE], citiesKey[CITY_LA_PAZ]]],\n            [\n                [citiesKey[CITY_BOGOTA], citiesKey[CITY_LIMA]],\n                [citiesKey[CITY_BOGOTA], citiesKey[CITY_HAVANA]],\n            ],\n            [[citiesKey[CITY_HAVANA], citiesKey[CITY_CARACAS]]],\n            [[citiesKey[CITY_SANTIAGO], citiesKey[CITY_CUIABA]]],\n            [[citiesKey[CITY_FORTALEZA], citiesKey[CITY_CORDOBA]]],\n            [\n                [citiesKey[CITY_MONTEVIDEO], citiesKey[CITY_MANAUS]],\n                [citiesKey[CITY_MONTEVIDEO], citiesKey[CITY_SAO_PAULO]]\n            ],\n            [\n                [citiesKey[CITY_BRASILIA], citiesKey[CITY_BUENOS_AIRES]],\n                [citiesKey[CITY_BRASILIA], citiesKey[CITY_LIMA]],\n            ],\n            [[citiesKey[CITY_BELEM], citiesKey[CITY_DAKAR]]],\n            [\n                [citiesKey[CITY_SALVADOR], citiesKey[CITY_RABAT]],\n                [citiesKey[CITY_SALVADOR], citiesKey[CITY_DAKAR]]\n            ],\n            [\n                [citiesKey[CITY_GLASGOW], citiesKey[CITY_VIENNA]],\n                [citiesKey[CITY_GLASGOW], citiesKey[CITY_STOCKHOLM]]\n            ],\n            [[citiesKey[CITY_PARIS], citiesKey[CITY_BUDAPEST]]],\n            [[citiesKey[CITY_OSLO], citiesKey[CITY_MOSCOW]]],\n            [\n                [citiesKey[CITY_CAPE_TOWN], citiesKey[CITY_MAPUTO]],\n                [citiesKey[CITY_CAPE_TOWN], citiesKey[CITY_KAMPALA]]\n            ],\n            [\n                [citiesKey[CITY_LOME], citiesKey[CITY_NOUAKCHOTT]],\n                [citiesKey[CITY_LOME], citiesKey[CITY_NIAMEY]],\n                [citiesKey[CITY_LOME], citiesKey[CITY_RABAT]],\n            ],\n            [\n                [citiesKey[CITY_LUANDA], citiesKey[CITY_KHARTOUM]],\n                [citiesKey[CITY_LUANDA], citiesKey[CITY_MOGADISHU]]\n            ],\n            [\n                [citiesKey[CITY_TRIPOLI], citiesKey[CITY_TAMENTIT]],\n                [citiesKey[CITY_TRIPOLI], citiesKey[CITY_NDJAMENA]],\n            ],\n            [\n                [citiesKey[CITY_LISBON], citiesKey[CITY_ROME]],\n                [citiesKey[CITY_LISBON], citiesKey[CITY_ALGIERS]]\n            ],\n            [[citiesKey[CITY_NAIROBI], citiesKey[CITY_ALEXANDRIA]],],\n            [[citiesKey[CITY_LUBUMBASHI], citiesKey[CITY_JOHANNESBURG]],],\n            [\n                [citiesKey[CITY_RIGA], citiesKey[CITY_KIEV]],\n                [citiesKey[CITY_RIGA], citiesKey[CITY_BUCHAREST]]\n            ],\n            [[citiesKey[CITY_BAHRAIN], citiesKey[CITY_ISLAMABAD]],],\n            [\n                [citiesKey[CITY_ADDIS_ABABA], citiesKey[CITY_BAGHDAD]],\n                [citiesKey[CITY_ADDIS_ABABA], citiesKey[CITY_ISTANBUL]]\n            ],\n            [\n                [citiesKey[CITY_NEW_DELHI], citiesKey[CITY_MUMBAI]],\n                [citiesKey[CITY_NEW_DELHI], citiesKey[CITY_ASHGABAT]],\n                [citiesKey[CITY_NEW_DELHI], citiesKey[CITY_BISHKEK]],\n                [citiesKey[CITY_NEW_DELHI], citiesKey[CITY_URUMQI]]\n            ],\n            [[citiesKey[CITY_KERMAN], citiesKey[CITY_ADEN]]],\n            [[citiesKey[CITY_OSLO], citiesKey[CITY_PERM]]],\n            [\n                [citiesKey[CITY_SHANGHAI], citiesKey[CITY_BEIJING]],\n                [citiesKey[CITY_SHANGHAI], citiesKey[CITY_XIAN]],\n            ],\n            [\n                [citiesKey[CITY_BANGKOK], citiesKey[CITY_CHONGQING]],\n                [citiesKey[CITY_BANGKOK], citiesKey[CITY_JAKARTA]],\n            ],\n            [[citiesKey[CITY_DHAKA], citiesKey[CITY_URUMQI]]],\n            [\n                [citiesKey[CITY_TOKYO], citiesKey[CITY_TAIPEI]],\n                [citiesKey[CITY_TOKYO], citiesKey[CITY_NANJING]],\n            ],\n            [[citiesKey[CITY_KRASNOYARSK], citiesKey[CITY_OMSK]]],\n            [\n                [citiesKey[CITY_NINGXIA], citiesKey[CITY_CHENNAI]],\n                [citiesKey[CITY_NINGXIA], citiesKey[CITY_HONG_KONG]],\n            ],\n            [[citiesKey[CITY_BANGALORE], citiesKey[CITY_KUALA_LUMPUR]],],\n            [\n                [citiesKey[CITY_JAKARTA], citiesKey[CITY_PERTH]],\n                [citiesKey[CITY_JAKARTA], citiesKey[CITY_MELBOURNE]],\n            ],\n            [[citiesKey[CITY_MELBOURNE], citiesKey[CITY_BRISBANE]]],\n            [[citiesKey[CITY_PYONGYANG], citiesKey[CITY_IRKUTSK]]],\n            [\n                [citiesKey[CITY_AUCKLAND], citiesKey[CITY_SYDNEY]],\n                [citiesKey[CITY_AUCKLAND], citiesKey[CITY_ISAAC]],\n                [citiesKey[CITY_AUCKLAND], citiesKey[CITY_KAIRUKU_HIRI]],\n            ],\n            [\n                [citiesKey[CITY_LAWN_HILL], citiesKey[CITY_TELFER]],\n                [citiesKey[CITY_LAWN_HILL], citiesKey[CITY_PERTH]],\n            ],\n            [[citiesKey[CITY_MELBOURNE], citiesKey[CITY_MABEL_CREEK]]],\n            [\n                [citiesKey[CITY_PERTH], citiesKey[CITY_SERAM_ISLAND]],\n                [citiesKey[CITY_PERTH], citiesKey[CITY_SOUTH_SULAWESI]],\n            ],\n            [\n                [citiesKey[CITY_BANGKOK], citiesKey[CITY_LAMON_BAY]],\n                [citiesKey[CITY_BANGKOK], citiesKey[CITY_WEST_PAPAU]],\n            ],\n            [\n                [citiesKey[CITY_BINH_PHUOC], citiesKey[CITY_LANG_SON]],\n                [citiesKey[CITY_BINH_PHUOC], citiesKey[CITY_BELAGA]],\n            ]\n        ];\n\n        pathSets.forEach(pathSet => {\n\n            const pathsCoords: Array<Array<number>> = [];\n            let particleItemsClient: Array<ParticleCityItem> = [];\n            let particleItemsMiners: Array<ParticleCityItem> = [];\n\n            pathSet.forEach(cityTransfer => {\n                const client:City = cityTransfer[0] as City;\n                const miner:City = cityTransfer[1] as City;\n                particleItemsClient[0] = new ParticleCityItem(client);\n                particleItemsMiners.push(new ParticleCityItem(miner));\n                pathsCoords.push([client.latitude, client.longitude, miner.latitude, miner.longitude]);\n            });\n\n            const path = new Paths(pathsCoords, hero3d.globe.globeContainer, 50, .15, undefined,\n                false, 10, 30);\n            path.setAllUniforms('featherAmount', 1);\n            path.setAllUniforms('textureColor', new THREE.Vector4(...COLOR_GRAY_BLUE_RGBA));\n            path.setAllUniforms('color', new THREE.Vector4(...COLOR_GRAY_BLUE_RGBA));\n\n            path.tubes.forEach((tube, index) => {\n                path.addPathFollower(this.makeFollowSphere(.7, COLOR_BLACK, true, true), index);\n            });\n\n            const clientParticle = new Particles(particleItemsClient, COLOR_BLACK, hero3d.globe.globeContainer);\n            const minerParticles = new Particles(particleItemsMiners, COLOR_BLUE, hero3d.globe.globeContainer);\n            const introAnimation = {path: path, clientParticle: clientParticle, minerParticles: minerParticles};\n            this.introAnimations.push(introAnimation);\n\n        });\n    }\n\n    /*\n    Chapter 1\n     */\n    private initGlobeChapter1() {\n        const city_source = citiesKey[CITY_KERIYA];\n        const city_kuala = citiesKey[CITY_KUALA_LUMPUR];\n        const city_bangalore = citiesKey[CITY_BANGALORE];\n        const city_chennai = citiesKey[CITY_CHENNAI];\n        const city_delhi = citiesKey[CITY_NEW_DELHI];\n        const city_beijing = citiesKey[CITY_BEIJING];\n        const city_ningxia = citiesKey[CITY_NINGXIA];\n        const city_mumbai = citiesKey[CITY_MUMBAI];\n        const city_bahrain = citiesKey[CITY_BAHRAIN];\n        const city_songea = citiesKey[CITY_SONGEA];\n        const city_lilongwe = citiesKey[CITY_LILONGWE];\n        const city_wisner = citiesKey[CITY_WISNER];\n        const city_kc = citiesKey[CITY_KC];\n\n        // Path Set 1\n        let paths = [\n            [city_bahrain.latitude, city_bahrain.longitude, city_source.latitude, city_source.longitude],\n            [city_kuala.latitude, city_kuala.longitude, city_source.latitude, city_source.longitude],\n            [city_bangalore.latitude, city_bangalore.longitude, city_source.latitude, city_source.longitude],\n            [city_chennai.latitude, city_chennai.longitude, city_source.latitude, city_source.longitude],\n            [city_delhi.latitude, city_delhi.longitude, city_source.latitude, city_source.longitude],\n            [city_beijing.latitude, city_beijing.longitude, city_source.latitude, city_source.longitude],\n            [city_ningxia.latitude, city_ningxia.longitude, city_source.latitude, city_source.longitude],\n            [city_mumbai.latitude, city_mumbai.longitude, city_source.latitude, city_source.longitude]\n        ];\n        this.ch1_remoteUserPaths = new Paths(paths, hero3d.globe.globeContainer, 50, .1,\n            undefined, false, 40, 50);\n        this.ch1_remoteUserPaths.setSounds(AUDIO_DLT1, AUDIO_SL1, AUDIO_TA);\n        this.ch1_remoteUserPaths.setAllUniforms('featherAmount', 1);\n        this.ch1_remoteUserPaths.setAllUniforms('color', new Vector4(...COLOR_ORANGE_RGBA));\n        this.ch1_remoteUserPaths.setAllUniforms('textureAlphaAmount', .5);\n        this.ch1_remoteUserPaths.addPathFollower(this.makeFollowSphere(1), 4);\n\n        // Path set Africa\n        paths = [[city_lilongwe.latitude, city_lilongwe.longitude, city_songea.latitude, city_songea.longitude]];\n        this.ch1_fastTransferAfricaPaths = new Paths(paths, hero3d.globe.globeContainer, 10, .1);\n        this.ch1_fastTransferAfricaPaths.setSounds(AUDIO_DLT2, AUDIO_LW1);\n        this.ch1_fastTransferAfricaPaths.setAllUniforms('featherAmount', 1);\n        this.ch1_fastTransferAfricaPaths.setAllUniforms('textureAlphaAmount', .5);\n        this.ch1_fastTransferAfricaPaths.addPathFollower(this.makeFollowSphere(.7), 0);\n\n        // CN network spots and remote miner\n        this.ch1_cnNetworkParticles = new Particles(\n            cities.cn.map((city: City) => new ParticleCityItem(city)), COLOR_ORANGE, hero3d.globe.globeContainer);\n        this.ch1_cnNetworkParticles.attachSprite2d(new Sprite2d(this.iconMinerOrange, null, AUDIO_MA, AUDIO_MW), city_delhi.name);\n\n        // Remote CN User Icon\n        this.ch1_remoteUserCNParticle = new Particles([new ParticleCityItem(citiesKey[CITY_KERIYA])], COLOR_WHITE, hero3d.globe.globeContainer);\n        this.ch1_remoteUserCNParticle.attachSprite2d(new Sprite2d(this.iconClient, 'testerID', AUDIO_CA1, AUDIO_CW));\n\n        // Filecoin network spots\n        this.filecoinNetworkParticles = new Particles(\n            cities.filecoin.map((city: City) => new ParticleCityItem(city)), COLOR_BLUE, hero3d.globe.globeContainer);\n\n        // Africa Remote User Icon\n        this.ch1_remoteUserFCAfricaParticle = new Particles([new ParticleCityItem(citiesKey[CITY_SONGEA])],\n            COLOR_WHITE, hero3d.globe.globeContainer);\n        this.ch1_remoteUserFCAfrica2d = new Sprite2d(this.iconClient, null, AUDIO_CA2, AUDIO_CW);\n        this.ch1_remoteUserFCAfricaParticle.attachSprite2d(this.ch1_remoteUserFCAfrica2d);\n\n        // Local Filecoin Transfer\n        if (LANG_CODE === LOCALE_CHINESE) {\n            paths = [[citiesKey[CITY_CHENGDU].latitude, citiesKey[CITY_CHENGDU].longitude,\n                citiesKey[CITY_XIAOJIN].latitude, citiesKey[CITY_XIAOJIN].longitude]];\n            this.ch1_remoteUserLocalTransferParticle = new Particles( [new ParticleCityItem(citiesKey[CITY_XIAOJIN])],\n                COLOR_WHITE, hero3d.globe.globeContainer);\n            this.ch1_remoteUserLocalTransferParticle.attachSprite2d( new Sprite2d(this.iconClient, null, AUDIO_CA1, AUDIO_CW));\n        } else {\n            paths = [[city_kc.latitude, city_kc.longitude, city_wisner.latitude, city_wisner.longitude]];\n            this.ch1_remoteUserLocalTransferParticle = new Particles([\n                new ParticleCityItem(citiesKey[CITY_WISNER])], COLOR_WHITE, hero3d.globe.globeContainer);\n            this.ch1_remoteUserLocalTransferParticle.attachSprite2d( new Sprite2d(this.iconClient, null, AUDIO_CA1, AUDIO_CW));\n        }\n        this.ch1_localTransferPaths = new Paths(paths, hero3d.globe.globeContainer, 10, .1);\n        this.ch1_localTransferPaths.setSounds(AUDIO_DLT3, AUDIO_LW1);\n        this.ch1_localTransferPaths.setAllUniforms('featherAmount', 1);\n        this.ch1_localTransferPaths.setAllUniforms('textureAlphaAmount', .5);\n        this.ch1_localTransferPaths.addPathFollower(this.makeFollowSphere(.4), 0);\n    }\n\n    private initCityChapter1() {\n        // Long Transfer\n        let longPath = [\n            [\n                -2.5, 0, 10,\n                -2.5, 0, 7.5,\n                -2.5, 0, 5,\n                0, 0, 5,\n                0, 0, 2.5,\n                0, 0, 0,\n                0, 2.5, 0\n            ]\n        ];\n\n        if (!(LANG_CODE === LOCALE_CHINESE)) {\n            longPath[0].push( 0, 5, 0);\n        }\n\n        this.ch1_longCityTransferPaths = new Paths(longPath, cityContainer, 75, .015, PATH_TYPE_LINE);\n        this.ch1_longCityTransferPaths.setSounds(AUDIO_DLT2, AUDIO_SL1, AUDIO_TA);\n        this.ch1_longCityTransferPaths.container.position.set(-2.4,0,4.5)\n        this.ch1_longCityTransferPaths.container.rotation.set(0,-.2,0)\n        this.ch1_longCityTransferPaths.material.depthTest = false;\n        this.ch1_longCityTransferPaths.material.uniforms.featherAmount.value = 1;\n        this.ch1_longCityTransferPaths.material.uniforms.textureAlphaAmount.value = .2;\n        this.ch1_longCityTransferPaths.material.uniforms.color.value = new Vector4(...COLOR_BLUE_RGBA);\n        this.ch1_longCityTransferPaths.addPathFollower(this.makeFollowSphere(.1), 0);\n\n        let points = this.ch1_longCityTransferPaths.getNulls(0);\n\n        let particleItems = [\n            new ParticleItem('start', points[0].position),\n            new ParticleItem('end', points[points.length - 1].position),\n            new ParticleItem('doc', points[points.length - 1].position),\n        ];\n        this.ch1_cityMinerLongTransferParticles = new Particles(particleItems, COLOR_BLUE, this.ch1_longCityTransferPaths.container, false);\n        this.ch1_cityStorageLong2d = new Sprite2d(this.iconMiner, null, AUDIO_MA, AUDIO_MW);\n        this.ch1_cityUserLong2d = new Sprite2d(this.iconClient, null, AUDIO_CA2, AUDIO_CW);\n        this.ch1_cityDocLong2d = new Sprite2d(this.iconDocBlack, null, AUDIO_PW1, AUDIO_PW2);\n        this.ch1_cityMinerLongTransferParticles.attachSprite2d(this.ch1_cityStorageLong2d, 'start');\n        this.ch1_cityMinerLongTransferParticles.attachSprite2d(this.ch1_cityUserLong2d, 'end');\n        this.ch1_cityMinerLongTransferParticles.attachSprite2d(this.ch1_cityDocLong2d, 'doc');\n\n        // Short Transfer\n        let shortPath = [\n            [\n                0, -1, 0,\n                0, -1, -.5,\n                0, -.5, -.5,\n                0, 0, -.5,\n                0, .5, -.5,\n                0, 1, -.5,\n                0, 1, -1,\n            ]\n        ];\n        this.ch1_shortCityTransferPaths = new Paths(shortPath, cityContainer, 50, .004, PATH_TYPE_LINE);\n        this.ch1_shortCityTransferPaths.setSounds(AUDIO_DLT1, AUDIO_SL2, AUDIO_TA);\n        this.ch1_shortCityTransferPaths.container.rotation.y = -.1;\n        this.ch1_shortCityTransferPaths.container.position.set(-6,3.3,6.2)\n        this.ch1_shortCityTransferPaths.material.depthTest = false;\n        this.ch1_shortCityTransferPaths.material.uniforms.textureAlphaAmount.value = .2;\n        this.ch1_shortCityTransferPaths.material.uniforms.featherAmount.value = 1;\n        this.ch1_shortCityTransferPaths.material.uniforms.color.value = new Vector4(...COLOR_BLUE_RGBA);\n        this.ch1_shortCityTransferPaths.addPathFollower(this.makeFollowSphere(.02, COLOR_BLUE), 0);\n\n        points = this.ch1_shortCityTransferPaths.getNulls(0);\n        particleItems = [\n            new ParticleItem('start', points[0].position),\n            new ParticleItem('end', points[points.length - 1].position),\n            new ParticleItem('doc', points[points.length - 1].position)\n        ];\n        this.ch1_cityMinerShortTransferParticles = new Particles(particleItems, COLOR_BLUE, this.ch1_shortCityTransferPaths.container, false);\n        this.ch1_cityUserShort2d = new Sprite2d(this.iconClient, null, AUDIO_CA3, AUDIO_CW);\n        this.ch1_cityStorageShort2d = new Sprite2d(this.iconMiner, null, AUDIO_MA, AUDIO_MW);\n        this.ch1_cityDocShort2d = new Sprite2d(this.iconDocBlack, null, AUDIO_PW1, AUDIO_PW2);\n        this.ch1_cityMinerShortTransferParticles.attachSprite2d(this.ch1_cityUserShort2d, 'start');\n        this.ch1_cityMinerShortTransferParticles.attachSprite2d(this.ch1_cityStorageShort2d, 'end');\n        this.ch1_cityMinerShortTransferParticles.attachSprite2d(this.ch1_cityDocShort2d, 'doc');\n\n        // Miner Transfer\n        let minerPath = [\n            [\n                .08, -.08, 0,\n                .08, 0, 0,\n                0, 0, 0,\n            ]\n        ];\n        let minerPos = cityScene.getCamera(5, 1).target;\n        this.ch1_minerTransferPaths = new Paths(minerPath, cityContainer, 100, .0001, PATH_TYPE_LINE);\n        this.ch1_minerTransferPaths.setSounds(AUDIO_DLT3);\n        this.ch1_minerTransferPaths.container.position.copy(minerPos);\n        this.ch1_minerTransferPaths.container.rotation.y -= .1;\n        this.ch1_minerTransferPaths.material.fog = false;\n        this.ch1_minerTransferPaths.material.depthTest = false;\n        this.ch1_minerTransferPaths.material.uniforms.textureAlphaAmount.value = .2;\n        this.ch1_minerTransferPaths.material.uniforms.featherAmount.value = 1;\n        this.ch1_minerTransferPaths.material.uniforms.color.value = new Vector4(...COLOR_PURPLE_RGBA);\n        this.ch1_minerTransferPaths.addPathFollower(this.makeFollowSphere(.0006, COLOR_WHITE), 0);\n\n        const coinSpin3dPos = new Vector3( -5.75, 4.24, 4.81);\n        this.ch1_coinSpinParticle = new Particles([new ParticleItem('coin', coinSpin3dPos)], COLOR_WHITE, cityContainer,false);\n        this.ch1_coinSpin2d = new Sprite2d(this.iconCoinSpin, null, AUDIO_COIN);\n        this.ch1_coinSpin2d.scale = .9;\n        this.ch1_coinSpinParticle.attachSprite2d(this.ch1_coinSpin2d);\n        this.ch1_coinSpritesheet = new Spritesheet(this.ch1_coinSpin2d.element);\n    }\n\n    /*\n        Chapter 2\n    */\n    private initCityChapter2() {\n        this.ch2_cityPackageParticles = new Particles([\n            new ParticleItem('package', new Vector3(-10,2,0))], COLOR_BLUE, cityContainer, false);\n        this.ch2_cityPackageDoc2d = new Sprite2d(this.iconPackage, null, AUDIO_PW1, null);\n        this.ch2_cityPackageParticles.attachSprite2d(this.ch2_cityPackageDoc2d);\n        this.ch2_cityPackageUser2d = new Sprite2d(this.iconClient, null, AUDIO_CA1);\n        this.ch2_cityPackageParticles.attachSprite2d(this.ch2_cityPackageUser2d);\n    }\n\n    private initGlobeChapter2() {\n        const data_rates = ['0.02 FIL / 300 TB', '0.1 FIL / 800 TB', '0.06 FIL / 300 TB', '0.08 FIL / 500 TB', '0.07 FIL / 300 TB'];\n        const non_chosen_miners = LANG_CODE === LOCALE_CHINESE ? [CITY_XIAN, CITY_HONG_KONG, CITY_CHONGQING] : [CITY_CHICAGO, CITY_QUEBEC, CITY_OUTER_QUEBEC];\n        const chosen_miners = LANG_CODE === LOCALE_CHINESE ? [CITY_ZHENGZHOU, CITY_HENGYANG] : [CITY_CHARLOTTE, CITY_TORONTO];\n        const all_miners = non_chosen_miners.concat(chosen_miners);\n        const client_city = LANG_CODE === LOCALE_CHINESE ? CITY_SHANGHAI : CITY_NYC;\n\n        // Source City (NYC)\n        this.ch2_packageUserParticles = new Particles([\n            new ParticleCityItem(citiesKey[client_city], GLOBE_RADIUS_CLOSE)], COLOR_BLUE, hero3d.globe.globeContainer, false);\n        this.ch2_globePackageDoc2d = new Sprite2d(this.iconPackage);\n        this.ch2_packageUserParticles.attachSprite2d(this.ch2_globePackageDoc2d);\n        this.ch2_globeClient2d = new Sprite2d(this.iconClient, null, null, AUDIO_CW);\n        this.ch2_packageUserParticles.attachSprite2d(this.ch2_globeClient2d);\n\n        // Miner Cities\n        const minerCityItems = non_chosen_miners.map(city =>  new ParticleCityItem(citiesKey[city], GLOBE_RADIUS_CLOSE));\n        this.ch2_packageMinerParticles = new Particles(minerCityItems, COLOR_BLUE, hero3d.globe.globeContainer, true);\n        non_chosen_miners.forEach((city, i) => {\n            this.ch2_packageMinerParticles.attachSprite2d(new Sprite2d(this.iconTextField).setText(data_rates[i]), city);\n        });\n\n        // Chosen Miner Cities\n        const chosenMinerCityItems = chosen_miners.map(city => new ParticleCityItem(citiesKey[city], GLOBE_RADIUS_CLOSE));\n        this.ch2_packageChosenMinerParticles = new Particles( chosenMinerCityItems, COLOR_BLUE, hero3d.globe.globeContainer, true);\n        chosen_miners.forEach((city, i) => {\n            this.ch2_packageChosenMinerParticles.attachSprite2d(new Sprite2d(this.iconTextField).setText(data_rates[i + 3]), city, 'text_'+i);\n            this.ch2_packageChosenMinerParticles.attachSprite2d(new Sprite2d(this.iconTextField), city, 'miner_'+i);\n        });\n\n        // Paths to all miners\n        const minerCoords = all_miners.map(city => [citiesKey[city].latitude, citiesKey[city].longitude,\n            citiesKey[client_city].latitude, citiesKey[client_city].longitude])\n        this.ch2_packageMinerPaths = new Paths(minerCoords, hero3d.globe.globeContainer, 50, .05, undefined, false);\n        this.ch2_packageMinerPaths.setSounds(AUDIO_DLT1);\n        this.ch2_packageMinerPaths.hashSoundDelay = 1;\n        this.ch2_packageMinerPaths.setAllUniforms('color', new Vector4(...COLOR_BLUE_RGBA));\n        this.ch2_packageMinerPaths.setAllUniforms('textureColor', new Vector4(...COLOR_GRAY_BLUE_RGBA));\n\n        // Path to chosen miner\n        const chosenMinerCoords = chosen_miners.map(city =>  [citiesKey[client_city].latitude,\n            citiesKey[client_city].longitude, citiesKey[city].latitude, citiesKey[city].longitude]);\n        this.ch2_packageChosenMinerPaths = new Paths(chosenMinerCoords, hero3d.globe.globeContainer, 50, .05);\n        this.ch2_packageChosenMinerPaths.setSounds(AUDIO_DLT2, AUDIO_SL2);\n        this.ch2_packageMinerPaths.hashSoundDelay = 1;\n        this.ch2_packageChosenMinerPaths.setAllUniforms('color', new Vector4(...COLOR_BLUE_RGBA));\n        this.ch2_packageChosenMinerPaths.setAllUniforms('textureColor', new Vector4(...COLOR_GRAY_BLUE_RGBA));\n        this.ch2_packageChosenMinerPaths.addPathFollower(this.makeFollowSphere(.4, COLOR_BLUE), 0);\n        this.ch2_packageChosenMinerPaths.addPathFollower(this.makeFollowSphere(.4, COLOR_BLUE), 1);\n    }\n\n    /*\n        Chapter 3\n    */\n    initCityChapter3() {\n        let minerPathIn = [\n            [\n                8, 1, 0,\n                7, 1, 0,\n                6, 1, 0,\n                5, 1, 0,\n                4, 1, 0,\n                3, 1, 0,\n                2, 1, 0,\n                1, 1, 0,\n                0, 1, 0,\n                0, 2, 0,\n                0, 3, 0\n            ]\n        ];\n\n        // Miner Path In\n        let minerPosIn = new Vector3( -20, 0, 3.50); //new Vector3( -20, 0, 3.50);\n        const minerRotateY = LANG_CODE === LOCALE_CHINESE ? -.2 : .55;\n        this.ch3_minerTransferPathIn = new Paths( minerPathIn, cityContainer, 120, .006, PATH_TYPE_LINE);\n        this.ch3_minerTransferPathIn.setSounds(AUDIO_DLT2, AUDIO_SL1, AUDIO_TA);\n        this.ch3_minerTransferPathIn.container.position.copy(minerPosIn);\n        this.ch3_minerTransferPathIn.container.rotateY(minerRotateY);\n        this.ch3_minerTransferPathIn.material.fog = false;\n        this.ch3_minerTransferPathIn.material.depthTest = false;\n        this.ch3_minerTransferPathIn.material.uniforms.featherAmount.value = 0;\n        this.ch3_minerTransferPathIn.material.uniforms.color.value = new Vector4(...COLOR_BLUE_RGBA);\n        this.ch3_minerTransferPathIn.addPathFollower(this.makeFollowSphere(.05, COLOR_BLUE), 0);\n\n        let points = this.ch3_minerTransferPathIn.getNulls(0);\n        let particleItems = [\n            new ParticleItem('end', points[points.length - 1].position),\n            new ParticleItem('doc', points[points.length - 1].position)\n        ];\n        this.ch3_cityMinerParticles = new Particles(particleItems, COLOR_BLUE, this.ch3_minerTransferPathIn.container, false);\n        this.ch3_cityMinerParticles.attachSprite2d(new Sprite2d(this.iconMiner, null, AUDIO_MA, AUDIO_MW), 'end', ICON_MINER);\n        this.ch3_cityMinerParticles.attachSprite2d(new Sprite2d(this.iconDocBlack, null, AUDIO_PW1, AUDIO_PW2), 'doc', ICON_DOC);\n\n        let serverPathIn = [\n            [\n                0,0,0,\n                .02,0,0,\n                .04,0,0,\n                .06,0,0,\n                .08,0,0,\n                .1,0,0,\n                .12,0,0,\n                .14,0,0,\n                .16,0,0,\n                .18,0,0,\n                .2,0,0,\n                .2,0,.02,\n                .2,0,.04,\n                .2,0,.06,\n                .18,0,.06\n            ]\n        ];\n\n        // Path In\n        let serverPosIn = LANG_CODE === LOCALE_CHINESE ? new Vector3( -20.32, 2.495, 3.45) : new Vector3( -20.17, 2.81, 3.70);\n        let serverRotY = LANG_CODE === LOCALE_CHINESE ? -.18 : .55;\n\n        this.ch3_serverTransferPathIn = new Paths(serverPathIn, cityContainer, 120, .0001, PATH_TYPE_LINE);\n        this.ch3_serverTransferPathIn.container.position.copy(serverPosIn);\n        this.ch3_serverTransferPathIn.container.rotateY(serverRotY);\n        this.ch3_serverTransferPathIn.material.fog = false;\n        this.ch3_serverTransferPathIn.material.depthTest = false;\n        this.ch3_serverTransferPathIn.material.uniforms.featherAmount.value = 1;\n        this.ch3_serverTransferPathIn.material.uniforms.color.value = new Vector4(...COLOR_BLUE_RGBA);\n        this.ch3_serverTransferPathIn.addPathFollower(this.makeFollowSphere(.0005, COLOR_BLUE), 0);\n\n        // Path Out\n        let serverPathOut = [\n            [\n                .18,0,.06,\n                .2,0,.06,\n                .2,0,.04,\n                .2,0,.02,\n                .2,0,0,\n                .18,0,0,\n                .16,0,0,\n                .14,0,0,\n                .12,0,0,\n                .1,0,0,\n                .08,0,0,\n                .06,0,0,\n                .04,0,0,\n                .02,0,0,\n                0,0,0\n            ]\n        ];\n        let serverPosOut = new Vector3( serverPosIn.x, serverPosIn.y, serverPosIn.z + .005);\n        this.ch3_serverTransferPathOut = new Paths(serverPathOut, cityContainer, 120, .0001, PATH_TYPE_LINE);\n        this.ch3_serverTransferPathOut.container.position.copy(serverPosOut);\n        this.ch3_serverTransferPathOut.container.rotateY(serverRotY);\n        this.ch3_serverTransferPathOut.material.fog = false;\n        this.ch3_serverTransferPathOut.material.depthTest = false;\n        this.ch3_serverTransferPathOut.material.uniforms.featherAmount.value = 1;\n        this.ch3_serverTransferPathOut.addPathFollower(this.makeFollowSphere(.0005, COLOR_WHITE), 0);\n\n        // Spritesheets\n        const pt_id = 'point';\n        this.ch3_spritesheetParticles = new Particles([\n            new ParticleItem(pt_id, cityScene.serverIconNull.position)], COLOR_BLUE, cityScene.serverIconNull.parent, false);\n        const questionInSprite = new Sprite2d(this.iconQuestionIn);\n        this.ch3_spritesheetParticles.attachSprite2d(questionInSprite, pt_id, ICON_QUESTION_IN);\n        this.ch3_questionInSpritesheet = new Spritesheet(questionInSprite.element);\n\n        const questionToCheckSprite = new Sprite2d(this.questionToCheck);\n        this.ch3_spritesheetParticles.attachSprite2d(questionToCheckSprite, pt_id, ICON_QUESTION_TO_CHECK);\n        this.ch3_questionToCheckSpritesheet = new Spritesheet(questionToCheckSprite.element);\n\n        const checkToBlock = new Sprite2d(this.checkToBlock);\n        this.ch3_spritesheetParticles.attachSprite2d(checkToBlock, pt_id, ICON_CHECK_TO_BLOCK);\n        this.ch3_checkToBlockSpritesheet = new Spritesheet(checkToBlock.element);\n\n        const blockOut = new Sprite2d(this.blockOut);\n        this.ch3_spritesheetParticles.attachSprite2d(blockOut, pt_id, ICON_BLOCK_OUT);\n        this.ch3_blockOutSpritesheet = new Spritesheet(blockOut.element);\n\n        const blockApproved = new Sprite2d(this.blockApproved);\n        this.ch3_spritesheetParticles.attachSprite2d(blockApproved, pt_id, ICON_BLOCK_APPROVED);\n        this.ch3_blockApprovedSpritesheet = new Spritesheet(blockApproved.element);\n\n        const blockDeclined = new Sprite2d(this.blockDeclined);\n        this.ch3_spritesheetParticles.attachSprite2d(blockDeclined, pt_id, ICON_BLOCK_DECLINED);\n        this.ch3_blockDeclinedSpritesheet = new Spritesheet(blockDeclined.element);\n\n        const coinSprite = new Sprite2d(this.iconCoinSpin, null, AUDIO_COIN);\n        this.ch3_spritesheetParticles.attachSprite2d(coinSprite, pt_id, ICON_COIN_SPIN);\n        this.ch3_coinSpritesheet = new Spritesheet(coinSprite.element);\n    }\n\n    /*\n        Chapter 4\n    */\n    initCityChapter4() {\n        // Miner payment path\n        let minerPaymentpath = [\n            [\n                -4, 2, -1,\n                -4, 1, -1,\n                -4, 1, 0,\n                -3, 1, 0,\n                -2, 1, 0,\n                -1, 1, 0,\n                0, 1, 0,\n                1, 1, 0,\n                2, 1, 0,\n                3, 1, 0,\n                4, 1, 0,\n                5, 1, 0,\n                6, 1, 0,\n                7, 1, 0,\n                8, 1, 0,\n                8, 1, 1,\n                8, 2, 1,\n                8, 3, 1,\n                8, 4, 1,\n            ]\n        ];\n\n        // Miner Paths\n        const HASH_REPEAT = 80;\n        const PATH_RADIUS = .01;\n        this.ch4_minerPaymentPaths = new Paths(minerPaymentpath, cityContainer, HASH_REPEAT, PATH_RADIUS, PATH_TYPE_LINE);\n        this.ch4_minerPaymentPaths.setSounds(AUDIO_DLT1, AUDIO_SL2, AUDIO_TA, AUDIO_SL3);\n        this.ch4_minerPaymentPaths_reverse = new Paths([reversePath(minerPaymentpath[0])], cityContainer, HASH_REPEAT, PATH_RADIUS, PATH_TYPE_LINE);\n        this.ch4_minerPaymentPaths_reverse.setSounds(AUDIO_DLT3, AUDIO_SL2, null, AUDIO_SL3);\n        [this.ch4_minerPaymentPaths, this.ch4_minerPaymentPaths_reverse].forEach((path) => {\n            path.container.position.set(10,-1,-4.5);\n            path.container.rotateY(.02);\n            path.material.depthTest = false;\n            path.material.uniforms.featherAmount.value = 1;\n            path.material.uniforms.color.value = new Vector4(...COLOR_BLUE_RGBA);\n            path.addPathFollower(this.makeFollowSphere(.05, COLOR_BLUE), 0);\n        });\n\n        // Client User Particle\n        this.ch4_clientParticles = new Particles([\n            new ParticleItem('start', new Vector3( 8,4,1))], COLOR_WHITE, this.ch4_minerPaymentPaths.container, false);\n        this.ch4_clientParticles.attachSprite2d(new Sprite2d(this.iconClient, null, AUDIO_CA3, AUDIO_CW), 'start', ICON_CLIENT);\n        this.ch4_clientParticles.attachSprite2d(new Sprite2d(this.iconRequest, null, AUDIO_FS1, AUDIO_FS2), 'start', ICON_REQUEST);\n        this.ch4_clientParticles.attachSprite2d(new Sprite2d(this.iconDocBlack, null, AUDIO_PW1, AUDIO_PW2), 'start', ICON_DOC_BLACK);\n\n        // Chosen Miner particle\n        const endId = 'end';\n        this.ch4_chosenMinerParticles = new Particles([\n            new ParticleItem(endId, new Vector3( -4,2,-1))], COLOR_BLUE, this.ch4_minerPaymentPaths.container, false);\n        const coinSprite = new Sprite2d(this.iconCoinSpin, null, AUDIO_COIN);\n        coinSprite.pinHeight = 80;\n        coinSprite.scale = .65;\n        const minerSprite = new Sprite2d(this.iconMiner, null, AUDIO_MA, AUDIO_MW);\n        this.ch4_chosenMinerParticles.attachSprite2d(coinSprite, endId, ICON_COIN_SPIN);\n        this.ch4_chosenMinerParticles.attachSprite2d(minerSprite, endId, ICON_MINER);\n        this.ch4_coinSpritesheet = new Spritesheet(coinSprite.element);\n\n        // Other Miners\n        this.ch4_minerParticles = new Particles([\n            new ParticleItem('miner1', new Vector3( 15,2,8)),\n            new ParticleItem('miner2', new Vector3( 5,2,4)),\n            new ParticleItem('miner3', new Vector3( 0,2,1)),\n            new ParticleItem('miner4', new Vector3( -2,2,-5)),\n        ], COLOR_BLUE, cityContainer, false);\n    }\n\n    initGlobeChapter4() {\n        const city_src = LANG_CODE === LOCALE_CHINESE ? citiesKey[CITY_SHANGHAI] : citiesKey[CITY_NYC];\n        const citiesMiners1: Array<City> = [citiesKey[CITY_BARCELONA], citiesKey[CITY_LONDON], citiesKey[CITY_AMSTERDAM]];\n        const citiesMiners2: Array<City> = [citiesKey[CITY_DUBLIN], citiesKey[CITY_OSLO], citiesKey[CITY_EDINBURGH], citiesKey[CITY_VIENNA]];\n        const citiesMiners3: Array<City> = [citiesKey[CITY_BRUSSELS], citiesKey[CITY_BERLIN]];\n        const citiesClients1: Array<City> = [citiesKey[CITY_MADRID], citiesKey[CITY_MALAGA], citiesKey[CITY_GLASGOW], citiesKey[CITY_LISBON], citiesKey[CITY_PARIS], citiesKey[CITY_MARSEILLE]];\n        const cities6: Array<City> = [citiesKey[CITY_BUCHAREST], citiesKey[CITY_ZAGREB], citiesKey[CITY_COLOGNE]];\n        const cityClients2: Array<City> = [citiesKey[CITY_COPENHAGEN], citiesKey[CITY_STOCKHOLM], citiesKey[CITY_ZURICH], citiesKey[CITY_MILAN],\n            citiesKey[CITY_HAMBURG], citiesKey[CITY_PRAGUE], citiesKey[CITY_ROME]];\n        const cities8: Array<City> = [citiesKey[CITY_BUDAPEST], citiesKey[CITY_NAPLES], citiesKey[CITY_BUCHAREST], citiesKey[CITY_WARSAW],\n            citiesKey[CITY_HELSINKI], citiesKey[CITY_SOFIA], citiesKey[CITY_ATHENS], citiesKey[CITY_TIRANA], citiesKey[CITY_BELGRADE], citiesKey[CITY_ISTANBUL]];\n\n        this.ch4_newyorkParticles = new Particles([new ParticleCityItem(city_src)], COLOR_BLUE, hero3d.globe.globeContainer, false);\n\n        // Phase 1\n        this.ch4_miners1Particles = new Particles(citiesMiners1.map(city => new ParticleCityItem(city, GLOBE_RADIUS_CLOSE)), COLOR_WHITE, hero3d.globe.globeContainer, false);\n        this.ch4_globePaths1 = new Paths(citiesMiners1.map( city => [city_src.latitude, city_src.longitude, city.latitude, city.longitude]),\n            hero3d.globe.globeContainer, 80, .1, undefined, false,70, 70);\n        this.ch4_globePaths1.setSounds(AUDIO_DLT3, AUDIO_SL1, null, AUDIO_FW1);\n        this.ch4_globePaths1.setAllUniforms('textureColor', new Vector4(...COLOR_GRAY_BLUE_RGBA));\n        for (let i = 0; i < citiesMiners1.length; i++) {\n            this.ch4_globePaths1.addPathFollower(this.makeFollowSphere(.3, COLOR_BLUE), i);\n        }\n\n        // Phase 2\n        this.ch4_miners2Particles = new Particles(citiesMiners2.map(city => new ParticleCityItem(city, GLOBE_RADIUS_CLOSE)), COLOR_BLUE, hero3d.globe.globeContainer, false);\n        this.ch4_globePaths2 = new Paths(citiesMiners2.map( city => [city_src.latitude, city_src.longitude, city.latitude, city.longitude]),\n            hero3d.globe.globeContainer, 80, .1, undefined, false,50, 50);\n        this.ch4_globePaths2.setSounds(AUDIO_DLT2, AUDIO_SL3, null, AUDIO_FW3);\n        this.ch4_globePaths2.setAllUniforms('textureColor', new Vector4(...COLOR_GRAY_BLUE_RGBA));\n        for (let i = 0; i < citiesMiners2.length; i++) {\n            this.ch4_globePaths2.addPathFollower(this.makeFollowSphere(.3, COLOR_BLUE), i);\n        }\n\n        // Phase 3\n        this.ch4_miners3Particles = new Particles(citiesMiners3.map(city => new ParticleCityItem(city, GLOBE_RADIUS_CLOSE)), COLOR_BLUE, hero3d.globe.globeContainer, false);\n        this.ch4_globePaths3 = new Paths([\n            [citiesKey[CITY_EDINBURGH].latitude, citiesKey[CITY_EDINBURGH].longitude, citiesKey[CITY_BRUSSELS].latitude, citiesKey[CITY_BRUSSELS].longitude],\n            [citiesKey[CITY_EDINBURGH].latitude, citiesKey[CITY_EDINBURGH].longitude, citiesKey[CITY_BERLIN].latitude, citiesKey[CITY_BERLIN].longitude],\n        ], hero3d.globe.globeContainer, 40, .1, undefined, false);\n        this.ch4_globePaths3.setSounds(AUDIO_DLT1, AUDIO_SL1, null, AUDIO_LW1);\n        this.ch4_globePaths3.setAllUniforms('textureColor', new Vector4(...COLOR_GRAY_BLUE_RGBA));\n\n        // Phase 4\n        this.ch4_clients1Particles = new Particles(citiesClients1.map(city => new ParticleCityItem(city, GLOBE_RADIUS_CLOSE)), COLOR_WHITE, hero3d.globe.globeContainer, false);\n        this.ch4_globePaths4 = new Paths([\n            [citiesKey[CITY_DUBLIN].latitude, citiesKey[CITY_DUBLIN].longitude, citiesKey[CITY_MADRID].latitude, citiesKey[CITY_MADRID].longitude],\n            [citiesKey[CITY_DUBLIN].latitude, citiesKey[CITY_DUBLIN].longitude, citiesKey[CITY_MARSEILLE].latitude, citiesKey[CITY_MARSEILLE].longitude],\n            [citiesKey[CITY_DUBLIN].latitude, citiesKey[CITY_DUBLIN].longitude, citiesKey[CITY_LISBON].latitude, citiesKey[CITY_LISBON].longitude],\n            [citiesKey[CITY_DUBLIN].latitude, citiesKey[CITY_DUBLIN].longitude, citiesKey[CITY_MALAGA].latitude, citiesKey[CITY_MALAGA].longitude],\n        ], hero3d.globe.globeContainer, 40, .1, undefined, false);\n        this.ch4_globePaths4.setSounds(AUDIO_DLT3, AUDIO_SL2, null, AUDIO_LW1);\n        this.ch4_globePaths4.setAllUniforms('textureColor', new Vector4(...COLOR_GRAY_BLUE_RGBA));\n\n        this.ch4_miners4Particles = new Particles(cities6.map(city => new ParticleCityItem(city, GLOBE_RADIUS_CLOSE)), COLOR_BLUE, hero3d.globe.globeContainer, false);\n\n        // Phase 5\n        this.ch4_clients2Particles = new Particles(cityClients2.map(city => new ParticleCityItem(city, GLOBE_RADIUS_CLOSE)), COLOR_WHITE, hero3d.globe.globeContainer, false);\n        this.ch4_globePaths5 = new Paths([\n            [citiesKey[CITY_BERLIN].latitude, citiesKey[CITY_BERLIN].longitude, citiesKey[CITY_ZURICH].latitude, citiesKey[CITY_ZURICH].longitude],\n            [citiesKey[CITY_BERLIN].latitude, citiesKey[CITY_BERLIN].longitude, citiesKey[CITY_MILAN].latitude, citiesKey[CITY_MILAN].longitude],\n            [citiesKey[CITY_BERLIN].latitude, citiesKey[CITY_BERLIN].longitude, citiesKey[CITY_PRAGUE].latitude, citiesKey[CITY_PRAGUE].longitude],\n            [citiesKey[CITY_BERLIN].latitude, citiesKey[CITY_BERLIN].longitude, citiesKey[CITY_ROME].latitude, citiesKey[CITY_ROME].longitude],\n            [citiesKey[CITY_BERLIN].latitude, citiesKey[CITY_BERLIN].longitude, citiesKey[CITY_BUCHAREST].latitude, citiesKey[CITY_BUCHAREST].longitude],\n        ], hero3d.globe.globeContainer, 40, .1, undefined, false);\n        this.ch4_globePaths5.setSounds(AUDIO_DLT2, AUDIO_SL3, null, AUDIO_LW1);\n        this.ch4_globePaths5.setAllUniforms('textureColor', new Vector4(...COLOR_GRAY_BLUE_RGBA));\n\n        // Phase 6\n        this.ch4_clients3Particles = new Particles(cities8.map(city => new ParticleCityItem(city, GLOBE_RADIUS_CLOSE)), COLOR_WHITE, hero3d.globe.globeContainer, false);\n        this.ch4_globePaths6 = new Paths([\n            [citiesKey[CITY_ZAGREB].latitude, citiesKey[CITY_ZAGREB].longitude, citiesKey[CITY_ATHENS].latitude, citiesKey[CITY_ATHENS].longitude],\n            [citiesKey[CITY_ZAGREB].latitude, citiesKey[CITY_ZAGREB].longitude, citiesKey[CITY_NAPLES].latitude, citiesKey[CITY_NAPLES].longitude],\n            [citiesKey[CITY_ZAGREB].latitude, citiesKey[CITY_ZAGREB].longitude, citiesKey[CITY_ISTANBUL].latitude, citiesKey[CITY_ISTANBUL].longitude],\n            [citiesKey[CITY_ZAGREB].latitude, citiesKey[CITY_ZAGREB].longitude, citiesKey[CITY_BELGRADE].latitude, citiesKey[CITY_BELGRADE].longitude],\n            [citiesKey[CITY_ZAGREB].latitude, citiesKey[CITY_ZAGREB].longitude, citiesKey[CITY_TIRANA].latitude, citiesKey[CITY_TIRANA].longitude],\n        ], hero3d.globe.globeContainer, 40, .1, undefined, false);\n        this.ch4_globePaths6.setSounds(AUDIO_DLT2, AUDIO_SL1, null, AUDIO_LW1);\n        this.ch4_globePaths6.setAllUniforms('textureColor', new Vector4(...COLOR_GRAY_BLUE_RGBA));\n    }\n\n    makeFollowSphere(radius: number, color: number = COLOR_WHITE, depthWrite: boolean = false, depthTest: boolean = false) {\n        const mesh =new Mesh(\n            new SphereGeometry(radius, 3, 3),\n            new MeshBasicMaterial({color: color,\n                depthTest: depthTest, depthWrite: depthWrite, fog: false, transparent: true})\n        );\n        mesh.renderOrder = 10;\n        return mesh;\n    }\n\n}\n\nexport const overlayFactory = new OverlayFactory();\n","/*\nParses the city model and exposes city-specific animations\n */\n\nimport {GLTFLoader} from \"three/examples/jsm/loaders/GLTFLoader\";\nimport {ambientLight, camera, rootMesh, scene} from \"./hero3d\";\nimport * as THREE from \"three\";\nimport {\n    AdditiveBlending, CanvasTexture,\n    DoubleSide, FrontSide,\n    Mesh,\n    MeshBasicMaterial,\n    MeshStandardMaterial,\n    Object3D\n} from \"three\";\nimport {gsap} from \"gsap\";\nimport {Color} from \"three\";\nimport {ASSETS_3D, COLOR_BLUE, DAY, LANG_CODE, LOCALE_CHINESE, NIGHT} from \"../global/constants\";\nimport {overlayFactory} from \"./overlayFactory\";\nimport {translatePoint} from \"../global/utils\";\nimport Particles, {ParticleItem} from \"./Particles\";\nimport {state} from \"../global/state\";\nimport {AUDIO_FW3, audioController} from \"../global/audioController\";\n\n// City-specific colors\nexport const DARK_CITY_ROAD_COLOR: number = 0x0F1318;\nexport const DARK_CITY_LAND_COLOR: number = 0x161C22;\nexport const LIGHT_CITY_ROAD_COLOR: number = 0xABABAB;\nexport const LIGHT_CITY_LAND_COLOR: number = 0xC5C5C5;\nexport const DARK_CITY_BUILDING_COLOR_TOP: string = '#56677c';\nexport const DARK_CITY_BUILDING_COLOR_BOTTOM: string = '#06080a';\nexport const LIGHT_CITY_BUILDING_COLOR_TOP: string = '#ffffff';\nexport const LIGHT_CITY_BUILDING_COLOR_BOTTOM: string = '#999999';\n\n// City container\nexport const cityContainer: Object3D = new Object3D();\n\n// 3d city model ID's\nconst ID_BRIDGE = 'BRIDGE';\nconst ID_ROADS = 'ROADS';\nconst ID_LANDMASS = 'LANDMASS';\nconst ID_BUILDINGS = 'CITY_UNTRIANGULATED';\nconst ID_CAMERA_TARGETS = 'CAMERA_TARGETS';\nconst ID_CAMERA_SOURCES = 'CAMERA_SOURCE';\nconst ID_NODES = 'NODES';\nconst ID_COIN_TARGET = 'coin_target';\n\n// miner building\nconst ID_MINER_BUILDING_OUTSIDE = 'BUILDING_1_OUTSIDE';\nconst ID_MINER_BUILDING_INSIDE_BOT = 'BUILDING_1_INSIDE_BOT';\nconst ID_MINER_BUILDING_INSIDE_MID = 'BUILDING_1_INSIDE_MID';\nconst ID_MINER_BUILDING_INSIDE_TOP = 'BUILDING_1_INSIDE_TOP';\nconst ID_MINER_DESK = 'BUILDING_1_MINER';\nconst ID_BOX_FRONT = 'box_front';\nconst ID_BOX_BACK = 'box_back';\nconst ID_DRIVE = 'drive';\nconst ID_DISK_INNER = 'disk_inner';\n\n// server building\nconst ID_SERVER_BUILDING_OUTSIDE = 'BUILDING_2_OUTSIDE';\nconst ID_SERVER_BUILDING_INSIDE = 'BUILDING_2_INSIDE';\nconst ID_SERVER_BUILDING_STAIRCASE = 'staircase';\nconst ID_SERVER_BUILDING_BOX = 'box';\nconst ID_SERVER_BUILDING_DRIVE_NULLS = 'drive-nulls';\nconst ID_SERVER_BUILDING_CABINET_FRONTS = 'cabinets_fronts';\nconst ID_SERVER_BUILDING_BACK_TECH = 'back_tech';\nconst ID_SERVER_BUILDING_RACK_SETS1 = 'RACKS_SET1';\nconst ID_SERVER_BUILDING_RACK_SETS2 = 'RACKS_SET2';\nconst ID_SERVER_BUILDING_RACK_SETS3 = 'RACKS_SET3';\nconst ID_SERVER_BUILDING_RACK_SETS4 = 'RACKS_SET4';\n\nconst SCALE = 10;\nconst CANVAS_TEXTURE_SIZE = 128;\n\nexport class CityScene {\n\n    public meshScene: Object3D;\n    public serverIconNull: Object3D;\n    public loaded: boolean;\n\n    private roads: Mesh;\n    private landMass: Mesh;\n    private bridge: Mesh;\n    private buildings: Mesh;\n    private spriteNulls: Object3D;\n    private cameraSourceNulls: Object3D;\n    private cameraTargetNulls: Object3D;\n\n    private serverDriveMaterial: MeshBasicMaterial;\n    private serverRackMaterial: MeshBasicMaterial;\n    private serverBuildingInside: Object3D;\n    private serverBuildingOutside: Mesh;\n    private serverBuildingOutsideMaterial: MeshStandardMaterial;\n    private cabinetFronts: Mesh;\n    private cabinetFrontsMaterial: MeshBasicMaterial;\n\n    private minerBuildingOutside: Mesh;\n    private minerBuildingOutsideMaterial: MeshStandardMaterial;\n    private minerBuildingTopFloor: Mesh;\n    private minerBuildingTopFloorMaterial: MeshBasicMaterial;\n    private minerBuildingDesk: Object3D;\n    private minerBuildingDeskMaterials: Array<MeshBasicMaterial> = [];\n    private minerBuildingDriveMaterials: Array<MeshBasicMaterial> = [];\n    private minerBuildingNasFront: Mesh;\n    private minerBuildingNasFrontMaterial: MeshBasicMaterial;\n    private minerBuildingNasBack: Mesh;\n    private minerBuildingNasBackMaterial: MeshBasicMaterial;\n    private backTechMaterial: MeshBasicMaterial;\n\n    private canvasTexture: CanvasTexture;\n    private canvasTextureContext: CanvasRenderingContext2D;\n    private cityBuildingColorTop: string = LIGHT_CITY_BUILDING_COLOR_TOP;\n    private cityBuildingColorBottom: string = LIGHT_CITY_BUILDING_COLOR_BOTTOM;\n    private cityBuildingColorStop: number;\n\n    add() {\n        if (!cityContainer.parent) {\n            rootMesh.add(cityContainer)\n        }\n    }\n\n    remove() {\n        if (cityContainer.parent) {\n            rootMesh.remove(cityContainer);\n        }\n    }\n\n    async load() {\n        const assets3d = state.getValue(ASSETS_3D);\n        return new Promise(resolve => {\n            if (this.loaded) {\n                resolve();\n                return;\n            }\n            const gltf_loader = new GLTFLoader();\n            gltf_loader.load(\n                assets3d.city_model_url,\n                (gltf: any) => {\n                    this.meshScene = gltf.scene;\n                    this.canvasTextureContext = this.createCanvasTexture();\n                    this.bridge = this.meshScene.getObjectByName(ID_BRIDGE) as Mesh;\n                    if (this.bridge) {\n                        this.bridge.material = new MeshStandardMaterial({\n                            map: this.canvasTexture,\n                            flatShading: true\n                        });\n                    }\n\n                    this.roads = this.meshScene.getObjectByName(ID_ROADS) as Mesh;\n                    if (this.roads) {\n                        this.roads.material = new MeshBasicMaterial({\n                            flatShading: true\n                        });\n                    }\n\n                    this.buildings = this.meshScene.getObjectByName(ID_BUILDINGS) as Mesh;\n                    this.buildings.material = new MeshStandardMaterial({\n                        map: this.canvasTexture,\n                        flatShading: true,\n                        side: DoubleSide\n                    });\n\n                    this.landMass = this.meshScene.getObjectByName(ID_LANDMASS) as Mesh;\n                    this.landMass.material = new MeshBasicMaterial();\n                    this.cityBuildingColorStop = LANG_CODE === LOCALE_CHINESE ? .15 : .3;\n                    this.parseNulls();\n                    this.parseServerBuilding();\n                    this.parseMinerBuilding();\n                    this.animateMaterialColor(0, 0, NIGHT);\n                    cityContainer.add(gltf.scene);\n                    cityContainer.scale.set(SCALE, SCALE, SCALE);\n                    this.loaded = true;\n                    resolve();\n                }\n            );\n        });\n    }\n\n    createCanvasTexture() {\n        const canvas = document.createElement('canvas');\n        canvas.classList.add('canvasTexture');\n        canvas.width = CANVAS_TEXTURE_SIZE;\n        canvas.height = CANVAS_TEXTURE_SIZE;\n        this.canvasTexture = new THREE.CanvasTexture(canvas);\n        this.canvasTexture.flipY = true;\n        //this.canvasTexture.encoding = THREE.sRGBEncoding;\n        //document.body.appendChild(canvas);\n        return canvas.getContext('2d');\n    }\n\n    parseNulls() {\n        this.cameraSourceNulls = this.meshScene.getObjectByName(ID_CAMERA_SOURCES);\n        this.cameraTargetNulls = this.meshScene.getObjectByName(ID_CAMERA_TARGETS);\n        this.serverIconNull = this.meshScene.getObjectByName(ID_COIN_TARGET);\n        this.spriteNulls = this.meshScene.getObjectByName(ID_NODES);\n        const particleItems = this.spriteNulls.children.map((spriteNull: Object3D, index) =>\n            new ParticleItem('citySpot' + index, translatePoint(spriteNull.position, spriteNull.parent)));\n        overlayFactory.ch1_citySpotsParticles = new Particles(particleItems, COLOR_BLUE, cityContainer, false );\n    }\n\n    parseMinerBuilding() {\n        // Desk Building\n        this.minerBuildingOutside = this.meshScene.getObjectByName(ID_MINER_BUILDING_OUTSIDE).children[0] as Mesh;\n        this.minerBuildingOutside.material = this.minerBuildingOutsideMaterial = new MeshStandardMaterial({\n            map: this.canvasTexture,\n            flatShading: true,\n            side: DoubleSide,\n            transparent: true\n        });\n        this.minerBuildingOutside.renderOrder = 2;\n\n        // Desk Building Floors Material\n        const minerBuildingFloorsBot: Mesh = this.meshScene.getObjectByName(ID_MINER_BUILDING_INSIDE_BOT) as Mesh;\n        const srcMaterial: MeshStandardMaterial = minerBuildingFloorsBot.material as MeshStandardMaterial;\n        srcMaterial.map.encoding = THREE.LinearEncoding;\n        minerBuildingFloorsBot.material = new MeshBasicMaterial({\n            map: srcMaterial.map,\n        });\n\n        const minerBuildingFloorsMid: Mesh = this.meshScene.getObjectByName(ID_MINER_BUILDING_INSIDE_MID) as Mesh;\n        const srcMaterial1: MeshStandardMaterial = minerBuildingFloorsMid.material as MeshStandardMaterial;\n        srcMaterial1.map.encoding = THREE.LinearEncoding;\n        minerBuildingFloorsMid.material = new MeshBasicMaterial({\n            map: srcMaterial1.map,\n        });\n\n        this.minerBuildingTopFloor = this.meshScene.getObjectByName(ID_MINER_BUILDING_INSIDE_TOP) as Mesh;\n        const srcMaterial2: MeshStandardMaterial = this.minerBuildingTopFloor.material as MeshStandardMaterial;\n        srcMaterial2.map.encoding = THREE.LinearEncoding;\n        this.minerBuildingTopFloor.material = this.minerBuildingTopFloorMaterial = new MeshBasicMaterial({\n            transparent: true,\n            depthTest: false,\n            opacity: 0,\n            map: srcMaterial2.map,\n        });\n\n        // Miner Building miner desk\n        this.minerBuildingDesk = this.meshScene.getObjectByName(ID_MINER_DESK);\n        this.minerBuildingDesk.visible = false;\n        this.meshScene.remove(this.minerBuildingDesk);\n\n        this.minerBuildingDesk.traverse((child) => {\n            if (child instanceof THREE.Mesh) {\n                let srcMaterial: MeshStandardMaterial = child.material as MeshStandardMaterial;\n                let minerMaterial: MeshBasicMaterial = new MeshBasicMaterial({\n                    map: srcMaterial.map,\n                    flatShading: true,\n                    transparent: true,\n                    opacity: 0\n                });\n                if (child.name == ID_BOX_FRONT) {\n                    this.minerBuildingNasFront = child;\n                    this.minerBuildingNasFrontMaterial = minerMaterial;\n                }\n                else if (child.name == ID_BOX_BACK) {\n                    this.minerBuildingNasBack = child;\n                    this.minerBuildingNasBackMaterial = minerMaterial;\n                    this.minerBuildingNasBackMaterial.side = THREE.DoubleSide;\n                }\n                else if (child.name == ID_DRIVE || child.name == ID_DISK_INNER) {\n                    minerMaterial.blending = AdditiveBlending;\n                    minerMaterial.depthTest = false;\n                    minerMaterial.side = DoubleSide;\n                    child.renderOrder = 1;\n                    this.minerBuildingDriveMaterials.push(minerMaterial);\n                } else {\n                    this.minerBuildingDeskMaterials.push(minerMaterial);\n                }\n                child.material = minerMaterial;\n                //@ts-ignore\n                if (child.material.map) { child.material.map.encoding = THREE.LinearEncoding;};\n            }\n        });\n    }\n\n    parseServerBuilding() {\n        // Server building outside\n        this.serverBuildingOutside = this.meshScene.getObjectByName(ID_SERVER_BUILDING_OUTSIDE).children[0] as Mesh;\n        this.serverBuildingOutsideMaterial = new MeshStandardMaterial({\n            map: this.canvasTexture,\n            transparent: true,\n            flatShading: true\n        });\n        this.serverBuildingOutside.material = this.serverBuildingOutsideMaterial;\n\n        // Server building inside - convert to basic materials\n        this.serverBuildingInside = this.meshScene.getObjectByName(ID_SERVER_BUILDING_INSIDE);\n        this.serverBuildingInside.visible = false;\n        this.meshScene.remove(this.serverBuildingInside);\n\n        const drive = this.meshScene.getObjectByName(ID_DRIVE) as Mesh;\n        const srcDriveMaterial = drive.material as MeshStandardMaterial;\n        srcDriveMaterial.map.encoding = THREE.LinearEncoding;\n\n        this.serverDriveMaterial = new MeshBasicMaterial({\n            map: srcDriveMaterial.map,\n            flatShading: true\n        });\n        drive.material = this.serverDriveMaterial;\n\n        this.serverBuildingInside.traverse((child) => {\n            if (child instanceof THREE.Mesh) {\n                if (child.name == ID_SERVER_BUILDING_STAIRCASE) {\n                    let srcMaterial: MeshStandardMaterial = child.material as MeshStandardMaterial;\n                    child.material = new MeshBasicMaterial({map: srcMaterial.map});\n                }\n                // Rack\n                if (child.name == ID_SERVER_BUILDING_BOX) {\n                    if (!this.serverRackMaterial) {\n                        let srcMaterial: MeshStandardMaterial = child.material as MeshStandardMaterial;\n                        this.serverRackMaterial = new MeshBasicMaterial({map: srcMaterial.map});\n                        this.serverRackMaterial.side = FrontSide;\n                        this.serverRackMaterial.transparent = true;\n                        this.serverRackMaterial.blending = AdditiveBlending;\n                        this.serverRackMaterial.opacity = .2;\n                    }\n                    child.material = this.serverRackMaterial;\n                    child.renderOrder = 5;\n                }\n                else if (child.name == ID_SERVER_BUILDING_CABINET_FRONTS) {\n                    let srcMaterial: MeshStandardMaterial = child.material as MeshStandardMaterial;\n                    this.cabinetFronts = child;\n                    this.cabinetFrontsMaterial = new MeshBasicMaterial({map: srcMaterial.map});\n                    child.material = this.cabinetFrontsMaterial;\n                    child.renderOrder = 10;\n                }\n                else if (child.name == ID_SERVER_BUILDING_BACK_TECH) {\n                    let srcMaterial: MeshStandardMaterial = child.material as MeshStandardMaterial;\n                    this.backTechMaterial = new MeshBasicMaterial({map: srcMaterial.map});\n                    child.material = this.backTechMaterial;\n                }\n                else if (child.name != ID_DRIVE) {\n                    let srcMaterial: MeshStandardMaterial = child.material as MeshStandardMaterial;\n                    child.material = new MeshBasicMaterial({map: srcMaterial.map});\n                }\n                //@ts-ignore\n                if (child.material.map) { child.material.map.encoding = THREE.LinearEncoding;};\n            } else if (child instanceof Object3D) {\n                if (child.name == ID_SERVER_BUILDING_DRIVE_NULLS) {\n                    child.children.forEach((driveNull) => {\n                        driveNull.add(drive.clone(true));\n                    });\n                }\n            }\n        });\n    }\n\n    fadeMinerBuildingWall(delay: number, speed: number = 1) {\n        gsap.to(this.minerBuildingOutsideMaterial, speed, {opacity: 0, delay: delay, onComplete:() => {\n                this.minerBuildingOutside.visible = false;\n            }});\n        gsap.to(this.minerBuildingTopFloorMaterial, speed, {opacity: 1, delay: delay});\n    }\n\n    hideMinerBuildingFloors(delay: number, speed: number = 1) {\n        gsap.to(this.minerBuildingTopFloorMaterial, speed, {opacity: 0, delay: delay});\n    }\n\n    showMiner(delay: number) {\n        this.meshScene.add(this.minerBuildingDesk);\n        this.minerBuildingDesk.visible = true;\n        gsap.to([this.minerBuildingDeskMaterials,\n            this.minerBuildingNasFrontMaterial,\n            this.minerBuildingNasBackMaterial],\n            .5, {opacity: 1, delay: delay});\n\n        audioController.play(AUDIO_FW3, delay + 2);\n        gsap.to([this.minerBuildingNasFrontMaterial], .5, {opacity: 0, delay: delay + 2, onComplete: () => {\n            this.minerBuildingNasFront.visible = false;\n            }});\n        gsap.to([this.minerBuildingNasBackMaterial], .5, {opacity: .1, delay: delay + 2});\n        gsap.to([this.minerBuildingDriveMaterials], .5, {opacity: .1, delay: delay + 2});\n    }\n\n    hideMiner() {\n        this.minerBuildingDesk.visible = false;\n        this.meshScene.remove(this.minerBuildingDesk);\n\n        gsap.set([this.minerBuildingDeskMaterials,\n                this.minerBuildingNasFrontMaterial,\n                this.minerBuildingNasBackMaterial], {opacity: 0});\n\n        gsap.set([this.minerBuildingNasFrontMaterial,\n            this.minerBuildingNasBackMaterial], {opacity: 0});\n        gsap.set([this.minerBuildingDriveMaterials], {opacity: 0});\n    }\n\n    hideDrives(delay: number) {\n        gsap.to([this.minerBuildingNasFrontMaterial, this.minerBuildingNasBackMaterial], .25, {opacity: 1, delay: delay, onStart: () => {\n                this.minerBuildingNasFront.visible = true;\n            }});\n        gsap.to([this.minerBuildingDriveMaterials], .25, {opacity: 0, delay: delay});\n    }\n\n    fadeServerBuildingWall(delay: number, speed: number = 1) {\n        this.serverBuildingInside.visible = true;\n        this.meshScene.add(this.serverBuildingInside);\n        gsap.to( this.serverBuildingOutsideMaterial, speed, {opacity: .25, delay: delay}); //.1\n    }\n\n    hideServerBuildingWall(delay: number, speed: number) {\n        this.serverBuildingInside.visible = true;\n        this.meshScene.add(this.serverBuildingInside);\n        gsap.to( this.serverBuildingOutsideMaterial, speed, {opacity: 0, delay: delay, onComplete:() => {\n                this.serverBuildingOutside.visible = false;\n            }});\n    }\n\n    hideRacksSets() {\n        this.serverBuildingInside.getObjectByName(ID_SERVER_BUILDING_RACK_SETS1).visible = false;\n        this.serverBuildingInside.getObjectByName(ID_SERVER_BUILDING_RACK_SETS2).visible = false;\n        this.serverBuildingInside.getObjectByName(ID_SERVER_BUILDING_RACK_SETS3).visible = false;\n        this.serverBuildingInside.getObjectByName(ID_SERVER_BUILDING_RACK_SETS4).visible = false;\n    }\n\n    showRacksSets() {\n        this.serverBuildingInside.getObjectByName(ID_SERVER_BUILDING_RACK_SETS1).visible = true;\n        this.serverBuildingInside.getObjectByName(ID_SERVER_BUILDING_RACK_SETS2).visible = true;\n        this.serverBuildingInside.getObjectByName(ID_SERVER_BUILDING_RACK_SETS3).visible = true;\n        this.serverBuildingInside.getObjectByName(ID_SERVER_BUILDING_RACK_SETS4).visible = true;\n    }\n\n    showServerBuildingWall(delay: number, speed: number) {\n        gsap.to( this.serverBuildingOutsideMaterial, speed, {opacity: 1, delay: delay,\n            onStart: () => {\n                this.serverBuildingOutside.visible = true;\n            },\n            onComplete: () => {\n                this.serverBuildingInside.visible = false;\n            }\n        });\n    }\n\n    showServerRacks(delay: number, speed: number) {\n        gsap.to(this.cabinetFrontsMaterial, speed, {delay: delay, opacity: 0, onStart: () => {\n                this.cabinetFronts.visible = true;\n                this.cabinetFrontsMaterial.transparent = true;\n                this.cabinetFrontsMaterial.depthTest = false;\n                this.showRacksSets();\n                audioController.play(AUDIO_FW3);\n            }, onComplete: () => {\n                this.cabinetFronts.visible = false;\n                this.cabinetFrontsMaterial.transparent = false;\n                this.cabinetFrontsMaterial.depthTest = true;\n            }});\n    }\n\n    hideServerRacks(delay: number, speed: number) {\n        gsap.to(this.cabinetFrontsMaterial, speed, {delay: delay, opacity: 1, onStart: () => {\n                this.cabinetFronts.visible = true;\n                this.cabinetFrontsMaterial.transparent = true;\n                this.cabinetFrontsMaterial.depthTest = false;\n            }, onComplete: () => {\n                this.cabinetFrontsMaterial.transparent = false;\n                this.cabinetFrontsMaterial.depthTest = true;\n            }});\n        gsap.to(this.serverDriveMaterial, speed, {delay: delay, opacity: 0});\n    }\n\n    activateDrives(speed: number = 1, delay: number = 0) {\n        gsap.to( [this.serverDriveMaterial.color, this.backTechMaterial.color], speed, {\n            r: .22, g: .56, b: .96,\n            delay: delay\n        });\n    }\n\n    deactivateDrives() {\n        gsap.set( [this.serverDriveMaterial.color, this.backTechMaterial.color], {r: .098, g: .12, b: .16});\n    }\n    \n    reset() {\n        this.serverBuildingOutside.visible = true;\n        gsap.set(cityScene.serverBuildingOutsideMaterial, {opacity: 1});\n        gsap.set(cityScene.minerBuildingOutsideMaterial, {opacity: 1});\n        this.minerBuildingOutside.visible = true;\n        gsap.set([this.minerBuildingTopFloorMaterial, this.minerBuildingOutsideMaterial], {opacity: 1});\n        this.hideMiner();\n        this.hideRacksSets();\n        this.deactivateDrives();\n        this.hideServerRacks(0,0);\n    }\n\n    animateMaterialColor(speed: number, delay: number, dayOrNight: String) {\n        let buildingColorTop;\n        let buildingColorBottom;\n        let landColor;\n        let roadColor;\n        if (dayOrNight == DAY) {\n            buildingColorTop = LIGHT_CITY_BUILDING_COLOR_TOP;\n            buildingColorBottom = LIGHT_CITY_BUILDING_COLOR_BOTTOM;\n            roadColor = new Color(LIGHT_CITY_ROAD_COLOR);\n            landColor = new Color(LIGHT_CITY_LAND_COLOR);\n        } else {\n            buildingColorTop = DARK_CITY_BUILDING_COLOR_TOP;\n            buildingColorBottom = DARK_CITY_BUILDING_COLOR_BOTTOM;\n            roadColor = new Color(DARK_CITY_ROAD_COLOR);\n            landColor = new Color(DARK_CITY_LAND_COLOR);\n        }\n\n        // roadColor.convertSRGBToLinear();\n        // landColor.convertSRGBToLinear();\n\n        //gsap.to( [this.serverBuildingOutsideMaterial.color, this.minerBuildingOutsideMaterial.color], speed,\n            //{r: buildingColor.r, g: buildingColor.g, b: buildingColor.b, delay: delay});\n\n        gsap.to(this, speed, {\n            cityBuildingColorTop: buildingColorTop,\n            cityBuildingColorBottom: buildingColorBottom,\n            delay: delay,\n            onUpdate: () => {\n                this.updateCanvasTextureGradient();\n            }\n        });\n\n        //@ts-ignore\n        gsap.to( this.landMass.material.color, speed, {r: landColor.r, g: landColor.g, b: landColor.b, delay: delay});\n\n        // if (this.bridge) {\n        //     //@ts-ignore\n        //     //gsap.to(this.bridge.material.color, speed, {r: buildingColor.r, g: buildingColor.g, b: buildingColor.b, delay: delay});\n        // }\n\n        if (this.roads) {\n            //@ts-ignore\n            gsap.to( this.roads.material.color, speed, {r: roadColor.r, g: roadColor.g, b: roadColor.b, delay: delay});\n        }\n    }\n\n    updateCanvasTextureGradient() {\n        this.canvasTexture.needsUpdate = true;\n        const ctx = this.canvasTextureContext;\n        ctx.clearRect(0,0, CANVAS_TEXTURE_SIZE, CANVAS_TEXTURE_SIZE)\n        const gradient = ctx.createLinearGradient(0,0, 0, CANVAS_TEXTURE_SIZE);\n        gradient.addColorStop(0, this.cityBuildingColorBottom);\n        gradient.addColorStop(this.cityBuildingColorStop, this.cityBuildingColorTop);\n        gradient.addColorStop(1, this.cityBuildingColorTop);\n        ctx.fillStyle = gradient;\n        ctx.fillRect(0,0, CANVAS_TEXTURE_SIZE, CANVAS_TEXTURE_SIZE);\n\n    }\n\n    getSpriteNulls() {\n        return this.spriteNulls.children;\n    }\n\n    getCamera(index: number, scale: number = SCALE) {\n        const targetObj = this.cameraTargetNulls.getObjectByName('cam'+(index + 1)+'_target');\n        const sourceObj = this.cameraSourceNulls.getObjectByName('cam'+(index + 1));\n        const target = targetObj ? translatePoint( targetObj.position, targetObj.parent).multiplyScalar(scale) : null;\n        const src = sourceObj ? translatePoint( sourceObj.position, sourceObj.parent).multiplyScalar(scale) : null;\n        return {\n            src: src,\n            target: target\n        };\n    }\n}\n\nexport const cityScene = new CityScene();\n","/*\n    Creates and textures the globe and exposes globe-specific animations\n */\n\nimport * as THREE from 'three';\nimport {gsap} from \"gsap\";\nimport {\n    AdditiveBlending, BackSide, DoubleSide, Euler, FrontSide,\n    Mesh, MeshBasicMaterial, MeshPhongMaterial, MeshStandardMaterial,\n    Object3D, PerspectiveCamera, Sprite, SpriteMaterial, Texture, TextureLoader, Vector2, Vector3\n} from \"three\";\nimport {ASSETS_3D, GLOBE_RADIUS} from \"../global/constants\";\nimport {clamp, loadTexture} from \"../global/utils\";\nimport {GLTFLoader} from \"three/examples/jsm/loaders/GLTFLoader\";\nimport {hero3d} from \"./hero3d\";\nimport {state} from \"../global/state\";\n\nexport const DARK_SPHERE_COLOR: number = 0xaaaaaa;\nexport const LIGHT_SPHERE_COLOR: number = 0xffffff;\nexport const DARK_ATMOSPHERE_OPACITY: number = .8;\nexport const LIGHT_ATMOSPHERE_OPACITY: number = .3;\nexport const BACK_GLOW_SCALE:number = 420;\nexport const GLOBE_EASE_AMOUNT:number = 15;\n\nexport class Globe {\n\n    public sphereMaterial: MeshStandardMaterial;\n    public backGlowDarkSprite: Sprite;\n    public loaded: Boolean;\n    public container: Object3D;\n    public globeContainer: Object3D;\n    public atmosphere: Mesh;\n    public easeAmount: number = 1;\n\n    private sphereMesh: Mesh;\n    private globeTexture: Texture;\n    private bumpMapTexture: Texture;\n    private backGlowDarkTexture: Texture;\n    private camera: PerspectiveCamera;\n    private rootMesh: Object3D;\n    private dragStartPoint: Vector2;\n    private currentGlobeRotation: Euler = new Euler(0,0, 0);\n    private targetGlobeRotation: Euler = new Euler(0,0,0);\n    private lastDragDistance: Vector2 = new Vector2(0,0);\n    private introIdleSpeed: number = 0;\n\n    init(camera: PerspectiveCamera, rootMesh: Object3D) {\n        this.camera = camera;\n        this.rootMesh = rootMesh;\n        this.globeContainer = new Object3D();\n        this.container = new Object3D();\n        this.container.add(this.globeContainer);\n    }\n\n    async load() {\n        if (this.loaded) {\n            return;\n        }\n        const assets3d = state.getValue(ASSETS_3D);\n        this.globeTexture = await loadTexture(assets3d.globe_texture_url) as Texture;\n        this.bumpMapTexture = await loadTexture(assets3d.globe_texture_bump_url) as Texture;\n        this.backGlowDarkTexture = await loadTexture(assets3d.globe_texture_back_glow_url) as Texture;\n        await this.loadAtmosphere();\n        this.setupGlobeLayers();\n        this.loaded = true;\n    }\n\n    private loadAtmosphere() {\n        const assets3d = state.getValue(ASSETS_3D);\n        return new Promise<Texture>((resolve, reject) => {\n            const gltf_loader = new GLTFLoader();\n            gltf_loader.load(\n                assets3d.globe_model_atmosphere_url,\n                (gltf: any) => {\n                    const scale = 122.5;\n\n                    this.atmosphere = gltf.scene.getObjectByName('atmosphere').clone(true);\n                    this.atmosphere.renderOrder = 2;\n                    this.atmosphere.scale.set(scale, scale, scale);\n                    const srcMaterialAtmos: MeshStandardMaterial = this.atmosphere.material as MeshStandardMaterial;\n                    const material = new MeshBasicMaterial(\n                        {\n                            transparent: true,\n                            opacity: .5,\n                            depthTest: false,\n                            side: FrontSide,\n                            blending: AdditiveBlending,\n                            map: srcMaterialAtmos.map\n                        }\n                    );\n                    this.atmosphere.material = material;\n                    this.container.add(this.atmosphere);\n\n                    resolve();\n                }\n            );\n        });\n    }\n\n    private setupGlobeLayers() {\n        // Back Glow Texture Dark\n        const backGlowDarkTexture = new SpriteMaterial( {\n            map: this.backGlowDarkTexture,\n            depthWrite: false,\n            opacity: 0\n        });\n        this.backGlowDarkSprite = new THREE.Sprite( backGlowDarkTexture );\n        this.backGlowDarkSprite.scale.set(BACK_GLOW_SCALE, BACK_GLOW_SCALE, 1 );\n        this.container.add(this.backGlowDarkSprite);\n\n        // Sphere\n        const geometry = new THREE.SphereGeometry(GLOBE_RADIUS, 80, 80);\n        this.sphereMaterial = new MeshStandardMaterial({\n            map: this.globeTexture,\n            color: LIGHT_SPHERE_COLOR,\n            bumpMap: this.bumpMapTexture,\n            bumpScale: .65\n        });\n        this.sphereMesh = new THREE.Mesh(geometry, this.sphereMaterial);\n        this.globeContainer.add(this.sphereMesh);\n    }\n\n    public render() {\n        if (this.loaded) {\n            const delta = 1150 - this.camera.position.z;\n            const back_glow_scale = BACK_GLOW_SCALE + (delta * (delta / 500)) / 25;\n            this.backGlowDarkSprite.scale.x = this.backGlowDarkSprite.scale.y = back_glow_scale;\n            this.atmosphere.lookAt(this.camera.position);\n            this.targetGlobeRotation.y -= this.introIdleSpeed;\n            this.currentGlobeRotation.x += (this.targetGlobeRotation.x - this.currentGlobeRotation.x) / this.easeAmount;\n            this.currentGlobeRotation.y += (this.targetGlobeRotation.y - this.currentGlobeRotation.y) / this.easeAmount;\n            this.currentGlobeRotation.z += (this.targetGlobeRotation.z - this.currentGlobeRotation.z) / this.easeAmount;\n            this.globeContainer.rotation.copy(this.currentGlobeRotation);\n        }\n    }\n\n    public get rotation() : Euler {\n        return this.targetGlobeRotation;\n    }\n\n    public animateInBackGlowDark(speed: number = 1, delay: number = 0, ease: string = 'Power1.easeInOut') {\n        gsap.to(this.backGlowDarkSprite.material, speed, {opacity: 1, delay: delay, ease: ease, onStart: () => {}});\n    }\n\n    public animateOutBackGlowDark(speed: number = 1, delay: number = 0, ease: string = 'Power1.easeInOut') {\n        gsap.to(this.backGlowDarkSprite.material, speed, {opacity: 0, delay: delay, ease: ease, onComplete: () => {}});\n    }\n\n    public add() {\n        if (!this.container.parent) {\n            this.rootMesh.add(this.container);\n        }\n    }\n\n    public remove() {\n        if (this.container.parent) {\n            this.rootMesh.remove(this.container);\n        }\n    }\n\n    public startDrag(x: number, y: number) {\n        this.dragStartPoint = new Vector2(x, y);\n    }\n\n    public drag(x: number, y: number) {\n        const dragDistance = new Vector2(this.dragStartPoint.x - x, this.dragStartPoint.y - y);\n        const dragDelta = this.lastDragDistance.sub(dragDistance);\n        this.targetGlobeRotation.y += dragDelta.x / 1000;\n        this.targetGlobeRotation.x = clamp(this.targetGlobeRotation.x, -.25, .4);\n        this.targetGlobeRotation.x += dragDelta.y / 1000;\n        this.lastDragDistance.copy(dragDistance);\n    }\n\n    public stopDrag(x: number, y: number) {\n        this.lastDragDistance = new Vector2(0,0);\n    }\n\n    public normalizeRotation() {\n        this.targetGlobeRotation.y = this.targetGlobeRotation.y % (Math.PI * 2);\n        this.currentGlobeRotation.y = this.currentGlobeRotation.y % (Math.PI * 2);\n    }\n\n    public resetRotation(rotation: Vector3) {\n        hero3d.globe.rotation.set(rotation.x, rotation.y, rotation.z);\n        this.currentGlobeRotation.set(rotation.x, rotation.y, rotation.z);\n    }\n}\n","/*\nThe main timer for the 3d application.\n */\n\nimport {gsap} from \"gsap\";\nimport Emitter from \"@hellomonday/emitter\";\n\nexport const ACT_CHANGE_EVENT = 'actChangeEvent';\n\nexport class Timer extends Emitter {\n\n    public currentChapterIndex: number;\n    public currentActIndex: number;\n    public duration: number = 0;\n    public paused: boolean = true;\n    private data: any;\n    private gsapTimer: any;\n\n    public setData(data: any) {\n        this.data = data;\n        this.duration = this.getActStartEndTime().end;\n    }\n\n    public start() {\n        this.emit(ACT_CHANGE_EVENT, {chapter: this.currentChapterIndex, act: this.currentActIndex});\n        this.startTimer();\n    }\n\n    public pause() {\n        this.paused = true;\n        if (this.gsapTimer) {\n            this.gsapTimer.pause();\n        }\n    }\n\n    public resume() {\n        this.paused = false;\n        if (this.gsapTimer) {\n            this.gsapTimer.resume();\n        } else {\n            this.start();\n        }\n    }\n\n    public reset() {\n        if (this.gsapTimer) {\n            this.gsapTimer.kill();\n            this.gsapTimer = null;\n        }\n        this.currentChapterIndex = 1;\n        this.currentActIndex = 1;\n    }\n\n    public get progress() {\n        return this.getActStartEndTime(this.currentChapterIndex, this.currentActIndex).start;\n    }\n\n    public nextAct() {\n        let act = this.currentActIndex + 1;\n        let chapter = this.currentChapterIndex;\n        if (act > this.data[chapter - 1].acts.length) {\n            act = 1;\n            chapter = chapter > this.data.length - 1 ? 1 : chapter + 1;\n        }\n        this.gotoAct(chapter, act);\n    }\n\n    public gotoAct(chapterIndex: number, actIndex: number = 0) {\n        const lastChapterIndex = this.currentChapterIndex;\n        this.currentChapterIndex = chapterIndex;\n        this.currentActIndex = actIndex;\n        this.emit(ACT_CHANGE_EVENT, {chapter: chapterIndex, act: actIndex, lastChapter: lastChapterIndex});\n        this.startTimer();\n    }\n\n    public getChapterDuration(chapterIndex: number) {\n        const chapterData = this.data[chapterIndex - 1];\n        let duration = 0;\n        for (let i = 0; i < chapterData.acts.length; i++) {\n            duration += parseInt(chapterData.acts[i].duration);\n        }\n        return duration;\n    }\n\n    private getActStartEndTime(chapterIndex: number = this.data.length, chapterActIndex: number = null) {\n        let duration = 0;\n        let act;\n        let actDuration;\n\n        for (let i = 0; i < chapterIndex; i++) {\n            let actIndex = chapterActIndex && i == chapterIndex - 1 ? chapterActIndex : this.data[i].acts.length;\n            for (let j = 0; j < actIndex; j++) {\n                act = this.data[i].acts[j];\n                actDuration = parseInt(act.duration);\n                duration += actDuration;\n            }\n        }\n        return {start: duration - actDuration, end: duration};\n    }\n\n    private startTimer() {\n        if (this.gsapTimer) {\n            this.gsapTimer.kill();\n        }\n        const delay = this.data[this.currentChapterIndex - 1].acts[this.currentActIndex - 1].duration;\n        this.gsapTimer = gsap.delayedCall(delay, this.nextAct.bind(this));\n    }\n}\n\n\n","/*\nThe Animation sequencer for all 3d animations\n */\n\nimport {gsap} from \"gsap\";\nimport {\n    ambientLight,\n    camera,\n    DARK_AMBIENT_LIGHT_CITY,\n    DARK_AMBIENT_LIGHT_GLOBE, DARK_POINT_LIGHT_CITY,\n    DARK_POINT_LIGHT_GLOBE,\n    DARK_POINT_LIGHT_INT_CITY,\n    DARK_POINT_LIGHT_INT_GLOBE,\n    DARK_SCENE_BG,\n    DEFAULT_HOVER_EASE,\n    hero3d,\n    LIGHT_AMBIENT_LIGHT_CITY,\n    LIGHT_AMBIENT_LIGHT_GLOBE,\n    LIGHT_POINT_LIGHT,\n    LIGHT_POINT_LIGHT_INT_CITY,\n    LIGHT_POINT_LIGHT_INT_GLOBE,\n    LIGHT_SCENE_BG,\n    pointLight,\n    scene\n} from \"./hero3d\";\nimport {DARK_ATMOSPHERE_OPACITY, DARK_SPHERE_COLOR, LIGHT_ATMOSPHERE_OPACITY, LIGHT_SPHERE_COLOR} from \"./globe\";\nimport {overlayFactory} from \"./overlayFactory\";\nimport {cityScene} from \"./cityScene\";\nimport {Color, Euler, Fog, ShaderMaterial, Vector2, Vector3, Vector4} from \"three\";\nimport {hexNumToStr} from \"../global/utils\";\nimport {\n    CITY, COLOR_BLUE_RGBA,\n    COLOR_RED_RGBA, CURRENT_SECTION,\n    DAY, GLOBE, GLOBE_OR_CITY, ICON_BLOCK_APPROVED, ICON_BLOCK_DECLINED, ICON_BLOCK_OUT, ICON_CHECK_TO_BLOCK,\n    ICON_CLIENT,\n    ICON_COIN_SPIN,\n    ICON_DOC, ICON_DOC_BLACK,\n    ICON_MINER, ICON_QUESTION_IN, ICON_QUESTION_TO_CHECK, ICON_REQUEST, LANG_CODE, LOCALE_CHINESE,\n    NIGHT,\n    TIME_OF_DAY\n} from \"../global/constants\";\nimport {state} from \"../global/state\";\nimport {PathItem} from \"./pathItem\";\nimport {\n    AUDIO_BCIN,\n    AUDIO_BE3,\n    AUDIO_BE5,\n    AUDIO_C2B,\n    AUDIO_CA1, AUDIO_CH1_MUSIC, AUDIO_CH2_MUSIC, AUDIO_CH3_MUSIC, AUDIO_CH4_MUSIC,\n    AUDIO_CHA,\n    AUDIO_CITY,\n    AUDIO_CW,\n    AUDIO_FS1,\n    AUDIO_FS2,\n    AUDIO_FW1,\n    AUDIO_FW2,\n    AUDIO_FW3,\n    AUDIO_GR1,\n    AUDIO_GR2,\n    AUDIO_GR3,\n    AUDIO_GR4, AUDIO_GR5,\n    AUDIO_GVA1, AUDIO_IAMB,\n    AUDIO_LW1,\n    AUDIO_MA,\n    AUDIO_MW,\n    AUDIO_PW1,\n    AUDIO_PW2,\n    AUDIO_Q2C,\n    AUDIO_QIN, AUDIO_REDX, AUDIO_SL1, AUDIO_SL2,\n    AUDIO_SL3,\n    AUDIO_TA,\n    AUDIO_TW1,\n    AUDIO_TW2,\n    AUDIO_TW3,\n    audioController\n} from \"../global/audioController\";\n\n/*\nDefine position constants that are reused\n */\nconst LOOK_AT = new Vector3(0,0,100);\nconst GLOBE_ZOOM_IN_POSITION = new Vector3(0,0,500);\nconst GLOBE_ZOOM_OUT_POSITION = new Vector3(0,0,750);\nconst GLOBE_PACKAGE_POSITION = new Vector3(0,0,400);\nconst GLOBE_PACKAGE_LOOKAT = new Vector3(0,200,0);\nconst CITY_ZOOM_OUT_POSITION = new Vector3(0,0,900);\n\nlet GLOBE_LANDING_ROTATION: Vector3;\nlet GLOBE_HOME_ROTATION: Vector3;\nlet GLOBE_LOCAL_TRANSFER_ROTATION: Vector3;\nlet GLOBE_PACKAGE_ROTATION: Vector3;\n\nexport function init() {\n    if (LANG_CODE === LOCALE_CHINESE) {\n        GLOBE_LANDING_ROTATION = new Vector3(.5, -3.05, 0);\n        GLOBE_HOME_ROTATION = new Vector3(.5, -3.65, 0);\n        GLOBE_LOCAL_TRANSFER_ROTATION = new Vector3(.5, -3.3, 0);\n        GLOBE_PACKAGE_ROTATION = new Vector3(-.1, -3.65, 0);\n    } else {\n        GLOBE_LANDING_ROTATION = new Vector3(0,0, 0);\n        GLOBE_HOME_ROTATION =  new Vector3(.71, -.28, 0);\n        GLOBE_LOCAL_TRANSFER_ROTATION = new Vector3(.6, .03, 0);\n        GLOBE_PACKAGE_ROTATION = new Vector3(.1, -.28,0);\n    }\n}\n\n/*\nAnimations for Intro globe sequence paths\n*/\nexport function showIntroPaths() {\n    overlayFactory.introAnimations.forEach((introAnimation, index) => {\n        animateIntroPath(introAnimation, Math.random() * 15);\n    });\n}\n\nfunction animateIntroPath(introAnimation: any, delay: number) {\n    const speedIn = 1.5;\n    const solidSpeedIn = 1.5;\n    const speedOut = 1.5;\n    const staggerDelay = .5;\n    const path = introAnimation.path;\n    const delayIn = delay;\n    const delayOut = delay + speedIn + solidSpeedIn;\n\n    introAnimation.clientParticle.animateIn(1, delayIn);\n    introAnimation.minerParticles.animateIn(1, delayIn);\n    path.animateIn(speedIn, delayIn, staggerDelay);\n    path.animateInSolid(solidSpeedIn, delayIn + speedIn, .2, (material: ShaderMaterial) => {\n        material.uniforms.reverseDirection.value = 1;\n    });\n\n    path.pathFollowers.forEach((pathItems :PathItem[], index: number) => {\n        pathItems.forEach((pathItem: PathItem) => {\n            pathItem.animateIn(speedIn, delayIn + speedIn + (index * .2));\n        });\n    });\n\n    path.animateOut(speedOut, delayOut, staggerDelay, (material: ShaderMaterial, index: number) => {\n        material.uniforms.reverseDirection.value = 0;\n        if (index == path.tubes.length - 1) {\n            animateIntroPath(introAnimation, Math.random() * 15 + 5);\n            introAnimation.clientParticle.animateOut(1);\n            introAnimation.minerParticles.animateOut(1);\n        }\n    });\n}\n\nexport function hideIntroPaths() {\n    overlayFactory.introAnimations.forEach((introAnimation, index) => {\n        introAnimation.path.animateOut(1.5);\n        introAnimation.path.pathFollowers.forEach((pathItems :PathItem[]) => {\n            pathItems.forEach((pathItem: PathItem) => {\n                pathItem.reset();\n            });\n        });\n        introAnimation.clientParticle.animateOut();\n        introAnimation.minerParticles.animateOut();\n    });\n}\n\n/*\nStarts globe from the beginning upon entry\n */\nexport function goto_landing() {\n    cityScene.reset();\n    overlayFactory.hideAll();\n    hideCity(CITY_ZOOM_OUT_POSITION);\n    showGlobe(GLOBE_ZOOM_OUT_POSITION, LOOK_AT, 0, 0);\n    gsap.set(hero3d.globe.rotation, {y: 0, x: 0, z: 0});\n    hero3d.globe.resetRotation(GLOBE_LANDING_ROTATION);\n    nightToDay(0);\n}\n\n/*\nChapter 1 - Act 1\nShows CN network\n */\nexport function play1_1(chapterData: any, actData: any) {\n    hideCity(CITY_ZOOM_OUT_POSITION);\n    showGlobe(GLOBE_ZOOM_OUT_POSITION, LOOK_AT, 0, 0);\n    nightToDay(0);\n    dayToNight(3);\n    fadeInScene(0, 1.5);\n    audioController.play(AUDIO_CH1_MUSIC);\n    audioController.play(AUDIO_GVA1);\n    audioController.play(AUDIO_CHA);\n    const remoteUserParticle = overlayFactory.ch1_remoteUserCNParticle;\n\n    gsap.to(hero3d.globe.rotation, 4, {y: -2.6, x: .2, ease: 'Power2.easeInOut'});\n    audioController.play(AUDIO_GR1);\n\n    gsap.to(camera.position, 4, {z: 575,  ease: 'Power1.easeInOut'});\n\n    overlayFactory.ch1_cnNetworkParticles.animateIn(1.5, 3);\n    audioController.play(AUDIO_BE3, 3.5);\n\n    showHideText(3, 6, chapterData.titles[0].title);\n\n    gsap.to(hero3d.globe.rotation, 3, {y: -3.16, x: .4, delay: 6, ease: 'Power1.easeInOut'});\n    audioController.play(AUDIO_GR2, 6);\n\n    remoteUserParticle.animateInSprites(.5, 7);\n\n    remoteUserParticle.animateIn(0, 8);\n\n    gsap.to(camera.position, 2, {z: 575, ease: 'Power1.easeInOut', delay: 10} );\n\n    showHideText(7, 10, chapterData.titles[1].title);\n}\n\n/*\nChapter 1 - Act 2\nShows slow CN transfer\n */\nexport function play1_2(chapterData: any, actData: any, chapterIndex: number, actIndex: number) {\n    dayToNight(0);\n\n    const remoteUserParticle = overlayFactory.ch1_remoteUserCNParticle;\n    overlayFactory.ch1_remoteUserCNParticle.animateIn(0);\n    overlayFactory.ch1_cnNetworkParticles.animateIn(0);\n    remoteUserParticle.animateInSprites(0);\n    gsap.set(camera.position, {z: 575} );\n    gsap.set(hero3d.globe.rotation, {y: -3.16, x: .4});\n    const transferTubeIndex = 4;\n    overlayFactory.ch1_remoteUserPaths.animateIn(1, 0, .1);\n    overlayFactory.ch1_remoteUserPaths.animateOut(1.5, 2, 0, undefined, [transferTubeIndex]);\n    overlayFactory.ch1_cnNetworkParticles.animateInSprites(.5, 3.5);\n\n    gsap.to(hero3d.globe.rotation, 4, {y: -3.04, delay: 1, ease: \"Power2.easeInOut\"});\n    audioController.play(AUDIO_GR3, 1);\n\n    remoteUserParticle.getSprite().pulse(.5, 7);\n\n    overlayFactory.ch1_remoteUserPaths.animateInSolid(3.5, 3.5, 0, (material: ShaderMaterial) => {\n            material.uniforms.reverseDirection.value = 1;\n        });\n    overlayFactory.ch1_remoteUserPaths.getPathFollowers(transferTubeIndex)[0].animateIn(3.5, 3.5);\n    overlayFactory.ch1_remoteUserPaths.animateOut(1.5, 7.5, null, () => {\n        remoteUserParticle.animateOutSprites(.5);\n    });\n    overlayFactory.ch1_cnNetworkParticles.animateOutSprites(.5, 7.5);\n    showHideText(0, 7.5, chapterData.titles[2].title);\n}\n\n/*\nChapter 1 - Act 3\nShows fast Africa transfer\n */\nexport function play1_3(chapterData: any, actData: any, chapterIndex: number, actIndex: number) {\n    dayToNight(0);\n    gsap.set(camera.position, {z: 575} );\n    gsap.set(hero3d.globe.rotation, {y: -3.04, x: .4});\n    gsap.to(camera.position, 2, {z: 650, ease: 'Power2.easeInOut'} );\n    audioController.play(AUDIO_TW1);\n\n    showHideText(1, 5, chapterData.titles[3].title);\n    overlayFactory.ch1_cnNetworkParticles.animateIn(0);\n    overlayFactory.ch1_cnNetworkParticles.animateOut(1, 1);\n\n    overlayFactory.filecoinNetworkParticles.animateIn(2, 1);\n    audioController.play(AUDIO_BE5, 1);\n\n    gsap.to(hero3d.globe.rotation, 10, {y: -2.2, x: -.3, ease: 'Power1.easeInOut'});\n    audioController.play(AUDIO_GR4, 1);\n\n    gsap.to(camera.position, 3, {z: 500, delay: 7, ease: 'Power1.easeInOut'} );\n    audioController.play(AUDIO_GR2, 7);\n\n    showHideText(9, 13, chapterData.titles[4].title);\n    overlayFactory.ch1_remoteUserFCAfrica2d.animateIn(.5, 9);\n    overlayFactory.ch1_remoteUserFCAfrica2d.animateOut(.5, 11);\n    overlayFactory.ch1_remoteUserFCAfricaParticle.animateIn(1, 9);\n    overlayFactory.ch1_fastTransferAfricaPaths.animateIn(1, 9);\n    overlayFactory.ch1_fastTransferAfricaPaths.animateInSolid(1, 10, 0, (material: ShaderMaterial) => {\n        material.uniforms.reverseDirection.value = 1;\n    });\n    overlayFactory.ch1_fastTransferAfricaPaths.getPathFollowers(0)[0].animateIn(1, 10);\n    overlayFactory.ch1_fastTransferAfricaPaths.animateOut(1, 11);\n}\n\n/*\nChapter 1 - Act 4\nShows fast local transfer (NYC or Shnaghai)\n */\nexport function play1_4(chapterData: any, actData: any, chapterIndex: number, actIndex: number) {\n    dayToNight(0);\n    overlayFactory.filecoinNetworkParticles.animateIn(0);\n    gsap.set(hero3d.globe.rotation, {y: -2.2, x: -.3});\n    gsap.set(camera.position, {z: 500} );\n\n    gsap.to(hero3d.globe.rotation, 3, {x: GLOBE_LOCAL_TRANSFER_ROTATION.x, y: GLOBE_LOCAL_TRANSFER_ROTATION.y, ease: 'Power2.easeInOut', delay: 0});\n    audioController.play(AUDIO_GR1);\n\n    gsap.to(camera.position, 1.5, {z: 600, delay: 0, ease: 'Power1.easeInOut'} );\n    gsap.to(camera.position, 1.5, {z: 450, delay: 1.5, ease: 'Power1.easeInOut'} );\n    showHideText(3, 7, chapterData.titles[5].title);\n    const removeUserSprite2d = overlayFactory.ch1_remoteUserLocalTransferParticle.getSprite();\n    overlayFactory.ch1_remoteUserLocalTransferParticle.animateIn(0, 3.5);\n    removeUserSprite2d.animateIn(.5, 3);\n    removeUserSprite2d.animateOut(.5, 5);\n    overlayFactory.ch1_localTransferPaths.animateIn(1, 3);\n    overlayFactory.ch1_localTransferPaths.animateInSolid(1, 4, 0, (material: ShaderMaterial) => {\n        material.uniforms.reverseDirection.value = 1;\n    });\n    overlayFactory.ch1_localTransferPaths.getPathFollowers(0)[0].animateIn(1, 4);\n    overlayFactory.ch1_localTransferPaths.animateOut(1, 5);\n    overlayFactory.filecoinNetworkParticles.animateOut(.5, 7);\n    overlayFactory.ch1_remoteUserCNParticle.animateOut(.5, 7);\n    overlayFactory.ch1_remoteUserLocalTransferParticle.animateOut(.5, 7);\n    gsap.to(hero3d.globe.rotation, 1.5, {x: GLOBE_HOME_ROTATION.x, y: GLOBE_HOME_ROTATION.y, delay: 6, ease: 'Power2.easeInOut'});\n    audioController.play(AUDIO_GR2, 5);\n    audioController.play(AUDIO_TW2, 6);\n}\n\n/*\nChapter 1 - Act 5\nShow city with long transfer between buildings\n */\nexport function play1_5(chapterData: any, actData: any, chapterIndex: number, actIndex: number) {\n    dayToNight(0);\n    gsap.set(camera.position, {z: 450} );\n    hideGlobe(new Vector3(0,0,340), 0, 1.5);\n    fadeScene(0, 1.5);\n    audioController.pause(AUDIO_GVA1);\n    audioController.play(AUDIO_CITY, 2);\n\n    //Enter into City\n    const cam1 = cityScene.getCamera(0);\n    gsap.set(camera.position, {delay: 1.5, x: cam1.src.x, y: cam1.src.y, z: cam1.src.z});\n    gsap.set(hero3d.lookAtPosition, {delay: 1.5, x: cam1.target.x, y: cam1.target.y, z: cam1.target.z});\n    const cam2 = cityScene.getCamera(2);\n    const tweens = gotoCityPoint(cam2.src, cam2.target, 1.5, 21.5, 'Power4.easeOut'); //, 'none'\n    //updateLighting(0, 1.5);\n    gsap.to(tweens, 2, {timeScale: 0.1, ease: 'Power1.easeIn', delay: 1.5});\n    gsap.to(tweens, 2.5, {timeScale: 2, ease: 'Power1.easeInOut', delay: 14});\n    showHideText(3, 7, chapterData.titles[6].title);\n    hero3d.setHoverDistance(new Vector3(.08, .04, 0), 3, 2);\n\n    overlayFactory.ch1_citySpotsParticles.animateIn(2, 4.5);\n    audioController.play(AUDIO_BE3, 4.5)\n\n    //Show initial file transfer between buildings\n    overlayFactory.ch1_cityUserLong2d.animateIn(.5, 3.5);\n    overlayFactory.ch1_cityMinerLongTransferParticles.animateIn(1.5, 4.5);\n    overlayFactory.ch1_citySpotsParticles.animateOut(1, 7.5);\n    overlayFactory.ch1_cityStorageLong2d.animateIn(.5, 7.5);\n    overlayFactory.ch1_longCityTransferPaths.animateIn(0, 9);\n    overlayFactory.ch1_longCityTransferPaths.getPathFollowers(0)[0].animateIn(2, 10, 0);\n    overlayFactory.ch1_longCityTransferPaths.material.uniforms.reverseDirection.value = 0;\n    overlayFactory.ch1_longCityTransferPaths.animateInSolid(2,  10, 0,(material: ShaderMaterial) => {\n        material.uniforms.reverseDirection.value = 1;\n        overlayFactory.ch1_cityDocLong2d.animateIn(.5);\n    });\n    overlayFactory.ch1_longCityTransferPaths.animateOut(2, 12);\n    overlayFactory.ch1_cityMinerLongTransferParticles.animateOut(0, 12);\n    overlayFactory.ch1_cityStorageLong2d.animateOut(.5, 12);\n    overlayFactory.ch1_cityDocLong2d.animateOut(.5, 14);\n    overlayFactory.ch1_cityUserLong2d.animateOut(.5, 14.2);\n\n    // Show short transfer between the floors\n    showHideText(17.5, 22.5, chapterData.titles[7].title);\n    hero3d.setHoverDistance(new Vector3(.03, .015, 0), 15.5, 2);\n    cityScene.fadeMinerBuildingWall(17.5, .5);\n    overlayFactory.ch1_cityUserShort2d.animateIn(.5, 17.5);\n    overlayFactory.ch1_cityStorageShort2d.animateIn(.5, 18.5);\n    overlayFactory.ch1_shortCityTransferPaths.animateIn(1, 18.5);\n    overlayFactory.ch1_shortCityTransferPaths.getPathFollowers(0)[0].animateIn(1, 19.5, 0);\n    overlayFactory.ch1_shortCityTransferPaths.material.uniforms.reverseDirection.value = 0;\n    overlayFactory.ch1_shortCityTransferPaths.animateInSolid(1,  19.5, 0, (material: ShaderMaterial) => {\n        material.uniforms.reverseDirection.value = 1;\n        overlayFactory.ch1_cityDocShort2d.animateIn(.5);\n    });\n    // Hide transfer lines between floors\n    overlayFactory.ch1_shortCityTransferPaths.animateOut(1, 20.5);\n    overlayFactory.ch1_cityUserShort2d.animateOut(.5, 20.5);\n    overlayFactory.ch1_cityDocShort2d.animateOut(.5, 21.5);\n    overlayFactory.ch1_cityStorageShort2d.animateOut(.5, 21.75);\n}\n\n/*\nChapter 1 - Act 6\nShow miner desk inside of building\n */\nexport function play1_6(chapterData: any, actData: any, chapterIndex: number, actIndex: number) {\n    dayToNight(0);\n    const cameraNulls1Pos = cityScene.getCamera(2);\n    hideGlobe(LOOK_AT);\n    gotoCityPoint(cameraNulls1Pos.src, cameraNulls1Pos.target);\n    // updateLighting(0);\n    audioController.play(AUDIO_TW3, .5);\n    // Show miner view\n    const minerCam = cityScene.getCamera(5);\n    gsap.to(camera.position, 5, {\n        x: minerCam.src.x, y: minerCam.src.y, z: minerCam.src.z, ease: 'Power2.easeInOut'});\n    gsap.to(hero3d.lookAtPosition, 5, {\n        x: minerCam.target.x, y: minerCam.target.y, z: minerCam.target.z, ease: 'Power2.easeInOut',\n        onStart: () => {\n            hero3d.setHoverDistance(new Vector3(0,0, 0));\n        },\n        onComplete: () => {\n            hero3d.setHoverDistance(new Vector3(.0005,.0005, 0), 0, 2);\n        }});\n    cityScene.hideMinerBuildingFloors(3, .25);\n    audioController.play(AUDIO_FW1, 2.7);\n\n    cityScene.showMiner(3);\n    audioController.play(AUDIO_IAMB, 3);\n\n    overlayFactory.ch1_minerTransferPaths.animateIn(1, 4);\n    overlayFactory.ch1_minerTransferPaths.getPathFollowers(0)[0].animateIn(2, 4, 2);\n    overlayFactory.ch1_coinSpin2d.animateIn(.5, 6);\n    overlayFactory.ch1_coinSpritesheet.play(6, .5, 7);\n    overlayFactory.ch1_coinSpin2d.animateOut(.5, 10);\n    showHideText(4, 9, chapterData.titles[8].title);\n    overlayFactory.ch1_minerTransferPaths.animateOut(1, 10);\n\n    cityScene.hideDrives(10.5);\n    audioController.play(AUDIO_FW2, 10.5);\n\n    // Zoom out and hide\n    let hidePoint = cityScene.getCamera(5).src;\n    hidePoint.y += 1;\n    hidePoint.z += 2;\n    hideCity(hidePoint, minerCam.target, 11, 1.5);\n    audioController.play(AUDIO_GR3, 10.5);\n    audioController.fadeOut(AUDIO_IAMB, 10.5);\n\n    fadeScene(11, 1.5);\n    hero3d.setHoverDistance(new Vector3(0,0, 0), 12.5);\n}\n\n/*\nChapter 2 - Act 1\nShow globe spin and document coming from city back to sky\n */\nexport function play2_1(chapterData: any, actData: any, chapterIndex: number, actIndex: number) {\n    hideGlobe(LOOK_AT);\n    dayToNight(0);\n    fadeOutScene(0, 0);\n    hero3d.toColor(1, 0, hexNumToStr(LIGHT_SCENE_BG));\n    audioController.play(AUDIO_CH2_MUSIC);\n    audioController.play(AUDIO_CHA);\n    audioController.play(AUDIO_CITY);\n    audioController.play(AUDIO_TW2);\n\n    // Move into City\n    const cameraNulls = cityScene.getCamera(3);\n    gsap.set(camera.position, {x: cameraNulls.src.x, y: 300, z: cameraNulls.src.z});\n    gsap.set(hero3d.lookAtPosition, {x: cameraNulls.target.x, y: cameraNulls.target.y, z: cameraNulls.target.z});\n    nightToDay(0, 1);\n    gotoCityPoint(new Vector3(cameraNulls.src.x + 100, cameraNulls.src.y, cameraNulls.src.z + 100),\n        cameraNulls.target, 1, 6, 'Power1.easeOut');\n    updateLighting(0, 1);\n    fadeInScene(1, 1.5);\n\n    showHideText(2, 6, chapterData.titles[0].title);\n    hero3d.setHoverDistance(new Vector3(-.04, .02, .04), 1, 1);\n    overlayFactory.ch2_cityPackageUser2d.animateIn(.5, 3);\n    overlayFactory.ch2_cityPackageDoc2d.animateIn(.5, 6);\n    audioController.play(AUDIO_TW1, 6);\n    audioController.play(AUDIO_FS1, 6);\n\n    // Extend document pin and Move up from City\n    gsap.to(overlayFactory.ch2_cityPackageDoc2d, 3, {delay: 5.5, ease: 'Power1.easeInOut', pinHeight: 600});\n\n    const transOutSrc = new Vector3(cameraNulls.src.x, cameraNulls.src.y + 200, cameraNulls.src.z);\n    const transOutTarget = new Vector3(cameraNulls.target.x, cameraNulls.target.y + 200, cameraNulls.target.z);\n    hideCity(transOutSrc, transOutTarget,6, 2);\n    overlayFactory.ch2_cityPackageUser2d.animateOut(0, 8);\n    overlayFactory.ch2_cityPackageDoc2d.animateOut(0, 8);\n    hero3d.setHoverDistance(new Vector3(0,0, 0), 6);\n    fadeOutScene(6.5, 1.5);\n}\n\n/*\nChapter 2 - Act 2\nShow Globe and Miner selection with data speeds\n */\nexport function play2_2(chapterData: any, actData: any, chapterIndex: number, actIndex: number) {\n    fadeOutScene(0, 0);\n    fadeInScene(0, 1.5);\n    gsap.set(hero3d.globe.rotation, {y: GLOBE_PACKAGE_ROTATION.y, x: GLOBE_PACKAGE_ROTATION.x});\n    gsap.set(camera.position, {x: 0, y: 0, z: 250});\n    gsap.set(hero3d.lookAtPosition, {x: 0, y: 250, z: 0 });\n    showGlobe(GLOBE_PACKAGE_POSITION, GLOBE_PACKAGE_LOOKAT,0, 3);\n    nightToDay(0);\n    audioController.pause(AUDIO_CITY);\n    audioController.play(AUDIO_GVA1);\n    audioController.play(AUDIO_GR1);\n\n    // Animate in transfer points\n    showHideText(1, 4, chapterData.titles[1].title);\n    overlayFactory.ch2_packageUserParticles.animateIn(1, 1 );\n    overlayFactory.ch2_globePackageDoc2d.animateIn(1, 1 );\n    audioController.play(AUDIO_FS2, 1);\n\n    overlayFactory.ch2_globeClient2d.animateIn(1, 1 );\n    gsap.to(overlayFactory.ch2_globePackageDoc2d, 2, {ease: 'Power2.easeOut', pinHeight: 250, delay: 1});\n\n    // Zoom closer\n    gsap.to(camera.position, 2, {z: 320, y: 80, delay: 4, ease: 'Power1.easeInOut'});\n    gsap.to(hero3d.lookAtPosition, 2, {y: 155, delay: 4, ease: 'Power1.easeInOut'});\n    audioController.play(AUDIO_GR2, 4);\n\n    // Show selected miners and transfers\n    showHideText(6, 9, chapterData.titles[2].title);\n\n    overlayFactory.ch2_packageMinerParticles.animateIn(1,6, true);\n    audioController.play(AUDIO_BE3, 6);\n\n    overlayFactory.ch2_packageChosenMinerParticles.animateIn(1, 6);\n    overlayFactory.ch2_packageChosenMinerParticles.getSprite('text_0').animateIn(1, 6);\n    overlayFactory.ch2_packageChosenMinerParticles.getSprite('text_1').animateIn(1, 6);\n    overlayFactory.ch2_packageMinerPaths.animateIn(2, 6, .1);\n    overlayFactory.ch2_packageMinerPaths.animateOut(2, 9);\n    audioController.play(AUDIO_TA, 11);\n\n    overlayFactory.ch2_packageMinerParticles.animateOut(1,11, true);\n    overlayFactory.ch2_packageChosenMinerParticles.getSprite('miner_1').animateIn(1, 12);\n    overlayFactory.ch2_packageChosenMinerParticles.getSprite('miner_0').animateIn(1, 12);\n    const rotY = LANG_CODE === LOCALE_CHINESE ? .03 : .1;\n    gsap.to(hero3d.globe.rotation, 2, {y: GLOBE_PACKAGE_ROTATION.y + rotY, ease: 'Power2.easeInOut', delay: 12});\n    audioController.play(AUDIO_GR3, 12);\n    overlayFactory.ch2_packageChosenMinerPaths.animateIn(2, 12);\n    overlayFactory.ch2_globePackageDoc2d.animateOut(.5, 12);\n    gsap.to(overlayFactory.ch2_globePackageDoc2d, 1, {ease: 'Power1.easeInOut', pinHeight: 60, delay: 11.5});\n    audioController.play(AUDIO_FS1, 11.5);\n    audioController.play(AUDIO_PW1, 12);\n    showHideText(11, 14, chapterData.titles[3].title);\n\n    // Animate files over paths\n    overlayFactory.ch2_packageChosenMinerPaths.getPathFollowers(0)[0].animateIn(1, 14);\n    overlayFactory.ch2_packageChosenMinerPaths.getPathFollowers(1)[0].animateIn(1, 14);\n    overlayFactory.ch2_packageChosenMinerPaths.animateInSolid(1, 14, 0, () => {\n        overlayFactory.ch2_packageChosenMinerPaths.material.uniforms.reverseDirection.value = 1;\n    });\n\n    // Animate Out\n    overlayFactory.ch2_packageChosenMinerPaths.animateOut(2, 15);\n    audioController.play(AUDIO_LW1, 16);\n\n    overlayFactory.ch2_packageChosenMinerParticles.animateOut(1, 17, true);\n    overlayFactory.ch2_packageUserParticles.animateOut(1, 17, true);\n}\n\n/*\nChapter 2 - Act 3\nHide the globe from data transfer scene\n */\nexport function play2_3(chapterData: any, actData: any, chapterIndex: number, actIndex: number) {\n    nightToDay(0);\n    gsap.set(camera.position, {z: 320, y: 80});\n    gsap.set(hero3d.lookAtPosition, {y: 155});\n    hideGlobe(new Vector3(0,0,300), 0, 1.5);\n    audioController.play(AUDIO_GR2);\n    gsap.to(camera.position, 2, {z: 250, delay: 0, ease: 'Power1.easeInOut'});\n    gsap.to(hero3d.lookAtPosition, 2, {y: 150, delay: 0, ease: 'Power1.easeInOut'});\n    gsap.to(hero3d.globe.rotation, 2, {x: .2, delay: 0, ease: 'Power1.easeInOut'});\n    fadeOutScene(0, 1.5);\n}\n\n\n/*\nChapter 3 - Act 1\nZoom into server facility and show server transfer sequences\n */\nexport function play3_1(chapterData: any, actData: any, chapterIndex: number, actIndex: number) {\n    const cameraBuildingPosition = cityScene.getCamera(4);\n    hideGlobe(GLOBE_ZOOM_IN_POSITION, 0, 0);\n    dayToNight(0);\n    fadeInScene(0, 1.5);\n    audioController.play(AUDIO_CH3_MUSIC);\n    audioController.play(AUDIO_CHA);\n    audioController.pause(AUDIO_GVA1);\n    audioController.play(AUDIO_CITY);\n\n    // Go to initial building position\n    const cameraBuildingSrc = new Vector3(cameraBuildingPosition.src.x, cameraBuildingPosition.src.y, cameraBuildingPosition.src.z);\n    gotoCityPoint(cameraBuildingSrc, cameraBuildingPosition.target, 0, 0);\n    hero3d.setHoverDistance(new Vector3(.02, .01, 0));\n\n    // Show file coming into server facility\n    const minerSprite = overlayFactory.ch3_cityMinerParticles.getSprite(ICON_MINER);\n    const docSprite = overlayFactory.ch3_cityMinerParticles.getSprite(ICON_DOC)\n    minerSprite.animateIn();\n    overlayFactory.ch3_minerTransferPathIn.animateIn();\n    overlayFactory.ch3_minerTransferPathIn.getPathFollowers(0)[0].animateIn(1, 1);\n    overlayFactory.ch3_minerTransferPathIn.animateInSolid(1, 1, 0, (material: ShaderMaterial) => {\n        docSprite.animateIn();\n        material.uniforms.reverseDirection.value = 1;\n    });\n\n    // Hide transfer paths\n    overlayFactory.ch3_minerTransferPathIn.animateOut(1, 2);\n    docSprite.animateOut(.5, 3.8);\n    minerSprite.animateOut(.5, 4);\n\n    showHideText(1, 5, chapterData.titles[0].title);\n\n    // Go to Server position\n    const cam = cityScene.getCamera(7);\n    const cameraMinerSrc = cam.src;\n    const cameraMinerTarget = cam.target;\n    const tween1 = gsap.to(camera.position, 7.5, {\n        x: cameraMinerSrc.x, y: cameraMinerSrc.y, z: cameraMinerSrc.z, ease: 'Power4.easeOut'});\n    const tween2 = gsap.to(hero3d.lookAtPosition, 7.5, {\n        x: cameraMinerTarget.x, y: cameraMinerTarget.y, z: cameraMinerTarget.z, ease: 'Power4.easeOut'});\n    gsap.set([tween1, tween2], {timeScale: .1});\n    gsap.to([tween1, tween2], 3.5, {timeScale: 2, ease: 'Power2.easeInOut', delay: 3});\n    hero3d.setHoverDistance(new Vector3(0, 0, 0), 5);\n    gsap.to(hero3d, 1, {hoverEase: 1, delay: 5});\n    audioController.play(AUDIO_GR3, 3);\n    audioController.play(AUDIO_TW3, 4);\n    audioController.play(AUDIO_IAMB, 5);\n\n    // Hide server walls on crash zoom\n    cityScene.fadeServerBuildingWall(6, .2);\n    cityScene.hideServerBuildingWall(6.2, .1);\n\n    // Show server wires, racks and drives\n    hero3d.setHoverDistance(new Vector3(.0003, 0, .0003), 8.5, 2);\n    gsap.set(hero3d, {hoverEase: DEFAULT_HOVER_EASE, delay: 8.5});\n    showHideText(7.5, 11, chapterData.titles[1].title);\n    cityScene.showServerRacks(7.5, 1);\n    const pathInUniforms = overlayFactory.ch3_serverTransferPathIn.material.uniforms;\n    const pathOutUniforms = overlayFactory.ch3_serverTransferPathOut.material.uniforms;\n    overlayFactory.ch3_serverTransferPathIn.animateIn(1, 8.5);\n    overlayFactory.ch3_serverTransferPathIn.animateInSolid(1, 8.5);\n    overlayFactory.ch3_serverTransferPathOut.animateIn(1, 9.5);\n    overlayFactory.ch3_serverTransferPathOut.animateInSolid(1, 9.5);\n    gsap.set(pathInUniforms.globalAlpha, {value: 1, delay: 9.5});\n    gsap.set(pathOutUniforms.globalAlpha, {value: .2, delay: 9.5});\n    gsap.set(pathOutUniforms.color, {value: new Vector4(...COLOR_BLUE_RGBA), delay: 9.5});\n    audioController.play(AUDIO_SL3, 9);\n\n    // Turn on the server drices\n    cityScene.activateDrives(1, 9.5);\n\n    // Start spritesheet animations\n    const questionInSprite = overlayFactory.ch3_spritesheetParticles.getSprite(ICON_QUESTION_IN);\n    const questionToCheckSprite =  overlayFactory.ch3_spritesheetParticles.getSprite(ICON_QUESTION_TO_CHECK);\n    const checkToBlockSprite =  overlayFactory.ch3_spritesheetParticles.getSprite(ICON_CHECK_TO_BLOCK);\n    const blockOutSprite =  overlayFactory.ch3_spritesheetParticles.getSprite(ICON_BLOCK_OUT);\n    const blockApprovedSprite =  overlayFactory.ch3_spritesheetParticles.getSprite(ICON_BLOCK_APPROVED);\n    const blockDeclinedSprite =  overlayFactory.ch3_spritesheetParticles.getSprite(ICON_BLOCK_DECLINED);\n    const coinSprite =  overlayFactory.ch3_spritesheetParticles.getSprite(ICON_COIN_SPIN);\n\n    // Start Transfer Sequences\n    showHideText(12, 16, chapterData.titles[2].title);\n    overlayFactory.ch3_serverTransferPathIn.getPathFollowers(0)[0].animateIn(2, 12, 0, () => {\n\n        // Question in\n        questionInSprite.animateIn(0, 0);\n        overlayFactory.ch3_questionInSpritesheet.play();\n        audioController.play(AUDIO_QIN);\n\n        // Question to check\n        questionInSprite.animateOut(0, 1.5);\n        questionToCheckSprite.animateIn(0, 1.5);\n        overlayFactory.ch3_questionToCheckSpritesheet.play(1.5);\n        audioController.play(AUDIO_Q2C, 1.5);\n\n        // Check to block\n        showHideText(3, 7, chapterData.titles[3].title);\n        questionToCheckSprite.animateOut(0, 4);\n        checkToBlockSprite.animateIn(0, 4);\n        overlayFactory.ch3_checkToBlockSpritesheet.play(4);\n        audioController.play(AUDIO_C2B, 4);\n\n        // Block out\n        checkToBlockSprite.animateOut(0, 6);\n        audioController.play(AUDIO_FW2, 6);\n        blockOutSprite.animateIn(0, 6);\n        overlayFactory.ch3_blockOutSpritesheet.play(6, null, null, () => {\n            blockOutSprite.animateOut(0, 0);\n            gsap.set(pathInUniforms.globalAlpha, {value: .2});\n            gsap.set(pathOutUniforms.globalAlpha, {value: 1});\n            overlayFactory.ch3_serverTransferPathOut.getPathFollowers(0)[0].animateIn(2);\n            audioController.play(AUDIO_SL2);\n        });\n\n        // Block Approved\n        showHideText(8, 12, chapterData.titles[4].title);\n        gsap.set(pathInUniforms.globalAlpha, {value: 1, delay: 8});\n        gsap.set(pathOutUniforms.globalAlpha, {value: .2, delay: 8});\n        overlayFactory.ch3_serverTransferPathIn.getPathFollowers(0)[0].animateIn(2, 8);\n\n        blockApprovedSprite.animateIn(0, 9);\n        audioController.play(AUDIO_BCIN, 10);\n\n        overlayFactory.ch3_blockApprovedSpritesheet.play(10, null, null, () => {\n            blockApprovedSprite.animateOut(0);\n            audioController.play(AUDIO_FW2);\n            gsap.set(pathInUniforms.globalAlpha, {value: .2});\n            gsap.set(pathOutUniforms.globalAlpha, {value: 1});\n            overlayFactory.ch3_serverTransferPathOut.getPathFollowers(0)[0].animateIn(2, 0);\n            audioController.play(AUDIO_SL2);\n        });\n\n        // Block Declined\n        showHideText(13, 17, chapterData.titles[5].title);\n        gsap.set(pathInUniforms.globalAlpha, {value: 1, delay: 13});\n        gsap.set(pathOutUniforms.globalAlpha, {value: .2, delay: 13})\n        overlayFactory.ch3_serverTransferPathIn.getPathFollowers(0)[0].animateIn(2, 13);\n        audioController.play(AUDIO_SL3, 13);\n        blockDeclinedSprite.animateIn(0, 14);\n        audioController.play(AUDIO_FW2, 14);\n        audioController.play(AUDIO_REDX, 15);\n        overlayFactory.ch3_blockDeclinedSpritesheet.play(15, null, null, () => {\n            blockDeclinedSprite.animateOut(0);\n            audioController.play(AUDIO_FW2);\n        });\n\n        // Flash red line\n        gsap.set(pathOutUniforms.globalAlpha, {value: 1, delay: 16})\n        gsap.to(pathOutUniforms.color.value, .7, {\n            x: COLOR_RED_RGBA[0], y: COLOR_RED_RGBA[1], z: COLOR_RED_RGBA[2], delay: 15, yoyo: true, repeat: 3, ease: 'none'});\n        gsap.to(pathOutUniforms.color.value, .7, {\n            x: COLOR_BLUE_RGBA[0], y: COLOR_BLUE_RGBA[1], z: COLOR_BLUE_RGBA[2], delay: 17, ease: 'none'});\n\n        // Show Coin Spin\n        showHideText(18, 22, chapterData.titles[6].title);\n        coinSprite.animateIn(.5, 19);\n        overlayFactory.ch3_coinSpritesheet.play(19, 1, 6);\n        overlayFactory.ch3_serverTransferPathIn.getPathFollowers(0)[0].animateIn(2, 19, 2);\n        overlayFactory.ch3_serverTransferPathOut.getPathFollowers(0)[0].animateIn(2, 19, 2);\n        audioController.play(AUDIO_SL3, 20);\n        coinSprite.animateOut(.5, 25);\n\n        // Animate out\n        hero3d.setHoverDistance(new Vector3(0,0,0), 25);\n        overlayFactory.ch3_serverTransferPathIn.animateOut(1, 25);\n        overlayFactory.ch3_serverTransferPathOut.animateOut(1, 25);\n        cityScene.hideServerRacks(26, .5);\n        cityScene.showServerBuildingWall(26.5, 1);\n        gotoCityPoint(cameraBuildingPosition.src, cameraBuildingPosition.target, 26, 4);\n        audioController.play(AUDIO_TW2, 26);\n        audioController.fadeOut(AUDIO_IAMB, 26);\n        audioController.play(AUDIO_CITY, 27);\n\n        const cameraPanTo = cityScene.getCamera(6);\n        gotoCityPoint(cameraPanTo.src, cameraPanTo.target, 30, 5);\n        audioController.play(AUDIO_GR3, 30);\n\n        nightToDay(2, 30);\n    });\n}\n\n/*\nChapter 4 - Act 1\nShow file coin transaction in city\n */\nexport function play4_1(chapterData: any, actData: any, chapterIndex: number, actIndex: number) {\n    audioController.play(AUDIO_CH4_MUSIC);\n    audioController.play(AUDIO_CHA);\n    audioController.play(AUDIO_CITY);\n\n    // Define shortcuts\n    const paymentPath = overlayFactory.ch4_minerPaymentPaths;\n    const paymentPathR = overlayFactory.ch4_minerPaymentPaths_reverse;\n    const clientParticles = overlayFactory.ch4_clientParticles;\n    const minerParticles = overlayFactory.ch4_minerParticles;\n    const chosenMinerParticles = overlayFactory.ch4_chosenMinerParticles;\n    const clientSprite = clientParticles.getSprite(ICON_CLIENT);\n    const requestSprite = clientParticles.getSprite(ICON_REQUEST);\n    const blackDocSprite = clientParticles.getSprite(ICON_DOC_BLACK);\n    const coinSprite = chosenMinerParticles.getSprite(ICON_COIN_SPIN);\n    const minerSprite = chosenMinerParticles.getSprite(ICON_MINER);\n    const coinSheet = overlayFactory.ch4_coinSpritesheet;\n\n    // Initial position\n    hideGlobe(GLOBE_ZOOM_IN_POSITION, 0, 0);\n    nightToDay(0);\n    fadeInScene(0,0);\n    const cameraBuildingPosition = cityScene.getCamera(6);\n    gotoCityPoint(cameraBuildingPosition.src, cameraBuildingPosition.target);\n\n    // Choosing the Miner\n    showHideText(0, 4, chapterData.titles[0].title);\n    hero3d.setHoverDistance(new Vector3(-.04, .04, -.04), 2, 3);\n    clientParticles.animateIn(1, .5);\n\n    clientSprite.animateIn(.5, .5);\n    clientSprite.animateOut(.5, 4);\n    requestSprite.animateIn(1, 4);\n    gsap.to(requestSprite, .7, {pinHeight: 200, ease: 'Power1.easeInOut', delay: 4});\n\n    chosenMinerParticles.animateIn(1, 5);\n    minerParticles.animateIn(1, 5);\n    audioController.play(AUDIO_BE3, 5);\n\n    gsap.to(requestSprite, .7, {pinHeight: 50, ease: 'Power1.easeInOut', delay: 7});\n    requestSprite.animateOut(1, 7);\n    clientSprite.animateIn(1, 8);\n    minerSprite.animateIn(1, 8);\n\n    // Go to a zoomed in and show the chosen miner path\n    showHideText(7, 11, chapterData.titles[1].title);\n    const cameraZoomToSrc = new Vector3(414.49, 100.80, -80.61);\n    const cameraZoomToTarget = cameraBuildingPosition.target.clone();\n    cameraZoomToTarget.x -= 90;\n    cameraZoomToTarget.y -= 30;\n    gotoCityPoint(cameraZoomToSrc, cameraZoomToTarget, 0, 20);\n    minerParticles.animateOut(.5, 8);\n\n    // Reverse Path Animation\n    paymentPathR.animateIn(2, 8);\n    paymentPathR.animateInSolid(2, 10, 0, (material: ShaderMaterial) => {\n        material.uniforms.reverseDirection.value = 1;\n    });\n    paymentPathR.getPathFollowers(0)[0].animateIn(2, 10);\n    showHideText(12, 18, chapterData.titles[2].title);\n\n    // Coin In\n    coinSprite.animateIn(.5, 12);\n    coinSheet.play(12, 1, 0);\n    coinSprite.animateOut(.5, 13);\n    paymentPathR.animateOut(1, 13);\n\n    // Animate Path Shaders for transfer\n    paymentPath.animateIn(2, 13.5);\n    paymentPath.animateInSolid(2, 15.5, 0, (material: ShaderMaterial) => {\n        material.uniforms.reverseDirection.value = 1;\n        blackDocSprite.animateIn(.5);\n    })\n    paymentPath.getPathFollowers(0)[0].animateIn(2, 15.5);\n    paymentPath.animateOut(2, 17.5);\n    chosenMinerParticles.animateOut(.5, 17.5);\n    blackDocSprite.animateOut(.5, 19);\n    clientParticles.animateOut(.5, 19.5)\n    clientSprite.animateOut(.5, 19.5);\n    minerSprite.animateOut(.5, 19.5);\n\n    // Animate out scene\n    hero3d.setHoverDistance(new Vector3(0,0,0), 20);\n    const hidePointSrc = new Vector3(\n        cameraBuildingPosition.src.x, cameraBuildingPosition.src.y + 200, cameraBuildingPosition.src.z);\n    hideCity(hidePointSrc, cameraBuildingPosition.target, 20.5, 1.5);\n    audioController.play(AUDIO_TW1, 20.5);\n    \n    fadeOutScene(20.5, 1.5);\n}\n\n/*\nChapter 4 - Act 2\nShow transfer spread on globe\n */\nexport function play4_2(chapterData: any, actData: any, chapterIndex: number, actIndex: number) {\n    hideCity(LOOK_AT, LOOK_AT, 0,0);\n    fadeOutScene(0,0);\n    fadeInScene(0, 3);\n    gsap.set(hero3d.globe.rotation, {y: GLOBE_HOME_ROTATION.y, x: GLOBE_HOME_ROTATION.x});\n    gsap.set(camera.position, {x: 0, y: 0, z: 500} );\n    // Globe zoom from host city\n    showGlobe(new Vector3(0,0,800), LOOK_AT, 0, 3);\n    audioController.play(AUDIO_GVA1);\n    audioController.play(AUDIO_GR1);\n\n    nightToDay(0);\n\n    showHideText(4, 9, chapterData.titles[3].title);\n\n    // Start long globe pan\n    const rotDelta = LANG_CODE === LOCALE_CHINESE ? new Vector2(.21, .72) : new Vector2(-.21, -.72);\n    const rotDelta2 = LANG_CODE === LOCALE_CHINESE ? new Vector2(0, 2.5) : new Vector2(0, -1.72);\n    gsap.to(hero3d.globe.rotation, 3, {x: GLOBE_HOME_ROTATION.x + rotDelta.x, y: GLOBE_HOME_ROTATION.y + rotDelta.y, ease: 'Power2.easeInOut'});\n    gsap.to(hero3d.globe.rotation, 33, {y: GLOBE_HOME_ROTATION.y + rotDelta2.y, ease: 'none', delay: 2.8});\n\n    // Host city to Europe Path 1\n    const staggerDelay1 = .2;\n    overlayFactory.ch4_newyorkParticles.animateIn(1, 1);\n    audioController.play(AUDIO_BE3, 1);\n    overlayFactory.ch4_miners1Particles.animateIn(2, 3);\n\n    overlayFactory.ch4_globePaths1.animateIn(2, 3, staggerDelay1);\n    overlayFactory.ch4_globePaths1.animateInSolid(2, 5, staggerDelay1, (material: ShaderMaterial, index: number) => {\n        material.uniforms.reverseDirection.value = 1;\n    });\n    for (let i = 0; i < overlayFactory.ch4_globePaths1.tubes.length; i++) {\n        overlayFactory.ch4_globePaths1.getPathFollowers(i)[0].animateIn(2, 5 + i * staggerDelay1);\n    }\n    overlayFactory.ch4_globePaths1.animateOut(2, 7, staggerDelay1);\n    showHideText(10, 15, chapterData.titles[4].title);\n\n    // Globe zoom to europe\n    gsap.to(hero3d.globe.rotation, 2, {x: -.2, ease: 'Power2.easeInOut', delay: 8});\n    gsap.to(camera.position, 2, {x: 0, y: 200, z: 400, ease: 'Power2.easeInOut', delay: 8} );\n    gsap.to(hero3d.lookAtPosition, 2, {x: 0, y: 170, z: 0, ease: 'Power2.easeInOut', delay: 8});\n    audioController.play(AUDIO_GR3, 8);\n\n    // Host city to Europe Path 2\n    const staggerDelay2 = .2;\n    overlayFactory.ch4_miners2Particles.animateIn(3, 10);\n    audioController.play(AUDIO_BE5, 10);\n\n    overlayFactory.ch4_globePaths2.animateIn(2, 10, staggerDelay2);\n\n    overlayFactory.ch4_globePaths2.animateInSolid(2, 12, staggerDelay2, (material: ShaderMaterial) => {\n        material.uniforms.reverseDirection.value = 1;\n    });\n\n    for (let i = 0; i < overlayFactory.ch4_globePaths2.tubes.length; i++) {\n        overlayFactory.ch4_globePaths2.getPathFollowers(i)[0].animateIn(2, 12 + i * staggerDelay1);\n    }\n    overlayFactory.ch4_globePaths2.animateOut(2, 14, staggerDelay2);\n    showHideText(16, 21, chapterData.titles[5].title);\n    overlayFactory.ch4_newyorkParticles.animateOut(1, 16);\n\n    // Globe CLOSE to europe\n    gsap.to(hero3d.globe.rotation, 2, {x: -.3, ease: 'Power2.easeInOut', delay: 16});\n    gsap.to(camera.position, 2, {x: 0, y: 200, z: 300, ease: 'Power2.easeInOut', delay: 16} );\n    gsap.to(hero3d.lookAtPosition, 2, {x: 0, y: 180, z: 0, ease: 'Power2.easeInOut', delay: 16})\n    audioController.play(AUDIO_GR2, 16);\n    audioController.play(AUDIO_GR4, 20);\n\n    // Miners 3\n    overlayFactory.ch4_miners3Particles.animateIn(2, 16);\n    overlayFactory.ch4_globePaths3.animateIn(2, 17, .2);\n    overlayFactory.ch4_globePaths3.animateInSolid(2, 19, .2, (material: ShaderMaterial) => {\n        material.uniforms.reverseDirection.value = 1;\n    });\n    overlayFactory.ch4_globePaths3.animateOut(1, 21, .2);\n    showHideText(22, 27, chapterData.titles[6].title);\n\n    // Clients 1\n    overlayFactory.ch4_clients1Particles.animateIn(3, 18);\n    overlayFactory.ch4_globePaths4.animateIn(2, 19, .2);\n    overlayFactory.ch4_globePaths4.animateInSolid(2, 21, .2, (material: ShaderMaterial) => {\n        material.uniforms.reverseDirection.value = 1;\n    });\n    overlayFactory.ch4_globePaths4.animateOut(1, 23, .2);\n\n    // Another miner\n    overlayFactory.ch4_miners4Particles.animateIn(3, 19);\n\n    // Clients 2\n    overlayFactory.ch4_clients2Particles.animateIn(3, 20);\n    overlayFactory.ch4_globePaths5.animateIn(2, 21, .2);\n    overlayFactory.ch4_globePaths5.animateInSolid(2, 23, .2, (material: ShaderMaterial) => {\n        material.uniforms.reverseDirection.value = 1;\n    });\n    overlayFactory.ch4_globePaths5.animateOut(1, 25, .2);\n\n    // Clients 3\n    overlayFactory.ch4_clients3Particles.animateIn(3, 24);\n    overlayFactory.ch4_globePaths6.animateIn(2, 23, .2);\n    overlayFactory.ch4_globePaths6.animateInSolid(2, 25, .2, (material: ShaderMaterial) => {\n        material.uniforms.reverseDirection.value = 1;\n    });\n    overlayFactory.ch4_globePaths6.animateOut(1, 27, .2);\n    //hero3d.globe.animateInBackGlowLight(2, 27);\n\n    // Animate all out\n    gsap.to(camera.position, 2, {x: 0, y: 0, z: 700, ease: 'Power2.easeInOut', delay: 27} );\n    gsap.to(hero3d.lookAtPosition, 2, {x: 0, y: 0, z: 0, ease: 'Power2.easeInOut', delay: 27});\n    gsap.to(hero3d.globe.rotation, 2, {x: .7, ease: 'Power2.easeInOut', delay: 27});\n    audioController.play(AUDIO_GR3, 27);\n\n    showHideText(28, 33, chapterData.titles[7].title);\n    overlayFactory.ch4_newyorkParticles.animateOut(1, 28);\n    overlayFactory.ch4_miners1Particles.animateOut(1, 28);\n    overlayFactory.ch4_miners2Particles.animateOut(1, 28);\n    overlayFactory.ch4_miners3Particles.animateOut(1, 28);\n    overlayFactory.ch4_miners4Particles.animateOut(1, 28);\n    overlayFactory.ch4_clients1Particles.animateOut(1, 28);\n    overlayFactory.ch4_clients2Particles.animateOut(1, 28);\n    overlayFactory.ch4_clients3Particles.animateOut(1, 28);\n\n    // Show and hide full network\n    overlayFactory.filecoinNetworkParticles.animateIn(1, 28);\n    audioController.play(AUDIO_BE5, 28);\n\n    overlayFactory.filecoinNetworkParticles.animateOut(1, 33);\n    audioController.play(AUDIO_GR1, 33);\n\n    fadeOutScene(34, 1.5);\n}\n\n\n// Helper Animations\nfunction showHideText(showDelay: number, hideDelay: number, text: string) {\n    const home = state.getValue(CURRENT_SECTION);\n    gsap.to(home.titleExperienceEl, .6, {delay: showDelay, opacity: 1,\n        onStart: () => {home.titleExperienceEl.innerText = text;}});\n    gsap.to(home.titleExperienceEl, .6, {delay: hideDelay, opacity: 0});\n}\n\nfunction updateLighting(speed: number = 2, delay: number = 0, ease: string = 'Power1.easeInOut') {\n    const timeOfDay = state.getValue(TIME_OF_DAY);\n    const globeOrCity = state.getValue(GLOBE_OR_CITY);\n    let col;\n    // DAY\n    if (timeOfDay == DAY) {\n        col = new Color(LIGHT_SCENE_BG);\n        gsap.to([scene.background, scene.fog.color], speed, {r: col.r, g: col.g, b: col.b, delay: delay, ease: ease});\n        col = new Color( globeOrCity == GLOBE ? LIGHT_AMBIENT_LIGHT_GLOBE : LIGHT_AMBIENT_LIGHT_CITY);\n        gsap.to(ambientLight.color, speed, {r: col.r, g: col.g, b: col.b, delay: delay, ease: ease});\n        col = new Color(LIGHT_POINT_LIGHT);\n        const intensity = globeOrCity == GLOBE ? LIGHT_POINT_LIGHT_INT_GLOBE : LIGHT_POINT_LIGHT_INT_CITY;\n        gsap.to(pointLight, speed, {intensity: intensity, delay: delay, ease: ease});\n        gsap.to(pointLight.color, speed, {r: col.r, g: col.g, b: col.b, delay: delay, ease: ease});\n        gsap.to(pointLight.position, speed, {x: -1000, y: 1000, z: 1000, delay: delay, ease: ease});\n        gsap.to(hero3d.globe.atmosphere.material, speed, {opacity: LIGHT_ATMOSPHERE_OPACITY});\n    }\n    // NIGHT\n    else {\n        col = new Color(DARK_SCENE_BG);\n        gsap.to([scene.background, scene.fog.color], speed, {r: col.r, g: col.g, b: col.b, delay: delay, ease: ease});\n        col = new Color( globeOrCity == GLOBE ? DARK_AMBIENT_LIGHT_GLOBE : DARK_AMBIENT_LIGHT_CITY);\n        gsap.to(ambientLight.color, speed, {r: col.r, g: col.g, b: col.b, delay: delay, ease: ease});\n        col = new Color( globeOrCity == GLOBE ? DARK_POINT_LIGHT_GLOBE : DARK_POINT_LIGHT_CITY);\n        const pointLightPos = GLOBE ? new Vector3(1000, 1000 , 1000) : new Vector3(1000, 2000, 1000); //z=500\n        const intensity = globeOrCity == GLOBE ? DARK_POINT_LIGHT_INT_GLOBE : DARK_POINT_LIGHT_INT_CITY;\n        gsap.to(pointLight, speed, {intensity: intensity, delay: delay, ease: ease});\n        gsap.to(pointLight.color, speed, {r: col.r, g: col.g, b: col.b, delay: delay, ease: ease});\n        gsap.to(pointLight.position, speed, {x: pointLightPos.x, y: pointLightPos.y, z: pointLightPos.z, delay: delay, ease: ease});\n        gsap.to(hero3d.globe.atmosphere.material, speed, {opacity: DARK_ATMOSPHERE_OPACITY});\n    }\n}\n\nfunction nightToDay(speed = 2, delay = 0) {\n    const home = state.getValue(CURRENT_SECTION);\n    state.setValue(TIME_OF_DAY, DAY);\n    const ease = 'Power1.easeInOut';\n    gsap.delayedCall(delay, () => {\n        home.updateDOMColors();\n    });\n    let col = new Color(LIGHT_SPHERE_COLOR);\n    gsap.to([hero3d.globe.sphereMaterial.color], speed, {r: col.r, g: col.g, b: col.b, delay: delay, ease: ease});\n    hero3d.globe.animateOutBackGlowDark(speed / 2, delay, ease);\n    //hero3d.globe.animateInBackGlowLight(speed / 2, delay, ease);\n    updateLighting(speed, delay, ease);\n    cityScene.animateMaterialColor(speed, delay, DAY);\n}\n\nfunction dayToNight(speed = 2, delay = 0) {\n    const home = state.getValue(CURRENT_SECTION);\n    state.setValue(TIME_OF_DAY, NIGHT);\n    const ease = 'Power1.easeInOut';\n    gsap.delayedCall(delay, () => {\n        home.updateDOMColors();\n    });\n    let col = new Color(DARK_SPHERE_COLOR);\n    gsap.to([hero3d.globe.sphereMaterial.color], speed, {r: col.r, g: col.g, b: col.b, delay: delay, ease: ease});\n    const glowDelay = speed == 0 ? 0 : delay + 1;\n    //hero3d.globe.animateOutBackGlowLight(speed / 2, glowDelay, ease);\n    hero3d.globe.animateInBackGlowDark(speed / 2, glowDelay, ease);\n    updateLighting(speed, delay);\n    cityScene.animateMaterialColor(speed, delay, NIGHT);\n}\n\nfunction fadeScene(delay: number = 0, speed: number = 1.5) {\n    fadeOutScene(delay, speed)\n    fadeInScene(delay + speed, speed)\n}\n\nfunction fadeOutScene(delay: number = 0, speed: number = 1.5) {\n    hero3d.fadeToColor(speed, delay, hexNumToStr(state.getValue(TIME_OF_DAY) == DAY ? LIGHT_SCENE_BG : DARK_SCENE_BG));\n}\n\nfunction fadeInScene(delay: number = 0, speed: number = 1.5) {\n    hero3d.fadeFromColor(speed, delay);\n}\n\nfunction showGlobe(targetPosition: Vector3, lookAtPosition: Vector3 = new Vector3(0,0,0), delay: number = 0, speed:number = 0) {\n    let isSceneSwitch = state.getValue(GLOBE_OR_CITY) == GLOBE ? false : true;\n    state.setValue(GLOBE_OR_CITY, GLOBE);\n    gsap.to(camera.position, speed, {\n        delay: delay,\n        x: targetPosition.x,\n        y: targetPosition.y,\n        z: targetPosition.z,\n        ease: 'Power1.easeInOut',\n        onStart: () => {\n            if (isSceneSwitch) {\n                updateLighting(0);\n            }\n            (scene.fog as Fog).far = -100;\n            hero3d.globe.add();\n        }\n    });\n    gsap.to(hero3d.lookAtPosition, speed, {\n        x: lookAtPosition.x,\n        y: lookAtPosition.y,\n        z: lookAtPosition.z,\n        delay: delay,\n        ease: 'Power1.easeInOut'\n    });\n}\n\nfunction hideGlobe(targetPosition: Vector3, delay: number = 0, speed: number = 0) {\n    gsap.to(camera.position, speed, {\n        delay: delay,\n        z: targetPosition.z,\n        ease: 'Power1.easeInOut',\n        onComplete: () => {\n            hero3d.globe.remove();\n        }\n    });\n}\n\nfunction gotoCityPoint(targetCityPosition: Vector3, lookAtPosition: Vector3, delay: number = 0, speed:number = 0, ease: string = 'Power1.easeInOut') {\n    let isSceneSwitch = state.getValue(GLOBE_OR_CITY) == CITY ? false : true;\n    state.setValue(GLOBE_OR_CITY, CITY);\n    let srcAnim = gsap.to(camera.position, speed, {\n        delay: delay,\n        x: targetCityPosition.x,\n        y: targetCityPosition.y,\n        z: targetCityPosition.z,\n        ease: ease,\n        onStart: () => {\n            if (isSceneSwitch) {\n                updateLighting(0);\n            }\n            (scene.fog as Fog).far = 600;\n            cityScene.add()\n        }\n    });\n    let targetAnim = gsap.to(hero3d.lookAtPosition, speed, {\n        x: lookAtPosition.x,\n        y: lookAtPosition.y,\n        z: lookAtPosition.z,\n        delay: delay,\n        ease: ease\n    });\n    return [srcAnim, targetAnim];\n}\n\nfunction hideCity(targetCityPosition: Vector3, lookAtPosition: Vector3 = new Vector3(0,0,0), delay: number = 0, speed: number = 0) {\n    gsap.to(camera.position, speed, {\n        delay: delay,\n        x: targetCityPosition.x,\n        y: targetCityPosition.y,\n        z: targetCityPosition.z,\n        ease: 'Power1.easeInOut',\n        onComplete: () => {\n            cityScene.remove();\n        }\n    });\n    gsap.to(hero3d.lookAtPosition, speed, {\n        x: lookAtPosition.x,\n        y: lookAtPosition.y,\n        z: lookAtPosition.z,\n        delay: delay,\n        ease: 'Power1.easeInOut'\n    });\n}","/*\nEntry point application for the 3d experience.\n */\n\nimport * as THREE from 'three';\nimport {cityScene} from './cityScene';\nimport {EVENT_RESIZE, Window} from \"../global/window\";\nimport {emitter} from \"../global/emitter\";\nimport {\n    Object3D,\n    PerspectiveCamera,\n    Vector3,\n    WebGLRenderer\n} from \"three\";\nimport {gsap, TweenMax} from \"gsap\";\nimport {Globe, GLOBE_EASE_AMOUNT} from \"./globe\";\nimport {Timer} from \"./timer\";\nimport {cities} from \"./cities\";\nimport {overlayFactory} from \"./overlayFactory\";\nimport {state} from \"../global/state\";\nimport {ASSETS_3D, CHAPTERS_3D, DAY, LOCALE_CHINESE, TIME_OF_DAY} from \"../global/constants\";\nimport {goto_landing, hideIntroPaths, showIntroPaths} from \"./animations\";\nimport {init as initAnimations} from \"./animations\";\nimport {preload} from \"../global/preload\";\nimport {WEBGL} from \"three/examples/jsm/WebGL\";\nimport {AUDIO_CA1, AUDIO_CHA, AUDIO_CW, AUDIO_MA, AUDIO_MW, audioController} from \"../global/audioController\";\n//import {OrbitControls} from \"three/examples/jsm/controls/OrbitControls\";\n\n// 3d specific colors\nexport const DARK_SCENE_BG: number = 0x070B0E;\nexport const DARK_AMBIENT_LIGHT_CITY: number = 0x666666;\nexport const DARK_AMBIENT_LIGHT_GLOBE: number = 0x060606;\nexport const DARK_POINT_LIGHT_CITY: number = 0xffffff; //5A7897\nexport const DARK_POINT_LIGHT_GLOBE: number = 0xffffff;\nexport const DARK_POINT_LIGHT_INT_CITY: number = .8;\nexport const DARK_POINT_LIGHT_INT_GLOBE: number = 1;\n\nexport const LIGHT_SCENE_BG: number = 0xF9F9F9;\nexport const LIGHT_AMBIENT_LIGHT_CITY: number = 0xeeeeee;\nexport const LIGHT_AMBIENT_LIGHT_GLOBE: number = 0xeeeeee;\nexport const LIGHT_POINT_LIGHT: number = 0xfefefe;\nexport const LIGHT_POINT_LIGHT_INT_CITY: number = .4;\nexport const LIGHT_POINT_LIGHT_INT_GLOBE: number = .2;\n\n// Global scene elements\nexport const scene = new THREE.Scene();\nexport const rootMesh = new THREE.Mesh(new THREE.Geometry());\nexport const camera = new PerspectiveCamera(35, 1, .1, 3000);\nexport const cameraContainer: Object3D =  new Object3D();\nexport const ambientLight = new THREE.AmbientLight( LIGHT_AMBIENT_LIGHT_GLOBE );\nexport const pointLight = new THREE.PointLight( LIGHT_POINT_LIGHT, LIGHT_POINT_LIGHT_INT_GLOBE);\nexport const timer = new Timer();\nexport const DEFAULT_HOVER_EASE = 60;\n\nexport class Hero3d {\n    public element: HTMLElement;\n    public initialized: boolean;\n    public iconsContainer: HTMLElement;\n    public contentContainer: HTMLElement;\n    public hoverLookAt: Vector3 = new Vector3(0,0,0);\n    public lookAtPosition: Vector3 = new Vector3(0,0,0);\n    public hoverEase: number = DEFAULT_HOVER_EASE;\n    public globe: Globe = new Globe();\n    public loaded: boolean;\n    public dpr: number;\n\n    private webglContainer: HTMLElement;\n    private fadePlane: HTMLElement;\n    private globeStill: HTMLImageElement;\n    private renderer: WebGLRenderer;\n    private bgColor: string;\n    private _myReq: number;\n    private mouseX: number = 0;\n    private mouseY: number = 0;\n    private lastRootExport: any;\n    private hoverDistance: Vector3 = new Vector3(0,0,0);\n    private hoverLookAtDistance: Vector3 = new Vector3(0,0, 0);\n    private imageLoaded: boolean;\n    //private orbitControls: OrbitControls;\n\n    constructor() {\n        this.element = document.querySelector('.hero3d');\n        this.iconsContainer = this.element.querySelector('.icons');\n        this.fadePlane = this.element.querySelector('.fade-plane');\n        this.webglContainer = this.element.querySelector('.webgl');\n        this.contentContainer = this.element.querySelector('.content');\n        this.globeStill = this.element.querySelector('.globe-still');\n    }\n\n    public init() {\n        if (!this.initialized) {\n            const mainEl = document.querySelector('main');\n            state.setValue(CHAPTERS_3D, JSON.parse(mainEl.dataset.chapters));\n            const assets3d: any = {};\n            Array.from(mainEl.querySelectorAll('.data-asset3d')).forEach((assetEl) => {\n                const el = assetEl as HTMLElement;\n                assets3d[el.dataset.key] = el.dataset.src;\n            });\n            state.setValue(ASSETS_3D, assets3d);\n            state.setValue(TIME_OF_DAY, DAY);\n            \n            if (WEBGL.isWebGLAvailable()) {\n                THREE.Cache.enabled = true;\n                initAnimations();\n                timer.setData(state.getValue(CHAPTERS_3D));\n                this.globe.init(camera, rootMesh);\n                this.setupEnvironment();\n                this.initialized = true;\n            }\n        }\n        this.setupEvents();\n    }\n\n    private setupEnvironment() {\n        scene.add(rootMesh);\n        this.renderer = new WebGLRenderer({ antialias: true });\n        this.webglContainer.appendChild(this.renderer.domElement);\n        this.layout();\n        this.renderer.setPixelRatio(this.dpr);\n        scene.fog = new THREE.Fog(LIGHT_SCENE_BG, 100, -100);\n        scene.background = new THREE.Color(this.bgColor);\n        scene.add( ambientLight );\n        cameraContainer.add(camera);\n        scene.add( cameraContainer );\n        scene.add( pointLight );\n        //this.orbitControls = new OrbitControls( camera, this.renderer.domElement );\n    }\n\n    private setupEvents() {\n        emitter.on(EVENT_RESIZE, this.layout);\n        document.addEventListener( 'mousemove', this.onMouseMove);\n    }\n\n    private onMouseMove = (event: MouseEvent) => {\n        this.mouseX = ( event.clientX - Window.halfWidth );\n        this.mouseY = ( event.clientY - Window.halfHeight );\n    }\n\n    public reset() {\n        overlayFactory.hideAll();\n        gsap.set(this.globeStill, {scale: .95, opacity: .01});\n        gsap.set(this.webglContainer, {opacity: 0});\n        timer.reset();\n    }\n\n    public loadImage() {\n        const assets3d = state.getValue(ASSETS_3D);\n        this.globeStill.dataset.src = assets3d.globe_still_url;\n        return preload.loadImage(this.globeStill);\n    }\n\n    async load() {\n        if (!this.initialized) {\n            return;\n        }\n\n        if (!this.loaded) {\n            await cities.load();\n            await this.globe.load();\n            await cityScene.load();\n            await overlayFactory.load();\n            await audioController.load();\n            this.loaded = true;\n            overlayFactory.init();\n        }\n        this.resetHoverEase();\n        this.animateInWebgl();\n    }\n\n    public animateIn(delay: number = 0, speed: number = 1) {\n        gsap.to(this.globeStill, speed, {scale: 1, delay: delay, opacity: 1, ease: 'Power2.easeInOut'});\n    }\n\n    private animateInWebgl() {\n        if (this.loaded) {\n            if (!this._myReq) {\n                this.renderLoop();\n            }\n            this.layout();\n            goto_landing();\n            gsap.to(this.globeStill, 1, {opacity: 0, ease: 'Power1.easeIn'});\n            gsap.to(this.webglContainer, 1, {opacity: 1, onComplete: () => {\n                gsap.to(this.globe, 1, {introIdleSpeed: -.001, easeAmount: GLOBE_EASE_AMOUNT, ease: 'Power1.easeIn'});\n                showIntroPaths();\n            }});\n        }\n    }\n\n    public animateOut() {\n        hideIntroPaths();\n        return new Promise(resolve => {\n            TweenMax.to(this.element, .5, {\n                opacity: 0,\n                onComplete: () => {\n                    this.hide();\n                    resolve();\n                }\n            });\n        });\n    }\n\n    public show() {\n        this.element.style.display = 'block';\n        this.element.style.opacity = '1';\n        this.layout();\n    }\n\n    private layout = () => {\n        this.resizeGlobeStill();\n        if (this.renderer) {\n            this.dpr = Window.width <= 600 ? 2 : 1;\n            this.renderer.setPixelRatio(this.dpr);\n            camera.aspect = Window.width / Window.height;\n            camera.updateProjectionMatrix();\n            this.renderer.setSize(Window.width, Window.height);\n            this.render();\n        }\n    }\n\n    private resizeGlobeStill() {\n        let h = Window.height;\n        let w = h * (16/9);\n        this.globeStill.style.height = h + 'px';\n        this.globeStill.style.width = w + 'px';\n        this.globeStill.style.left = (-(w - Window.width) / 2) + 'px';\n    }\n\n    private resetHoverEase() {\n        this.hoverEase = 1;\n        this.setHoverLookAtDistance(new Vector3(0, 0, 0));\n        this.setHoverDistance(new Vector3(0, 0, 0));\n        this.render();\n        this.hoverEase = DEFAULT_HOVER_EASE;\n    }\n\n    public onChapterChange() {\n        this.resetHoverEase();\n        cityScene.reset();\n        gsap.exportRoot({}, true).kill();\n        overlayFactory.hideAll();\n    }\n\n    public hide() {\n        this.element.style.display = 'none';\n    }\n\n    public render() {\n        cameraContainer.position.x += ( (-(this.mouseX * this.hoverDistance.x) - cameraContainer.position.x) ) / this.hoverEase;\n        cameraContainer.position.z += ( (-(this.mouseX * this.hoverDistance.z) - cameraContainer.position.z) ) / this.hoverEase;\n        cameraContainer.position.y += ( ((this.mouseY * this.hoverDistance.y) - cameraContainer.position.y ) ) / this.hoverEase;\n        // this.hoverLookAt.x += (((this.mouseX * this.hoverLookAtDistance.x) - this.hoverLookAt.x) ) / this.hoverEase;\n        // this.hoverLookAt.y += ((-(this.mouseY * this.hoverLookAtDistance.y) - this.hoverLookAt.y) ) / this.hoverEase;\n        // this.hoverLookAt.z += (((this.mouseX * this.hoverLookAtDistance.z) - this.hoverLookAt.z) ) / this.hoverEase;\n        camera.lookAt((this.lookAtPosition.clone())); //.add(this.hoverLookAt)\n        this.globe.render();\n       // this.orbitControls.update();\n        this.renderer.render(scene, camera);\n        overlayFactory.render();\n    }\n\n    private renderLoop = () => {\n        this.render();\n        this._myReq = requestAnimationFrame(this.renderLoop);\n    }\n\n    public resume = () => {\n        this.globe.normalizeRotation();\n        gsap.to(this.globe, 1, {introIdleSpeed: 0, easeAmount: 1, overwrite: true});\n\n        if (this.lastRootExport) {\n            this.lastRootExport.play();\n        }\n\n        if (!this._myReq) {\n           this.renderLoop();\n        }\n    }\n\n    public pause() {\n        this.lastRootExport = gsap.exportRoot({}, true);\n        this.lastRootExport.pause();\n        cancelAnimationFrame(this._myReq);\n        this._myReq = null;\n    }\n\n    public toColor(speed: number, delay: number = 0, color: string = '#000000') {\n        gsap.to(this.fadePlane, speed, {delay: delay, backgroundColor: color});\n    }\n\n    public fadeToColor(speed: number, delay: number = 0, color: string = '#000000') {\n        gsap.set(this.fadePlane, {backgroundColor: color, delay: delay});\n        gsap.to( this.fadePlane, speed, {opacity: 1, delay: delay, ease: \"Power2.easeInOut\"});\n    }\n\n    public fadeFromColor(speed: number, delay: number = 0) {\n        gsap.to( this.fadePlane, speed, {opacity: 0, delay: delay, ease: \"Power2.easeInOut\"});\n    }\n\n    public setHoverDistance(distance: Vector3, delay: number = 0, speed: number = 0) {\n        gsap.to(this.hoverDistance, speed, {x: distance.x, y: distance.y, z: distance.z, delay: delay, ease: 'Power2.easeInOut'});\n    }\n\n    public setHoverLookAtDistance(distance: Vector3, delay: number = 0, speed: number = 0) {\n        gsap.to(this.hoverLookAtDistance, speed, {x: distance.x, y: distance.y, z: distance.z, delay: delay, ease: 'Power2.easeInOut'});\n    }\n\n    public destroy() {\n        emitter.off(EVENT_RESIZE, this.layout);\n        document.removeEventListener( 'mousemove', this.onMouseMove);\n    }\n}\n\nexport const hero3d = new Hero3d();\n","/*\nUI controls for 3d experience\n */\n\nimport {gsap} from \"gsap\";\nimport Emitter from \"@hellomonday/emitter\";\nimport {timer} from \"./hero3d\";\nimport {audioController, MUSIC_MUTE_CHANGE, SFX_MUTE_CHANGE} from \"../global/audioController\";\n\nexport const EVENT_PLAY = 'event_play';\nexport const EVENT_PAUSE = 'event_pause';\nexport const EVENT_CHAPTER_SWITCH = \"event_chapter_switch\";\n\nexport class Controls extends Emitter {\n\n    public element: HTMLElement;\n    private progressBar: HTMLElement;\n    private timerRing: SVGElement;\n    private timerRingCircle: SVGElement;\n    private playButton: HTMLElement;\n    private chapterMenu: HTMLElement;\n    private chapterMenuItems: NodeList;\n    private playIcon: HTMLElement;\n    private pauseIcon: HTMLElement;\n    private nextChapterButton: HTMLElement;\n    private previousChapterButton: HTMLElement;\n    private sfxToggle: HTMLElement;\n    private musicToggle: HTMLElement;\n    private timerTween: any;\n    private progressBarTween: any;\n    private paused: boolean = true;\n    private strokeDashArrayLength: number;\n\n    constructor(element: HTMLElement) {\n        super();\n        this.element = element;\n        this.progressBar = this.element.querySelector('.progress-bar');\n        this.timerRing = this.element.querySelector('.timer-ring');\n        this.timerRingCircle = this.element.querySelector('.timer-ring circle');\n        this.playButton = this.element.querySelector('.play-pause');\n        this.playIcon = this.playButton.querySelector('.icon-play');\n        this.pauseIcon = this.playButton.querySelector('.icon-pause');\n        this.chapterMenu = this.element.querySelector('.chapter-menu');\n        this.chapterMenuItems = this.element.querySelectorAll('.chapter-menu-item');\n        this.previousChapterButton = this.element.querySelector('.chapter-arrows .previous');\n        this.nextChapterButton = this.element.querySelector('.chapter-arrows .next');\n        this.sfxToggle = this.element.querySelector('.sfx-toggle');\n        this.musicToggle = this.element.querySelector('.music-toggle');\n\n        this.chapterMenuItems.forEach((chapterItem) => {\n            (chapterItem as HTMLElement).addEventListener('click', this.chapterMenuClick);\n        });\n        this.playButton.addEventListener('click', this.playButtonHandler);\n        this.previousChapterButton.addEventListener('click', this.previousChapterButtonHandler);\n        this.nextChapterButton.addEventListener('click', this.nextChapterButtonHandler);\n        this.sfxToggle.addEventListener('click', this.sfxToggleHandler);\n        this.musicToggle.addEventListener('click', this.musicToggleHandler);\n\n        audioController.on(MUSIC_MUTE_CHANGE, this.audioControllerSoundToggleHandler);\n        audioController.on(SFX_MUTE_CHANGE, this.audioControllerSoundToggleHandler);\n\n        const r = parseInt(this.timerRingCircle.getAttribute('r'));\n        this.strokeDashArrayLength = 2 * Math.PI * r;\n        gsap.set(this.timerRing, {strokeDasharray: this.strokeDashArrayLength});\n    }\n\n    set progress(value: number) {\n        gsap.set(this.progressBar, {width: (value * 100) + '%'});\n    }\n\n    public startTimer(duration: number) {\n        gsap.killTweensOf(this.timerRing);\n        gsap.set(this.timerRing, {strokeDashoffset: this.strokeDashArrayLength});\n        this.timerTween = gsap.to(this.timerRing, duration, {strokeDashoffset: 0, ease: 'none'});\n    }\n\n    public animateProgressFromTo(from: number, to: number, speed: number) {\n        this.progress = from;\n        this.animateProgressTo(to, speed);\n    }\n\n    public animateProgressTo(to: number, speed: number) {\n        gsap.killTweensOf(this.progressBar);\n        this.progressBarTween = gsap.to(this.progressBar, speed, {width: (to * 100) + '%', ease: 'none'});\n    }\n\n    public show(delay: number = 0) {\n        this.element.style.display = 'block';\n        gsap.set(this.element, {opacity: 0});\n        gsap.to(this.element, .5, {opacity: 1, delay: delay});\n    }\n\n    public hide() {\n        this.element.style.display = 'none';\n    }\n\n    public resume() {\n        if (!this.paused) {\n            return;\n        }\n        this.playIcon.style.display = 'none';\n        this.pauseIcon.style.display = 'block';\n        this.paused = false;\n        this.timerTween.play();\n        this.progressBarTween.play();\n    }\n\n    public pause() {\n        if (this.paused) {\n            return;\n        }\n        this.playIcon.style.display = 'block';\n        this.pauseIcon.style.display = 'none';\n        this.paused = true;\n        this.timerTween.pause();\n        this.progressBarTween.pause();\n    }\n\n    private playButtonHandler = (event: MouseEvent) => {\n        if (this.paused) {\n            this.emit(EVENT_PLAY, {});\n        } else {\n            this.emit(EVENT_PAUSE, {});\n        }\n    }\n\n    public updateChapterMenu(chapterIndex: number, actIndex: number) {\n        this.chapterMenuItems.forEach((chapterItem, index) => {\n            const chapterItemEl = chapterItem as HTMLElement;\n            if (index + 1 != chapterIndex) {\n                chapterItemEl.classList.remove('active');\n            } else {\n                chapterItemEl.classList.add('active');\n            }\n        });\n        this.previousChapterButton.classList.remove('disabled');\n        this.nextChapterButton.classList.remove('disabled');\n        if (chapterIndex == 1) {\n            this.previousChapterButton.classList.add('disabled');\n        } else if (chapterIndex == 4) {\n            this.nextChapterButton.classList.add('disabled');\n        }\n    }\n\n    private chapterMenuClick = (event: MouseEvent) => {\n        const el = event.currentTarget as HTMLElement;\n        const index = Array.from(el.parentNode.children).indexOf(el) + 1;\n        this.emit(EVENT_CHAPTER_SWITCH, {chapterIndex: index});\n    }\n\n    private previousChapterButtonHandler = (event: MouseEvent) => {\n        this.emit(EVENT_CHAPTER_SWITCH, {chapterIndex: timer.currentChapterIndex - 1});\n    }\n\n    private nextChapterButtonHandler = (event: MouseEvent) => {\n        this.emit(EVENT_CHAPTER_SWITCH, {chapterIndex: timer.currentChapterIndex + 1});\n    }\n\n    private sfxToggleHandler = () => {\n        audioController.sfxMuted = !audioController.sfxMuted;\n    }\n\n    private musicToggleHandler = () => {\n        audioController.musicMuted = !audioController.musicMuted;\n    }\n\n    private audioControllerSoundToggleHandler = () => {\n        if (audioController.sfxMuted) {\n            this.sfxToggle.classList.remove('active');\n        } else {\n            this.sfxToggle.classList.add('active');\n        }\n        if (audioController.musicMuted) {\n            this.musicToggle.classList.remove('active');\n        } else {\n            this.musicToggle.classList.add('active');\n        }\n    }\n\n}","/*\nThe top level class for the homepage. Intializes, controls and manages the hero 3d experience.\n */\n\nimport {Page} from \"../global/page\";\nimport {CHAPTERS_3D, COLOR_MODES, DAY, SLUG_HOME, TIME_OF_DAY} from \"../global/constants\";\nimport {hero3d, timer} from \"./hero3d\";\nimport {state} from \"../global/state\";\nimport {header} from \"../header\";\nimport {gsap} from \"gsap\";\nimport {Controls, EVENT_CHAPTER_SWITCH, EVENT_PAUSE, EVENT_PLAY} from \"./controls\";\nimport * as animations from \"./animations\";\nimport {ACT_CHANGE_EVENT} from \"./timer\";\nimport {EVENT_HEADER_COLOR, EVENT_RESIZE} from \"../global/window\";\nimport {emitter} from \"../global/emitter\";\n//@ts-ignore\nimport {SplitText} from \"../gsap-bonus/SplitText\";\nimport {hideIntroPaths, showIntroPaths} from \"./animations\";\nimport {WEBGL} from \"three/examples/jsm/WebGL\";\nimport {AUDIO_BE3, AUDIO_CLK, audioController} from \"../global/audioController\";\n\nexport class Home extends Page {\n    public titleExperienceEl: HTMLElement;\n    public introPlay: HTMLElement;\n    public introLoader: HTMLElement;\n    public dragArea: HTMLElement;\n    private titleInitialEl: HTMLElement;\n    private introPlayIcon: HTMLElement;\n    private introControls: HTMLElement;\n    private menuEl: HTMLElement;\n    private statsEl: HTMLElement;\n    private introLoadingLabel: HTMLElement;\n    private introExploreLabel: HTMLElement;\n    private disclaimer: HTMLElement;\n    private statsItemsEl: NodeList;\n    private controls: Controls;\n    private started: boolean;\n    private resumeOnFocus: boolean;\n\n    constructor() {\n        super(document.querySelector('main.home'), true);\n        this.dragArea = document.querySelector('.drag-area');\n        this.menuEl = this.element.querySelector('.menu');\n        this.statsEl = this.element.querySelector('.stats');\n        this.statsItemsEl = this.element.querySelectorAll('.stats li');\n        this.titleInitialEl = this.element.querySelector('.title-initial');\n        this.titleExperienceEl = this.element.querySelector('.title-experience');\n        this.introControls = this.element.querySelector('.intro-controls');\n        this.introPlay = this.element.querySelector('.intro-play');\n        this.introPlayIcon = this.element.querySelector('.intro-play .icon');\n        this.introLoader = this.element.querySelector('.intro-loader');\n        this.introLoadingLabel = this.element.querySelector('.loading-label');\n        this.introExploreLabel = this.element.querySelector('.explore-label');\n        this.disclaimer = this.element.querySelector('.disclaimer');\n        this.controls = new Controls(this.element.querySelector('.experience-controls'));\n        if (!WEBGL.isWebGLAvailable()) {\n            this.introControls.style.display = 'none';\n        }\n        hero3d.init();\n    }\n\n    setupEvents() {\n        this.controls.on(EVENT_PLAY, this.playButtonHandler);\n        this.controls.on(EVENT_PAUSE, this.pauseButtonHandler);\n        this.controls.on(EVENT_CHAPTER_SWITCH, this.chapterSwitchHandler);\n        this.enableDrag();\n        document.body.addEventListener('keyup', this.keyUpHandler);\n        timer.on(ACT_CHANGE_EVENT, this.onActChange);\n        this.introPlay.addEventListener('click', this.startButtonHandler);\n        emitter.on(EVENT_RESIZE, this.updateDOMColors);\n        window.addEventListener(\"blur\", this.onBlurHandler);\n        window.addEventListener(\"focus\", this.onFocusHandler);\n    }\n\n    async animateIn() {\n        gsap.set(this.element, {opacity: 1});\n        hero3d.reset();\n        hero3d.show();\n        await hero3d.loadImage();\n\n        const startDelay = .25;\n        gsap.to(this.statsItemsEl, 1, {opacity: 1, y: 0, stagger: .1, delay: startDelay});\n        hero3d.animateIn(.5 + startDelay, 1.5);\n        header.animateIn(.9 + startDelay, 1);\n        gsap.to(this.menuEl, 1, {opacity: 1, delay: .9 + startDelay});\n\n        gsap.to([this.introLoader, this.introPlay, this.disclaimer], .5, {opacity: 1, delay: 1.8 + startDelay});\n        gsap.to(this.introLoader, 3, {rotation: 360, ease: 'none', repeat: -1, delay: 1.8 + startDelay});\n\n        gsap.set(this.titleInitialEl, {perspective: 400, opacity: 1});\n        const tl = gsap.timeline(),\n            mySplitText = new SplitText(this.titleInitialEl, {type: \"words, chars\"}),\n            chars = mySplitText.chars;\n        tl.from(chars, {\n            duration: 1,\n            opacity: 0,\n            y: 20,\n            ease: \"Power2.easeOut\",\n            delay: .7 + startDelay,\n            stagger: 0.007,\n            onComplete: this.animationInComplete.bind(this)\n        });\n    }\n\n    async animationInComplete() {\n        await hero3d.load();\n        this.setupEvents();\n        this.introExploreLabel.style.display = 'block';\n        this.introLoadingLabel.style.display = 'none';\n        gsap.to(this.introLoader, .5, {opacity: 0, onComplete: () => {\n                gsap.killTweensOf(this.introLoader);\n            }});\n        gsap.to(this.introPlayIcon, 1, {opacity: 1, onComplete: () => {\n                this.introPlay.classList.add('active');\n            }});\n    }\n\n    animateOut(): Promise<unknown> {\n        this.pause();\n        gsap.exportRoot().kill();\n        hero3d.animateOut();\n        return super.animateOut();\n    }\n\n    startButtonHandler = () => {\n        audioController.play(AUDIO_CLK);\n        this.introPlay.removeEventListener('click', this.startButtonHandler);\n        this.start();\n    }\n\n    playButtonHandler = () => {\n        this.resume();\n    }\n\n    pauseButtonHandler = () => {\n        this.pause();\n    }\n\n    onBlurHandler = () => {\n        if (!timer.paused) {\n            this.resumeOnFocus = true;\n            this.pause();\n        }\n    }\n\n    onFocusHandler = () => {\n        if (this.resumeOnFocus) {\n            this.resumeOnFocus = false;\n            this.resume();\n        }\n    }\n\n    keyUpHandler = (e: any) => {\n        if (e.keyCode == 32) {\n            e.preventDefault();\n            if (timer.paused) {\n                this.resume();\n            } else {\n                this.pause();\n            }\n        }\n    }\n\n    public start() {\n        if (this.started || !hero3d.loaded) {\n            return;\n        }\n        this.introPlay.classList.remove('active');\n        this.started = true;\n        this.resume();\n        hideIntroPaths();\n        header.hideZoom();\n        this.hideMenu(.5);\n        this.hideStats(.5);\n        gsap.to(this.titleInitialEl, .5, {opacity: 0, onComplete: () => {\n            this.element.classList.add('experience-started');\n            this.disableDrag();\n            }});\n        gsap.to([this.introPlay, this.introPlayIcon, this.disclaimer], .5, {opacity: 0});\n        this.controls.show(1);\n    }\n\n    public resume() {\n        if (!timer.paused || !hero3d.loaded || !this.started) {\n            return;\n        }\n        timer.resume();\n        this.controls.resume();\n        hero3d.resume();\n        audioController.resumeAll();\n    }\n\n    public pause() {\n        if (timer.paused || !hero3d.loaded) {\n            return;\n        }\n        timer.pause();\n        this.controls.pause();\n        hero3d.pause();\n        audioController.pauseAll();\n    }\n\n    chapterSwitchHandler = (event: any) => {\n        if (timer.currentChapterIndex == event.chapterIndex) {\n            return;\n        }\n        audioController.stopAll();\n        gsap.set(this.titleExperienceEl, {opacity: 0});\n        timer.gotoAct(event.chapterIndex, 1);\n    }\n\n    onDragAreaDownHandler = (event: any) => {\n        hero3d.globe.startDrag(event.clientX, event.clientY);\n        this.dragArea.addEventListener('mousemove', this.onDragAreaMoveHandler);\n    }\n\n    onDragAreaMoveHandler = (event: any) => {\n        hero3d.globe.drag(event.clientX, event.clientY);\n    }\n\n    onDragAreaUpHandler = (event: any) => {\n        this.dragArea.removeEventListener('mousemove', this.onDragAreaMoveHandler);\n        hero3d.globe.stopDrag(event.clientX, event.clientY);\n    }\n\n    private onActChange = (event: any) => {\n        const part = event.chapter + '_' + event.act;\n        const chapterData = state.getValue(CHAPTERS_3D)[event.chapter - 1];\n        const actData = chapterData.acts[event.act - 1];\n        const from = timer.progress / timer.duration;\n        const actDuration = parseInt(actData.duration);\n        const to = (timer.progress + actDuration) / timer.duration;\n\n        if (timer.currentChapterIndex != event.lastChapter) {\n            hero3d.onChapterChange();\n            this.controls.startTimer(timer.getChapterDuration(timer.currentChapterIndex));\n            this.resume();\n        }\n\n        this.controls.updateChapterMenu(event.chapter, event.act);\n        this.controls.animateProgressFromTo(from, to, actDuration);\n\n        //@ts-ignore\n        animations['play'+part](chapterData, actData, this);\n    }\n\n    showStats(speed: number = 0, delay: number = 0) {\n        gsap.to(this.statsEl, speed, {opacity: 1, delay: delay});\n    }\n\n    hideStats(speed: number = 0, delay: number = 0) {\n        gsap.to(this.statsEl, speed, {opacity: 0, delay: delay, onComplete: () => {\n            this.statsEl.style.display = 'none';\n            }});\n    }\n\n    hideMenu(speed: number = 0, delay: number = 0) {\n        gsap.to(this.menuEl, speed, {opacity: 0, delay: delay, onComplete: () => {\n                this.menuEl.style.display = 'none';\n            }});\n    }\n\n    updateDOMColors = () => {\n        if (state.getValue(TIME_OF_DAY) == DAY) {\n            this.element.classList.remove(...COLOR_MODES);\n            this.element.classList.add(COLOR_MODES[0]);\n            header.element.classList.remove(...COLOR_MODES);\n            header.element.classList.add(COLOR_MODES[0]);\n            emitter.emit(EVENT_HEADER_COLOR, {mode: COLOR_MODES[0]});\n        } else {\n            this.element.classList.remove(...COLOR_MODES);\n            this.element.classList.add(COLOR_MODES[1]);\n            header.element.classList.remove(...COLOR_MODES);\n            header.element.classList.add(COLOR_MODES[1]);\n            emitter.emit(EVENT_HEADER_COLOR, {mode: COLOR_MODES[1]});\n        }\n    }\n\n    get slug() {\n        return SLUG_HOME;\n    }\n\n    private enableDrag() {\n        this.dragArea.addEventListener('mousedown', this.onDragAreaDownHandler);\n        window.addEventListener('mouseup', this.onDragAreaUpHandler);\n    }\n\n    private disableDrag() {\n        this.dragArea.removeEventListener('mousedown', this.onDragAreaDownHandler);\n        window.removeEventListener('mouseup', this.onDragAreaUpHandler);\n    }\n\n    public destroy() {\n        this.controls.off(EVENT_PLAY, this.playButtonHandler);\n        this.controls.off(EVENT_PAUSE, this.pauseButtonHandler);\n        this.controls.off(EVENT_CHAPTER_SWITCH, this.chapterSwitchHandler);\n        this.disableDrag();\n        document.body.removeEventListener('keyup', this.keyUpHandler);\n        timer.off(ACT_CHANGE_EVENT, this.onActChange);\n        this.introPlay.removeEventListener('click', this.startButtonHandler);\n        emitter.off(EVENT_RESIZE, this.updateDOMColors);\n        window.removeEventListener(\"blur\", this.onBlurHandler);\n        window.removeEventListener(\"focus\", this.onFocusHandler);\n        hero3d.destroy();\n    }\n}\n","import {gsap} from \"gsap\";\nimport {EVENT_RESIZE, Window} from \"../global/window\";\nimport {emitter} from \"../global/emitter\";\n\nexport class Slideshow {\n    public element: HTMLElement;\n    private navItems: NodeListOf<HTMLElement>;\n    private imageItems: NodeListOf<HTMLElement>;\n    private copyItems: NodeListOf<HTMLElement>;\n    private btnPrev: HTMLElement;\n    private btnNext: HTMLElement;\n\n    private speed: number;\n    private currIndex: number = 0;\n\n    constructor(element: HTMLElement) {\n        this.element = element;\n        this.navItems = this.element.querySelectorAll('.nav li');\n        this.imageItems = this.element.querySelectorAll('.images-block .item');\n        this.copyItems = this.element.querySelectorAll('.copy-block .item');\n        this.btnPrev = this.element.querySelector('.prev');\n        this.btnNext = this.element.querySelector('.next');\n        this.speed = .3;\n        this.init();\n    }\n\n    private init() {\n        this.layout();\n        this.addListeners();\n        this.showActive();\n    }\n\n    private addListeners() {\n        this.btnPrev.addEventListener('click', this.onPrevClick.bind(this));\n        this.btnNext.addEventListener('click', this.onNextClick.bind(this));\n\n        for (const item of this.navItems) {\n            item.addEventListener('click', this.onNavClick.bind(this));\n        }\n        emitter.on(EVENT_RESIZE, this.layout);\n    }\n\n    private removeListeners() {\n        this.btnPrev.removeEventListener('click', this.onPrevClick.bind(this));\n        this.btnNext.removeEventListener('click', this.onNextClick.bind(this));\n\n        for (const item of this.navItems) {\n            item.removeEventListener('click', this.onNavClick.bind(this));\n        }\n        emitter.off(EVENT_RESIZE, this.layout);\n    }\n\n    private onPrevClick(e: any) {\n        this.hideCurrent();\n        this.currIndex = this.currIndex === 0 ? this.navItems.length - 1 : this.currIndex -= 1;\n        this.showActive();\n    }\n\n    private onNextClick(e: any) {;\n        this.hideCurrent();\n        this.currIndex = this.currIndex === this.navItems.length - 1 ? 0 : this.currIndex += 1;\n        this.showActive();\n    }\n\n    private onNavClick(e: any) {\n        const item = e.target.parentElement;\n\n        this.hideCurrent();\n        this.currIndex = [...this.navItems].indexOf(item);\n        this.showActive();\n    }\n\n    private hideCurrent() {\n        const activeItem = [this.imageItems[this.currIndex], this.copyItems[this.currIndex]];\n\n        // Deselect old active\n        this.navItems[this.currIndex].classList.remove('active');\n        gsap.to(activeItem, {duration: this.speed, autoAlpha: 0});\n    }\n\n    private showActive() {\n        const activeItem = [this.imageItems[this.currIndex], this.copyItems[this.currIndex]];\n\n        this.navItems[this.currIndex].classList.add('active');\n        //gsap.set(activeItem, {display: 'block', opacity: 0});\n        gsap.to(activeItem, {duration: this.speed, autoAlpha: 1});\n    }\n\n    private layout = () => {\n    }\n\n    public destroy() {\n        this.removeListeners();\n        for (const item of this.navItems) {\n            item.removeEventListener('click', this.onNavClick.bind(this));\n        }\n    }\n}\n","import {emitter} from '../global/emitter';\nimport {EVENT_RESIZE, EVENT_SCROLL, Window} from '../global/window';\nimport {gsap} from 'gsap';\n\nexport class MineGraph {\n  element: HTMLElement;\n  wrapper: HTMLElement;\n  parent: HTMLElement;\n  child: HTMLElement;\n\n  line: SVGPathElement;\n  lineBg: SVGPathElement;\n  lineLength: number;\n  animating = false;\n  reset = true;\n\n  width: number;\n  height: number;\n  scale: number;\n\n  coins1: HTMLElement[];\n  coins2: HTMLElement[];\n  coins3: HTMLElement[];\n  dots: SVGCircleElement[];\n\n  tls: Array<any> = [];\n\n  constructor(element: HTMLElement) {\n    this.element = element;\n    this.wrapper = element.querySelector('.graph-wrapper');\n    this.parent = element.querySelector('.parent');\n    this.child = element.querySelector('.child');\n\n    this.line = element.querySelector('.line') as SVGPathElement;\n    this.lineBg = element.querySelector('.line--bg') as SVGPathElement;\n    this.lineLength = this.line.getTotalLength() + 0.5;\n    this.dots = [...element.querySelectorAll('circle.dot')] as SVGCircleElement[];\n\n    this.coins1 = [...element.querySelectorAll('.coin--1')] as HTMLElement[];\n    this.coins2 = [...element.querySelectorAll('.coin--2')] as HTMLElement[];\n    this.coins3 = [...element.querySelectorAll('.coin--3')] as HTMLElement[];\n\n    this.resetProps();\n    this.animateIn(1);\n  }\n\n  tweenCoins(coins: HTMLElement[], duration: number, delay: number, stop: number) {\n    this.tls[stop] = gsap.timeline();\n    this.tls[stop].to(coins, {\n      opacity: 1,\n      duration: 0.1,\n      delay: delay + 0.1,\n      stagger: duration / coins.length + 0.01,\n      ease: 'expo.out'\n    }).to(coins, {opacity: 0, duration: 0.45, stagger: duration / coins.length});\n    return gsap.to(coins, {duration: duration, stagger: duration / coins.length, y: -70, delay, ease: 'back.out(2.5)'});\n  }\n\n  async animateIn(delay = 0) {\n    let stop1 = 902;\n    let stop2 = 482;\n    let stop3 = 0;\n    let duration = 1;\n\n    gsap.to(this.dots, 0.2, {scale: 1, opacity: 1, stagger: 0.1, delay});\n    gsap.to(this.lineBg, 1.2, {strokeDashoffset: stop3, delay});\n\n    // Step 1\n    this.tweenCoins(this.coins1, duration, 1, 1);\n    gsap.to(this.line, {duration, strokeDashoffset: stop1, delay: 1});\n\n    // Step 1\n    this.tweenCoins(this.coins2, duration, 3, 2);\n    gsap.to(this.line, {duration, strokeDashoffset: stop2, delay: 3});\n\n    // Step 3\n    this.tweenCoins(this.coins3, duration,  5, 3);\n    gsap.to(this.line, {duration, strokeDashoffset: stop3, delay: 5, onComplete: ()=> {\n          gsap.delayedCall(2, () =>( this.resetAnimation() ));\n        }});\n\n    this.reset = false;\n  }\n\n  resetProps() {\n\n      gsap.set(this.line, {strokeDasharray: this.lineLength, strokeDashoffset: this.lineLength});\n      gsap.set(this.lineBg, {strokeDasharray: this.lineLength, strokeDashoffset: this.lineLength});\n      gsap.set(this.dots, {scale: 0, opacity: 0});\n      gsap.set(this.coins1, {opacity: 0, y: 0});\n      gsap.set(this.coins2, {opacity: 0, y: 0});\n      gsap.set(this.coins3, {opacity: 0, y: 0});\n  }\n\n  resetAnimation() {\n    this.tls.forEach((tl)=> {\n      tl.kill();\n    })\n\n    gsap.killTweensOf(this.line);\n    gsap.killTweensOf(this.lineBg);\n    gsap.killTweensOf(this.dots);\n    gsap.killTweensOf(this.coins1);\n    gsap.killTweensOf(this.coins2);\n    gsap.killTweensOf(this.coins3);\n\n    this.resetProps();\n\n    this.animateIn(2);\n  }\n\n  destroy() {\n\n  }\n}\n","import {Page} from '../global/page';\nimport {SLUG_PROVIDE} from '../global/constants';\nimport {Slideshow} from '../components/slideshow';\nimport {MineGraph} from '../components/minegraph';\nimport {Accordion} from '../components/accordion';\n//import {Calculate} from '../components/calculate';\n\nexport class Provide extends Page {\n  slideshow: Slideshow;\n  graph: MineGraph;\n  accordion: Accordion;\n  //calculate: Calculate;\n\n  constructor() {\n    super(document.querySelector('main.provide'));\n    this.slideshow = new Slideshow(this.element.querySelector('.Slideshow'));\n    this.graph = new MineGraph(this.element.querySelector('.rewards .graph'));\n    this.accordion = new Accordion(this.element.querySelector('.Accordion'));\n    //this.calculate = new Calculate(this.element.querySelector('.calculate'));\n  }\n\n  get slug() {\n    return SLUG_PROVIDE;\n  }\n\n  destroy() {\n    this.slideshow.destroy();\n    this.graph.destroy();\n    this.accordion.destroy();\n    //this.calculate.destroy();\n    super.destroy();\n  }\n}\n","import {gsap} from \"gsap\";\nimport {EVENT_RESIZE, Window} from \"../global/window\";\nimport {emitter} from \"../global/emitter\";\nimport Draggable from 'gsap/Draggable';\nimport {BP_S} from \"../global/constants\";\n\nexport class Carousel {\n    public element: HTMLElement;\n    private activeID: number;\n    private itemW: number;\n    private carousel_count: number;\n    private carouselWrapper: HTMLElement;\n    private carouselItems: NodeListOf<HTMLElement>;\n    private navDotsWrapper: HTMLElement;\n    private navDots: NodeListOf<HTMLElement>;\n    private btnNext: HTMLElement;\n    private btnPrev: HTMLElement;\n    private swipeDir: string;\n    private mobileOnly: boolean;\n    private slideSpeed: number;\n    private slideMeth: any;\n    private opacityDisabled: number;\n    private opacitySpeed: number;\n    private draggable: any;\n    private enabled: boolean;\n    private prevX: number = 0;\n\n    /**\n     * Constructor\n     *\n     * @param  {HTMLElement} element - The Carousel container element.\n     * @param  {string} breakpoint - The parent node in the HTML to return\n     */\n    constructor(element: HTMLElement, mobileOnly: boolean = false) {\n        this.element = element;\n        this.mobileOnly = mobileOnly;\n        this.initDraggable();\n    }\n\n    public initDraggable() {\n        // Draggable\n        this.activeID = 0;\n        this.carousel_count = this.element.querySelectorAll('.carousel-item').length;\n        this.carouselWrapper = this.element.querySelector('.carousel-items');\n        this.carouselItems = this.element.querySelectorAll('.carousel-item');\n        this.navDotsWrapper = this.element.querySelector('.nav-dots');\n        this.btnNext = this.element.querySelector('.item-prev');\n        this.btnPrev = this.element.querySelector('.item-next');\n        this.swipeDir;\n        this.slideSpeed = .45;\n        this.slideMeth = 'Power2.EaseInOut';\n        this.opacityDisabled = .25;\n        this.opacitySpeed = .35;\n\n        // Hide dots if less than 2 images\n        if (this.carousel_count < 2)\n            this.navDotsWrapper.style.display = 'none';\n\n        this.setupDraggable();\n        this.setupDots();\n        this.navigateSlide();\n        this.addHandlers();\n\n        this.enabled = true;\n\n        // Resize handle\n        emitter.on(EVENT_RESIZE, this.layout);\n        this.layout();\n\n        emitter.emit(EVENT_RESIZE, {\n            width: Window.width,\n            height: Window.height\n        });\n    }\n\n    setupDraggable() {\n        gsap.registerPlugin(Draggable);\n\n        this.draggable = Draggable.create(this.carouselWrapper, {\n            type: 'x',\n            edgeResistance: 0.90,\n            dragResistance: 0.0,\n            bounds: '.carousel-container',\n            onDrag: this.updateDirections.bind(this),\n            onThrowUpdate: this.updateDirections.bind(this),\n            throwProps: true,\n            lockAxis: true,\n            onDragStart: function (evt) {\n            },\n            onDragEnd: () => {\n                if (this.swipeDir == 'left') {\n                    this.activeID++\n                }\n                else if (this.swipeDir == 'right') {\n                    this.activeID--\n                }\n\n                this.navigateSlide();\n            }\n        });\n    };\n\n    disable() {\n        this.enabled = false;\n\n        this.draggable[0].kill();\n        this.removeHandlers();\n\n        this.carouselWrapper.style.removeProperty('width');\n        for (const el of this.carouselItems) {\n            el.style.removeProperty('width');\n            el.style.removeProperty('opacity');\n        }\n    }\n\n    enable() {\n        this.enabled = true;\n\n        this.draggable[0].enable();\n    }\n\n    // set up dots\n    setupDots() {\n        let dotHTML: string;\n\n        for (var i = 0; i < this.carousel_count; i++) {\n            dotHTML = `<div class=\"nav-dot\" id=\"dot_${i}\"><span class=\"dot\"></span></div>`;\n            this.navDotsWrapper.insertAdjacentHTML('beforeend', dotHTML);\n        }\n\n        this.navDots = this.element.querySelectorAll('.nav-dot');\n    }\n\n    // navigate slide\n    navigateSlide() {\n        if (this.activeID >= this.carousel_count - 1) this.activeID = this.carousel_count - 1;\n        if (this.activeID <= 0) this.activeID = 0;\n\n        var xTarget = ((this.activeID * this.itemW) * -1);\n\n        gsap.to(this.carouselWrapper, {\n            duration: this.slideSpeed,\n            x: xTarget,\n            ease: this.slideMeth,\n            overwrite: true,\n            onComplete: this.slideDone.bind(this)\n        });\n    }\n\n    slideDone() {\n        if (!this.enabled) return false;\n\n        gsap.to([this.navDots, this.carouselItems], {duration: this.opacitySpeed, opacity: this.opacityDisabled});\n\n        const el = this.element.querySelector(`#dot_${this.activeID}`);\n        const elActive = this.element.querySelector(`.nav-dot.active`);\n        if (elActive) elActive.classList.remove('active');\n        el.classList.add('active');\n\n        gsap.to([el, this.carouselItems[this.activeID]], {\n            duration: this.opacitySpeed,\n            opacity: 1,\n            color: 0xCC0000\n        });\n    }\n\n    updateDirections() {\n        this.swipeDir = this.draggable[0].getDirection(\"velocity\");\n\n        if (this.prevX > this.draggable[0].endX) {\n            this.swipeDir = 'left';\n        } else if (this.prevX < this.draggable[0].endX) {\n            this.swipeDir = 'right';\n        }\n\n        this.prevX = this.draggable[0].endX;\n    }\n\n    onNavDotClick(e: any) {\n        this.activeID = e.target.getAttribute('id').split('_')[1];\n        this.navigateSlide();\n    }\n\n    onItemMouseDown(e: any) {\n        e.target.classList.remove('grab');\n        e.target.classList.add('grabbing');\n    }\n\n    onItemMouseEnter(e: any) {\n        e.target.classList.remove('grabbing');\n        e.target.classList.add('grab');\n    }\n\n    onItemMouseUp(e: any) {\n        e.target.classList.remove('grabbing');\n        e.target.classList.add('grab');\n    }\n\n    onNavDotMouseEnter(e: any) {\n        gsap.to(e.target, {duration: this.opacitySpeed, opacity: 1});\n    }\n\n    onNavDotMouseLeave(e: any) {\n        if (e.target.classList.contains('active')) return false;\n        gsap.to(e.target, {duration: this.opacitySpeed, opacity: this.opacityDisabled});\n    }\n\n    onToggleItemClick(e: any) {\n        // When two items just toggle both\n        if (this.carousel_count ===2) {\n            this.activeID = this.activeID === 0 ? 1 : 0;\n            this.navigateSlide();\n        }\n    }\n\n    private onPrevClick(e: any) {\n        this.activeID = this.activeID === this.carouselItems.length - 1 ? 0 : this.activeID += 1;\n        this.navigateSlide();\n    }\n\n    private onNextClick(e: any) {;\n        this.activeID = this.activeID === 0 ? this.carouselItems.length - 1 : this.activeID -= 1;\n        this.navigateSlide();\n    }\n\n    addHandlers() {\n        this.element.addEventListener('click', this.onToggleItemClick.bind(this));\n\n        for (const navDot of this.navDots) {\n            navDot.addEventListener('click', this.onNavDotClick.bind(this));\n            navDot.addEventListener('mouseenter', this.onNavDotMouseEnter.bind(this));\n            navDot.addEventListener('mouseleave', this.onNavDotMouseLeave.bind(this));\n        }\n\n        for (const item of this.carouselItems) {\n            item.addEventListener('mousedown', this.onItemMouseDown.bind(this));\n            item.addEventListener('mouseenter', this.onItemMouseEnter.bind(this));\n            item.addEventListener('mouseup', this.onItemMouseUp.bind(this));\n        }\n\n        if (this.btnPrev && this.btnNext) {\n            this.btnPrev.addEventListener('click', this.onPrevClick.bind(this));\n            this.btnNext.addEventListener('click', this.onNextClick.bind(this));\n        }\n    }\n\n    removeHandlers() {\n        this.element.removeEventListener('click', this.onToggleItemClick.bind(this));\n\n        for (const navDot of this.navDots) {\n            navDot.removeEventListener('click', this.onNavDotClick.bind(this));\n            navDot.removeEventListener('mouseenter', this.onNavDotMouseEnter.bind(this));\n            navDot.removeEventListener('mouseleave', this.onNavDotMouseLeave.bind(this));\n        }\n\n        for (const item of this.carouselItems) {\n            item.removeEventListener('mousedown', this.onItemMouseDown.bind(this));\n            item.removeEventListener('mouseenter', this.onItemMouseEnter.bind(this));\n            item.removeEventListener('mouseup', this.onItemMouseUp.bind(this));\n        }\n\n        if (this.btnPrev && this.btnNext) {\n            this.btnPrev.removeEventListener('click', this.onPrevClick.bind(this));\n            this.btnNext.removeEventListener('click', this.onNextClick.bind(this));\n        }\n    }\n\n    layout = () => {\n        // Check to enable or disable functionality based on mobileOnly\n        if (this.mobileOnly && Window.width < BP_S && !this.enabled) {\n            this.enable();\n        } else if (this.mobileOnly && Window.width >= BP_S && this.enabled) {\n            this.disable();\n        }\n\n        if (this.enabled) {\n            this.itemW = this.element.getBoundingClientRect().width;\n            this.carouselWrapper.style.width = (this.itemW * this.carousel_count) + 'px';\n\n            for (const item of this.carouselItems) {\n                item.style.width = this.itemW + 'px';\n            }\n        }\n    }\n\n    public destroy() {\n        this.draggable[0].kill();\n        emitter.off(EVENT_RESIZE, this.layout);\n        this.removeHandlers();\n    }\n}\n","import {gsap} from \"gsap\";\n\nexport class VideoOverlay {\n    public element: HTMLElement;\n    private mainElement: HTMLElement;\n    private modalElement: HTMLElement;\n    private videoId: string = '';\n    private fadeDuration: number = .3;\n\n    constructor(element: HTMLElement, mainElement: HTMLElement) {\n        this.element = element;\n        this.mainElement = mainElement;\n        this.init();\n    }\n\n    private init() {\n        this.element.addEventListener('click', this.onAnchorClick.bind(this));\n    }\n\n    // Test for youtube\n    private testURL( link: string ) {\n        const regex = RegExp('^((?:https?:)?\\\\/\\\\/)?((?:www|m)\\\\.)?((?:youtube\\\\.com|youtu.be))(\\\\/(?:[\\\\w\\\\-]+\\\\?v=|embed\\\\/|v\\\\/)?)([\\\\w\\\\-]+)(\\\\S+)?$');\n        return regex.test(link);\n    }\n\n    private onAnchorClick(e: any) {\n        e.preventDefault();\n\n        const link = e.target.href;\n\n        if (this.testURL(link)) {\n            this.videoId = link.split('v=')[1];\n            const ampersandPosition = this.videoId.indexOf('&');\n            if(ampersandPosition != -1) {\n                this.videoId = this.videoId.substring(0, ampersandPosition);\n            }\n\n            this.openModal();\n        }\n    }\n\n    private openModal() {\n        this.modalElement = document.createElement('div');\n        this.modalElement.classList.add('video-modal');\n        this.modalElement.innerHTML = `\n            <button class=\"close\"><span class=\"span\">close</span></button>\n            <div class=\"container\">\n              <div class=\"ratio ratio--16x9\">\n              <iframe class=\"iframe\" width=\"420\" height=\"315\"src=\"https://www.youtube.com/embed/${this.videoId}\"></iframe>\n              </div>\n            </div>`;\n\n        // Close handle\n        this.modalElement.querySelector('.close').addEventListener('click', this.onCloseClick.bind(this));\n\n        // Append modal\n        this.modalElement.style.opacity = '0';\n        this.mainElement.appendChild(this.modalElement);\n        gsap.to(this.modalElement, {duration: this.fadeDuration, opacity: 1});\n    }\n\n    private onCloseClick(e: any) {\n        gsap.to(this.modalElement, {duration: this.fadeDuration, opacity: 0, onComplete:()=> {\n                this.modalElement.remove();\n            }})\n    }\n\n    public destroy() {\n        this.element.removeEventListener('click', this.onAnchorClick.bind(this));\n    }\n}\n","import {Page} from \"../global/page\";\nimport {SLUG_BUILD} from \"../global/constants\";\nimport {Accordion} from \"../components/accordion\";\nimport {Carousel} from \"../components/carousel\";\nimport {VideoOverlay} from \"../components/videoOverlay\";\nimport {Build3d} from \"./build3d\";\nimport {Window} from \"../global/window\";\nimport {clamp} from \"../global/utils\";\nimport {header} from \"../header\";\n\nexport class Build extends Page {\n    accordionElement: HTMLElement;\n    toolsAccordion: Accordion;\n    carouselElements: NodeListOf<HTMLElement>;\n    videoOverlayElements: NodeListOf<HTMLElement>;\n    carousels: Array<Carousel> = [];\n    videoOverlays: Array<VideoOverlay> = [];\n    globe: HTMLElement;\n    build3d: Build3d;\n    overlay: HTMLElement;\n\n    constructor() {\n        super(document.querySelector('main'));\n        this.element = document.querySelector('main.build');\n        this.overlay = document.querySelector('.overlay');\n        this.accordionElement = this.element.querySelector('.Accordion');\n        this.toolsAccordion = new Accordion(this.accordionElement, [0, 1, 2], true);\n        this.carouselElements = this.element.querySelectorAll('.Carousel');\n        this.videoOverlayElements = this.element.querySelectorAll('.VideoOverlay');\n        this.globe = this.element.querySelector('.build-globe');\n        console.log(this.globe);\n        this.init();\n    }\n\n    init = () => {\n        let el;\n        let settingMobile;\n\n        for (el of this.carouselElements) {\n            el = el as HTMLElement;\n            settingMobile = el.dataset.settingMobile == \"true\";\n            this.carousels.push(new Carousel(el, settingMobile));\n        }\n\n        for (el of this.videoOverlayElements) {\n            el = el as HTMLElement;\n            this.videoOverlays.push(new VideoOverlay(el, this.element));\n        }\n    }\n\n    async animateIn() {\n        await super.animateIn();\n        //this.initBuild3d();\n    }\n\n    // initBuild3d() {\n    //     this.build3d = new Build3d()\n    //     this.build3d.init();\n    // }\n\n    parallax() {\n        super.parallax();\n\n        const perc = clamp(Window.lastScrollY / Window.height, 0, 1);\n        const opacity = clamp(Window.lastScrollY / (Window.height * 2.5), 0, 1);\n\n        this.overlay.style.opacity = `${opacity}`;\n        this.globe.style.display = opacity > .7 ? 'none' : 'block';\n\n        const percHeader = clamp(Window.lastScrollY / (Window.height/4), 0, 1);\n        header.backgroundWrapper.style.opacity = `${percHeader}`;\n    }\n\n    get slug() {\n        return SLUG_BUILD;\n    }\n\n    destroy() {\n        this.toolsAccordion.destroy();\n        //this.build3d.destroy();\n        this.carousels.forEach((item) => { item.destroy() });\n        this.videoOverlays.forEach((item) => { item.destroy() });\n        super.destroy();\n    }\n}\n","import {gsap} from 'gsap';\n\nexport default class ecosystemAvatars {\n  element: HTMLElement;\n  avatars: HTMLElement[];\n  cols: HTMLElement[];\n  grid: [number, number];\n  animating: boolean;\n\n  constructor(parent: HTMLElement) {\n    this.element = parent;\n    this.grid = [8, 30];\n    this.avatars = [...parent.querySelectorAll('.row img')] as HTMLElement[];\n    this.cols = [...parent.querySelectorAll('.col')] as HTMLElement[];\n    gsap.set(this.cols, {opacity: 0, y: 10});\n\n    this.addListeners();\n  }\n\n  animateIn(delay = 0) {\n    if (this.animating) return;\n    this.animating = true;\n\n    gsap.to(this.cols, {duration: 0.5, delay: delay, opacity: 1, y: 0, stagger: 0.1});\n  }\n\n  addListeners() {\n    let observer = new IntersectionObserver((entries, observer) => {\n      for (let entry of entries) {\n        if (entry.isIntersecting) {\n          const className = entry.target.className;\n          if (className === 'stats-wrapper') {\n            this.animateIn();\n          }\n        }\n      }\n    });\n\n    observer.observe(this.element.querySelector('.stats-wrapper'));\n  }\n\n  destroy() {\n\n  }\n}\n","import {emitter} from '../global/emitter';\nimport {EVENT_RESIZE} from '../global/window';\nimport {gsap} from 'gsap';\nimport map from '@hellomonday/map';\n\nexport class EcoGraph {\n  element: HTMLElement;\n  animating = false;\n  data: number[];\n  max: number;\n  weekLabelsWrapper: HTMLElement;\n  commitLabelsWrapper: HTMLElement;\n  count: number;\n  bars: SVGRectElement[];\n  labelsY: HTMLElement[] = [];\n  labelsX: HTMLElement[] = [];\n  lines: SVGLineElement[];\n  chartWrapper: HTMLElement;\n  observer: IntersectionObserver;\n\n  constructor(element: HTMLElement, data: number[]) {\n    this.element = element;\n    this.max = Math.max(...data);\n    this.data = data.map(value => map(value, 0, this.max, 0, 1));\n    this.chartWrapper = element.querySelector('.chart');\n\n    this.bars = [...element.querySelectorAll('rect')] as SVGRectElement[];\n    this.lines = [...element.querySelectorAll('line')] as SVGLineElement[];\n    this.count = this.bars.length;\n\n    this.weekLabelsWrapper = this.element.querySelector('.labels__x');\n    this.commitLabelsWrapper = this.element.querySelector('.labels__y');\n\n    this.initWeekLabels();\n    this.initCommitLabels();\n\n    this.presetAnimation();\n    this.addListeners();\n  }\n\n  addListeners() {\n    this.observer = new IntersectionObserver((entries, observer) => {\n      for (let entry of entries) {\n        if (entry.isIntersecting) {\n          const className = entry.target.className;\n          if (className === 'chart') {\n            this.animateIn(0);\n          }\n        }\n      }\n    });\n\n    this.observer.observe(this.chartWrapper);\n  }\n\n  initWeekLabels() {\n    for (let i = 0; i < this.count; i++) {\n      let el = document.createElement('span');\n      el.classList.add('span');\n      el.innerText = `${i+1}`;\n      this.weekLabelsWrapper.appendChild(el);\n      this.labelsY.push(el);\n    }\n  }\n\n  initCommitLabels() {\n    let inc = this.max / 4;\n    for (let i = 1; i < 5; i++) {\n      let el = document.createElement('span');\n      el.classList.add('span');\n      el.innerText = `${Math.floor(i*inc)}`;\n      this.commitLabelsWrapper.appendChild(el);\n      this.labelsX.push(el);\n    }\n  }\n\n  async animateIn(delay = 0) {\n    if (this.animating) return;\n    this.animating = true;\n\n    gsap.to(this.lines, {duration: 1, scaleX: 1, delay});\n\n    delay += 0.2;\n\n    gsap.to(this.labelsY, {y: -0, opacity: 1, stagger: 0.03, delay});\n\n    this.bars.forEach((bar, index) => {\n        gsap.to(bar, {duration: 0.6, scaleY: this.data[index], delay: delay + (index * 0.03)});\n    });\n\n    delay += 2;\n\n    gsap.to(this.labelsX, {duration: 0.6, y: 0, opacity: 1, stagger: 0.03, delay});\n  }\n\n  presetAnimation() {\n    gsap.set(this.bars, {scaleY: 0, transformOrigin: 'bottom'});\n    gsap.set(this.labelsY, {y: -10, opacity: 0});\n    gsap.set(this.labelsX, {y: -10, opacity: 0});\n    gsap.set(this.lines, {scaleX: 0});\n    this.animating = false;\n  }\n\n  destroy() {\n      this.observer.unobserve(this.chartWrapper);\n  }\n}\n","import {Page} from \"../global/page\"\nimport {SLUG_ECOSYSTEM} from \"../global/constants\";\nimport Avatars from './ecosystemAvatars';\nimport {EcoGraph} from \"../components/ecograph\";\nimport {Carousel} from \"../components/carousel\";\n\nexport class Ecosystem extends Page {\n  data: number[];\n\n  avatars: Avatars;\n  graph: EcoGraph;\n  carousels: Array<Carousel> = [];\n\n  constructor() {\n    super(document.querySelector('main'));\n    this.element = document.querySelector('main.ecosystem');\n\n    this.avatars = new Avatars(this.element.querySelector('section.community'));\n    this.fetchData().then(data => {\n      this.graph = new EcoGraph(this.element.querySelector('section.graph'), data);\n    });\n\n    let el;\n    let settingMobile;\n    for (el of this.element.querySelectorAll('.Carousel')) {\n        el = el as HTMLElement;\n        settingMobile = el.dataset.settingMobile == \"true\";\n        this.carousels.push(new Carousel(el, settingMobile));\n    }\n  }\n\n  fetchData() {\n    return fetch('/data/commits.json').then(response => response.json());\n  }\n\n  get slug() {\n    return SLUG_ECOSYSTEM;\n  }\n\n  destroy() {\n      this.avatars.destroy();\n      this.graph.destroy();\n      super.destroy();\n  }\n};\n","import {gsap} from \"gsap\";\nimport {EVENT_RESIZE, Window} from \"../global/window\";\nimport {emitter} from \"../global/emitter\";\n\nexport class StoreCarousel {\n    public element: HTMLElement;\n    private list: HTMLElement;\n    private dataItemWrapper: HTMLElement;\n    private icon: HTMLElement;\n    private dataItems: NodeListOf<HTMLElement>;\n    private mediaItems: NodeListOf<HTMLElement>;\n    private currIndex: number;\n    private listHeight: number;\n    private itemHeight: number;\n    private speed: number;\n    private showDuration: number;\n    private delayedCall: any;\n\n    constructor(element: HTMLElement) {\n        this.element = element;\n        this.list = this.element.querySelector('.list');\n        this.dataItemWrapper = this.element.querySelector('.data-items');\n        this.icon = this.element.querySelector('.icon');\n        this.dataItems = this.element.querySelectorAll('.data-items li');\n        this.mediaItems = this.element.querySelectorAll('.media-items li');\n        this.speed = .3;\n        this.showDuration = 2;\n\n        emitter.on(EVENT_RESIZE, this.layout);\n        this.init();\n    }\n\n    private init() {\n        this.currIndex = Math.round(this.dataItems.length/4) - 1;\n\n        this.dataItems[this.currIndex].classList.add('active');\n        this.mediaItems[this.currIndex].style.opacity = '1';\n\n        this.layout();\n\n        for (const item of this.dataItems) {\n            item.addEventListener('click', this.onItemClick.bind(this));\n        }\n\n        this.autoNext();\n    }\n\n    private onItemClick(e: any) {\n        let currIndex = 0;\n        let newIndex = 0;\n\n        this.delayedCall.kill();\n\n        // Next item\n        this.dataItems.forEach((el, index)=> {\n            if (el === e.target) newIndex = index;\n\n            if (el.classList.contains('active')) {\n                currIndex = index;\n                el.classList.remove('active');\n            }\n        })\n\n        // Switch active states\n        e.target.classList.add('active');\n        this.showMedia(parseInt(e.target.dataset.index));\n\n        // Direction\n        if (newIndex < currIndex) {\n            this.goDown(currIndex - newIndex);\n        } else if (newIndex > currIndex) {\n            this.goUp(newIndex - currIndex);\n        }\n    }\n\n    private setTransitioning(enabled: boolean) {\n        if (enabled)\n            this.element.classList.add('transitioning');\n        else\n            this.element.classList.remove('transitioning');\n    }\n\n    private autoNext() {\n        const activeItem = [...this.dataItems].filter(el => {\n            if (el.classList.contains('active')) return el;\n        })[0] as HTMLElement;\n\n        this.showMedia(parseInt(activeItem.dataset.index));\n\n        this.delayedCall = gsap.delayedCall(this.showDuration, ()=>{\n            activeItem.classList.remove('active');\n            activeItem.nextElementSibling.classList.add('active');\n            this.goUp(1, true);\n        })\n    }\n\n    private goUp(steps: number, auto: boolean = false) {\n        this.setTransitioning(true);\n\n        // Transition\n        gsap.to(this.list, {\n            duration: this.speed,\n            top: -(this.itemHeight * steps),\n            ease: 'Power4.easeOut',\n            onComplete: () => {\n                this.list = this.element.querySelector('.list');\n\n                // Move list items\n                for (let i = 0; i < steps; i ++) {\n                    this.dataItems = this.element.querySelectorAll('.data-items li');\n                    this.list.appendChild(this.dataItems[0]);\n                }\n\n                // Set list position before transition\n                gsap.set(this.list, { top: 0 });\n\n                this.autoNext();\n                this.setTransitioning(false);\n            }\n        });\n    }\n\n    private goDown(steps: number) {\n        this.setTransitioning(true);\n\n        // Move list items\n        for (let i = 0; i < steps; i ++) {\n            this.list = this.element.querySelector('.list');\n            this.dataItems = this.element.querySelectorAll('.data-items li');\n            this.list.insertBefore(this.dataItems[this.dataItems.length-1], this.list.firstChild)\n        }\n\n        // Set list position before transition\n        gsap.set(this.list, { top: -(this.itemHeight * steps) });\n\n        // Transition\n        gsap.to(this.list, {\n            duration: this.speed,\n            top: 0,\n            ease: 'Power4.easeOut',\n            onComplete: () => {\n                this.list = this.element.querySelector('.list');\n                this.dataItems = this.element.querySelectorAll('.data-items li');\n\n                this.autoNext();\n                this.setTransitioning(false);\n            }\n        });\n    }\n\n    private showMedia(index: number) {\n        gsap.to(this.mediaItems, {duration: this.speed, opacity: 0});\n        gsap.to(this.mediaItems[index], {duration: this.speed, opacity: 1});\n    }\n\n    private layout = () => {\n        this.listHeight = this.list.getBoundingClientRect().height;\n        this.itemHeight = this.dataItems[0].getBoundingClientRect().height;\n\n        this.dataItemWrapper.style.height = `${this.listHeight / 2}px`;\n\n        if (this.dataItems.length/2 % 2 == 0) {\n            this.dataItemWrapper.style.top = `${this.itemHeight / 2}px`;\n            this.icon.style.marginTop = `-${this.itemHeight / 2}px`;\n        } else {\n            this.icon.style.marginTop = `0px`;\n        }\n    }\n\n    public destroy() {\n        emitter.off(EVENT_RESIZE, this.layout);\n    }\n}\n","import {Page} from \"../global/page\";\nimport {SLUG_STORE} from \"../global/constants\";\nimport {StoreCarousel} from \"../components/storeCarousel\";\nimport {Carousel} from \"../components/carousel\";\nimport {Slideshow} from \"../components/slideshow\";\nimport {Accordion} from \"../components/accordion\";\n\nexport class Store extends Page {\n    storeCarousel: StoreCarousel;\n    slideshow: Slideshow;\n    carousels: Array<Carousel> = [];\n    accordion: Accordion;\n\n    constructor() {\n        super(document.querySelector('main'));\n\n        this.storeCarousel = new StoreCarousel(this.element.querySelector('.StoreCarousel'));\n        this.slideshow = new Slideshow(this.element.querySelector('.Slideshow'));\n\n        for (const el of this.element.querySelectorAll('.Carousel')) {\n            this.carousels.push(new Carousel(el as HTMLElement));\n        }\n\n        this.accordion = new Accordion(this.element.querySelector('.Accordion'));\n    }\n\n    get slug() {\n        return SLUG_STORE;\n    }\n\n    destroy() {\n        this.storeCarousel.destroy();\n        this.slideshow.destroy();\n        this.accordion.destroy()\n        this.carousels.forEach((c) => { c.destroy() });\n        super.destroy();\n    }\n};\n","import {gsap} from 'gsap';\n\nexport class Newsletter {\n    element: HTMLElement;\n    error: HTMLElement;\n    form: HTMLElement;\n    inputEmail: HTMLInputElement;\n    url: string;\n    apiKey: string;\n    listId: string;\n\n    constructor(element: HTMLElement) {\n        this.element = element;\n        this.error = element.querySelector('.error-message');\n        this.form = element.querySelector('form');\n        this.inputEmail = element.querySelector('.email');\n        this.init();\n    }\n\n    init() {\n        this.form.addEventListener('submit', this.onSubmit.bind(this));\n        this.inputEmail.addEventListener('focus', this.onFocus.bind(this));\n\n        this.apiKey = 'a1dfb670c4f1fb042e82a1f1d';\n        this.listId = 'ff0bee3cae';\n        this.url = `//protocol.us16.list-manage.com/subscribe/post-json?u=${this.apiKey}&id=${this.listId}`;\n\n        (<any>window).MC_callback = (e: any) => {\n            console.log(e);\n\n            if (e.result === 'error') {\n                if (e.msg.includes('already subscribed')) {\n                    const linkHref = e.msg.match(/href=\"([^\"]*)/)[1];\n                    this.error.innerHTML = `Your email, ${this.inputEmail.value} is already subscribed to Filecoin News\n                    <a href=\"${linkHref}\">Update your preferences</a>`;\n                } else {\n                    this.error.innerHTML = e.msg;\n                }\n                this.showError();\n            } else {\n                this.showSuccess();\n            }\n        };\n    }\n\n    validateEmail(value: string) {\n        var re = /^(([^<>()\\[\\]\\\\.,;:\\s@\"]+(\\.[^<>()\\[\\]\\\\.,;:\\s@\"]+)*)|(\".+\"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))$/;\n        return re.test(value);\n    }\n\n    showError() {\n        this.element.classList.remove('success');\n        this.element.classList.add('error');\n    }\n\n    showSuccess() {\n        const delayMessage = 3;\n\n        this.element.classList.remove('error');\n        this.element.classList.add('success');\n\n        gsap.delayedCall(delayMessage, () => {\n            this.element.classList.remove('success');\n            this.inputEmail.value = '';\n        })\n    }\n\n    onFocus(e: any) {\n        this.element.classList.remove('success', 'error');\n    }\n\n    onSubmit(e: any) {\n        e.preventDefault();\n\n        const email = this.inputEmail.value;\n\n        if (!this.validateEmail(email)) {\n            this.showError();\n            return false;\n        }\n\n        //generate JSONP script\n        const script = document.createElement(\"script\");\n        script.type = \"text/javascript\";\n        script.src = this.url + \"&c=window.MC_callback&EMAIL=\" + email;\n        document.getElementsByTagName(\"head\")[0].appendChild(script);\n    }\n}\n","import {Newsletter} from \"./components/newsletter\";\n\nclass Footer {\n    public element: HTMLElement;\n    private newsletter: Newsletter;\n\n    constructor() {\n        this.element = document.querySelector('footer');\n        this.newsletter = new Newsletter(this.element.querySelector('.newsletter-container'));\n    }\n}\n\nexport const footer = new Footer();\n","import {gsap} from \"gsap\";\n\nexport class AlertBar {\n\n    public element: Element;\n    readonly pushContent: NodeList;\n    private closeButton: HTMLElement;\n\n    constructor(element: Element) {\n        this.element = element;\n        this.closeButton = this.element.querySelector('.close');\n        this.pushContent = document.body.querySelectorAll('header, .section, .hero3d');\n        this.closeButton.addEventListener('click', () => {\n           this.close();\n        });\n        this.open();\n    }\n\n    open() {\n        gsap.set(this.element, {y: 0});\n        gsap.set(this.pushContent, {y: this.element.clientHeight});\n    }\n\n    close() {\n        gsap.to(this.element, .25,{y: -this.element.clientHeight, clearProps: 'y'});\n        gsap.to(this.pushContent, .25,{y: 0, clearProps: 'y'});\n    }\n}","import {state} from \"./state\";\nimport {LANG_CODE, LANG_COOKIE_KEY, LANG_COOKIE_VALUE, LOCALE, LOCALE_CHINESE, LOCALE_CHINESE_CODE} from \"./constants\";\nimport {getCookie} from \"./utils\";\n\nexport const redirectsObj = [\n    {\n      catch: '/#community',\n      destination: '/build/#community'\n    },\n    /*{\n        catch: '/grants/',\n        destination: 'https://vintage.filecoin.io/grants/'\n    },\n    {\n        catch: '/blog/*',\n        destination: 'https://vintage.filecoin.io/blog/*'\n    }*/\n];\n\nexport class Redirects {\n    public check() {\n        const path = window.location.href.replace(window.location.origin, '');\n\n        redirectsObj.forEach((r) => {\n            const catchSplit = r.catch.split('*');\n            const pathSplit = path.split('/');\n            //\n            // if (catchSplit.length > 1 && path.search(catchSplit[0]) > -1) {\n            //     // wildcard found\n            //     if (pathSplit.length === 3) {\n            //         // base\n            //         window.location.href = r.destination.split('*')[0];\n            //     } else {\n            //         // detail\n            //         window.location.href = r.destination.split('*')[0] + pathSplit[2];\n            //     }\n            // } else if (path === r.catch) {\n            //     window.location.href = r.destination;\n            // }\n        })\n    }\n\n    public redirectLang() {\n        if (getCookie(LANG_COOKIE_KEY) == LANG_COOKIE_VALUE) {\n            return;\n        }\n\n        if (LANG_CODE != LOCALE_CHINESE &&\n            window.navigator.language.slice(0, 2) == LOCALE_CHINESE_CODE) {\n            switch(window.location.pathname){\n                case \"/\":\n                    window.location.href = \"/\" + LOCALE_CHINESE;\n            }\n        }\n    }\n}\n\nexport const redirects = new Redirects();\n","import {Page} from \"../global/page\";\nimport {\n    SLUG_BLOG,\n    BP_L,\n    BP_M,\n    BP_S,\n    BLOG_SCROLL_Y,\n    BLOG_CATEGORY\n} from \"../global/constants\";\nimport {gsap} from \"gsap\";\nimport {emitter} from \"../global/emitter\";\nimport {EVENT_RESIZE, EVENT_SCROLL, Window} from \"../global/window\";\nimport {state} from \"../global/state\";\n//@ts-ignore\nimport lazySizes from 'lazysizes';\n\nexport class Blog extends Page {\n\n    private navSelected: HTMLElement;\n    private navigation: HTMLElement;\n    private filterLinks: HTMLElement[];\n    private subtitle: HTMLElement;\n    private coverFeatures: HTMLElement;\n    private isNavOpen = false;\n    private posts: NodeListOf<HTMLElement>;\n    private postsContainer: HTMLElement;\n    private hiddenContainer: HTMLElement;\n    private screenMode: number = 0;\n    private activeDoubleClass: string = 'double-column--active';\n    private selectedCategory: string = '';\n\n    constructor() {\n        super(document.querySelector('main'));\n        this.element = document.querySelector('main.blog');\n        this.navSelected = this.element.querySelector('.tool-bar__filter .selected span');\n        this.navigation = this.element.querySelector('.tool-bar__filter .filter__nav');\n        this.filterLinks = [...this.element.querySelectorAll('.tool-bar__filter li a')] as HTMLElement[];\n        this.subtitle = document.querySelector('.sub-title');\n        this.coverFeatures = document.querySelector('.cover-features');\n        this.posts = this.element.querySelectorAll('.post');\n        this.postsContainer = this.element.querySelector('.posts-container');\n        this.hiddenContainer = this.element.querySelector('.hidden-container');\n\n        this.init();\n    }\n\n    init = () => {\n        this.navSelected.addEventListener(`click`, this.onNavClick);\n        this.navigation.addEventListener(`mouseleave`, this.closeNav);\n        this.navigation.addEventListener(`click`, this.onFilterLinkClick);\n\n        const scrollY = parseInt(state.getValue(BLOG_SCROLL_Y));\n        this.postsContainer.style.height = `${parseInt(state.getValue(BLOG_SCROLL_Y))}px`;\n\n        emitter.on(EVENT_RESIZE, this.layout);\n        emitter.on(EVENT_SCROLL, this.scroll);\n        this.layout();\n\n        this.checkLazySizes();\n\n        window.scrollTo(0, scrollY);\n        this.postsContainer.style.height = 'auto';\n    }\n\n    setFilterPosts() {\n        let activeItem;\n\n        this.selectedCategory = state.getValue(BLOG_CATEGORY);\n\n        if (!this.selectedCategory) {\n            activeItem = [...this.filterLinks].filter(el => {\n                if (el.classList.contains('active')) return el;\n            })[0];\n\n            this.selectedCategory = activeItem.dataset.category;\n        } else {\n            [...this.filterLinks].forEach(el => {\n                if (el.dataset.category === this.selectedCategory) {\n                    el.classList.add('active');\n                } else {\n                    el.classList.remove('active');\n                }\n            });\n        }\n\n        this.filterPosts();\n        this.checkLazySizes();\n    }\n\n    checkLazySizes() {\n        window.dispatchEvent(new Event('scroll'));\n    }\n\n    scroll = () => {\n        const postContainerBottom = this.postsContainer.getBoundingClientRect().bottom;\n\n        if (postContainerBottom - Window.height < 0)\n            this.loadNextSet();\n\n        state.setValue(BLOG_SCROLL_Y, `${Window.lastScrollY}`);\n    }\n\n    loadNextSet() {\n        let counter = 0;\n\n        for (const wrapper of this.postsContainer.querySelectorAll('.wrapper')) {\n            if (!wrapper.classList.contains('visible') && counter < 4) {\n                counter++;\n                wrapper.classList.add('visible');\n            }\n        }\n    }\n\n    layout = () => {\n        const prevMode = this.screenMode;\n\n        if (window.matchMedia(`(min-width: ${BP_L}px)`).matches && BP_L) {\n            this.screenMode = BP_L;\n        } else if (window.matchMedia(`(min-width: ${BP_M}px)`).matches && BP_M) {\n\n            this.screenMode = BP_M;\n        } else {\n            this.screenMode = BP_S;\n        }\n\n        if (prevMode !== this.screenMode) {\n            this.setFilterPosts();\n        }\n    }\n\n    async animateIn() {\n        await super.animateIn();\n\n        gsap.to(this.subtitle, {\n            duration: .3,\n            opacity: 1\n        });\n\n        gsap.to(this.coverFeatures, {\n            duration: .3,\n            opacity: 1\n        });\n    }\n\n    onNavClick = (event: Event) => {\n      event.preventDefault();\n\n      if (this.isNavOpen) {\n        this.navSelected.classList.remove(`open`);\n        this.navigation.classList.remove(`visible`);\n      } else {\n        this.navSelected.classList.add(`open`);\n        this.navigation.classList.add(`visible`);\n      }\n      this.isNavOpen = !this.isNavOpen;\n    }\n\n    closeNav = (event?: Event) => {\n      if (event) event.preventDefault();\n      if (this.isNavOpen) {\n        this.isNavOpen = false;\n        this.navSelected.classList.remove(`open`);\n        this.navigation.classList.remove(`visible`);\n      }\n    }\n\n    filterPosts() {\n        const category = this.selectedCategory;\n        let delay = 0;\n\n        for (const el of this.posts) {\n            el.classList.remove(this.activeDoubleClass);\n\n            // Show or hide posts\n           if (el.dataset.categories.indexOf(category) > -1 || category === '') {\n                el.classList.add('visible');\n                el.classList.remove('hidden');\n                gsap.set(el, {opacity: 0});\n                gsap.to(el, {opacity: 1, duration: 0.3, delay});\n                delay = delay + .15;\n            } else {\n                el.classList.add('hidden');\n                el.classList.remove('visible');\n            }\n        }\n\n        this.wrapPosts();\n\n        state.setValue(BLOG_CATEGORY, category);\n    }\n\n    wrapPosts() {\n        let totalCounter = 0;\n        let counter = 0;\n        let newEl: HTMLElement;\n\n        for (const el of this.posts) {\n            el.classList.remove('double-column--active');\n        }\n\n        if (this.screenMode === BP_L) {\n\n            for (const el of this.posts) {\n                // Create wrapper\n                if (counter === 0) {\n                    newEl = document.createElement('div');\n                    newEl.classList.add('div', 'wrapper');\n                }\n\n                // Append posts\n                if (el.classList.contains('visible') && el.classList.contains('double-column') && counter < 2) {\n                    el.classList.add(this.activeDoubleClass);\n                    newEl.appendChild(el);\n                    counter = counter + 2;\n                } else if (el.classList.contains('visible')) {\n                    newEl.appendChild(el);\n                    counter++;\n                } else {\n                    this.hiddenContainer.appendChild(el);\n                }\n\n                // Append wrapper\n                if (counter > 2 || totalCounter === this.posts.length - 1) {\n                    this.postsContainer.appendChild(newEl);\n                    counter = 0;\n                }\n\n                totalCounter++;\n            }\n\n        } else if (this.screenMode === BP_M) {\n\n            for (const el of this.posts) {\n                // Create wrapper\n                if (counter === 0) {\n                    newEl = document.createElement('div');\n                    newEl.classList.add('wrapper');\n                }\n\n                // Append posts\n                if (el.classList.contains('visible') && el.classList.contains('double-column') && counter === 0) {\n                    el.classList.add(this.activeDoubleClass);\n                    newEl.appendChild(el);\n                    counter = counter + 2;\n                } else if (el.classList.contains('visible') && el.classList.contains('double-column')) {\n                    newEl.appendChild(el);\n                    counter++;\n                } else if (el.classList.contains('visible')) {\n                    newEl.appendChild(el);\n                    counter++;\n                } else {\n                    this.hiddenContainer.appendChild(el);\n                }\n\n                // Append wrapper\n                if (counter > 1 || totalCounter === this.posts.length - 1 || el.classList.contains('double-column')) {\n                    this.postsContainer.appendChild(newEl);\n                    counter = 0;\n                }\n\n                totalCounter++;\n            }\n\n        } else if (this.screenMode === BP_S) {\n\n            // Create wrapper\n            newEl = document.createElement('div');\n            newEl.classList.add('wrapper');\n\n            for (const el of this.posts) {\n                // Append posts\n                if (el.classList.contains('visible')) {\n                    newEl.appendChild(el);\n                } else {\n                    this.hiddenContainer.appendChild(el);\n                }\n            }\n\n            this.postsContainer.appendChild(newEl);\n        }\n\n        // Wrappers clean up\n        counter = 0;\n        for (const wrapper of this.postsContainer.querySelectorAll('.wrapper')) {\n            if (!wrapper.innerHTML) {\n                wrapper.remove();\n            } else if (counter < 4) {\n                wrapper.classList.add('visible');\n            }\n\n            counter++;\n        }\n\n        this.checkLazySizes();\n    }\n\n    onFilterLinkClick = (event: Event) => {\n      event.preventDefault();\n\n      const target = event.target as HTMLElement;\n      if (target.tagName !== 'A') return;\n\n      this.filterLinks.forEach(el => el.classList.remove('active'));\n      target.classList.add('active');\n\n      this.navSelected.innerText = target.innerText;\n      this.selectedCategory = target.dataset.category;\n      this.filterPosts();\n\n      this.closeNav();\n    }\n\n    get slug() {\n        return SLUG_BLOG;\n    }\n\n    destroy() {\n        emitter.off(EVENT_RESIZE, this.layout);\n        emitter.off(EVENT_SCROLL, this.scroll);\n        this.navSelected.removeEventListener(`click`, this.onNavClick);\n        this.navigation.removeEventListener(`mouseleave`, this.closeNav);\n        this.navigation.removeEventListener(`click`, this.onFilterLinkClick);\n        super.destroy();\n    }\n};\n","import {gsap} from \"gsap\";\n\nexport class Sharing {\n    public element: HTMLElement;\n    private shareCopy: string;\n    private facebookEl: HTMLElement;\n    private twitterEl: HTMLElement;\n    private linkedinEl: HTMLElement;\n    private copyLinkEl: HTMLElement;\n    private copyLinkAlertEl: HTMLElement;\n\n    constructor(element: HTMLElement, shareCopy: string) {\n        this.element = element;\n        this.shareCopy = shareCopy;\n\n        this.facebookEl = this.element.querySelector('.facebook');\n        this.twitterEl = this.element.querySelector('.twitter');\n        this.linkedinEl = this.element.querySelector('.linkedin');\n        this.copyLinkEl = this.element.querySelector('.copylink');\n        this.copyLinkAlertEl = this.element.querySelector('.copylink .alert');\n\n        this.facebookEl.addEventListener('click', this.onFacebookClick.bind(this));\n        this.twitterEl.addEventListener('click', this.onTwitterClick.bind(this));\n        this.linkedinEl.addEventListener('click', this.onLinkedInClick.bind(this));\n        //this.copyLinkEl.addEventListener('click', this.onCopyLinkClick.bind(this));\n    }\n\n    private onFacebookClick() {\n        const w = 600, h = 350;\n        const l = (screen.width / 2) - (w / 2);\n        const t = (screen.height / 2) - (h / 2);\n        const facebookWindow = window.open('https://www.facebook.com/sharer/sharer.php?u=' + document.URL, 'facebook-popup', 'height=' + h + ',width=' + w + ',left=' + l + ',top=' + t);\n        if (facebookWindow.focus) {\n            facebookWindow.focus();\n        }\n        return false;\n    }\n\n    private onTwitterClick() {\n        const w = 600, h = 350;\n        const l = (screen.width / 2) - (w / 2);\n        const t = (screen.height / 2) - (h / 2);\n        const twitterWindow = window.open('https://twitter.com/share?url=' + document.URL + '&text=' + this.shareCopy, 'twitter-popup', 'height=' + h + ',width=' + w + ',left=' + l + ',top=' + t);\n        if (twitterWindow.focus) {\n            twitterWindow.focus();\n        }\n        return false;\n    }\n\n    private onLinkedInClick() {\n        const w = 600, h = 975;\n        const l = (screen.width / 2) - (w / 2);\n        const t = (screen.height / 2) - (h / 2);\n        const linkedinWindow = window.open('https://www.linkedin.com/shareArticle?mini=true&url=' + document.URL + '&source=LinkedIn&summary=' + this.shareCopy, 'linkedin-popup', 'height=' + h + ',width=' + w + ',left=' + l + ',top=' + t);\n        if (linkedinWindow.focus) {\n            linkedinWindow.focus();\n        }\n        return false;\n    }\n\n    private onCopyLinkClick() {\n        const textArea = document.createElement(\"input\");\n        textArea.value = this.shareCopy;\n        this.copyLinkEl.appendChild(textArea);\n        textArea.select();\n        try {\n            var successful = document.execCommand('copy');\n            var msg = successful ? 'successful' : 'unsuccessful';\n        } catch (err) {\n            console.log('Oops, unable to copy', err);\n        }\n        this.copyLinkEl.removeChild(textArea);\n\n        TweenMax.to(this.copyLinkAlertEl, 0.3, {autoAlpha: 1});\n        TweenMax.to(this.copyLinkAlertEl, 0.3, {delay: 1.2, autoAlpha: 0});\n\n        return false;\n    }\n\n    public destroy() {\n        this.facebookEl.removeEventListener('click', this.onFacebookClick.bind(this));\n        this.twitterEl.removeEventListener('click', this.onTwitterClick.bind(this));\n        this.linkedinEl.removeEventListener('click', this.onLinkedInClick.bind(this));\n        //this.copyLinkEl.removeEventListener('click', this.onCopyLinkClick.bind(this));\n    }\n}\n","import {Page} from \"../global/page\";\nimport {SLUG_BLOG_SINGLE} from \"../global/constants\";\nimport {gsap} from \"gsap\";\nimport {Sharing} from \"../global/sharing\";\nimport {Carousel} from \"../components/carousel\";\n\nexport class BlogSingle extends Page {\n    private speed: number = .5;\n    networks: HTMLElement;\n    toggle: HTMLElement;\n    isSocialVisible: boolean;\n    shareElement: HTMLElement;\n    sharing: Sharing;\n    relatedArticlesCarousel: HTMLElement;\n    carousel: Carousel;\n\n    constructor() {\n      super(document.querySelector('main'));\n      this.element = document.querySelector('main.blog-single');\n      this.networks = this.element.querySelector('.metadata .networks');\n      this.toggle = this.element.querySelector('.metadata .fold-out');\n      this.shareElement = this.element.querySelector('.share');\n      this.sharing = new Sharing(this.shareElement, 'hello');\n      this.relatedArticlesCarousel = this.element.querySelector('.Carousel');\n\n      if (this.relatedArticlesCarousel) {\n          this.carousel = new Carousel(this.relatedArticlesCarousel, true);\n      }\n\n      this.init();\n    }\n\n    init = () => {\n      this.toggle.addEventListener(`click`, this.onToggleClick);\n      this.isSocialVisible = this.networks.classList.contains(`visible`);\n    }\n\n    onToggleClick = (event: Event) => {\n      event.preventDefault();\n      if (this.networks.classList.contains(`visible`)) {\n        this.isSocialVisible = false;\n        this.networks.classList.remove(`visible`);\n      } else {\n        this.networks.classList.add(`visible`);\n        this.isSocialVisible = true;\n      }\n    }\n\n    animateIn(speed = this.speed) {\n        return new Promise((resolve) => {\n            gsap.to(this.element, {\n                duration: this.speed,\n                opacity: 1,\n                onComplete: () => {\n                    resolve();\n                }\n            });\n        });\n    }\n\n    get slug() {\n        return SLUG_BLOG_SINGLE;\n    }\n\n    destroy() {\n        this.toggle.removeEventListener(`click`, this.onToggleClick);\n        this.sharing.destroy()\n\n        if (this.relatedArticlesCarousel) {\n            this.carousel.destroy();\n        }\n\n        super.destroy();\n    }\n};\n","import '@hellomonday/map';\n// @ts-ignore\nimport navaid from 'navaid';\nimport {state} from \"./global/state\";\nimport {\n    ALL_SLUGS,\n    BASE_PATH,\n    CURRENT_SECTION,\n    LOCALE,\n    LOCALE_CHINESE,\n    LOCALE_ENGLISH,\n    SLUG_BLOG,\n    SLUG_BLOG_CATEGORY,\n    SLUG_BLOG_SINGLE,\n    SLUG_BUILD,\n    SLUG_ECOSYSTEM,\n    SLUG_HOME,\n    SLUG_PROVIDE,\n    SLUG_STORE\n} from \"./global/constants\";\nimport {Home} from './home/home';\nimport {Provide} from \"./provide/provide\";\nimport {Build} from \"./build/build\";\nimport {Ecosystem} from \"./ecosystem/ecosystem\";\nimport {Store} from \"./store/store\";\nimport {EVENT_RESIZE, Window} from \"./global/window\";\nimport {header} from \"./header\";\nimport {footer} from \"./footer\";\nimport {AlertBar} from \"./alertBar\";\nimport swapDOM from \"@hellomonday/swap-dom\";\nimport {gsap} from \"gsap\";\nimport {redirects} from \"./global/redirects\";\nimport {rewriteRelLinks} from \"./global/utils\";\n//@ts-ignore\nimport lazySizes from 'lazysizes';\nimport {Blog} from \"./blog/blog\";\nimport {BlogSingle} from \"./blog/blogSingle\";\n\nclass App {\n\n    private clickBlocker: HTMLDivElement;\n\n    constructor() {\n        this.clickBlocker = document.body.querySelector('.click-blocker');\n        const alertBarEl = document.body.querySelector('.alert-bar');\n        if (alertBarEl) {\n            new AlertBar(alertBarEl)\n        }\n        redirects.check();\n        redirects.redirectLang();\n        this.initListeners();\n        lazySizes.init();\n    }\n\n    initListeners() {\n        new Window();\n        let router = navaid(BASE_PATH);\n        router.on(SLUG_HOME, () => this.onRouteChange(SLUG_HOME));\n        router.on(SLUG_PROVIDE, () => this.onRouteChange(SLUG_PROVIDE));\n        router.on(SLUG_BUILD, () => this.onRouteChange(SLUG_BUILD));\n        router.on(SLUG_ECOSYSTEM, () => this.onRouteChange(SLUG_ECOSYSTEM));\n        router.on(SLUG_STORE, () => this.onRouteChange(SLUG_STORE));\n        router.on(SLUG_BLOG, () => this.onRouteChange(SLUG_BLOG));\n        router.on(SLUG_BLOG_CATEGORY, () => this.onRouteChange(SLUG_BLOG_CATEGORY));\n        router.on(SLUG_BLOG_SINGLE, () => this.onRouteChange(SLUG_BLOG_SINGLE));\n\n        state.on(CURRENT_SECTION, async (sectionState: any) => {\n            header.setActiveNavItem(sectionState.current.slug);\n            await sectionState.current.animateIn();\n            this.clicksDisabled = false;\n        });\n        router.listen();\n    }\n\n    xmlCheck(url: string) {\n        if (url.search('.xml') > -1) {\n            window.location.href = url;\n        }\n        return false;\n    }\n\n    async onRouteChange(slug: string) {\n        const currentSection = state.getValue(CURRENT_SECTION);\n\n        if (currentSection && slug == currentSection.slug && slug.search('/:') < 0) {\n            return;\n        }\n\n        this.clicksDisabled = true;\n        if (currentSection) {\n            const url = window.location.pathname;\n            header.setActiveNavItem(slug);\n            \n            this.xmlCheck(url);\n            await currentSection.animateOut();\n            await swapDOM(url, 'main');\n            this.trackPageView(url);\n        }\n\n        let newSection;\n        switch(slug) {\n            case SLUG_HOME: newSection = new Home(); break;\n            case SLUG_PROVIDE: newSection = new Provide(); break;\n            case SLUG_BUILD: newSection = new Build(); break;\n            case SLUG_ECOSYSTEM: newSection = new Ecosystem(); break;\n            case SLUG_STORE: newSection = new Store(); break;\n            case SLUG_BLOG: newSection = new Blog(); break;\n            case SLUG_BLOG_CATEGORY: newSection = new Blog(); break;\n            case SLUG_BLOG_SINGLE: newSection = new BlogSingle(); break;\n        }\n\n        state.setValue(CURRENT_SECTION, newSection);\n\n        header.hideMobileNav();\n        this.rewriteRelLinks();\n    }\n\n    rewriteRelLinks() {\n        const anchorSelector = 'a:not([href^=\"http\"])';\n        const headerLinks = header.element.querySelectorAll(anchorSelector);\n        rewriteRelLinks(headerLinks);\n        const footerLinks = footer.element.querySelectorAll(anchorSelector);\n        rewriteRelLinks(footerLinks);\n    }\n\n    trackPageView( url: string ) {\n        window.ga('send', 'pageview', url);\n    }\n\n    set clicksDisabled(value: boolean) {\n        this.clickBlocker.style.display = value ? 'block' : 'none';\n    }\n}\n\n(window as any).App = new App();\n"],"sourceRoot":""}