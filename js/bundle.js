!function(e){function t(t){for(var s,o,r=t[0],l=t[1],h=t[2],u=0,d=[];u<r.length;u++)o=r[u],Object.prototype.hasOwnProperty.call(a,o)&&a[o]&&d.push(a[o][0]),a[o]=0;for(s in l)Object.prototype.hasOwnProperty.call(l,s)&&(e[s]=l[s]);for(c&&c(t);d.length;)d.shift()();return n.push.apply(n,h||[]),i()}function i(){for(var e,t=0;t<n.length;t++){for(var i=n[t],s=!0,r=1;r<i.length;r++){var l=i[r];0!==a[l]&&(s=!1)}s&&(n.splice(t--,1),e=o(o.s=i[0]))}return e}var s={},a={0:0},n=[];function o(t){if(s[t])return s[t].exports;var i=s[t]={i:t,l:!1,exports:{}};return e[t].call(i.exports,i,i.exports,o),i.l=!0,i.exports}o.m=e,o.c=s,o.d=function(e,t,i){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},o.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(o.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var s in e)o.d(i,s,function(t){return e[t]}.bind(null,s));return i},o.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="";var r=window.webpackJsonp=window.webpackJsonp||[],l=r.push.bind(r);r.push=t,r=r.slice();for(var h=0;h<r.length;h++)t(r[h]);var c=l;n.push([15,1]),i()}({15:function(e,t,i){i(17),e.exports=i(16)},16:function(e,t,i){e.exports=i.p+"../css/site.css"},17:function(e,t,i){"use strict";i.r(t);var s={};i.r(s),i.d(s,"init",(function(){return rt})),i.d(s,"showIntroPaths",(function(){return lt})),i.d(s,"hideIntroPaths",(function(){return ht})),i.d(s,"goto_landing",(function(){return ct})),i.d(s,"play1_1",(function(){return ut})),i.d(s,"play1_2",(function(){return dt})),i.d(s,"play1_3",(function(){return mt})),i.d(s,"play1_4",(function(){return pt})),i.d(s,"play1_5",(function(){return gt})),i.d(s,"play1_6",(function(){return Dt})),i.d(s,"play2_1",(function(){return yt})),i.d(s,"play2_2",(function(){return bt})),i.d(s,"play2_3",(function(){return vt})),i.d(s,"play3_1",(function(){return ft})),i.d(s,"play4_1",(function(){return wt})),i.d(s,"play4_2",(function(){return Ct}));var a=i(6),n=i(8),o=i(2);class r extends o.a{constructor(e=""){super(),this._value="",this.value=e}get value(){return this._value}set value(e){const t=this.value;this._value=e,this.emit("stateChangeEvent",{current:this.value,previous:t})}}const l=new class{constructor(){this.stateItems={},this.stateItems={}}setValue(e,t){this.stateItems[e]?this.stateItems[e].value=t:this.stateItems[e]=new r(t)}getValue(e){return this.stateItems[e]?this.stateItems[e].value:null}on(e,t){this.stateItems[e]||(this.stateItems[e]=new r),this.stateItems[e].on("stateChangeEvent",t)}off(e){this.stateItems[e]&&this.stateItems[e].off("stateChangeEvent")}};var h=i(0),c=i(20),u=i(3);Math.PI;function d(e,t,i){return e<=t?t:e>=i?i:e}function m(e){return new Promise(t=>{const i=new XMLHttpRequest;i.onreadystatechange=function(){if(4==this.readyState&&200==this.status){const e=JSON.parse(this.responseText);t(e)}},i.open("GET",e,!0),i.send()})}function p(e){return"#"+e.toString(16)}function g(e,t){let i=e.clone(),s=t.clone();return s.updateMatrixWorld(),s.localToWorld(i),i}function D(e){let t=[];for(let i=0;i<e.length;i+=3)t.unshift(e[i+2]),t.unshift(e[i+1]),t.unshift(e[i]);return t}function y(e){return new Promise((t,i)=>{let s=new h.Texture,a=new Image;a.onload=e=>{s.image=a,s.needsUpdate=!0,t(s)},a.src=e})}function b(e){const t=window.location.pathname.replace(f,"").split("/");let i=f.split("/")[f.split("/").length-2]+"/";"/"===i&&(i="");let s,a,n="";for(let e=1;e<t.length;e++)n+="../";[...e].forEach(e=>{s=e.parentElement.dataset.slug,s||(s="/"),"/"===s.charAt(0)&&(s=s.slice(1)),a="en/"===s?n+"../"+s:n+s.replace(i,""),e.setAttribute("href",a)})}const v=["","provide/","build/","ecosystem/","store/","blog/","blog/:category","blog/:category/:post"],f=function(e,t){"/"!=e.substr(-1)&&(e+="/");let i="";const s=e.split("/");for(let e=0;e<s.length;e++){const a=s[e];for(let e=0;e<t.length;e++){const s=t[e].toLowerCase().replace("/","").trim(),n=a.toLowerCase().trim();if(s.length&&s==n)return i}i+=a,e<s.length-1&&(i+="/")}return i}(window.location.pathname,v),w="zh-cn",C="en",S=function(e){const t=e.replace(/\/$/,"");return t.substring(t.lastIndexOf("/")+1)===w?w:C}(f),_=200,P=_+.8,I=_+.4,E=(Math.PI,Math.PI,10),k=20,x="day",F="globe",A=[.71,.67,1,1],B=[.23,.56,.96,.1],L=[1,0,0,1],M=[1,1,1,1],T=[1,.5,0,1],O=[.24,.53,.77,1],N=["mode-transparent-dark","mode-transparent-light","mode-dark","mode-gray-light","mode-gray-dark","mode-light","mode-blue"],q=["mode-transparent-dark--bg","mode-transparent-light--bg","mode-dark--bg","mode-gray-light--bg","mode-gray-dark--bg","mode-light--bg","mode-blue--bg"],H=new o.a,V="events_resize";class R{constructor(){window.addEventListener("resize",e=>this.resizeHandler(e)),window.addEventListener("scroll",e=>this.scrollHandler(e)),this.resizeHandler()}resizeHandler(e){R.width=window.innerWidth,R.height=window.innerHeight,R.halfWidth=Math.round(.5*R.width),R.halfHeight=Math.round(.5*R.height),H.emit(V,{width:R.width,height:R.height})}scrollHandler(e){H.emit("events_scroll",{y:window.scrollY,deltaY:window.scrollY-R.lastScrollY}),R.lastScrollY=window.scrollY}}R.lastScrollY=0;var z,U=i(1);class G{constructor(e,t=[],i=!1,s=!0){this.openItems=[],this.element=e,this.openItems=t,this.content=i,this.resizeTrigger=s,this.mainItems=this.element.querySelectorAll(".main-item"),this.subItems=this.element.querySelectorAll(".sub-items"),this.subItemsLi=this.element.querySelectorAll(".sub-items .list-item"),this.init()}init(){if(this.content&&(this.contents=this.element.querySelectorAll(".content .wrapper")),this.mainItems.forEach(e=>{e.addEventListener("click",e=>this.onMainItemClick(e))},this),this.subItemsLi.forEach(e=>{e.querySelector("button")&&e.querySelector("button").addEventListener("click",e=>this.onSubItemClick(e))},this),this.openItems.length){for(const e of this.openItems)[...this.mainItems][e].classList.add("open"),this.subItems[e].style.height="auto";this.content&&(this.subItemsLi[0].classList.add("active"),[...this.contents][this.openItems[0]].style.display="block")}this.emitResize()}emitResize(){this.resizeTrigger&&H.emit(V,{width:R.width,height:R.height})}onMainItemClick(e){const t=e.target;t.classList.contains("open")?(t.classList.remove("open"),this.closeSubItems(t)):(t.classList.add("open"),this.openSubItems(t))}onSubItemClick(e){const t=e.target;let i=0;for(let e=0;e<this.subItemsLi.length;e++)this.subItemsLi[e].classList.remove("active"),this.subItemsLi[e]===t.parentElement&&(i=e);this.subItemsLi[i].classList.add("active"),this.content&&this.contents.forEach((e,t)=>{t===i?(e.style.display="block",U.b.fromTo(e,{display:"block",opacity:0},{opacity:1,duration:.3,delay:.1})):e.style.display="none"}),this.emitResize()}openSubItems(e){const t=e.parentElement.querySelector(".sub-items"),i=t.querySelectorAll(".list-item");let s=0;i.forEach(e=>{s+=e.getBoundingClientRect().height}),U.b.to(t,{duration:.4,height:s,ease:"Power4.easeOut",onUpdate:()=>{this.emitResize()},onComplete:function(){this._targets[0].style.height="auto"}})}closeSubItems(e){const t=e.parentElement.querySelector(".sub-items");U.b.to(t,{duration:.4,height:0,ease:"Power4.easeOut",onUpdate:()=>{this.emitResize()}})}destroy(){this.mainItems.forEach(e=>{e.removeEventListener("click",e=>this.onMainItemClick(e))},this),this.subItems.forEach(e=>{e.querySelector("button")&&e.querySelector("button").removeEventListener("click",e=>this.onSubItemClick(e))},this)}}!function(e){e.show="show",e.hide="hide"}(z||(z={}));const j=new class{constructor(){this.hidden=!1,this.lastY=0,this.hoverState=!1,this.element=document.querySelector(".nav-header"),this.navigation=this.element.querySelector(".navigation-container"),this.backgroundWrapper=this.element.querySelector(".background"),this.navItems=this.element.querySelectorAll("nav > ul > li[data-slug]"),this.subNavItems=this.element.querySelectorAll(".submenu li"),this.languageAnchors=this.element.querySelectorAll(".languages a"),this.communityButton=this.element.querySelector(".community-nav button"),this.communityDropdown=this.element.querySelector(".community-nav .dropdown"),this.communityAnchors=this.element.querySelectorAll(".community-nav a"),this.navHandleButton=this.element.querySelector(".nav-handle"),this.hamburger=this.element.querySelector(".hamburger"),this.backgrounds=this.element.querySelectorAll(".background .div"),this.subNavItems.forEach(e=>{e.addEventListener("click",e=>this.onSubNavItemClick(e))},this),this.languageAnchors.forEach(e=>{e.addEventListener("click",e=>this.onLanguageClick(e))},this),this.communityAnchors.forEach(e=>{e.addEventListener("click",e=>this.onLanguageClick(e))},this),this.element.addEventListener("mouseenter",e=>this.onMouseEnter()),this.element.addEventListener("mouseleave",e=>this.onMouseLeave()),this.communityButton.addEventListener("click",e=>this.toggleCommunityDropdown(e)),this.navHandleButton.addEventListener("click",e=>this.toggleMobileNav(e)),this.backgroundWrapper.addEventListener("click",e=>this.hideMobileNav()),H.on("events_header_color",this.setColorHandler.bind(this)),H.on("events_scroll",this.onScrollHandler.bind(this)),H.on(V,this.onResizeHandler.bind(this)),this.menuAccordion=new G(this.element.querySelector(".Accordion"),[],!1,!1)}resetToHome(e=.5){U.b.to([this.navigation],{duration:e,opacity:0,onComplete:()=>{this.element.classList.add("zoom")}})}animateIn(e=0,t=.5){U.b.to([this.element,this.navigation],{duration:t,opacity:1,delay:e})}onMouseLeave(){this.hoverState=!1}onMouseEnter(){this.hoverState=!0,this.show()}onLanguageClick(e){var t;return t="fc_lang=true;path=/;",document.cookie=t,window.location.href=e.target.href,!1}onResizeHandler(){R.width>900&&(this.navHandleButton.classList.remove("active"),this.hamburger.classList.remove("is-active"),U.b.set(this.navigation,{clearProps:"all"}),U.b.set(this.backgroundWrapper,{clearProps:"all"}))}onScrollHandler(){this.communityButton.classList.contains("active")&&this.hideCommunityDropdown(),this.element.classList.contains("zoom")||(R.lastScrollY<=window.scrollY&&R.lastScrollY>0&&R.width>900?this.lastY>20?(this.hide(),this.lastY=0):this.lastY+=1:(this.show(),this.lastY=0))}toggleCommunityDropdown(e){e.target.classList.contains("active")?this.hideCommunityDropdown():this.showCommunityDropdown()}toggleMobileNav(e){e.target.classList.contains("active")?this.hideMobileNav():this.showMobileNav()}hideMobileNav(){R.width<900&&(this.navHandleButton.classList.remove("active"),this.hamburger.classList.remove("is-active"),U.b.to(this.navigation,{duration:.8,x:"0%",ease:"Power3.easeOut"}),U.b.to(this.backgroundWrapper,{duration:.8,autoAlpha:0}))}showMobileNav(){this.navHandleButton.classList.add("active"),this.hamburger.classList.add("is-active"),U.b.to(this.navigation,{duration:.8,x:"-100%",ease:"Power3.easeOut"}),U.b.to(this.backgroundWrapper,{duration:.8,autoAlpha:1})}hideCommunityDropdown(){this.communityButton.classList.remove("active"),this.communityDropdown.classList.remove("active")}showCommunityDropdown(){this.communityButton.classList.add("active"),this.communityDropdown.classList.add("active")}onSubNavItemClick(e){const t=e.target.dataset.anchor,i=e.target.closest("[data-slug]"),s=i.querySelector("a");i.classList.contains("active")?H.emit("events_scroll_to",{anchor:t}):history.pushState({},"",`${s.getAttribute("href")}#${t}`)}setActiveNavItem(e){this.navItems.forEach(t=>{const i=t.getAttribute("data-slug").replace("/"+w,"").substr(1);t.classList.remove("active"),i!=e&&0!==e.search(i)||t.classList.add("active")}),this.subNavItems.forEach(e=>e.classList.remove("active"))}setActiveSubNavItem(e){let t,i;t=[...this.navItems].filter(e=>{if(e.classList.contains("active"))return e})[0],t&&(i=t.querySelectorAll("[data-anchor]"),i&&i.forEach(t=>{const i=t;i.dataset.anchor===e?i.parentElement.classList.add("active"):i.parentElement.classList.remove("active")}))}resetBackground(){R.width<900&&(this.navHandleButton.classList.remove(...N),this.element.classList.remove(...N)),this.backgroundWrapper.style.removeProperty("opacity")}hide(){this.hidden||this.hoverState||(this.hidden=!0,U.b.to([this.navigation,this.backgroundWrapper],{duration:.5,y:"-100%"}))}show(){this.hidden&&(this.hidden=!1,U.b.to([this.navigation,this.backgroundWrapper],{duration:.5,y:"0%"}))}hideZoom(){if(!this.element.classList.contains("zoom"))return!1;const e="Power4.easeOut";U.b.to(this.navigation,{duration:.8,opacity:0,y:-30,ease:e,onComplete:()=>{this.element.classList.remove("zoom"),U.b.to(this.navigation,{duration:.8,opacity:1,y:0,ease:e})}})}setColorHandler({mode:e,delay:t=0}){R.width<900?(this.element.classList.remove(...N),this.element.classList.add("mode-light"),this.navHandleButton.classList.contains(e)||(this.navHandleButton.classList.remove(...N),this.navHandleButton.classList.add(e))):this.element.classList.contains(e)||(this.element.classList.remove(...N),t&&(U.b.set(this.backgrounds,{transitionDelay:t}),U.b.delayedCall(t,()=>{U.b.set(this.backgrounds,{clearProps:"transition-delay"})})),this.element.classList.add(e))}};var W=i(10);
/*!
 * strings: 3.2.6
 * https://greensock.com
 *
 * Copyright 2008-2020, GreenSock. All rights reserved.
 * Subject to the terms at https://greensock.com/standard-license or for
 * Club GreenSock members, the agreement issued with that membership.
 * @author: Jack Doyle, jack@greensock.com
*/const Y=/([\uD800-\uDBFF][\uDC00-\uDFFF](?:[\u200D\uFE0F][\uD800-\uDBFF][\uDC00-\uDFFF]){2,}|\uD83D\uDC69(?:\u200D(?:(?:\uD83D\uDC69\u200D)?\uD83D\uDC67|(?:\uD83D\uDC69\u200D)?\uD83D\uDC66)|\uD83C[\uDFFB-\uDFFF])|\uD83D\uDC69\u200D(?:\uD83D\uDC69\u200D)?\uD83D\uDC66\u200D\uD83D\uDC66|\uD83D\uDC69\u200D(?:\uD83D\uDC69\u200D)?\uD83D\uDC67\u200D(?:\uD83D[\uDC66\uDC67])|\uD83C\uDFF3\uFE0F\u200D\uD83C\uDF08|(?:\uD83C[\uDFC3\uDFC4\uDFCA]|\uD83D[\uDC6E\uDC71\uDC73\uDC77\uDC81\uDC82\uDC86\uDC87\uDE45-\uDE47\uDE4B\uDE4D\uDE4E\uDEA3\uDEB4-\uDEB6]|\uD83E[\uDD26\uDD37-\uDD39\uDD3D\uDD3E\uDDD6-\uDDDD])(?:\uD83C[\uDFFB-\uDFFF])\u200D[\u2640\u2642]\uFE0F|\uD83D\uDC69(?:\uD83C[\uDFFB-\uDFFF])\u200D(?:\uD83C[\uDF3E\uDF73\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92])|(?:\uD83C[\uDFC3\uDFC4\uDFCA]|\uD83D[\uDC6E\uDC6F\uDC71\uDC73\uDC77\uDC81\uDC82\uDC86\uDC87\uDE45-\uDE47\uDE4B\uDE4D\uDE4E\uDEA3\uDEB4-\uDEB6]|\uD83E[\uDD26\uDD37-\uDD39\uDD3C-\uDD3E\uDDD6-\uDDDF])\u200D[\u2640\u2642]\uFE0F|\uD83C\uDDFD\uD83C\uDDF0|\uD83C\uDDF6\uD83C\uDDE6|\uD83C\uDDF4\uD83C\uDDF2|\uD83C\uDDE9(?:\uD83C[\uDDEA\uDDEC\uDDEF\uDDF0\uDDF2\uDDF4\uDDFF])|\uD83C\uDDF7(?:\uD83C[\uDDEA\uDDF4\uDDF8\uDDFA\uDDFC])|\uD83C\uDDE8(?:\uD83C[\uDDE6\uDDE8\uDDE9\uDDEB-\uDDEE\uDDF0-\uDDF5\uDDF7\uDDFA-\uDDFF])|(?:\u26F9|\uD83C[\uDFCB\uDFCC]|\uD83D\uDD75)(?:\uFE0F\u200D[\u2640\u2642]|(?:\uD83C[\uDFFB-\uDFFF])\u200D[\u2640\u2642])\uFE0F|(?:\uD83D\uDC41\uFE0F\u200D\uD83D\uDDE8|\uD83D\uDC69(?:\uD83C[\uDFFB-\uDFFF])\u200D[\u2695\u2696\u2708]|\uD83D\uDC69\u200D[\u2695\u2696\u2708]|\uD83D\uDC68(?:(?:\uD83C[\uDFFB-\uDFFF])\u200D[\u2695\u2696\u2708]|\u200D[\u2695\u2696\u2708]))\uFE0F|\uD83C\uDDF2(?:\uD83C[\uDDE6\uDDE8-\uDDED\uDDF0-\uDDFF])|\uD83D\uDC69\u200D(?:\uD83C[\uDF3E\uDF73\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\u2764\uFE0F\u200D(?:\uD83D\uDC8B\u200D(?:\uD83D[\uDC68\uDC69])|\uD83D[\uDC68\uDC69]))|\uD83C\uDDF1(?:\uD83C[\uDDE6-\uDDE8\uDDEE\uDDF0\uDDF7-\uDDFB\uDDFE])|\uD83C\uDDEF(?:\uD83C[\uDDEA\uDDF2\uDDF4\uDDF5])|\uD83C\uDDED(?:\uD83C[\uDDF0\uDDF2\uDDF3\uDDF7\uDDF9\uDDFA])|\uD83C\uDDEB(?:\uD83C[\uDDEE-\uDDF0\uDDF2\uDDF4\uDDF7])|[#\*0-9]\uFE0F\u20E3|\uD83C\uDDE7(?:\uD83C[\uDDE6\uDDE7\uDDE9-\uDDEF\uDDF1-\uDDF4\uDDF6-\uDDF9\uDDFB\uDDFC\uDDFE\uDDFF])|\uD83C\uDDE6(?:\uD83C[\uDDE8-\uDDEC\uDDEE\uDDF1\uDDF2\uDDF4\uDDF6-\uDDFA\uDDFC\uDDFD\uDDFF])|\uD83C\uDDFF(?:\uD83C[\uDDE6\uDDF2\uDDFC])|\uD83C\uDDF5(?:\uD83C[\uDDE6\uDDEA-\uDDED\uDDF0-\uDDF3\uDDF7-\uDDF9\uDDFC\uDDFE])|\uD83C\uDDFB(?:\uD83C[\uDDE6\uDDE8\uDDEA\uDDEC\uDDEE\uDDF3\uDDFA])|\uD83C\uDDF3(?:\uD83C[\uDDE6\uDDE8\uDDEA-\uDDEC\uDDEE\uDDF1\uDDF4\uDDF5\uDDF7\uDDFA\uDDFF])|\uD83C\uDFF4\uDB40\uDC67\uDB40\uDC62(?:\uDB40\uDC77\uDB40\uDC6C\uDB40\uDC73|\uDB40\uDC73\uDB40\uDC63\uDB40\uDC74|\uDB40\uDC65\uDB40\uDC6E\uDB40\uDC67)\uDB40\uDC7F|\uD83D\uDC68(?:\u200D(?:\u2764\uFE0F\u200D(?:\uD83D\uDC8B\u200D)?\uD83D\uDC68|(?:(?:\uD83D[\uDC68\uDC69])\u200D)?\uD83D\uDC66\u200D\uD83D\uDC66|(?:(?:\uD83D[\uDC68\uDC69])\u200D)?\uD83D\uDC67\u200D(?:\uD83D[\uDC66\uDC67])|\uD83C[\uDF3E\uDF73\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92])|(?:\uD83C[\uDFFB-\uDFFF])\u200D(?:\uD83C[\uDF3E\uDF73\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]))|\uD83C\uDDF8(?:\uD83C[\uDDE6-\uDDEA\uDDEC-\uDDF4\uDDF7-\uDDF9\uDDFB\uDDFD-\uDDFF])|\uD83C\uDDF0(?:\uD83C[\uDDEA\uDDEC-\uDDEE\uDDF2\uDDF3\uDDF5\uDDF7\uDDFC\uDDFE\uDDFF])|\uD83C\uDDFE(?:\uD83C[\uDDEA\uDDF9])|\uD83C\uDDEE(?:\uD83C[\uDDE8-\uDDEA\uDDF1-\uDDF4\uDDF6-\uDDF9])|\uD83C\uDDF9(?:\uD83C[\uDDE6\uDDE8\uDDE9\uDDEB-\uDDED\uDDEF-\uDDF4\uDDF7\uDDF9\uDDFB\uDDFC\uDDFF])|\uD83C\uDDEC(?:\uD83C[\uDDE6\uDDE7\uDDE9-\uDDEE\uDDF1-\uDDF3\uDDF5-\uDDFA\uDDFC\uDDFE])|\uD83C\uDDFA(?:\uD83C[\uDDE6\uDDEC\uDDF2\uDDF3\uDDF8\uDDFE\uDDFF])|\uD83C\uDDEA(?:\uD83C[\uDDE6\uDDE8\uDDEA\uDDEC\uDDED\uDDF7-\uDDFA])|\uD83C\uDDFC(?:\uD83C[\uDDEB\uDDF8])|(?:\u26F9|\uD83C[\uDFCB\uDFCC]|\uD83D\uDD75)(?:\uD83C[\uDFFB-\uDFFF])|(?:\uD83C[\uDFC3\uDFC4\uDFCA]|\uD83D[\uDC6E\uDC71\uDC73\uDC77\uDC81\uDC82\uDC86\uDC87\uDE45-\uDE47\uDE4B\uDE4D\uDE4E\uDEA3\uDEB4-\uDEB6]|\uD83E[\uDD26\uDD37-\uDD39\uDD3D\uDD3E\uDDD6-\uDDDD])(?:\uD83C[\uDFFB-\uDFFF])|(?:[\u261D\u270A-\u270D]|\uD83C[\uDF85\uDFC2\uDFC7]|\uD83D[\uDC42\uDC43\uDC46-\uDC50\uDC66\uDC67\uDC70\uDC72\uDC74-\uDC76\uDC78\uDC7C\uDC83\uDC85\uDCAA\uDD74\uDD7A\uDD90\uDD95\uDD96\uDE4C\uDE4F\uDEC0\uDECC]|\uD83E[\uDD18-\uDD1C\uDD1E\uDD1F\uDD30-\uDD36\uDDD1-\uDDD5])(?:\uD83C[\uDFFB-\uDFFF])|\uD83D\uDC68(?:\u200D(?:(?:(?:\uD83D[\uDC68\uDC69])\u200D)?\uD83D\uDC67|(?:(?:\uD83D[\uDC68\uDC69])\u200D)?\uD83D\uDC66)|\uD83C[\uDFFB-\uDFFF])|(?:[\u261D\u26F9\u270A-\u270D]|\uD83C[\uDF85\uDFC2-\uDFC4\uDFC7\uDFCA-\uDFCC]|\uD83D[\uDC42\uDC43\uDC46-\uDC50\uDC66-\uDC69\uDC6E\uDC70-\uDC78\uDC7C\uDC81-\uDC83\uDC85-\uDC87\uDCAA\uDD74\uDD75\uDD7A\uDD90\uDD95\uDD96\uDE45-\uDE47\uDE4B-\uDE4F\uDEA3\uDEB4-\uDEB6\uDEC0\uDECC]|\uD83E[\uDD18-\uDD1C\uDD1E\uDD1F\uDD26\uDD30-\uDD39\uDD3D\uDD3E\uDDD1-\uDDDD])(?:\uD83C[\uDFFB-\uDFFF])?|(?:[\u231A\u231B\u23E9-\u23EC\u23F0\u23F3\u25FD\u25FE\u2614\u2615\u2648-\u2653\u267F\u2693\u26A1\u26AA\u26AB\u26BD\u26BE\u26C4\u26C5\u26CE\u26D4\u26EA\u26F2\u26F3\u26F5\u26FA\u26FD\u2705\u270A\u270B\u2728\u274C\u274E\u2753-\u2755\u2757\u2795-\u2797\u27B0\u27BF\u2B1B\u2B1C\u2B50\u2B55]|\uD83C[\uDC04\uDCCF\uDD8E\uDD91-\uDD9A\uDDE6-\uDDFF\uDE01\uDE1A\uDE2F\uDE32-\uDE36\uDE38-\uDE3A\uDE50\uDE51\uDF00-\uDF20\uDF2D-\uDF35\uDF37-\uDF7C\uDF7E-\uDF93\uDFA0-\uDFCA\uDFCF-\uDFD3\uDFE0-\uDFF0\uDFF4\uDFF8-\uDFFF]|\uD83D[\uDC00-\uDC3E\uDC40\uDC42-\uDCFC\uDCFF-\uDD3D\uDD4B-\uDD4E\uDD50-\uDD67\uDD7A\uDD95\uDD96\uDDA4\uDDFB-\uDE4F\uDE80-\uDEC5\uDECC\uDED0-\uDED2\uDEEB\uDEEC\uDEF4-\uDEF8]|\uD83E[\uDD10-\uDD3A\uDD3C-\uDD3E\uDD40-\uDD45\uDD47-\uDD4C\uDD50-\uDD6B\uDD80-\uDD97\uDDC0\uDDD0-\uDDE6])|(?:[#\*0-9\xA9\xAE\u203C\u2049\u2122\u2139\u2194-\u2199\u21A9\u21AA\u231A\u231B\u2328\u23CF\u23E9-\u23F3\u23F8-\u23FA\u24C2\u25AA\u25AB\u25B6\u25C0\u25FB-\u25FE\u2600-\u2604\u260E\u2611\u2614\u2615\u2618\u261D\u2620\u2622\u2623\u2626\u262A\u262E\u262F\u2638-\u263A\u2640\u2642\u2648-\u2653\u2660\u2663\u2665\u2666\u2668\u267B\u267F\u2692-\u2697\u2699\u269B\u269C\u26A0\u26A1\u26AA\u26AB\u26B0\u26B1\u26BD\u26BE\u26C4\u26C5\u26C8\u26CE\u26CF\u26D1\u26D3\u26D4\u26E9\u26EA\u26F0-\u26F5\u26F7-\u26FA\u26FD\u2702\u2705\u2708-\u270D\u270F\u2712\u2714\u2716\u271D\u2721\u2728\u2733\u2734\u2744\u2747\u274C\u274E\u2753-\u2755\u2757\u2763\u2764\u2795-\u2797\u27A1\u27B0\u27BF\u2934\u2935\u2B05-\u2B07\u2B1B\u2B1C\u2B50\u2B55\u3030\u303D\u3297\u3299]|\uD83C[\uDC04\uDCCF\uDD70\uDD71\uDD7E\uDD7F\uDD8E\uDD91-\uDD9A\uDDE6-\uDDFF\uDE01\uDE02\uDE1A\uDE2F\uDE32-\uDE3A\uDE50\uDE51\uDF00-\uDF21\uDF24-\uDF93\uDF96\uDF97\uDF99-\uDF9B\uDF9E-\uDFF0\uDFF3-\uDFF5\uDFF7-\uDFFF]|\uD83D[\uDC00-\uDCFD\uDCFF-\uDD3D\uDD49-\uDD4E\uDD50-\uDD67\uDD6F\uDD70\uDD73-\uDD7A\uDD87\uDD8A-\uDD8D\uDD90\uDD95\uDD96\uDDA4\uDDA5\uDDA8\uDDB1\uDDB2\uDDBC\uDDC2-\uDDC4\uDDD1-\uDDD3\uDDDC-\uDDDE\uDDE1\uDDE3\uDDE8\uDDEF\uDDF3\uDDFA-\uDE4F\uDE80-\uDEC5\uDECB-\uDED2\uDEE0-\uDEE5\uDEE9\uDEEB\uDEEC\uDEF0\uDEF3-\uDEF8]|\uD83E[\uDD10-\uDD3A\uDD3C-\uDD3E\uDD40-\uDD45\uDD47-\uDD4C\uDD50-\uDD6B\uDD80-\uDD97\uDDC0\uDDD0-\uDDE6])\uFE0F)/;
/*!
 * SplitText: 3.2.6
 * https://greensock.com
 *
 * @license Copyright 2008-2020, GreenSock. All rights reserved.
 * Subject to the terms at https://greensock.com/standard-license or for
 * Club GreenSock members, the agreement issued with that membership.
 * @author: Jack Doyle, jack@greensock.com
*/
let X,K,Z,$=/(?:\r|\n|\t\t)/g,J=/(?:\s\s+)/g,Q=e=>K.getComputedStyle(e),ee=Array.isArray,te=[].slice,ie=(e,t)=>{let i;return ee(e)?e:"string"==(i=typeof e)&&!t&&e?te.call(X.querySelectorAll(e),0):e&&"object"===i&&"length"in e?te.call(e,0):e?[e]:[]},se=e=>"absolute"===e.position||!0===e.absolute,ae=(e,t)=>{let i,s=t.length;for(;--s>-1;)if(i=t[s],e.substr(0,i.length)===i)return i.length},ne=(e="",t)=>{let i=~e.indexOf("++"),s=1;return i&&(e=e.split("++").join("")),()=>"<"+t+" style='position:relative;display:inline-block;'"+(e?" class='"+e+(i?s++:"")+"'>":">")},oe=(e,t,i)=>{let s=e.nodeType;if(1===s||9===s||11===s)for(e=e.firstChild;e;e=e.nextSibling)oe(e,t,i);else 3!==s&&4!==s||(e.nodeValue=e.nodeValue.split(t).join(i))},re=(e,t)=>{let i=t.length;for(;--i>-1;)e.push(t[i])},le=(e,t,i)=>{let s;for(;e&&e!==t;){if(s=e._next||e.nextSibling,s)return s.textContent.charAt(0)===i;e=e.parentNode||e._parent}},he=e=>{let t,i,s=ie(e.childNodes),a=s.length;for(t=0;t<a;t++)i=s[t],i._isSplit?he(i):(t&&3===i.previousSibling.nodeType?i.previousSibling.nodeValue+=3===i.nodeType?i.nodeValue:i.firstChild.nodeValue:3!==i.nodeType&&e.insertBefore(i.firstChild,i),e.removeChild(i))},ce=(e,t)=>parseFloat(t[e])||0,ue=(e,t,i,s,a,n,o)=>{let r,l,h,c,u,d,m,p,g,D,y,b,v=Q(e),f=ce("paddingLeft",v),w=-999,C=ce("borderBottomWidth",v)+ce("borderTopWidth",v),S=ce("borderLeftWidth",v)+ce("borderRightWidth",v),_=ce("paddingTop",v)+ce("paddingBottom",v),P=ce("paddingLeft",v)+ce("paddingRight",v),I=.2*ce("fontSize",v),E=v.textAlign,k=[],x=[],F=[],A=t.wordDelimiter||" ",B=t.tag?t.tag:t.span?"span":"div",L=t.type||t.split||"chars,words,lines",M=a&&~L.indexOf("lines")?[]:null,T=~L.indexOf("words"),O=~L.indexOf("chars"),N=se(t),q=t.linesClass,H=~(q||"").indexOf("++"),V=[];for(H&&(q=q.split("++").join("")),l=e.getElementsByTagName("*"),h=l.length,u=[],r=0;r<h;r++)u[r]=l[r];if(M||N)for(r=0;r<h;r++)c=u[r],d=c.parentNode===e,(d||N||O&&!T)&&(b=c.offsetTop,M&&d&&Math.abs(b-w)>I&&("BR"!==c.nodeName||0===r)&&(m=[],M.push(m),w=b),N&&(c._x=c.offsetLeft,c._y=b,c._w=c.offsetWidth,c._h=c.offsetHeight),M&&((c._isSplit&&d||!O&&d||T&&d||!T&&c.parentNode.parentNode===e&&!c.parentNode._isSplit)&&(m.push(c),c._x-=f,le(c,e,A)&&(c._wordEnd=!0)),"BR"===c.nodeName&&(c.nextSibling&&"BR"===c.nextSibling.nodeName||0===r)&&M.push([])));for(r=0;r<h;r++)c=u[r],d=c.parentNode===e,"BR"!==c.nodeName?(N&&(g=c.style,T||d||(c._x+=c.parentNode._x,c._y+=c.parentNode._y),g.left=c._x+"px",g.top=c._y+"px",g.position="absolute",g.display="block",g.width=c._w+1+"px",g.height=c._h+"px"),!T&&O?c._isSplit?(c._next=c.nextSibling,c.parentNode.appendChild(c)):c.parentNode._isSplit?(c._parent=c.parentNode,!c.previousSibling&&c.firstChild&&(c.firstChild._isFirst=!0),c.nextSibling&&" "===c.nextSibling.textContent&&!c.nextSibling.nextSibling&&V.push(c.nextSibling),c._next=c.nextSibling&&c.nextSibling._isFirst?null:c.nextSibling,c.parentNode.removeChild(c),u.splice(r--,1),h--):d||(b=!c.nextSibling&&le(c.parentNode,e,A),c.parentNode._parent&&c.parentNode._parent.appendChild(c),b&&c.parentNode.appendChild(X.createTextNode(" ")),"span"===B&&(c.style.display="inline"),k.push(c)):c.parentNode._isSplit&&!c._isSplit&&""!==c.innerHTML?x.push(c):O&&!c._isSplit&&("span"===B&&(c.style.display="inline"),k.push(c))):M||N?(c.parentNode&&c.parentNode.removeChild(c),u.splice(r--,1),h--):T||e.appendChild(c);for(r=V.length;--r>-1;)V[r].parentNode.removeChild(V[r]);if(M){for(N&&(D=X.createElement(B),e.appendChild(D),y=D.offsetWidth+"px",b=D.offsetParent===e?0:e.offsetLeft,e.removeChild(D)),g=e.style.cssText,e.style.cssText="display:none;";e.firstChild;)e.removeChild(e.firstChild);for(p=" "===A&&(!N||!T&&!O),r=0;r<M.length;r++){for(m=M[r],D=X.createElement(B),D.style.cssText="display:block;text-align:"+E+";position:"+(N?"absolute;":"relative;"),q&&(D.className=q+(H?r+1:"")),F.push(D),h=m.length,l=0;l<h;l++)"BR"!==m[l].nodeName&&(c=m[l],D.appendChild(c),p&&c._wordEnd&&D.appendChild(X.createTextNode(" ")),N&&(0===l&&(D.style.top=c._y+"px",D.style.left=f+b+"px"),c.style.top="0px",b&&(c.style.left=c._x-b+"px")));0===h?D.innerHTML="&nbsp;":T||O||(he(D),oe(D,String.fromCharCode(160)," ")),N&&(D.style.width=y,D.style.height=c._h+"px"),e.appendChild(D)}e.style.cssText=g}N&&(o>e.clientHeight&&(e.style.height=o-_+"px",e.clientHeight<o&&(e.style.height=o+C+"px")),n>e.clientWidth&&(e.style.width=n-P+"px",e.clientWidth<n&&(e.style.width=n+S+"px"))),re(i,k),T&&re(s,x),re(a,F)},de=(e,t,i,s)=>{let a,n,o,r,l,h,c,u,d=t.tag?t.tag:t.span?"span":"div",m=~(t.type||t.split||"chars,words,lines").indexOf("chars"),p=se(t),g=t.wordDelimiter||" ",D=" "!==g?"":p?"&#173; ":" ",y="</"+d+">",b=1,v=t.specialChars?"function"==typeof t.specialChars?t.specialChars:ae:null,f=X.createElement("div"),w=e.parentNode;for(w.insertBefore(f,e),f.textContent=e.nodeValue,w.removeChild(e),a=function e(t){let i=t.nodeType,s="";if(1===i||9===i||11===i){if("string"==typeof t.textContent)return t.textContent;for(t=t.firstChild;t;t=t.nextSibling)s+=e(t)}else if(3===i||4===i)return t.nodeValue;return s}(e=f),c=-1!==a.indexOf("<"),!1!==t.reduceWhiteSpace&&(a=a.replace(J," ").replace($,"")),c&&(a=a.split("<").join("{{LT}}")),l=a.length,n=(" "===a.charAt(0)?D:"")+i(),o=0;o<l;o++)if(h=a.charAt(o),v&&(u=v(a.substr(o),t.specialChars)))h=a.substr(o,u||1),n+=m&&" "!==h?s()+h+"</"+d+">":h,o+=u-1;else if(h===g&&a.charAt(o-1)!==g&&o){for(n+=b?y:"",b=0;a.charAt(o+1)===g;)n+=D,o++;o===l-1?n+=D:")"!==a.charAt(o+1)&&(n+=D+i(),b=1)}else"{"===h&&"{{LT}}"===a.substr(o,6)?(n+=m?s()+"{{LT}}</"+d+">":"{{LT}}",o+=5):h.charCodeAt(0)>=55296&&h.charCodeAt(0)<=56319||a.charCodeAt(o+1)>=65024&&a.charCodeAt(o+1)<=65039?(r=((a.substr(o,12).split(Y)||[])[1]||"").length||2,n+=m&&" "!==h?s()+a.substr(o,r)+"</"+d+">":a.substr(o,r),o+=r-1):n+=m&&" "!==h?s()+h+"</"+d+">":h;e.outerHTML=n+(b?y:""),c&&oe(w,"{{LT}}","<")},me=(e,t,i,s)=>{let a,n,o=ie(e.childNodes),r=o.length,l=se(t);if(3!==e.nodeType||r>1){for(t.absolute=!1,a=0;a<r;a++)n=o[a],(3!==n.nodeType||/\S+/.test(n.nodeValue))&&(l&&3!==n.nodeType&&"inline"===Q(n).display&&(n.style.display="inline-block",n.style.position="relative"),n._isSplit=!0,me(n,t,i,s));return t.absolute=l,void(e._isSplit=!0)}de(e,t,i,s)};class pe{constructor(e,t){Z||(X=document,K=window,Z=1),this.elements=ie(e),this.chars=[],this.words=[],this.lines=[],this._originals=[],this.vars=t||{},this.split(t)}split(e){this.isSplit&&this.revert(),this.vars=e=e||this.vars,this._originals.length=this.chars.length=this.words.length=this.lines.length=0;let t,i,s,a=this.elements.length,n=e.tag?e.tag:e.span?"span":"div",o=ne(e.wordsClass,n),r=ne(e.charsClass,n);for(;--a>-1;)s=this.elements[a],this._originals[a]=s.innerHTML,t=s.clientHeight,i=s.clientWidth,me(s,e,o,r),ue(s,e,this.chars,this.words,this.lines,i,t);return this.chars.reverse(),this.words.reverse(),this.lines.reverse(),this.isSplit=!0,this}revert(){let e=this._originals;if(!e)throw"revert() call wasn't scoped properly.";return this.elements.forEach((t,i)=>t.innerHTML=e[i]),this.chars=[],this.words=[],this.lines=[],this.isSplit=!1,this}static create(e,t){return new pe(e,t)}}pe.version="3.2.6";class ge{constructor(e,t=!1){this.transitionSpeed=.5,this.parallaxDistance=0,this.onScrollToHandler=({anchor:e},t=1)=>{const i=this.element.querySelector(`[data-anchor=${e}]`),s=j.element.getBoundingClientRect().height,a=i.getBoundingClientRect().top+window.scrollY-s+5;U.b.to(window,{duration:t,scrollTo:{y:a},ease:"Power4.easeInOut"})},this.onScrollHandler=(e=!1)=>{this.sectionColorCheck(),this.requestId||(this.requestId=window.requestAnimationFrame(this.parallaxBind))},this.addListeners=()=>{document.addEventListener("lazybeforeunveil",()=>{this.onResizeHandler()}),this.observerVideos=new IntersectionObserver(e=>{for(let t of e)this.onIntersectVideo(t)},{threshold:[0]}),this.observerSections=new IntersectionObserver(e=>{for(let t of e){const e=t.boundingClientRect,i=t.target;if(e.top<=0||!i.hasAttribute("data-anchor"))return!1;t.isIntersecting?this.onIntersectSection(i):t.target.previousElementSibling&&this.onIntersectSection(i.previousElementSibling)}},{rootMargin:"0px 0px -50% 0px"}),this.videos.forEach(e=>{this.observerVideos.observe(e)}),this.sectionAnchors.forEach(e=>{this.observerSections.observe(e)})},this.removeListeners=()=>{document.removeEventListener("lazybeforeunveil",()=>{this.onResizeHandler()}),this.videos.forEach(e=>{this.observerVideos.unobserve(e)}),this.sectionAnchors.forEach(e=>{this.observerSections.unobserve(e)})},this.onResizeHandler=()=>{let e,t;this.parallaxDistance=R.width<600?50:100,this.parallaxSections.forEach(i=>{t=i.querySelector(".section-wrapper"),e=t.getBoundingClientRect(),i.style.height=e.height-this.parallaxDistance+"px"})},this.element=e,this.home=t,this.sectionsWrapper=document.querySelector(".sections"),this.parallaxMedias=this.element.querySelectorAll(".parallax--media"),this.parallaxSections=this.element.querySelectorAll(".parallax-section"),this.ctaButtons=this.element.querySelectorAll("button.cta"),this.videos=this.element.querySelectorAll("video[playsinline]"),this.anchoredLinks=this.element.querySelectorAll('a[href^="./#"]'),this.parallaxBind=this.parallax.bind(this),this.init()}init(){if(this.home)this.sectionsWrapper.classList.remove(...q),H.emit("events_header_color",{mode:"mode-transparent-dark"}),window.scroll(0,0),j.resetToHome();else{this.sections=this.element.querySelectorAll("section"),this.sectionAnchors=this.element.querySelectorAll("section[data-anchor]"),this.imagesToLoad=Array.from(this.element.querySelectorAll("img[data-src]")),H.on("events_scroll",this.onScrollHandler),H.on(V,this.onScrollHandler),H.on(V,this.onResizeHandler),H.on("events_scroll_to",this.onScrollToHandler),this.headerColorDelay=this.transitionSpeed,this.onScrollHandler(),this.onResizeHandler(),this.headerColorDelay=0,j.animateIn(),j.hideZoom(),this.parallaxSections.forEach((e,t)=>{e.querySelector(".section-wrapper").style.zIndex=""+(t+1)});for(const e of this.anchoredLinks)e.addEventListener("click",this.onAnchoredLinkClick.bind(this));this.checkHash(),U.b.registerPlugin(W.a),this.addListeners()}}onAnchoredLinkClick(e){e.preventDefault();const t=e.target.getAttribute("href").split("#")[1];this.onScrollToHandler({anchor:t})}checkHash(){const e=window.location.hash?window.location.hash.split("#")[1]:"",t=e?this.element.querySelector(`[data-anchor=${e}]`):"";let i,s;e&&t?(i=j.element.getBoundingClientRect().height,s=t.getBoundingClientRect().top+window.scrollY-i+5,window.scroll(0,s)):window.scroll(0,0)}animateIn(e=this.transitionSpeed){return new Promise(e=>{U.b.to(this.element,{duration:this.transitionSpeed,opacity:1,onComplete:()=>{this.introAnimateIn(this.element,e),this.elementsAnimateIn()}})})}introAnimateIn(e,t){const i=e.querySelector(".intro .title"),s=U.b.timeline(),a=new pe(i,{type:"words,chars"}).chars;i.style.opacity="1",U.b.set(i,{perspective:400}),s.from(a,{duration:.8,opacity:0,y:80,ease:"Power4.easeOut",stagger:.01,onComplete:()=>{t()}},"+=0")}elementsAnimateIn(){if(this.home)return!1;const e=this.element.querySelector(".intro .copy"),t=this.element.querySelector(".intro .top-header .cta-container"),i=this.element.querySelector(".intro .media");U.b.to([e,t,i],{duration:.5,delay:1,opacity:1})}animateOut(){return new Promise(e=>{j.resetBackground(),U.b.to(this.element,{duration:this.transitionSpeed,opacity:0,onComplete:()=>{this.destroy(),e()}})})}sectionColorCheck(){const e=j.element.getBoundingClientRect().height;let t="mode-light";this.sections.forEach(i=>{let s=i.getBoundingClientRect();s.top<=e&&s.bottom>=0&&s.height>0&&(N.map(e=>{t=i.classList.contains(e)?e:t}),H.emit("events_header_color",{mode:t,delay:this.headerColorDelay}))}),this.sectionsWrapper.classList.contains(t+"--bg")||(this.sectionsWrapper.classList.remove(...q),this.sectionsWrapper.classList.add(t+"--bg"))}parallax(){let e,t,i,s,a,n,o,r;r=2*R.height,this.parallaxMedias.forEach(l=>{e=l.getBoundingClientRect(),i=l.querySelector(".ratio > *"),t=i.getBoundingClientRect(),s=e.top-R.height,a=-Math.abs(r),n=d(s/a,0,1),o=t.height-e.height,i.style.transform=`translateY(-${o*n}px)`}),this.parallaxSections.forEach(t=>{e=t.getBoundingClientRect(),i=t.querySelector(".section-wrapper"),s=e.top-R.height,n=d(s/R.height,-1,0),i.style.transform=`translateY(${this.parallaxDistance*n}px)`}),this.requestId=null}onIntersectVideo(e){const t=e.target;e.isIntersecting&&t.paused?t.play():e.isIntersecting||t.paused||t.pause()}onIntersectSection(e){const t=e.dataset.anchor;t&&(window.location.hash=t,j.setActiveSubNavItem(t))}destroy(){H.off("events_scroll",this.onScrollHandler),H.off(V,this.onScrollHandler),H.off(V,this.onResizeHandler),H.off("events_scroll_to",this.onScrollToHandler),this.removeListeners()}}var De=i(4);var ye={vertex:"\n    varying vec2 vUv;\n    varying float vDistanceToCamera;\n    void main()\n    {\n        vUv = uv;\n        vec4 mvPosition = modelViewMatrix * vec4(position, 1.0);\n        vec4 worldPosition = modelMatrix * vec4(position, 1.0);\n        vDistanceToCamera = abs(distance(cameraPosition, vec3(worldPosition)));\n        gl_Position = projectionMatrix * mvPosition;\n    }\n",fragment:"\n    #ifdef GL_ES\n    precision highp float;\n    #endif\n\n    varying vec2 vUv;\n    varying float vDistanceToCamera;\n\n    uniform vec2 uvOffset;\n    uniform float uTubeLength;\n    uniform vec4 color;\n    uniform vec4 textureColor;\n    uniform sampler2D texture;\n    uniform float offset;\n    uniform float globalAlpha;\n    uniform float textureVisibleAmount;\n    uniform float textureAlphaAmount;\n    uniform float featherAmount;\n    uniform float reverseDirection;\n\n    void main(void)\n    {\n        if (offset == 0.) \n            discard;\n        float uv = float(vUv);\n        const float hashDensity = 120.;\n        float hashRepeat = uTubeLength * (hashDensity / vDistanceToCamera);\n        vec4 t1 = texture2D(texture, ((uv + uvOffset) * hashRepeat));\n        float uvDir = mix(1. - uv, uv, reverseDirection); \n        float alpha = mix(uv, 1., featherAmount) * step(1. - offset, uvDir);\n        float textureAlpha = float(t1.a * alpha) * textureAlphaAmount;\n        alpha = mix(textureAlpha, alpha, step(uv, 1. - textureVisibleAmount));\n        vec3 finalColor = mix(t1.rgb * textureColor.rgb, color.rgb, step(uv, 1. - textureVisibleAmount));\n        gl_FragColor = vec4(finalColor, alpha * globalAlpha); //t1\n    }\n"};class be{constructor(e){this.mesh=e,this.mesh.visible=!1}set progress(e){this._progress=e,this.mesh.position.copy(this.position)}get progress(){return this._progress}get position(){return new h.Vector3}animateIn(e=1,t=0,i=0,s=null){U.b.set(this,{progress:0,delay:t}),U.b.to(this,e,{progress:1,delay:t,ease:"Power1.easeInOut",repeat:i,onStart:()=>{this.mesh.visible=!0},onComplete:()=>{this.mesh.visible=!1,s&&s()}})}animateOut(e=1,t=0){U.b.to(this,e,{progress:0,delay:t,ease:"Power1.easeInOut"})}reset(){this.progress=0,this.mesh.visible=!1}}class ve extends be{constructor(e,t){super(e),this.path=t,this.progress=0}get position(){return this.path.getPointAt(this.progress)}}class fe extends be{constructor(e,t){super(e),this.path=t,this.progress=0}get position(){return this.path.getLinearPoint(this.progress)}}class we extends h.CatmullRomCurve3{getLinearPoint(e){const t=this.points,i=t.length,s=(i-1)*e;let a=Math.floor(s),n=s-a;0===n&&a===i-1&&(a=i-2,n=1);const o=t[a%i],r=t[(a+1)%i];return o.clone().lerp(r,n)}}class Ce{constructor(){this.nulls=[]}attachNulls(e){for(let t=0;t<e.length;t+=3){let i=new h.Object3D;this.mesh.add(i),i.position.set(e[t],e[t+1],e[t+2]),this.nulls.push(i)}}}class Se extends Ce{constructor(e,t,i=.1,s,a){super();const{spline:n}=function(e,t=E,i=k){const s=e[0],a=e[1],n=e[2],o=e[3],r=new h.Vector3(...Object(u.a)(s,a,_)),l=new h.Vector3(...Object(u.a)(n,o,_)),m=d(.75*r.distanceTo(l),t,i),p=Object(c.a)([a,s],[o,n]),g=p(.25),D=p(.75),y=new h.Vector3(...Object(u.a)(g[1],g[0],_+m)),b=new h.Vector3(...Object(u.a)(D[1],D[0],_+m));return{start:r,end:l,spline:new h.CubicBezierCurve3(r,y,b,l)}}(e,s,a);this.path=n,this.geometry=new h.TubeBufferGeometry(this.path,50,i,5,!1),this.mesh=new h.Mesh(this.geometry,t),this.material=t,this.attachNulls(e)}}class _e extends Ce{constructor(e,t,i=.1){super();let s=[];for(let t=0;t<e.length;t+=3)s.push(new h.Vector3(e[t],e[t+1],e[t+2]));this.path=new we(s);const a=s.length-1;this.geometry=new h.TubeBufferGeometry(this.path,a,i,5,!1),this.mesh=new h.Mesh(this.geometry,t),this.mesh.renderOrder=5,this.material=t,this.attachNulls(e)}}var Pe=function(e,t,i,s){return new(i||(i=Promise))((function(a,n){function o(e){try{l(s.next(e))}catch(e){n(e)}}function r(e){try{l(s.throw(e))}catch(e){n(e)}}function l(e){var t;e.done?a(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(o,r)}l((s=s.apply(e,t||[])).next())}))};class Ie extends o.a{constructor(){super(),this.audioItems={},this.musicAudioItems={},this.sfxAudioItems={}}init(){this.audioCtx=new(window.AudioContext||window.webkitAudioContext);const e=l.getValue("assets3d");for(const t in e){const i=e[t];(i.indexOf(".ogg")>-1||i.indexOf(".mp3")>-1)&&(this.audioItems[t]=new Ee(t,i),"ch1_music"==t||"ch2_music"==t||"ch3_music"==t||"ch4_music"==t?this.musicAudioItems[t]=this.audioItems[t]:this.sfxAudioItems[t]=this.audioItems[t])}this.audioItems.gva1.useBuffer=!1,this.audioItems.city.useBuffer=!1,this.audioItems.iamb.useBuffer=!1,this.audioItems.ch1_music.useBuffer=!1,this.audioItems.ch2_music.useBuffer=!1,this.audioItems.ch3_music.useBuffer=!1,this.audioItems.ch4_music.useBuffer=!1,this.audioItems.clk.maxGain=-1,this.audioItems.ch1_music.maxGain=-.6,this.audioItems.ch2_music.maxGain=-.6,this.audioItems.ch3_music.maxGain=-.6,this.audioItems.ch4_music.maxGain=-.6,this.musicMuted=!0}load(){return Pe(this,void 0,void 0,(function*(){"ontouchstart"in window||navigator.maxTouchPoints>0||navigator.msMaxTouchPoints>0||(this.init(),yield Promise.all(Object.keys(this.audioItems).map(e=>Pe(this,void 0,void 0,(function*(){return new Promise(t=>{const i=this.audioItems[e];if(i.useBuffer){const e=new XMLHttpRequest;e.open("GET",i.url),e.responseType="arraybuffer";const s=this;e.onload=function(){let a=e.response;s.audioCtx.decodeAudioData(a,e=>i.buffer=e),t()},e.send()}else t()})})))))}))}play(e,t=0){const i=this.get(e);i&&(0==t?i.play():U.b.delayedCall(t,()=>{i.play()}))}pause(e,t=0){const i=this.get(e);i&&U.b.delayedCall(t,()=>{i.pause()})}fadeIn(e,t=0,i=.5){const s=this.get(e);s&&U.b.delayedCall(t,()=>{s.fadeIn(i)})}fadeOut(e,t=0,i=.5,s=!0){const a=this.get(e);a&&U.b.delayedCall(t,()=>{a.fadeOut(i,s)})}get(e){return this.audioItems[e]}stopAll(){Object.keys(this.audioItems).forEach(e=>{this.audioItems[e].pause()})}set musicMuted(e){this._musicMuted=e,Object.keys(this.musicAudioItems).forEach(t=>{this.musicAudioItems[t].mute(e)}),this.emit("music_mute_change",{isMuted:e})}get musicMuted(){return this._musicMuted}set sfxMuted(e){this._sfxMuted=e,Object.keys(this.sfxAudioItems).forEach(t=>{this.sfxAudioItems[t].mute(e)}),this.emit("sfx_mute_change",{isMuted:e})}get sfxMuted(){return this._sfxMuted}pauseAll(){this.audioCtx&&this.audioCtx.suspend()}resumeAll(){this.audioCtx&&this.audioCtx.resume()}}class Ee{constructor(e,t){this.useBuffer=!0,this.isPlaying=!1,this.muted=!1,this._maxGain=0,this.id=e,this.url=t,this.gainNode=ke.audioCtx.createGain(),this.gainNode.connect(ke.audioCtx.destination)}set maxGain(e){this._maxGain=e,this.muted||(this.gainNode.gain.value=e)}get maxGain(){return this._maxGain}play(){if(this.buffer)this.sourceNode=ke.audioCtx.createBufferSource(),this.sourceNode.buffer=this.buffer,this.sourceNode.connect(ke.audioCtx.destination),this.sourceNode.connect(this.gainNode),this.sourceNode.start(0);else{if(!this.audioElement){this.audioElement=new Audio(this.url),this.audioElement.preload="auto";const e=ke.audioCtx.createMediaElementSource(this.audioElement);e.connect(this.gainNode),e.connect(ke.audioCtx.destination)}this.audioElement.play()}this.isPlaying=!0,this.muted||(this.gainNode.gain.value=this.maxGain)}pause(){this.sourceNode?(this.sourceNode.disconnect(),this.sourceNode.stop(0),this.sourceNode=null):this.audioElement&&this.audioElement.pause(),this.isPlaying=!1}fadeIn(e=.5){this.muted||U.b.to(this.gainNode.gain,e,{value:this.maxGain})}fadeOut(e=.5,t=!0){U.b.to(this.gainNode.gain,e,{value:-1,onComplete:()=>{t&&this.pause()}})}mute(e){this.muted=e,this.gainNode.gain.value=e?-1:this.maxGain}}const ke=new Ie;var xe=function(e,t,i,s){return new(i||(i=Promise))((function(a,n){function o(e){try{l(s.next(e))}catch(e){n(e)}}function r(e){try{l(s.throw(e))}catch(e){n(e)}}function l(e){var t;e.done?a(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(o,r)}l((s=s.apply(e,t||[])).next())}))};class Fe{constructor(e,t,i,s,a="pathTypeSpline",n=!0,o,r){this.tubes=[],this.materials=[],this.pathFollowers=[],this.hashSoundDelay=0,this.allCoords=e,this.parent=t,this.type=a,this.hashRepeat=i,this.shareMaterial=n,this.curveMinAltitude=o,this.curveMaxAltitude=r,this.radius=s,this.init()}init(){return xe(this,void 0,void 0,(function*(){let e={color:{type:"v",value:new h.Vector4(...B)},uvOffset:{type:"v",value:new h.Vector2(0,0)},uTubeLength:{type:"f",value:0},texture:{type:"t",value:new h.Texture},textureColor:{type:"v",value:new h.Vector4(...M)},textureVisibleAmount:{type:"f",value:1},textureAlphaAmount:{type:"f",value:1},globalAlpha:{type:"f",value:1},featherAmount:{type:"f",value:0},reverseDirection:{type:"f",value:0},offset:{type:"f",value:0}};const t=new h.ShaderMaterial({uniforms:e,side:h.DoubleSide,transparent:!0,vertexShader:ye.vertex,fragmentShader:ye.fragment,depthTest:!0,depthWrite:!0});this.shareMaterial&&this.materials.push(t),this.curveMesh=new h.Mesh,this.curveMesh.visible=!1,[...this.allCoords].forEach((e,i)=>{let s;const a=this.shareMaterial?this.materials[0]:t.clone();this.shareMaterial||(a.uniforms.uvOffset.value.x=Math.random(),this.materials.push(a)),s="pathTypeSpline"==this.type?new Se(e,a,this.radius,this.curveMinAltitude,this.curveMaxAltitude):new _e(e,a,this.radius),a.uniforms.uTubeLength.value=s.path.getLength()*("pathTypeLine"==this.type?10:1),this.tubes.push(s),this.curveMesh.add(s.mesh)}),this.materials.forEach(e=>{e.uniforms.textureVisibleAmount.value=1,e.uniforms.offset.value=0});y(l.getValue("assets3d").hash_texture_url).then(e=>{e.wrapS=h.RepeatWrapping,this.setAllUniforms("texture",e)}),this.container=new h.Object3D,this.container.add(this.curveMesh),this.parent.add(this.container)}))}setSounds(e=null,t=null,i=null,s=null){this.hashSound=e,this.solidSound=t,this.completeSound=i,this.outSound=s}animateHash(e=0,t=10){this.materials.forEach(i=>{U.b.set(i.uniforms.uvOffset.value,{x:0,delay:e}),U.b.to(i.uniforms.uvOffset.value,t,{x:-1,ease:"none",delay:e,overwrite:!0,onComplete:()=>{i.uniforms.uvOffset.value.x=0}})})}stopAllHashes(){this.materials.forEach(e=>{this.stopHash(e)})}stopHash(e){e.uniforms.uvOffset.value.x=0,U.b.killTweensOf(e.uniforms.uvOffset.value)}animateIn(e=1,t=0,i=0,s=(()=>{})){this.hashSound&&ke.play(this.hashSound,t+this.hashSoundDelay),this.materials.forEach((a,n)=>{a.uniforms.offset.value=0,U.b.to(a.uniforms.offset,e,{value:1,delay:t+i*n,ease:"Power1.easeInOut",onStart:()=>{this.animateHash(),this.curveMesh.visible=!0},onComplete:s,onCompleteParams:[a]})})}animateInSolid(e=1,t=0,i=0,s=(()=>{})){this.solidSound&&e>0&&ke.play(this.solidSound,t),this.materials.forEach((a,n)=>{a.uniforms.textureVisibleAmount.value=1,U.b.to(a.uniforms.textureVisibleAmount,e,{value:0,delay:t+i*n,ease:"Power1.easeInOut",onStart:()=>{this.curveMesh.visible=!0},onComplete:()=>{0==n&&(this.hashSound&&ke.fadeOut(this.hashSound),this.completeSound&&ke.play(this.completeSound)),this.stopHash(a),s&&s(a,n)}})})}animateOut(e=1,t=0,i=0,s=(()=>{}),a=[]){this.solidSound&&e>0&&ke.fadeOut(this.solidSound,t),this.outSound&&e>0&&ke.play(this.outSound,t),this.materials.forEach((n,o)=>{(function(e,t){for(var i=0;i<e.length;i++)if(e[i]===t)return!0;return!1})(a,o)||U.b.to(n.uniforms.offset,e,{value:0,delay:t+i*o,ease:"Power1.easeInOut",onComplete:(e,t,i)=>{this.outSound&&0==t&&ke.fadeOut(this.outSound),i(e,t)},onCompleteParams:[n,o,s]})})}reset(){this.stopAllHashes(),this.curveMesh.visible=!1,this.setAllUniforms("reverseDirection",0);for(let e=0;e<this.pathFollowers.length;e++){const t=this.pathFollowers[e];if(t)for(let e=0;e<t.length;e++){t[e].reset()}}}addPathFollower(e,t){let i;const s=this.tubes[t];i="pathTypeSpline"==this.type?new ve(e,s.path):new fe(e,s.path),s.mesh.add(i.mesh),this.pathFollowers[t]||(this.pathFollowers[t]=[]),this.pathFollowers[t].push(i)}get material(){return this.materials[0]}setAllUniforms(e,t){this.materials.forEach((i,s)=>{i.uniforms[e].value=t})}getPathFollowers(e){return this.pathFollowers[e]}getNulls(e){return this.tubes[e].nulls}}class Ae{constructor(e,t,i){this.name=e,this.latitude=t,this.longitude=i}}var Be=function(e,t,i,s){return new(i||(i=Promise))((function(a,n){function o(e){try{l(s.next(e))}catch(e){n(e)}}function r(e){try{l(s.throw(e))}catch(e){n(e)}}function l(e){var t;e.done?a(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(o,r)}l((s=s.apply(e,t||[])).next())}))};const Le={};const Me=new class{constructor(){this.addCity("Keriya",39.192981,90.798783),this.addCity("Songea",-10.64922,35.641817),this.addCity("wisner",40.919835,-91.823537),this.addCity("Outer Quebec",49.0827035,-79.8104387),this.addCity("Xiaojin",31.216362,101.155618),this.addCity("Tamentit",27.877672,.646661)}addCities(e){for(let t=0;t<e.length;t++)this.addCity(e[t].name,e[t].latitude,e[t].longitude)}load(){return Be(this,void 0,void 0,(function*(){const e=l.getValue("assets3d");return this.cn=yield m(e.city_data_cn),this.filecoin=yield m(e.city_data_fc),new Promise(e=>{this.loaded||(this.addCities(this.cn),this.addCities(this.filecoin)),e()})}))}addCity(e,t,i){const s=new Ae(e,t,i);return Le[s.name]=s,s}};class Te extends o.a{constructor(e){super(),this.element=e,this.url=this.element.getAttribute("data-src"),this.spriteWidth=parseInt(this.element.getAttribute("data-spritesheet-width")),this.spriteHeight=parseInt(this.element.getAttribute("data-spritesheet-height")),this.totalFrames=parseInt(this.element.getAttribute("data-spritesheet-frames")),this.element.style.backgroundImage="url('"+this.url+"')",this.element.style.backgroundSize=this.spriteWidth*this.totalFrames+"px "+this.spriteHeight+"px",this.element.style.width=this.spriteWidth+"px",this.element.style.height=this.spriteHeight+"px",this.totalWidth=(this.totalFrames-1)*this.spriteWidth,this.duration=this.totalFrames/30}play(e=0,t=null,i=0,s=null){t&&(this.duration=t),U.b.set(this.element,{delay:e,backgroundPosition:"0"}),U.b.to(this.element,this.duration,{repeat:i,backgroundPosition:"-"+this.totalWidth+"px",ease:"steps("+(this.totalFrames-1)+")",delay:e,onComplete:()=>{s&&s()}})}reset(){U.b.killTweensOf(this.element),U.b.set(this.element,{backgroundPosition:"0"})}}var Oe={vertex:"\n    uniform float isGlobeParticles;\n    uniform float dpr;\n    uniform float globalAlpha;\n    attribute float alpha;\n    attribute float random;\n    varying float vAlpha;\n    \n    float map(float value, float min1, float max1, float min2, float max2) {\n      return min2 + (value - min1) * (max2 - min2) / (max1 - min1);\n    }\n    \n    void main() {\n        vec4 mvPosition = modelViewMatrix * vec4(position, 1.0);\n        vec4 worldPosition = modelMatrix * vec4(position, 1.0);\n           \n        // Adjust particle alpha for Z depth\n        float dAlpha = step(0., worldPosition.z);\n        vAlpha = mix(1., dAlpha, isGlobeParticles);\n        \n        // Adjust particles to fade in staggered\n        float minAlphaIn = random * .5;\n        float maxAlphaIn = minAlphaIn + .5;\n        vAlpha = map(globalAlpha, minAlphaIn, maxAlphaIn, 0., 1.) * vAlpha;\n        vAlpha = clamp(vAlpha, 0., 1.);\n                   \n        // Size of particle\n        float dSize = worldPosition.z / 30. + .01;\n        float maxScale = 1.3;\n        float startScale = .7;\n        float scaleUp = clamp(map(vAlpha, 0., startScale, 0., maxScale), 0., maxScale);\n        float scaleDown = clamp(map(vAlpha, startScale, 1., maxScale, 1.), maxScale, 1.);\n        float scale = mix(scaleUp, scaleDown, step(startScale, vAlpha));\n        \n        gl_PointSize = (mix(5., dSize, isGlobeParticles) * scale) * dpr;\n        gl_Position = projectionMatrix * mvPosition;\n    }\n",fragment:"\n    uniform sampler2D texture;\n    uniform vec3 color;\n    varying float vGlobalAlpha;\n    varying float vAlpha;\n    \n    void main() {\n        gl_FragColor = vec4( color, vAlpha );\n        gl_FragColor = gl_FragColor * texture2D( texture, gl_PointCoord );\n    }\n"};class Ne{constructor(e,t=null){this.id=e,this.position=t}}class qe extends Ne{constructor(e,t=P){super(e.name,new h.Vector3(...Object(u.a)(e.latitude,e.longitude,t))),this.city=e}}class He{constructor(e,t,i,s=!0,a=l.getValue("assets3d").spot_texture_url){this.indicesByName={},this.attachedSprites={},this.geometry=new h.BufferGeometry;let n=new Float32Array(3*e.length);this.positionAttributes=new h.BufferAttribute(n,3),this.geometry.setAttribute("position",this.positionAttributes);let o=new Float32Array(e.length);this.geometry.setAttribute("alpha",new h.BufferAttribute(o,1));let r=new Float32Array(e.length);this.geometry.setAttribute("random",new h.BufferAttribute(r,1));let c={color:{value:new h.Color(t)},texture:{type:"t",value:new h.Texture},globalAlpha:{type:"f",value:0},dpr:{type:"f",value:si.dpr},isGlobeParticles:{type:"f",value:s}};this.material=new h.ShaderMaterial({uniforms:c,vertexShader:Oe.vertex,fragmentShader:Oe.fragment,transparent:!0,fog:!1,depthWrite:!1,depthTest:!1}),this.cloud=new h.Points(this.geometry,this.material),this.cloud.visible=!1,i.add(this.cloud);for(let t=0;t<e.length;t++){const i=e[t];this.geometry.attributes.position.setXYZ(t,i.position.x,i.position.y,i.position.z),this.geometry.attributes.random.setX(t,Math.random()),this.geometry.attributes.alpha.setX(t,1),this.indicesByName[i.id]=t}y(a).then(e=>{this.material.uniforms.texture.value=e})}attachSprite2d(e,t=null,i=null){const s=t?this.indicesByName[t]:0,a=i||"sprite"+Object.keys(this.attachedSprites).length;this.attachedSprites[a]={sprite:e,particleIndex:s}}getSprite(e=null){return e?this.attachedSprites[e].sprite:this.attachedSprites[Object.keys(this.attachedSprites)[0]].sprite}animateIn(e=1,t=0,i=!1){U.b.to(this.material.uniforms.globalAlpha,e,{value:1,delay:t,ease:"none",onStart:()=>{this.cloud.visible=!0}}),i&&this.animateInSprites(e,t),this.blending=l.getValue("timeOfDay")!=x}animateInSprites(e=1,t=0){Object.keys(this.attachedSprites).forEach(i=>{this.attachedSprites[i].sprite.animateIn(e,t)})}animateOut(e=1,t=0,i=!1){U.b.to(this.material.uniforms.globalAlpha,e,{value:0,delay:t,ease:"none",onComplete:()=>{this.cloud.visible=!1}}),i&&this.animateOutSprites(e,t)}animateOutSprites(e=1,t=0){Object.keys(this.attachedSprites).forEach(i=>{this.attachedSprites[i].sprite.animateOut(e,t)})}set blending(e){e?(this.material.blending=h.CustomBlending,this.material.blendSrc=h.SrcAlphaFactor,this.material.blendDst=h.DstAlphaFactor,this.material.blendEquation=h.AddEquation,this.material.premultipliedAlpha=!0):(this.material.blending=h.NormalBlending,this.material.premultipliedAlpha=!1),this.material.needsUpdate=!0}render(){Object.keys(this.attachedSprites).forEach(e=>{let t=this.attachedSprites[e],i=t.sprite;if("block"==i.element.style.display||i.needsUpdate){const e=t.particleIndex,s=this.geometry.attributes.position,a=new h.Vector3(s.getX(e),s.getY(e),s.getZ(e)),n=function(e,t,i,s){let a=new h.Vector3;return a.set(e.x,e.y,e.z),a.project(t),a.x=(a.x+1)*i/2,a.y=(1-a.y)*s/2,a.z=0,a}(this.cloud.localToWorld(a),$t,R.width,R.height);U.b.set(i.element,{x:n.x-i.xOffset,y:n.y-i.yOffset}),i.needsUpdate=!1}}),this.material.uniforms.dpr.value=si.dpr}reset(e=0){U.b.set(this.material.uniforms.globalAlpha,{value:0,delay:e})}}class Ve{constructor(e,t=null,i=null,s=null){this.xOffset=0,this.yOffset=0,this._scale=1,this._pinHeight=0,this.id=t,this.soundIn=i,this.soundOut=s,this.element=e.parentElement.appendChild(e.cloneNode(!0)),this.verticalLine=this.element.querySelector(".vertical-line"),this.textField=this.element.querySelector(".text-field .text")}layout(){const e=getComputedStyle(this.element);this.width=parseInt(e.width,10),this.height=parseInt(e.height,10),this.initHeight||(this.initHeight=this.height),this.xOffset=this.width/2,this.yOffset=this.verticalLine?0:this.height/2,this._pinHeight=this.height}set scale(e){this._scale=e}get scale(){return this._scale}animateIn(e=1,t=0){this.layout(),this.needsUpdate=!0;const i=e=>{this.soundIn&&e>0&&!this.animatedIn&&ke.play(this.soundIn),this.animatedIn=!0};this.verticalLine||this.textField?U.b.to(this.element,e,{delay:t,opacity:1,display:"block",onStart:i,onStartParams:[e]}):(U.b.set(this.element,{scale:.2,delay:t}),U.b.to(this.element,e,{delay:t,opacity:1,scale:this.scale,display:"block",ease:"Back.easeOut",onStart:i,onStartParams:[e]}))}animateOut(e=1,t=0){const i=e=>{this.soundOut&&e>0&&this.animatedIn&&ke.play(this.soundOut),this.animatedIn=!1};this.verticalLine||this.textField?U.b.to(this.element,e,{delay:t,opacity:0,display:"none",onStart:i,onStartParams:[e]}):U.b.to(this.element,e,{delay:t,opacity:0,scale:.2,display:"none",ease:"Back.easeOut",onStart:i,onStartParams:[e]})}pulse(e=1,t=0){U.b.set(this.element,{scale:.5,delay:t}),U.b.to(this.element,e,{delay:t,opacity:1,scale:this.scale,display:"block",ease:"Back.easeOut"})}set pinHeight(e){this._pinHeight=e,this.element.style.height=e+"px",this.element.style.marginTop=-e+"px"}get pinHeight(){return this._pinHeight}reset(e=0){this.verticalLine&&(U.b.set(this.verticalLine,{clearProps:"all",delay:e}),this.pinHeight=this.initHeight)}setText(e){return this.textField&&(this.textField.innerText=e),this}}class Re extends o.a{loadImage(e){let t=e.getAttribute("data-src");if(t||(t=e.getAttribute("data-source")),t)return new Promise(i=>{const s=new Image;s.onload=()=>{e.setAttribute("src",t),e.setAttribute("loaded","true"),i()};"true"!=e.getAttribute("loaded")?s.setAttribute("src",t):i()})}}const ze=new Re;var Ue=function(e,t,i,s){return new(i||(i=Promise))((function(a,n){function o(e){try{l(s.next(e))}catch(e){n(e)}}function r(e){try{l(s.throw(e))}catch(e){n(e)}}function l(e){var t;e.done?a(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(o,r)}l((s=s.apply(e,t||[])).next())}))};const Ge=new class{constructor(){this.introAnimations=[],this.sprites2dElement=document.querySelector(".sprites2d")}load(){return Ue(this,void 0,void 0,(function*(){const e=Array.from(this.sprites2dElement.querySelectorAll("[data-src]"));yield Promise.all(e.map(e=>Ue(this,void 0,void 0,(function*(){yield ze.loadImage(e)}))))}))}init(){this.iconClient=this.sprites2dElement.querySelector(".icon-client"),this.iconDoc=this.sprites2dElement.querySelector(".icon-doc"),this.iconDocBlack=this.sprites2dElement.querySelector(".icon-doc-black"),this.iconMiner=this.sprites2dElement.querySelector(".icon-miner"),this.iconMinerOrange=this.sprites2dElement.querySelector(".icon-miner-orange"),this.iconPackage=this.sprites2dElement.querySelector(".icon-package"),this.iconRequest=this.sprites2dElement.querySelector(".icon-request"),this.iconCoinSpin=this.sprites2dElement.querySelector(".icon-coin-spin"),this.iconTextField=this.sprites2dElement.querySelector(".text-field"),this.iconQuestionIn=this.sprites2dElement.querySelector(".icon-question-in"),this.questionToCheck=this.sprites2dElement.querySelector(".icon-question-to-check"),this.checkToBlock=this.sprites2dElement.querySelector(".icon-check-to-block"),this.blockOut=this.sprites2dElement.querySelector(".icon-block-out"),this.blockApproved=this.sprites2dElement.querySelector(".icon-block-approved"),this.blockDeclined=this.sprites2dElement.querySelector(".icon-block-declined"),this.initGlobeIntro(),this.initGlobeChapter1(),this.initCityChapter1(),this.initGlobeChapter2(),this.initCityChapter2(),this.initCityChapter3(),this.initCityChapter4(),this.initGlobeChapter4(),this.initialized=!0}render(){this.initialized&&(this.ch1_remoteUserCNParticle.render(),this.ch1_remoteUserFCAfricaParticle.render(),this.ch1_remoteUserLocalTransferParticle.render(),this.ch1_cityMinerLongTransferParticles.render(),this.ch1_cityMinerShortTransferParticles.render(),this.ch1_coinSpinParticle.render(),this.ch1_cnNetworkParticles.render(),this.ch2_cityPackageParticles.render(),this.ch2_packageUserParticles.render(),this.ch2_packageMinerParticles.render(),this.ch2_packageChosenMinerParticles.render(),this.ch3_cityMinerParticles.render(),this.ch3_spritesheetParticles.render(),this.ch4_clientParticles.render(),this.ch4_chosenMinerParticles.render())}hideAll(){for(let e in this){const t=this[e];t.animateOut&&(t.animateOutSprites?t.animateOut(0,0,!0):t.animateOut(0,0)),t.reset&&t.reset()}}initGlobeIntro(){[[[Le.Vancouver,Le["Los Angeles"]],[Le.Vancouver,Le.Calgary]],[[Le["San Francisco"],Le.Denver],[Le["San Francisco"],Le["San Antonio"]],[Le["San Francisco"],Le.Honolulu]],[[Le["New York"],Le.Amsterdam],[Le["New York"],Le.Barcelona],[Le["New York"],Le.Athens]],[[Le.Houston,Le.Winnipeg],[Le.Houston,Le.Miami]],[[Le["Mexico City"],Le.Dallas],[Le["Mexico City"],Le.Lima]],[[Le.Calgary,Le.Washington]],[[Le.Chicago,Le["Panama City"]],[Le.Chicago,Le["Los Angeles"]]],[[Le.Atlanta,Le.Montreal],[Le.Atlanta,Le.Vancouver]],[[Le["San Jose"],Le["La Paz"]]],[[Le.Bogota,Le.Lima],[Le.Bogota,Le.Havana]],[[Le.Havana,Le.Caracas]],[[Le.Santiago,Le.Cuiaba]],[[Le.Fortaleza,Le.Cordoba]],[[Le.Montevideo,Le.Manaus],[Le.Montevideo,Le["Sao Paulo"]]],[[Le.Brasilia,Le["Buenos Aires"]],[Le.Brasilia,Le.Lima]],[[Le.Belem,Le.Dakar]],[[Le.Salvador,Le.Rabat],[Le.Salvador,Le.Dakar]],[[Le.Glasgow,Le.Vienna],[Le.Glasgow,Le.Stockholm]],[[Le.Paris,Le.Budapest]],[[Le.Oslo,Le.Moscow]],[[Le["Cape Town"],Le.Maputo],[Le["Cape Town"],Le.Kampala]],[[Le.Lome,Le.Nouakchott],[Le.Lome,Le.Niamey],[Le.Lome,Le.Rabat]],[[Le.Luanda,Le.Khartoum],[Le.Luanda,Le.Mogadishu]],[[Le.Tripoli,Le.Tamentit],[Le.Tripoli,Le.NDjamena]],[[Le.Lisbon,Le.Rome],[Le.Lisbon,Le.Algiers]],[[Le.Nairobi,Le.Alexandria]],[[Le.Lubumbashi,Le.Johannesburg]],[[Le.Riga,Le.Kiev],[Le.Riga,Le.Bucharest]],[[Le.Bahrain,Le.Islamabad]],[[Le["Addis Ababa"],Le.Baghdad],[Le["Addis Ababa"],Le.Istanbul]],[[Le["New Delhi"],Le.Mumbai],[Le["New Delhi"],Le.Ashgabat],[Le["New Delhi"],Le.Bishkek],[Le["New Delhi"],Le.Urumqi]],[[Le.Kerman,Le.Aden]],[[Le.Oslo,Le.Perm]],[[Le.Shanghai,Le.Beijing],[Le.Shanghai,Le.Xian]],[[Le.Bangkok,Le.Chongqing],[Le.Bangkok,Le.Jakarta]],[[Le.Dhaka,Le.Urumqi]],[[Le.Tokyo,Le.Taipei],[Le.Tokyo,Le.Nanjing]],[[Le.Krasnoyarsk,Le.Omsk]],[[Le["Ningxia, China"],Le["Chennai, India"]],[Le["Ningxia, China"],Le["Hong Kong"]]],[[Le["Bangalore, India"],Le["Kuala Lumpur, Malaysia"]]],[[Le.Jakarta,Le.Perth],[Le.Jakarta,Le.Melbourne]],[[Le.Melbourne,Le.Brisbane]],[[Le.Pyongyang,Le.Irkutsk]],[[Le.Auckland,Le.Sydney],[Le.Auckland,Le.Isaac],[Le.Auckland,Le["Kairuku-Hiri"]]],[[Le["Lawn Hill"],Le.Telfer],[Le["Lawn Hill"],Le.Perth]],[[Le.Melbourne,Le["Mabel Creek"]]],[[Le.Perth,Le["Seram Island"]],[Le.Perth,Le["South Sulawesi"]]],[[Le.Bangkok,Le["Lamon Bay"]],[Le.Bangkok,Le["West Papau"]]],[[Le["Binh Phuoc"],Le["Lạng Son"]],[Le["Binh Phuoc"],Le["District Belaga"]]]].forEach(e=>{const t=[];let i=[],s=[];e.forEach(e=>{const a=e[0],n=e[1];i[0]=new qe(a),s.push(new qe(n)),t.push([a.latitude,a.longitude,n.latitude,n.longitude])});const a=new Fe(t,si.globe.globeContainer,50,.15,void 0,!1,10,30);a.setAllUniforms("featherAmount",1),a.setAllUniforms("textureColor",new h.Vector4(...O)),a.setAllUniforms("color",new h.Vector4(...O)),a.tubes.forEach((e,t)=>{a.addPathFollower(this.makeFollowSphere(.7,0,!0,!0),t)});const n=new He(i,0,si.globe.globeContainer),o=new He(s,3903991,si.globe.globeContainer),r={path:a,clientParticle:n,minerParticles:o};this.introAnimations.push(r)})}initGlobeChapter1(){const e=Le.Keriya,t=Le["Kuala Lumpur, Malaysia"],i=Le["Bangalore, India"],s=Le["Chennai, India"],a=Le["New Delhi"],n=Le.Beijing,o=Le["Ningxia, China"],r=Le.Mumbai,l=Le.Bahrain,c=Le.Songea,u=Le.Lilongwe,d=Le.wisner,m=Le["Kansas City"];let p=[[l.latitude,l.longitude,e.latitude,e.longitude],[t.latitude,t.longitude,e.latitude,e.longitude],[i.latitude,i.longitude,e.latitude,e.longitude],[s.latitude,s.longitude,e.latitude,e.longitude],[a.latitude,a.longitude,e.latitude,e.longitude],[n.latitude,n.longitude,e.latitude,e.longitude],[o.latitude,o.longitude,e.latitude,e.longitude],[r.latitude,r.longitude,e.latitude,e.longitude]];this.ch1_remoteUserPaths=new Fe(p,si.globe.globeContainer,50,.1,void 0,!1,40,50),this.ch1_remoteUserPaths.setSounds("dlt1","sl1","ta"),this.ch1_remoteUserPaths.setAllUniforms("featherAmount",1),this.ch1_remoteUserPaths.setAllUniforms("color",new h.Vector4(...T)),this.ch1_remoteUserPaths.setAllUniforms("textureAlphaAmount",.5),this.ch1_remoteUserPaths.addPathFollower(this.makeFollowSphere(1),4),p=[[u.latitude,u.longitude,c.latitude,c.longitude]],this.ch1_fastTransferAfricaPaths=new Fe(p,si.globe.globeContainer,10,.1),this.ch1_fastTransferAfricaPaths.setSounds("dlt2","lw1"),this.ch1_fastTransferAfricaPaths.setAllUniforms("featherAmount",1),this.ch1_fastTransferAfricaPaths.setAllUniforms("textureAlphaAmount",.5),this.ch1_fastTransferAfricaPaths.addPathFollower(this.makeFollowSphere(.7),0),this.ch1_cnNetworkParticles=new He(Me.cn.map(e=>new qe(e)),16742400,si.globe.globeContainer),this.ch1_cnNetworkParticles.attachSprite2d(new Ve(this.iconMinerOrange,null,"ma","mw"),a.name),this.ch1_remoteUserCNParticle=new He([new qe(Le.Keriya)],16777215,si.globe.globeContainer),this.ch1_remoteUserCNParticle.attachSprite2d(new Ve(this.iconClient,"testerID","ca1","cw")),this.filecoinNetworkParticles=new He(Me.filecoin.map(e=>new qe(e)),3903991,si.globe.globeContainer),this.ch1_remoteUserFCAfricaParticle=new He([new qe(Le.Songea)],16777215,si.globe.globeContainer),this.ch1_remoteUserFCAfrica2d=new Ve(this.iconClient,null,"ca2","cw"),this.ch1_remoteUserFCAfricaParticle.attachSprite2d(this.ch1_remoteUserFCAfrica2d),S===w?(p=[[Le.Chengdu.latitude,Le.Chengdu.longitude,Le.Xiaojin.latitude,Le.Xiaojin.longitude]],this.ch1_remoteUserLocalTransferParticle=new He([new qe(Le.Xiaojin)],16777215,si.globe.globeContainer),this.ch1_remoteUserLocalTransferParticle.attachSprite2d(new Ve(this.iconClient,null,"ca1","cw"))):(p=[[m.latitude,m.longitude,d.latitude,d.longitude]],this.ch1_remoteUserLocalTransferParticle=new He([new qe(Le.wisner)],16777215,si.globe.globeContainer),this.ch1_remoteUserLocalTransferParticle.attachSprite2d(new Ve(this.iconClient,null,"ca1","cw"))),this.ch1_localTransferPaths=new Fe(p,si.globe.globeContainer,10,.1),this.ch1_localTransferPaths.setSounds("dlt3","lw1"),this.ch1_localTransferPaths.setAllUniforms("featherAmount",1),this.ch1_localTransferPaths.setAllUniforms("textureAlphaAmount",.5),this.ch1_localTransferPaths.addPathFollower(this.makeFollowSphere(.4),0)}initCityChapter1(){let e=[[-2.5,0,10,-2.5,0,7.5,-2.5,0,5,0,0,5,0,0,2.5,0,0,0,0,2.5,0]];S!==w&&e[0].push(0,5,0),this.ch1_longCityTransferPaths=new Fe(e,We,75,.015,"pathTypeLine"),this.ch1_longCityTransferPaths.setSounds("dlt2","sl1","ta"),this.ch1_longCityTransferPaths.container.position.set(-2.4,0,4.5),this.ch1_longCityTransferPaths.container.rotation.set(0,-.2,0),this.ch1_longCityTransferPaths.material.depthTest=!1,this.ch1_longCityTransferPaths.material.uniforms.featherAmount.value=1,this.ch1_longCityTransferPaths.material.uniforms.textureAlphaAmount.value=.2,this.ch1_longCityTransferPaths.material.uniforms.color.value=new h.Vector4(...B),this.ch1_longCityTransferPaths.addPathFollower(this.makeFollowSphere(.1),0);let t=this.ch1_longCityTransferPaths.getNulls(0),i=[new Ne("start",t[0].position),new Ne("end",t[t.length-1].position),new Ne("doc",t[t.length-1].position)];this.ch1_cityMinerLongTransferParticles=new He(i,3903991,this.ch1_longCityTransferPaths.container,!1),this.ch1_cityStorageLong2d=new Ve(this.iconMiner,null,"ma","mw"),this.ch1_cityUserLong2d=new Ve(this.iconClient,null,"ca2","cw"),this.ch1_cityDocLong2d=new Ve(this.iconDocBlack,null,"pw1","pw2"),this.ch1_cityMinerLongTransferParticles.attachSprite2d(this.ch1_cityStorageLong2d,"start"),this.ch1_cityMinerLongTransferParticles.attachSprite2d(this.ch1_cityUserLong2d,"end"),this.ch1_cityMinerLongTransferParticles.attachSprite2d(this.ch1_cityDocLong2d,"doc");this.ch1_shortCityTransferPaths=new Fe([[0,-1,0,0,-1,-.5,0,-.5,-.5,0,0,-.5,0,.5,-.5,0,1,-.5,0,1,-1]],We,50,.004,"pathTypeLine"),this.ch1_shortCityTransferPaths.setSounds("dlt1","sl2","ta"),this.ch1_shortCityTransferPaths.container.rotation.y=-.1,this.ch1_shortCityTransferPaths.container.position.set(-6,3.3,6.2),this.ch1_shortCityTransferPaths.material.depthTest=!1,this.ch1_shortCityTransferPaths.material.uniforms.textureAlphaAmount.value=.2,this.ch1_shortCityTransferPaths.material.uniforms.featherAmount.value=1,this.ch1_shortCityTransferPaths.material.uniforms.color.value=new h.Vector4(...B),this.ch1_shortCityTransferPaths.addPathFollower(this.makeFollowSphere(.02,3903991),0),t=this.ch1_shortCityTransferPaths.getNulls(0),i=[new Ne("start",t[0].position),new Ne("end",t[t.length-1].position),new Ne("doc",t[t.length-1].position)],this.ch1_cityMinerShortTransferParticles=new He(i,3903991,this.ch1_shortCityTransferPaths.container,!1),this.ch1_cityUserShort2d=new Ve(this.iconClient,null,"ca3","cw"),this.ch1_cityStorageShort2d=new Ve(this.iconMiner,null,"ma","mw"),this.ch1_cityDocShort2d=new Ve(this.iconDocBlack,null,"pw1","pw2"),this.ch1_cityMinerShortTransferParticles.attachSprite2d(this.ch1_cityUserShort2d,"start"),this.ch1_cityMinerShortTransferParticles.attachSprite2d(this.ch1_cityStorageShort2d,"end"),this.ch1_cityMinerShortTransferParticles.attachSprite2d(this.ch1_cityDocShort2d,"doc");let s=Ye.getCamera(5,1).target;this.ch1_minerTransferPaths=new Fe([[.08,-.08,0,.08,0,0,0,0,0]],We,100,1e-4,"pathTypeLine"),this.ch1_minerTransferPaths.setSounds("dlt3"),this.ch1_minerTransferPaths.container.position.copy(s),this.ch1_minerTransferPaths.container.rotation.y-=.1,this.ch1_minerTransferPaths.material.fog=!1,this.ch1_minerTransferPaths.material.depthTest=!1,this.ch1_minerTransferPaths.material.uniforms.textureAlphaAmount.value=.2,this.ch1_minerTransferPaths.material.uniforms.featherAmount.value=1,this.ch1_minerTransferPaths.material.uniforms.color.value=new h.Vector4(...A),this.ch1_minerTransferPaths.addPathFollower(this.makeFollowSphere(6e-4,16777215),0);const a=new h.Vector3(-5.75,4.24,4.81);this.ch1_coinSpinParticle=new He([new Ne("coin",a)],16777215,We,!1),this.ch1_coinSpin2d=new Ve(this.iconCoinSpin,null,"coin"),this.ch1_coinSpin2d.scale=.9,this.ch1_coinSpinParticle.attachSprite2d(this.ch1_coinSpin2d),this.ch1_coinSpritesheet=new Te(this.ch1_coinSpin2d.element)}initCityChapter2(){this.ch2_cityPackageParticles=new He([new Ne("package",new h.Vector3(-10,2,0))],3903991,We,!1),this.ch2_cityPackageDoc2d=new Ve(this.iconPackage,null,"pw1",null),this.ch2_cityPackageParticles.attachSprite2d(this.ch2_cityPackageDoc2d),this.ch2_cityPackageUser2d=new Ve(this.iconClient,null,"ca1"),this.ch2_cityPackageParticles.attachSprite2d(this.ch2_cityPackageUser2d)}initGlobeChapter2(){const e=["0.02 FIL / 300 TB","0.1 FIL / 800 TB","0.06 FIL / 300 TB","0.08 FIL / 500 TB","0.07 FIL / 300 TB"],t=S===w?["Xian","Hong Kong","Chongqing"]:["Chicago","Quebec","Outer Quebec"],i=S===w?["Zhengzhou","Hengyang"]:["Charlotte","Toronto"],s=t.concat(i),a=S===w?"Shanghai":"New York";this.ch2_packageUserParticles=new He([new qe(Le[a],I)],3903991,si.globe.globeContainer,!1),this.ch2_globePackageDoc2d=new Ve(this.iconPackage),this.ch2_packageUserParticles.attachSprite2d(this.ch2_globePackageDoc2d),this.ch2_globeClient2d=new Ve(this.iconClient,null,null,"cw"),this.ch2_packageUserParticles.attachSprite2d(this.ch2_globeClient2d);const n=t.map(e=>new qe(Le[e],I));this.ch2_packageMinerParticles=new He(n,3903991,si.globe.globeContainer,!0),t.forEach((t,i)=>{this.ch2_packageMinerParticles.attachSprite2d(new Ve(this.iconTextField).setText(e[i]),t)});const o=i.map(e=>new qe(Le[e],I));this.ch2_packageChosenMinerParticles=new He(o,3903991,si.globe.globeContainer,!0),i.forEach((t,i)=>{this.ch2_packageChosenMinerParticles.attachSprite2d(new Ve(this.iconTextField).setText(e[i+3]),t,"text_"+i),this.ch2_packageChosenMinerParticles.attachSprite2d(new Ve(this.iconTextField),t,"miner_"+i)});const r=s.map(e=>[Le[e].latitude,Le[e].longitude,Le[a].latitude,Le[a].longitude]);this.ch2_packageMinerPaths=new Fe(r,si.globe.globeContainer,50,.05,void 0,!1),this.ch2_packageMinerPaths.setSounds("dlt1"),this.ch2_packageMinerPaths.hashSoundDelay=1,this.ch2_packageMinerPaths.setAllUniforms("color",new h.Vector4(...B)),this.ch2_packageMinerPaths.setAllUniforms("textureColor",new h.Vector4(...O));const l=i.map(e=>[Le[a].latitude,Le[a].longitude,Le[e].latitude,Le[e].longitude]);this.ch2_packageChosenMinerPaths=new Fe(l,si.globe.globeContainer,50,.05),this.ch2_packageChosenMinerPaths.setSounds("dlt2","sl2"),this.ch2_packageMinerPaths.hashSoundDelay=1,this.ch2_packageChosenMinerPaths.setAllUniforms("color",new h.Vector4(...B)),this.ch2_packageChosenMinerPaths.setAllUniforms("textureColor",new h.Vector4(...O)),this.ch2_packageChosenMinerPaths.addPathFollower(this.makeFollowSphere(.4,3903991),0),this.ch2_packageChosenMinerPaths.addPathFollower(this.makeFollowSphere(.4,3903991),1)}initCityChapter3(){let e=new h.Vector3(-20,0,3.5);const t=S===w?-.2:.55;this.ch3_minerTransferPathIn=new Fe([[8,1,0,7,1,0,6,1,0,5,1,0,4,1,0,3,1,0,2,1,0,1,1,0,0,1,0,0,2,0,0,3,0]],We,120,.006,"pathTypeLine"),this.ch3_minerTransferPathIn.setSounds("dlt2","sl1","ta"),this.ch3_minerTransferPathIn.container.position.copy(e),this.ch3_minerTransferPathIn.container.rotateY(t),this.ch3_minerTransferPathIn.material.fog=!1,this.ch3_minerTransferPathIn.material.depthTest=!1,this.ch3_minerTransferPathIn.material.uniforms.featherAmount.value=0,this.ch3_minerTransferPathIn.material.uniforms.color.value=new h.Vector4(...B),this.ch3_minerTransferPathIn.addPathFollower(this.makeFollowSphere(.05,3903991),0);let i=this.ch3_minerTransferPathIn.getNulls(0),s=[new Ne("end",i[i.length-1].position),new Ne("doc",i[i.length-1].position)];this.ch3_cityMinerParticles=new He(s,3903991,this.ch3_minerTransferPathIn.container,!1),this.ch3_cityMinerParticles.attachSprite2d(new Ve(this.iconMiner,null,"ma","mw"),"end",".icon-miner"),this.ch3_cityMinerParticles.attachSprite2d(new Ve(this.iconDocBlack,null,"pw1","pw2"),"doc",".icon-doc");let a=S===w?new h.Vector3(-20.32,2.495,3.45):new h.Vector3(-20.17,2.81,3.7),n=S===w?-.18:.55;this.ch3_serverTransferPathIn=new Fe([[0,0,0,.02,0,0,.04,0,0,.06,0,0,.08,0,0,.1,0,0,.12,0,0,.14,0,0,.16,0,0,.18,0,0,.2,0,0,.2,0,.02,.2,0,.04,.2,0,.06,.18,0,.06]],We,120,1e-4,"pathTypeLine"),this.ch3_serverTransferPathIn.container.position.copy(a),this.ch3_serverTransferPathIn.container.rotateY(n),this.ch3_serverTransferPathIn.material.fog=!1,this.ch3_serverTransferPathIn.material.depthTest=!1,this.ch3_serverTransferPathIn.material.uniforms.featherAmount.value=1,this.ch3_serverTransferPathIn.material.uniforms.color.value=new h.Vector4(...B),this.ch3_serverTransferPathIn.addPathFollower(this.makeFollowSphere(5e-4,3903991),0);let o=new h.Vector3(a.x,a.y,a.z+.005);this.ch3_serverTransferPathOut=new Fe([[.18,0,.06,.2,0,.06,.2,0,.04,.2,0,.02,.2,0,0,.18,0,0,.16,0,0,.14,0,0,.12,0,0,.1,0,0,.08,0,0,.06,0,0,.04,0,0,.02,0,0,0,0,0]],We,120,1e-4,"pathTypeLine"),this.ch3_serverTransferPathOut.container.position.copy(o),this.ch3_serverTransferPathOut.container.rotateY(n),this.ch3_serverTransferPathOut.material.fog=!1,this.ch3_serverTransferPathOut.material.depthTest=!1,this.ch3_serverTransferPathOut.material.uniforms.featherAmount.value=1,this.ch3_serverTransferPathOut.addPathFollower(this.makeFollowSphere(5e-4,16777215),0);const r="point";this.ch3_spritesheetParticles=new He([new Ne(r,Ye.serverIconNull.position)],3903991,Ye.serverIconNull.parent,!1);const l=new Ve(this.iconQuestionIn);this.ch3_spritesheetParticles.attachSprite2d(l,r,".icon-question-in"),this.ch3_questionInSpritesheet=new Te(l.element);const c=new Ve(this.questionToCheck);this.ch3_spritesheetParticles.attachSprite2d(c,r,".icon-question-to-check"),this.ch3_questionToCheckSpritesheet=new Te(c.element);const u=new Ve(this.checkToBlock);this.ch3_spritesheetParticles.attachSprite2d(u,r,".icon-check-to-block"),this.ch3_checkToBlockSpritesheet=new Te(u.element);const d=new Ve(this.blockOut);this.ch3_spritesheetParticles.attachSprite2d(d,r,".icon-block-out"),this.ch3_blockOutSpritesheet=new Te(d.element);const m=new Ve(this.blockApproved);this.ch3_spritesheetParticles.attachSprite2d(m,r,".icon-block-approved"),this.ch3_blockApprovedSpritesheet=new Te(m.element);const p=new Ve(this.blockDeclined);this.ch3_spritesheetParticles.attachSprite2d(p,r,".icon-block-declined"),this.ch3_blockDeclinedSpritesheet=new Te(p.element);const g=new Ve(this.iconCoinSpin,null,"coin");this.ch3_spritesheetParticles.attachSprite2d(g,r,".icon-coin-spin"),this.ch3_coinSpritesheet=new Te(g.element)}initCityChapter4(){let e=[[-4,2,-1,-4,1,-1,-4,1,0,-3,1,0,-2,1,0,-1,1,0,0,1,0,1,1,0,2,1,0,3,1,0,4,1,0,5,1,0,6,1,0,7,1,0,8,1,0,8,1,1,8,2,1,8,3,1,8,4,1]];this.ch4_minerPaymentPaths=new Fe(e,We,80,.01,"pathTypeLine"),this.ch4_minerPaymentPaths.setSounds("dlt1","sl2","ta","sl3"),this.ch4_minerPaymentPaths_reverse=new Fe([D(e[0])],We,80,.01,"pathTypeLine"),this.ch4_minerPaymentPaths_reverse.setSounds("dlt3","sl2",null,"sl3"),[this.ch4_minerPaymentPaths,this.ch4_minerPaymentPaths_reverse].forEach(e=>{e.container.position.set(10,-1,-4.5),e.container.rotateY(.02),e.material.depthTest=!1,e.material.uniforms.featherAmount.value=1,e.material.uniforms.color.value=new h.Vector4(...B),e.addPathFollower(this.makeFollowSphere(.05,3903991),0)}),this.ch4_clientParticles=new He([new Ne("start",new h.Vector3(8,4,1))],16777215,this.ch4_minerPaymentPaths.container,!1),this.ch4_clientParticles.attachSprite2d(new Ve(this.iconClient,null,"ca3","cw"),"start",".icon-client"),this.ch4_clientParticles.attachSprite2d(new Ve(this.iconRequest,null,"fs1","fs2"),"start",".icon-request"),this.ch4_clientParticles.attachSprite2d(new Ve(this.iconDocBlack,null,"pw1","pw2"),"start",".icon-doc-black");this.ch4_chosenMinerParticles=new He([new Ne("end",new h.Vector3(-4,2,-1))],3903991,this.ch4_minerPaymentPaths.container,!1);const t=new Ve(this.iconCoinSpin,null,"coin");t.pinHeight=80,t.scale=.65;const i=new Ve(this.iconMiner,null,"ma","mw");this.ch4_chosenMinerParticles.attachSprite2d(t,"end",".icon-coin-spin"),this.ch4_chosenMinerParticles.attachSprite2d(i,"end",".icon-miner"),this.ch4_coinSpritesheet=new Te(t.element),this.ch4_minerParticles=new He([new Ne("miner1",new h.Vector3(15,2,8)),new Ne("miner2",new h.Vector3(5,2,4)),new Ne("miner3",new h.Vector3(0,2,1)),new Ne("miner4",new h.Vector3(-2,2,-5))],3903991,We,!1)}initGlobeChapter4(){const e=S===w?Le.Shanghai:Le["New York"],t=[Le.Barcelona,Le.London,Le.Amsterdam],i=[Le.Dublin,Le.Oslo,Le.Edinburgh,Le.Vienna],s=[Le.Brussels,Le.Berlin],a=[Le.Madrid,Le.Malaga,Le.Glasgow,Le.Lisbon,Le.Paris,Le.Marseille],n=[Le.Bucharest,Le.Zagreb,Le.Cologne],o=[Le.Copenhagen,Le.Stockholm,Le.Zurich,Le.Milan,Le.Hamburg,Le.Prague,Le.Rome],r=[Le.Budapest,Le.Naples,Le.Bucharest,Le.Warsaw,Le.Helsinki,Le.Sofia,Le.Athens,Le.Tirana,Le.Belgrade,Le.Istanbul];this.ch4_newyorkParticles=new He([new qe(e)],3903991,si.globe.globeContainer,!1),this.ch4_miners1Particles=new He(t.map(e=>new qe(e,I)),16777215,si.globe.globeContainer,!1),this.ch4_globePaths1=new Fe(t.map(t=>[e.latitude,e.longitude,t.latitude,t.longitude]),si.globe.globeContainer,80,.1,void 0,!1,70,70),this.ch4_globePaths1.setSounds("dlt3","sl1",null,"fw1"),this.ch4_globePaths1.setAllUniforms("textureColor",new h.Vector4(...O));for(let e=0;e<t.length;e++)this.ch4_globePaths1.addPathFollower(this.makeFollowSphere(.3,3903991),e);this.ch4_miners2Particles=new He(i.map(e=>new qe(e,I)),3903991,si.globe.globeContainer,!1),this.ch4_globePaths2=new Fe(i.map(t=>[e.latitude,e.longitude,t.latitude,t.longitude]),si.globe.globeContainer,80,.1,void 0,!1,50,50),this.ch4_globePaths2.setSounds("dlt2","sl3",null,"fw3"),this.ch4_globePaths2.setAllUniforms("textureColor",new h.Vector4(...O));for(let e=0;e<i.length;e++)this.ch4_globePaths2.addPathFollower(this.makeFollowSphere(.3,3903991),e);this.ch4_miners3Particles=new He(s.map(e=>new qe(e,I)),3903991,si.globe.globeContainer,!1),this.ch4_globePaths3=new Fe([[Le.Edinburgh.latitude,Le.Edinburgh.longitude,Le.Brussels.latitude,Le.Brussels.longitude],[Le.Edinburgh.latitude,Le.Edinburgh.longitude,Le.Berlin.latitude,Le.Berlin.longitude]],si.globe.globeContainer,40,.1,void 0,!1),this.ch4_globePaths3.setSounds("dlt1","sl1",null,"lw1"),this.ch4_globePaths3.setAllUniforms("textureColor",new h.Vector4(...O)),this.ch4_clients1Particles=new He(a.map(e=>new qe(e,I)),16777215,si.globe.globeContainer,!1),this.ch4_globePaths4=new Fe([[Le.Dublin.latitude,Le.Dublin.longitude,Le.Madrid.latitude,Le.Madrid.longitude],[Le.Dublin.latitude,Le.Dublin.longitude,Le.Marseille.latitude,Le.Marseille.longitude],[Le.Dublin.latitude,Le.Dublin.longitude,Le.Lisbon.latitude,Le.Lisbon.longitude],[Le.Dublin.latitude,Le.Dublin.longitude,Le.Malaga.latitude,Le.Malaga.longitude]],si.globe.globeContainer,40,.1,void 0,!1),this.ch4_globePaths4.setSounds("dlt3","sl2",null,"lw1"),this.ch4_globePaths4.setAllUniforms("textureColor",new h.Vector4(...O)),this.ch4_miners4Particles=new He(n.map(e=>new qe(e,I)),3903991,si.globe.globeContainer,!1),this.ch4_clients2Particles=new He(o.map(e=>new qe(e,I)),16777215,si.globe.globeContainer,!1),this.ch4_globePaths5=new Fe([[Le.Berlin.latitude,Le.Berlin.longitude,Le.Zurich.latitude,Le.Zurich.longitude],[Le.Berlin.latitude,Le.Berlin.longitude,Le.Milan.latitude,Le.Milan.longitude],[Le.Berlin.latitude,Le.Berlin.longitude,Le.Prague.latitude,Le.Prague.longitude],[Le.Berlin.latitude,Le.Berlin.longitude,Le.Rome.latitude,Le.Rome.longitude],[Le.Berlin.latitude,Le.Berlin.longitude,Le.Bucharest.latitude,Le.Bucharest.longitude]],si.globe.globeContainer,40,.1,void 0,!1),this.ch4_globePaths5.setSounds("dlt2","sl3",null,"lw1"),this.ch4_globePaths5.setAllUniforms("textureColor",new h.Vector4(...O)),this.ch4_clients3Particles=new He(r.map(e=>new qe(e,I)),16777215,si.globe.globeContainer,!1),this.ch4_globePaths6=new Fe([[Le.Zagreb.latitude,Le.Zagreb.longitude,Le.Athens.latitude,Le.Athens.longitude],[Le.Zagreb.latitude,Le.Zagreb.longitude,Le.Naples.latitude,Le.Naples.longitude],[Le.Zagreb.latitude,Le.Zagreb.longitude,Le.Istanbul.latitude,Le.Istanbul.longitude],[Le.Zagreb.latitude,Le.Zagreb.longitude,Le.Belgrade.latitude,Le.Belgrade.longitude],[Le.Zagreb.latitude,Le.Zagreb.longitude,Le.Tirana.latitude,Le.Tirana.longitude]],si.globe.globeContainer,40,.1,void 0,!1),this.ch4_globePaths6.setSounds("dlt2","sl1",null,"lw1"),this.ch4_globePaths6.setAllUniforms("textureColor",new h.Vector4(...O))}makeFollowSphere(e,t=16777215,i=!1,s=!1){const a=new h.Mesh(new h.SphereGeometry(e,3,3),new h.MeshBasicMaterial({color:t,depthTest:s,depthWrite:i,fog:!1,transparent:!0}));return a.renderOrder=10,a}};var je=function(e,t,i,s){return new(i||(i=Promise))((function(a,n){function o(e){try{l(s.next(e))}catch(e){n(e)}}function r(e){try{l(s.throw(e))}catch(e){n(e)}}function l(e){var t;e.done?a(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(o,r)}l((s=s.apply(e,t||[])).next())}))};const We=new h.Object3D;const Ye=new class{constructor(){this.minerBuildingDeskMaterials=[],this.minerBuildingDriveMaterials=[],this.cityBuildingColorTop="#ffffff",this.cityBuildingColorBottom="#999999"}add(){We.parent||Zt.add(We)}remove(){We.parent&&Zt.remove(We)}load(){return je(this,void 0,void 0,(function*(){const e=l.getValue("assets3d");return new Promise(t=>{if(this.loaded)return void t();(new De.a).load(e.city_model_url,e=>{this.meshScene=e.scene,this.canvasTextureContext=this.createCanvasTexture(),this.bridge=this.meshScene.getObjectByName("BRIDGE"),this.bridge&&(this.bridge.material=new h.MeshStandardMaterial({map:this.canvasTexture,flatShading:!0})),this.roads=this.meshScene.getObjectByName("ROADS"),this.roads&&(this.roads.material=new h.MeshBasicMaterial({flatShading:!0})),this.buildings=this.meshScene.getObjectByName("CITY_UNTRIANGULATED"),this.buildings.material=new h.MeshStandardMaterial({map:this.canvasTexture,flatShading:!0,side:h.DoubleSide}),this.landMass=this.meshScene.getObjectByName("LANDMASS"),this.landMass.material=new h.MeshBasicMaterial,this.cityBuildingColorStop=S===w?.15:.3,this.parseNulls(),this.parseServerBuilding(),this.parseMinerBuilding(),this.animateMaterialColor(0,0,"night"),We.add(e.scene),We.scale.set(10,10,10),this.loaded=!0,t()})})}))}createCanvasTexture(){const e=document.createElement("canvas");return e.classList.add("canvasTexture"),e.width=128,e.height=128,this.canvasTexture=new h.CanvasTexture(e),this.canvasTexture.flipY=!0,e.getContext("2d")}parseNulls(){this.cameraSourceNulls=this.meshScene.getObjectByName("CAMERA_SOURCE"),this.cameraTargetNulls=this.meshScene.getObjectByName("CAMERA_TARGETS"),this.serverIconNull=this.meshScene.getObjectByName("coin_target"),this.spriteNulls=this.meshScene.getObjectByName("NODES");const e=this.spriteNulls.children.map((e,t)=>new Ne("citySpot"+t,g(e.position,e.parent)));Ge.ch1_citySpotsParticles=new He(e,3903991,We,!1)}parseMinerBuilding(){this.minerBuildingOutside=this.meshScene.getObjectByName("BUILDING_1_OUTSIDE").children[0],this.minerBuildingOutside.material=this.minerBuildingOutsideMaterial=new h.MeshStandardMaterial({map:this.canvasTexture,flatShading:!0,side:h.DoubleSide,transparent:!0}),this.minerBuildingOutside.renderOrder=2;const e=this.meshScene.getObjectByName("BUILDING_1_INSIDE_BOT"),t=e.material;t.map.encoding=h.LinearEncoding,e.material=new h.MeshBasicMaterial({map:t.map});const i=this.meshScene.getObjectByName("BUILDING_1_INSIDE_MID"),s=i.material;s.map.encoding=h.LinearEncoding,i.material=new h.MeshBasicMaterial({map:s.map}),this.minerBuildingTopFloor=this.meshScene.getObjectByName("BUILDING_1_INSIDE_TOP");const a=this.minerBuildingTopFloor.material;a.map.encoding=h.LinearEncoding,this.minerBuildingTopFloor.material=this.minerBuildingTopFloorMaterial=new h.MeshBasicMaterial({transparent:!0,depthTest:!1,opacity:0,map:a.map}),this.minerBuildingDesk=this.meshScene.getObjectByName("BUILDING_1_MINER"),this.minerBuildingDesk.visible=!1,this.meshScene.remove(this.minerBuildingDesk),this.minerBuildingDesk.traverse(e=>{if(e instanceof h.Mesh){let t=e.material,i=new h.MeshBasicMaterial({map:t.map,flatShading:!0,transparent:!0,opacity:0});"box_front"==e.name?(this.minerBuildingNasFront=e,this.minerBuildingNasFrontMaterial=i):"box_back"==e.name?(this.minerBuildingNasBack=e,this.minerBuildingNasBackMaterial=i,this.minerBuildingNasBackMaterial.side=h.DoubleSide):"drive"==e.name||"disk_inner"==e.name?(i.blending=h.AdditiveBlending,i.depthTest=!1,i.side=h.DoubleSide,e.renderOrder=1,this.minerBuildingDriveMaterials.push(i)):this.minerBuildingDeskMaterials.push(i),e.material=i,e.material.map&&(e.material.map.encoding=h.LinearEncoding)}})}parseServerBuilding(){this.serverBuildingOutside=this.meshScene.getObjectByName("BUILDING_2_OUTSIDE").children[0],this.serverBuildingOutsideMaterial=new h.MeshStandardMaterial({map:this.canvasTexture,transparent:!0,flatShading:!0}),this.serverBuildingOutside.material=this.serverBuildingOutsideMaterial,this.serverBuildingInside=this.meshScene.getObjectByName("BUILDING_2_INSIDE"),this.serverBuildingInside.visible=!1,this.meshScene.remove(this.serverBuildingInside);const e=this.meshScene.getObjectByName("drive"),t=e.material;t.map.encoding=h.LinearEncoding,this.serverDriveMaterial=new h.MeshBasicMaterial({map:t.map,flatShading:!0}),e.material=this.serverDriveMaterial,this.serverBuildingInside.traverse(t=>{if(t instanceof h.Mesh){if("staircase"==t.name){let e=t.material;t.material=new h.MeshBasicMaterial({map:e.map})}if("box"==t.name){if(!this.serverRackMaterial){let e=t.material;this.serverRackMaterial=new h.MeshBasicMaterial({map:e.map}),this.serverRackMaterial.side=h.FrontSide,this.serverRackMaterial.transparent=!0,this.serverRackMaterial.blending=h.AdditiveBlending,this.serverRackMaterial.opacity=.2}t.material=this.serverRackMaterial,t.renderOrder=5}else if("cabinets_fronts"==t.name){let e=t.material;this.cabinetFronts=t,this.cabinetFrontsMaterial=new h.MeshBasicMaterial({map:e.map}),t.material=this.cabinetFrontsMaterial,t.renderOrder=10}else if("back_tech"==t.name){let e=t.material;this.backTechMaterial=new h.MeshBasicMaterial({map:e.map}),t.material=this.backTechMaterial}else if("drive"!=t.name){let e=t.material;t.material=new h.MeshBasicMaterial({map:e.map})}t.material.map&&(t.material.map.encoding=h.LinearEncoding)}else t instanceof h.Object3D&&"drive-nulls"==t.name&&t.children.forEach(t=>{t.add(e.clone(!0))})})}fadeMinerBuildingWall(e,t=1){U.b.to(this.minerBuildingOutsideMaterial,t,{opacity:0,delay:e,onComplete:()=>{this.minerBuildingOutside.visible=!1}}),U.b.to(this.minerBuildingTopFloorMaterial,t,{opacity:1,delay:e})}hideMinerBuildingFloors(e,t=1){U.b.to(this.minerBuildingTopFloorMaterial,t,{opacity:0,delay:e})}showMiner(e){this.meshScene.add(this.minerBuildingDesk),this.minerBuildingDesk.visible=!0,U.b.to([this.minerBuildingDeskMaterials,this.minerBuildingNasFrontMaterial,this.minerBuildingNasBackMaterial],.5,{opacity:1,delay:e}),ke.play("fw3",e+2),U.b.to([this.minerBuildingNasFrontMaterial],.5,{opacity:0,delay:e+2,onComplete:()=>{this.minerBuildingNasFront.visible=!1}}),U.b.to([this.minerBuildingNasBackMaterial],.5,{opacity:.1,delay:e+2}),U.b.to([this.minerBuildingDriveMaterials],.5,{opacity:.1,delay:e+2})}hideMiner(){this.minerBuildingDesk.visible=!1,this.meshScene.remove(this.minerBuildingDesk),U.b.set([this.minerBuildingDeskMaterials,this.minerBuildingNasFrontMaterial,this.minerBuildingNasBackMaterial],{opacity:0}),U.b.set([this.minerBuildingNasFrontMaterial,this.minerBuildingNasBackMaterial],{opacity:0}),U.b.set([this.minerBuildingDriveMaterials],{opacity:0})}hideDrives(e){U.b.to([this.minerBuildingNasFrontMaterial,this.minerBuildingNasBackMaterial],.25,{opacity:1,delay:e,onStart:()=>{this.minerBuildingNasFront.visible=!0}}),U.b.to([this.minerBuildingDriveMaterials],.25,{opacity:0,delay:e})}fadeServerBuildingWall(e,t=1){this.serverBuildingInside.visible=!0,this.meshScene.add(this.serverBuildingInside),U.b.to(this.serverBuildingOutsideMaterial,t,{opacity:.25,delay:e})}hideServerBuildingWall(e,t){this.serverBuildingInside.visible=!0,this.meshScene.add(this.serverBuildingInside),U.b.to(this.serverBuildingOutsideMaterial,t,{opacity:0,delay:e,onComplete:()=>{this.serverBuildingOutside.visible=!1}})}hideRacksSets(){this.serverBuildingInside.getObjectByName("RACKS_SET1").visible=!1,this.serverBuildingInside.getObjectByName("RACKS_SET2").visible=!1,this.serverBuildingInside.getObjectByName("RACKS_SET3").visible=!1,this.serverBuildingInside.getObjectByName("RACKS_SET4").visible=!1}showRacksSets(){this.serverBuildingInside.getObjectByName("RACKS_SET1").visible=!0,this.serverBuildingInside.getObjectByName("RACKS_SET2").visible=!0,this.serverBuildingInside.getObjectByName("RACKS_SET3").visible=!0,this.serverBuildingInside.getObjectByName("RACKS_SET4").visible=!0}showServerBuildingWall(e,t){U.b.to(this.serverBuildingOutsideMaterial,t,{opacity:1,delay:e,onStart:()=>{this.serverBuildingOutside.visible=!0},onComplete:()=>{this.serverBuildingInside.visible=!1}})}showServerRacks(e,t){U.b.to(this.cabinetFrontsMaterial,t,{delay:e,opacity:0,onStart:()=>{this.cabinetFronts.visible=!0,this.cabinetFrontsMaterial.transparent=!0,this.cabinetFrontsMaterial.depthTest=!1,this.showRacksSets(),ke.play("fw3")},onComplete:()=>{this.cabinetFronts.visible=!1,this.cabinetFrontsMaterial.transparent=!1,this.cabinetFrontsMaterial.depthTest=!0}})}hideServerRacks(e,t){U.b.to(this.cabinetFrontsMaterial,t,{delay:e,opacity:1,onStart:()=>{this.cabinetFronts.visible=!0,this.cabinetFrontsMaterial.transparent=!0,this.cabinetFrontsMaterial.depthTest=!1},onComplete:()=>{this.cabinetFrontsMaterial.transparent=!1,this.cabinetFrontsMaterial.depthTest=!0}}),U.b.to(this.serverDriveMaterial,t,{delay:e,opacity:0})}activateDrives(e=1,t=0){U.b.to([this.serverDriveMaterial.color,this.backTechMaterial.color],e,{r:.22,g:.56,b:.96,delay:t})}deactivateDrives(){U.b.set([this.serverDriveMaterial.color,this.backTechMaterial.color],{r:.098,g:.12,b:.16})}reset(){this.serverBuildingOutside.visible=!0,U.b.set(Ye.serverBuildingOutsideMaterial,{opacity:1}),U.b.set(Ye.minerBuildingOutsideMaterial,{opacity:1}),this.minerBuildingOutside.visible=!0,U.b.set([this.minerBuildingTopFloorMaterial,this.minerBuildingOutsideMaterial],{opacity:1}),this.hideMiner(),this.hideRacksSets(),this.deactivateDrives(),this.hideServerRacks(0,0)}animateMaterialColor(e,t,i){let s,a,n,o;i==x?(s="#ffffff",a="#999999",o=new h.Color(11250603),n=new h.Color(12961221)):(s="#56677c",a="#06080a",o=new h.Color(987928),n=new h.Color(1448994)),U.b.to(this,e,{cityBuildingColorTop:s,cityBuildingColorBottom:a,delay:t,onUpdate:()=>{this.updateCanvasTextureGradient()}}),U.b.to(this.landMass.material.color,e,{r:n.r,g:n.g,b:n.b,delay:t}),this.roads&&U.b.to(this.roads.material.color,e,{r:o.r,g:o.g,b:o.b,delay:t})}updateCanvasTextureGradient(){this.canvasTexture.needsUpdate=!0;const e=this.canvasTextureContext;e.clearRect(0,0,128,128);const t=e.createLinearGradient(0,0,0,128);t.addColorStop(0,this.cityBuildingColorBottom),t.addColorStop(this.cityBuildingColorStop,this.cityBuildingColorTop),t.addColorStop(1,this.cityBuildingColorTop),e.fillStyle=t,e.fillRect(0,0,128,128)}getSpriteNulls(){return this.spriteNulls.children}getCamera(e,t=10){const i=this.cameraTargetNulls.getObjectByName("cam"+(e+1)+"_target"),s=this.cameraSourceNulls.getObjectByName("cam"+(e+1)),a=i?g(i.position,i.parent).multiplyScalar(t):null;return{src:s?g(s.position,s.parent).multiplyScalar(t):null,target:a}}};var Xe=function(e,t,i,s){return new(i||(i=Promise))((function(a,n){function o(e){try{l(s.next(e))}catch(e){n(e)}}function r(e){try{l(s.throw(e))}catch(e){n(e)}}function l(e){var t;e.done?a(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(o,r)}l((s=s.apply(e,t||[])).next())}))};class Ke{constructor(){this.easeAmount=1,this.currentGlobeRotation=new h.Euler(0,0,0),this.targetGlobeRotation=new h.Euler(0,0,0),this.lastDragDistance=new h.Vector2(0,0),this.introIdleSpeed=0}init(e,t){this.camera=e,this.rootMesh=t,this.globeContainer=new h.Object3D,this.container=new h.Object3D,this.container.add(this.globeContainer)}load(){return Xe(this,void 0,void 0,(function*(){if(this.loaded)return;const e=l.getValue("assets3d");this.globeTexture=yield y(e.globe_texture_url),this.bumpMapTexture=yield y(e.globe_texture_bump_url),this.backGlowDarkTexture=yield y(e.globe_texture_back_glow_url),yield this.loadAtmosphere(),this.setupGlobeLayers(),this.loaded=!0}))}loadAtmosphere(){const e=l.getValue("assets3d");return new Promise((t,i)=>{(new De.a).load(e.globe_model_atmosphere_url,e=>{this.atmosphere=e.scene.getObjectByName("atmosphere").clone(!0),this.atmosphere.renderOrder=2,this.atmosphere.scale.set(122.5,122.5,122.5);const i=this.atmosphere.material,s=new h.MeshBasicMaterial({transparent:!0,opacity:.5,depthTest:!1,side:h.FrontSide,blending:h.AdditiveBlending,map:i.map});this.atmosphere.material=s,this.container.add(this.atmosphere),t()})})}setupGlobeLayers(){const e=new h.SpriteMaterial({map:this.backGlowDarkTexture,depthWrite:!1,opacity:0});this.backGlowDarkSprite=new h.Sprite(e),this.backGlowDarkSprite.scale.set(420,420,1),this.container.add(this.backGlowDarkSprite);const t=new h.SphereGeometry(_,80,80);this.sphereMaterial=new h.MeshStandardMaterial({map:this.globeTexture,color:16777215,bumpMap:this.bumpMapTexture,bumpScale:.65}),this.sphereMesh=new h.Mesh(t,this.sphereMaterial),this.globeContainer.add(this.sphereMesh)}render(){if(this.loaded){const e=1150-this.camera.position.z,t=420+e*(e/500)/25;this.backGlowDarkSprite.scale.x=this.backGlowDarkSprite.scale.y=t,this.atmosphere.lookAt(this.camera.position),this.targetGlobeRotation.y-=this.introIdleSpeed,this.currentGlobeRotation.x+=(this.targetGlobeRotation.x-this.currentGlobeRotation.x)/this.easeAmount,this.currentGlobeRotation.y+=(this.targetGlobeRotation.y-this.currentGlobeRotation.y)/this.easeAmount,this.currentGlobeRotation.z+=(this.targetGlobeRotation.z-this.currentGlobeRotation.z)/this.easeAmount,this.globeContainer.rotation.copy(this.currentGlobeRotation)}}get rotation(){return this.targetGlobeRotation}animateInBackGlowDark(e=1,t=0,i="Power1.easeInOut"){U.b.to(this.backGlowDarkSprite.material,e,{opacity:1,delay:t,ease:i,onStart:()=>{}})}animateOutBackGlowDark(e=1,t=0,i="Power1.easeInOut"){U.b.to(this.backGlowDarkSprite.material,e,{opacity:0,delay:t,ease:i,onComplete:()=>{}})}add(){this.container.parent||this.rootMesh.add(this.container)}remove(){this.container.parent&&this.rootMesh.remove(this.container)}startDrag(e,t){this.dragStartPoint=new h.Vector2(e,t)}drag(e,t){const i=new h.Vector2(this.dragStartPoint.x-e,this.dragStartPoint.y-t),s=this.lastDragDistance.sub(i);this.targetGlobeRotation.y+=s.x/1e3,this.targetGlobeRotation.x=d(this.targetGlobeRotation.x,-.25,.4),this.targetGlobeRotation.x+=s.y/1e3,this.lastDragDistance.copy(i)}stopDrag(e,t){this.lastDragDistance=new h.Vector2(0,0)}normalizeRotation(){this.targetGlobeRotation.y=this.targetGlobeRotation.y%(2*Math.PI),this.currentGlobeRotation.y=this.currentGlobeRotation.y%(2*Math.PI)}resetRotation(e){si.globe.rotation.set(e.x,e.y,e.z),this.currentGlobeRotation.set(e.x,e.y,e.z)}}class Ze extends o.a{constructor(){super(...arguments),this.duration=0,this.paused=!0}setData(e){this.data=e,this.duration=this.getActStartEndTime().end}start(){this.emit("actChangeEvent",{chapter:this.currentChapterIndex,act:this.currentActIndex}),this.startTimer()}pause(){this.paused=!0,this.gsapTimer&&this.gsapTimer.pause()}resume(){this.paused=!1,this.gsapTimer?this.gsapTimer.resume():this.start()}reset(){this.gsapTimer&&(this.gsapTimer.kill(),this.gsapTimer=null),this.currentChapterIndex=1,this.currentActIndex=1}get progress(){return this.getActStartEndTime(this.currentChapterIndex,this.currentActIndex).start}nextAct(){let e=this.currentActIndex+1,t=this.currentChapterIndex;e>this.data[t-1].acts.length&&(e=1,t=t>this.data.length-1?1:t+1),this.gotoAct(t,e)}gotoAct(e,t=0){const i=this.currentChapterIndex;this.currentChapterIndex=e,this.currentActIndex=t,this.emit("actChangeEvent",{chapter:e,act:t,lastChapter:i}),this.startTimer()}getChapterDuration(e){const t=this.data[e-1];let i=0;for(let e=0;e<t.acts.length;e++)i+=parseInt(t.acts[e].duration);return i}getActStartEndTime(e=this.data.length,t=null){let i,s,a=0;for(let n=0;n<e;n++){let o=t&&n==e-1?t:this.data[n].acts.length;for(let e=0;e<o;e++)i=this.data[n].acts[e],s=parseInt(i.duration),a+=s}return{start:a-s,end:a}}startTimer(){this.gsapTimer&&this.gsapTimer.kill();const e=this.data[this.currentChapterIndex-1].acts[this.currentActIndex-1].duration;this.gsapTimer=U.b.delayedCall(e,this.nextAct.bind(this))}}const $e=new h.Vector3(0,0,100),Je=new h.Vector3(0,0,500),Qe=new h.Vector3(0,0,750),et=new h.Vector3(0,0,400),tt=new h.Vector3(0,200,0),it=new h.Vector3(0,0,900);let st,at,nt,ot;function rt(){S===w?(st=new h.Vector3(.5,-3.05,0),at=new h.Vector3(.5,-3.65,0),nt=new h.Vector3(.5,-3.3,0),ot=new h.Vector3(-.1,-3.65,0)):(st=new h.Vector3(0,0,0),at=new h.Vector3(.71,-.28,0),nt=new h.Vector3(.6,.03,0),ot=new h.Vector3(.1,-.28,0))}function lt(){Ge.introAnimations.forEach((e,t)=>{!function e(t,i){const s=t.path,a=i,n=i+1.5+1.5;t.clientParticle.animateIn(1,a),t.minerParticles.animateIn(1,a),s.animateIn(1.5,a,.5),s.animateInSolid(1.5,a+1.5,.2,e=>{e.uniforms.reverseDirection.value=1}),s.pathFollowers.forEach((e,t)=>{e.forEach(e=>{e.animateIn(1.5,a+1.5+.2*t)})}),s.animateOut(1.5,n,.5,(i,a)=>{i.uniforms.reverseDirection.value=0,a==s.tubes.length-1&&(e(t,15*Math.random()+5),t.clientParticle.animateOut(1),t.minerParticles.animateOut(1))})}(e,15*Math.random())})}function ht(){Ge.introAnimations.forEach((e,t)=>{e.path.animateOut(1.5),e.path.pathFollowers.forEach(e=>{e.forEach(e=>{e.reset()})}),e.clientParticle.animateOut(),e.minerParticles.animateOut()})}function ct(){Ye.reset(),Ge.hideAll(),Lt(it),Ft(Qe,$e,0,0),U.b.set(si.globe.rotation,{y:0,x:0,z:0}),si.globe.resetRotation(st),Pt(0)}function ut(e,t){Lt(it),Ft(Qe,$e,0,0),Pt(0),It(3),xt(0,1.5),ke.play("ch1_music"),ke.play("gva1"),ke.play("cha");const i=Ge.ch1_remoteUserCNParticle;U.b.to(si.globe.rotation,4,{y:-2.6,x:.2,ease:"Power2.easeInOut"}),ke.play("gr1"),U.b.to($t.position,4,{z:575,ease:"Power1.easeInOut"}),Ge.ch1_cnNetworkParticles.animateIn(1.5,3),ke.play("be3",3.5),St(3,6,e.titles[0].title),U.b.to(si.globe.rotation,3,{y:-3.16,x:.4,delay:6,ease:"Power1.easeInOut"}),ke.play("gr2",6),i.animateInSprites(.5,7),i.animateIn(0,8),U.b.to($t.position,2,{z:575,ease:"Power1.easeInOut",delay:10}),St(7,10,e.titles[1].title)}function dt(e,t,i,s){It(0);const a=Ge.ch1_remoteUserCNParticle;Ge.ch1_remoteUserCNParticle.animateIn(0),Ge.ch1_cnNetworkParticles.animateIn(0),a.animateInSprites(0),U.b.set($t.position,{z:575}),U.b.set(si.globe.rotation,{y:-3.16,x:.4});Ge.ch1_remoteUserPaths.animateIn(1,0,.1),Ge.ch1_remoteUserPaths.animateOut(1.5,2,0,void 0,[4]),Ge.ch1_cnNetworkParticles.animateInSprites(.5,3.5),U.b.to(si.globe.rotation,4,{y:-3.04,delay:1,ease:"Power2.easeInOut"}),ke.play("gr3",1),a.getSprite().pulse(.5,7),Ge.ch1_remoteUserPaths.animateInSolid(3.5,3.5,0,e=>{e.uniforms.reverseDirection.value=1}),Ge.ch1_remoteUserPaths.getPathFollowers(4)[0].animateIn(3.5,3.5),Ge.ch1_remoteUserPaths.animateOut(1.5,7.5,null,()=>{a.animateOutSprites(.5)}),Ge.ch1_cnNetworkParticles.animateOutSprites(.5,7.5),St(0,7.5,e.titles[2].title)}function mt(e,t,i,s){It(0),U.b.set($t.position,{z:575}),U.b.set(si.globe.rotation,{y:-3.04,x:.4}),U.b.to($t.position,2,{z:650,ease:"Power2.easeInOut"}),ke.play("tw1"),St(1,5,e.titles[3].title),Ge.ch1_cnNetworkParticles.animateIn(0),Ge.ch1_cnNetworkParticles.animateOut(1,1),Ge.filecoinNetworkParticles.animateIn(2,1),ke.play("be5",1),U.b.to(si.globe.rotation,10,{y:-2.2,x:-.3,ease:"Power1.easeInOut"}),ke.play("gr4",1),U.b.to($t.position,3,{z:500,delay:7,ease:"Power1.easeInOut"}),ke.play("gr2",7),St(9,13,e.titles[4].title),Ge.ch1_remoteUserFCAfrica2d.animateIn(.5,9),Ge.ch1_remoteUserFCAfrica2d.animateOut(.5,11),Ge.ch1_remoteUserFCAfricaParticle.animateIn(1,9),Ge.ch1_fastTransferAfricaPaths.animateIn(1,9),Ge.ch1_fastTransferAfricaPaths.animateInSolid(1,10,0,e=>{e.uniforms.reverseDirection.value=1}),Ge.ch1_fastTransferAfricaPaths.getPathFollowers(0)[0].animateIn(1,10),Ge.ch1_fastTransferAfricaPaths.animateOut(1,11)}function pt(e,t,i,s){It(0),Ge.filecoinNetworkParticles.animateIn(0),U.b.set(si.globe.rotation,{y:-2.2,x:-.3}),U.b.set($t.position,{z:500}),U.b.to(si.globe.rotation,3,{x:nt.x,y:nt.y,ease:"Power2.easeInOut",delay:0}),ke.play("gr1"),U.b.to($t.position,1.5,{z:600,delay:0,ease:"Power1.easeInOut"}),U.b.to($t.position,1.5,{z:450,delay:1.5,ease:"Power1.easeInOut"}),St(3,7,e.titles[5].title);const a=Ge.ch1_remoteUserLocalTransferParticle.getSprite();Ge.ch1_remoteUserLocalTransferParticle.animateIn(0,3.5),a.animateIn(.5,3),a.animateOut(.5,5),Ge.ch1_localTransferPaths.animateIn(1,3),Ge.ch1_localTransferPaths.animateInSolid(1,4,0,e=>{e.uniforms.reverseDirection.value=1}),Ge.ch1_localTransferPaths.getPathFollowers(0)[0].animateIn(1,4),Ge.ch1_localTransferPaths.animateOut(1,5),Ge.filecoinNetworkParticles.animateOut(.5,7),Ge.ch1_remoteUserCNParticle.animateOut(.5,7),Ge.ch1_remoteUserLocalTransferParticle.animateOut(.5,7),U.b.to(si.globe.rotation,1.5,{x:at.x,y:at.y,delay:6,ease:"Power2.easeInOut"}),ke.play("gr2",5),ke.play("tw2",6)}function gt(e,t,i,s){It(0),U.b.set($t.position,{z:450}),At(new h.Vector3(0,0,340),0,1.5),Et(0,1.5),ke.pause("gva1"),ke.play("city",2);const a=Ye.getCamera(0);U.b.set($t.position,{delay:1.5,x:a.src.x,y:a.src.y,z:a.src.z}),U.b.set(si.lookAtPosition,{delay:1.5,x:a.target.x,y:a.target.y,z:a.target.z});const n=Ye.getCamera(2),o=Bt(n.src,n.target,1.5,21.5,"Power4.easeOut");U.b.to(o,2,{timeScale:.1,ease:"Power1.easeIn",delay:1.5}),U.b.to(o,2.5,{timeScale:2,ease:"Power1.easeInOut",delay:14}),St(3,7,e.titles[6].title),si.setHoverDistance(new h.Vector3(.08,.04,0),3,2),Ge.ch1_citySpotsParticles.animateIn(2,4.5),ke.play("be3",4.5),Ge.ch1_cityUserLong2d.animateIn(.5,3.5),Ge.ch1_cityMinerLongTransferParticles.animateIn(1.5,4.5),Ge.ch1_citySpotsParticles.animateOut(1,7.5),Ge.ch1_cityStorageLong2d.animateIn(.5,7.5),Ge.ch1_longCityTransferPaths.animateIn(0,9),Ge.ch1_longCityTransferPaths.getPathFollowers(0)[0].animateIn(2,10,0),Ge.ch1_longCityTransferPaths.material.uniforms.reverseDirection.value=0,Ge.ch1_longCityTransferPaths.animateInSolid(2,10,0,e=>{e.uniforms.reverseDirection.value=1,Ge.ch1_cityDocLong2d.animateIn(.5)}),Ge.ch1_longCityTransferPaths.animateOut(2,12),Ge.ch1_cityMinerLongTransferParticles.animateOut(0,12),Ge.ch1_cityStorageLong2d.animateOut(.5,12),Ge.ch1_cityDocLong2d.animateOut(.5,14),Ge.ch1_cityUserLong2d.animateOut(.5,14.2),St(17.5,22.5,e.titles[7].title),si.setHoverDistance(new h.Vector3(.03,.015,0),15.5,2),Ye.fadeMinerBuildingWall(17.5,.5),Ge.ch1_cityUserShort2d.animateIn(.5,17.5),Ge.ch1_cityStorageShort2d.animateIn(.5,18.5),Ge.ch1_shortCityTransferPaths.animateIn(1,18.5),Ge.ch1_shortCityTransferPaths.getPathFollowers(0)[0].animateIn(1,19.5,0),Ge.ch1_shortCityTransferPaths.material.uniforms.reverseDirection.value=0,Ge.ch1_shortCityTransferPaths.animateInSolid(1,19.5,0,e=>{e.uniforms.reverseDirection.value=1,Ge.ch1_cityDocShort2d.animateIn(.5)}),Ge.ch1_shortCityTransferPaths.animateOut(1,20.5),Ge.ch1_cityUserShort2d.animateOut(.5,20.5),Ge.ch1_cityDocShort2d.animateOut(.5,21.5),Ge.ch1_cityStorageShort2d.animateOut(.5,21.75)}function Dt(e,t,i,s){It(0);const a=Ye.getCamera(2);At($e),Bt(a.src,a.target),ke.play("tw3",.5);const n=Ye.getCamera(5);U.b.to($t.position,5,{x:n.src.x,y:n.src.y,z:n.src.z,ease:"Power2.easeInOut"}),U.b.to(si.lookAtPosition,5,{x:n.target.x,y:n.target.y,z:n.target.z,ease:"Power2.easeInOut",onStart:()=>{si.setHoverDistance(new h.Vector3(0,0,0))},onComplete:()=>{si.setHoverDistance(new h.Vector3(5e-4,5e-4,0),0,2)}}),Ye.hideMinerBuildingFloors(3,.25),ke.play("fw1",2.7),Ye.showMiner(3),ke.play("iamb",3),Ge.ch1_minerTransferPaths.animateIn(1,4),Ge.ch1_minerTransferPaths.getPathFollowers(0)[0].animateIn(2,4,2),Ge.ch1_coinSpin2d.animateIn(.5,6),Ge.ch1_coinSpritesheet.play(6,.5,7),Ge.ch1_coinSpin2d.animateOut(.5,10),St(4,9,e.titles[8].title),Ge.ch1_minerTransferPaths.animateOut(1,10),Ye.hideDrives(10.5),ke.play("fw2",10.5);let o=Ye.getCamera(5).src;o.y+=1,o.z+=2,Lt(o,n.target,11,1.5),ke.play("gr3",10.5),ke.fadeOut("iamb",10.5),Et(11,1.5),si.setHoverDistance(new h.Vector3(0,0,0),12.5)}function yt(e,t,i,s){At($e),It(0),kt(0,0),si.toColor(1,0,p(Ut)),ke.play("ch2_music"),ke.play("cha"),ke.play("city"),ke.play("tw2");const a=Ye.getCamera(3);U.b.set($t.position,{x:a.src.x,y:300,z:a.src.z}),U.b.set(si.lookAtPosition,{x:a.target.x,y:a.target.y,z:a.target.z}),Pt(0,1),Bt(new h.Vector3(a.src.x+100,a.src.y,a.src.z+100),a.target,1,6,"Power1.easeOut"),_t(0,1),xt(1,1.5),St(2,6,e.titles[0].title),si.setHoverDistance(new h.Vector3(-.04,.02,.04),1,1),Ge.ch2_cityPackageUser2d.animateIn(.5,3),Ge.ch2_cityPackageDoc2d.animateIn(.5,6),ke.play("tw1",6),ke.play("fs1",6),U.b.to(Ge.ch2_cityPackageDoc2d,3,{delay:5.5,ease:"Power1.easeInOut",pinHeight:600});Lt(new h.Vector3(a.src.x,a.src.y+200,a.src.z),new h.Vector3(a.target.x,a.target.y+200,a.target.z),6,2),Ge.ch2_cityPackageUser2d.animateOut(0,8),Ge.ch2_cityPackageDoc2d.animateOut(0,8),si.setHoverDistance(new h.Vector3(0,0,0),6),kt(6.5,1.5)}function bt(e,t,i,s){kt(0,0),xt(0,1.5),U.b.set(si.globe.rotation,{y:ot.y,x:ot.x}),U.b.set($t.position,{x:0,y:0,z:250}),U.b.set(si.lookAtPosition,{x:0,y:250,z:0}),Ft(et,tt,0,3),Pt(0),ke.pause("city"),ke.play("gva1"),ke.play("gr1"),St(1,4,e.titles[1].title),Ge.ch2_packageUserParticles.animateIn(1,1),Ge.ch2_globePackageDoc2d.animateIn(1,1),ke.play("fs2",1),Ge.ch2_globeClient2d.animateIn(1,1),U.b.to(Ge.ch2_globePackageDoc2d,2,{ease:"Power2.easeOut",pinHeight:250,delay:1}),U.b.to($t.position,2,{z:320,y:80,delay:4,ease:"Power1.easeInOut"}),U.b.to(si.lookAtPosition,2,{y:155,delay:4,ease:"Power1.easeInOut"}),ke.play("gr2",4),St(6,9,e.titles[2].title),Ge.ch2_packageMinerParticles.animateIn(1,6,!0),ke.play("be3",6),Ge.ch2_packageChosenMinerParticles.animateIn(1,6),Ge.ch2_packageChosenMinerParticles.getSprite("text_0").animateIn(1,6),Ge.ch2_packageChosenMinerParticles.getSprite("text_1").animateIn(1,6),Ge.ch2_packageMinerPaths.animateIn(2,6,.1),Ge.ch2_packageMinerPaths.animateOut(2,9),ke.play("ta",11),Ge.ch2_packageMinerParticles.animateOut(1,11,!0),Ge.ch2_packageChosenMinerParticles.getSprite("miner_1").animateIn(1,12),Ge.ch2_packageChosenMinerParticles.getSprite("miner_0").animateIn(1,12);const a=S===w?.03:.1;U.b.to(si.globe.rotation,2,{y:ot.y+a,ease:"Power2.easeInOut",delay:12}),ke.play("gr3",12),Ge.ch2_packageChosenMinerPaths.animateIn(2,12),Ge.ch2_globePackageDoc2d.animateOut(.5,12),U.b.to(Ge.ch2_globePackageDoc2d,1,{ease:"Power1.easeInOut",pinHeight:60,delay:11.5}),ke.play("fs1",11.5),ke.play("pw1",12),St(11,14,e.titles[3].title),Ge.ch2_packageChosenMinerPaths.getPathFollowers(0)[0].animateIn(1,14),Ge.ch2_packageChosenMinerPaths.getPathFollowers(1)[0].animateIn(1,14),Ge.ch2_packageChosenMinerPaths.animateInSolid(1,14,0,()=>{Ge.ch2_packageChosenMinerPaths.material.uniforms.reverseDirection.value=1}),Ge.ch2_packageChosenMinerPaths.animateOut(2,15),ke.play("lw1",16),Ge.ch2_packageChosenMinerParticles.animateOut(1,17,!0),Ge.ch2_packageUserParticles.animateOut(1,17,!0)}function vt(e,t,i,s){Pt(0),U.b.set($t.position,{z:320,y:80}),U.b.set(si.lookAtPosition,{y:155}),At(new h.Vector3(0,0,300),0,1.5),ke.play("gr2"),U.b.to($t.position,2,{z:250,delay:0,ease:"Power1.easeInOut"}),U.b.to(si.lookAtPosition,2,{y:150,delay:0,ease:"Power1.easeInOut"}),U.b.to(si.globe.rotation,2,{x:.2,delay:0,ease:"Power1.easeInOut"}),kt(0,1.5)}function ft(e,t,i,s){const a=Ye.getCamera(4);At(Je,0,0),It(0),xt(0,1.5),ke.play("ch3_music"),ke.play("cha"),ke.pause("gva1"),ke.play("city");Bt(new h.Vector3(a.src.x,a.src.y,a.src.z),a.target,0,0),si.setHoverDistance(new h.Vector3(.02,.01,0));const n=Ge.ch3_cityMinerParticles.getSprite(".icon-miner"),o=Ge.ch3_cityMinerParticles.getSprite(".icon-doc");n.animateIn(),Ge.ch3_minerTransferPathIn.animateIn(),Ge.ch3_minerTransferPathIn.getPathFollowers(0)[0].animateIn(1,1),Ge.ch3_minerTransferPathIn.animateInSolid(1,1,0,e=>{o.animateIn(),e.uniforms.reverseDirection.value=1}),Ge.ch3_minerTransferPathIn.animateOut(1,2),o.animateOut(.5,3.8),n.animateOut(.5,4),St(1,5,e.titles[0].title);const r=Ye.getCamera(7),l=r.src,c=r.target,u=U.b.to($t.position,7.5,{x:l.x,y:l.y,z:l.z,ease:"Power4.easeOut"}),d=U.b.to(si.lookAtPosition,7.5,{x:c.x,y:c.y,z:c.z,ease:"Power4.easeOut"});U.b.set([u,d],{timeScale:.1}),U.b.to([u,d],3.5,{timeScale:2,ease:"Power2.easeInOut",delay:3}),si.setHoverDistance(new h.Vector3(0,0,0),5),U.b.to(si,1,{hoverEase:1,delay:5}),ke.play("gr3",3),ke.play("tw3",4),ke.play("iamb",5),Ye.fadeServerBuildingWall(6,.2),Ye.hideServerBuildingWall(6.2,.1),si.setHoverDistance(new h.Vector3(3e-4,0,3e-4),8.5,2),U.b.set(si,{hoverEase:ii,delay:8.5}),St(7.5,11,e.titles[1].title),Ye.showServerRacks(7.5,1);const m=Ge.ch3_serverTransferPathIn.material.uniforms,p=Ge.ch3_serverTransferPathOut.material.uniforms;Ge.ch3_serverTransferPathIn.animateIn(1,8.5),Ge.ch3_serverTransferPathIn.animateInSolid(1,8.5),Ge.ch3_serverTransferPathOut.animateIn(1,9.5),Ge.ch3_serverTransferPathOut.animateInSolid(1,9.5),U.b.set(m.globalAlpha,{value:1,delay:9.5}),U.b.set(p.globalAlpha,{value:.2,delay:9.5}),U.b.set(p.color,{value:new h.Vector4(...B),delay:9.5}),ke.play("sl3",9),Ye.activateDrives(1,9.5);const g=Ge.ch3_spritesheetParticles.getSprite(".icon-question-in"),D=Ge.ch3_spritesheetParticles.getSprite(".icon-question-to-check"),y=Ge.ch3_spritesheetParticles.getSprite(".icon-check-to-block"),b=Ge.ch3_spritesheetParticles.getSprite(".icon-block-out"),v=Ge.ch3_spritesheetParticles.getSprite(".icon-block-approved"),f=Ge.ch3_spritesheetParticles.getSprite(".icon-block-declined"),w=Ge.ch3_spritesheetParticles.getSprite(".icon-coin-spin");St(12,16,e.titles[2].title),Ge.ch3_serverTransferPathIn.getPathFollowers(0)[0].animateIn(2,12,0,()=>{g.animateIn(0,0),Ge.ch3_questionInSpritesheet.play(),ke.play("qin"),g.animateOut(0,1.5),D.animateIn(0,1.5),Ge.ch3_questionToCheckSpritesheet.play(1.5),ke.play("q2c",1.5),St(3,7,e.titles[3].title),D.animateOut(0,4),y.animateIn(0,4),Ge.ch3_checkToBlockSpritesheet.play(4),ke.play("c2b",4),y.animateOut(0,6),ke.play("fw2",6),b.animateIn(0,6),Ge.ch3_blockOutSpritesheet.play(6,null,null,()=>{b.animateOut(0,0),U.b.set(m.globalAlpha,{value:.2}),U.b.set(p.globalAlpha,{value:1}),Ge.ch3_serverTransferPathOut.getPathFollowers(0)[0].animateIn(2),ke.play("sl2")}),St(8,12,e.titles[4].title),U.b.set(m.globalAlpha,{value:1,delay:8}),U.b.set(p.globalAlpha,{value:.2,delay:8}),Ge.ch3_serverTransferPathIn.getPathFollowers(0)[0].animateIn(2,8),v.animateIn(0,9),ke.play("bcin",10),Ge.ch3_blockApprovedSpritesheet.play(10,null,null,()=>{v.animateOut(0),ke.play("fw2"),U.b.set(m.globalAlpha,{value:.2}),U.b.set(p.globalAlpha,{value:1}),Ge.ch3_serverTransferPathOut.getPathFollowers(0)[0].animateIn(2,0),ke.play("sl2")}),St(13,17,e.titles[5].title),U.b.set(m.globalAlpha,{value:1,delay:13}),U.b.set(p.globalAlpha,{value:.2,delay:13}),Ge.ch3_serverTransferPathIn.getPathFollowers(0)[0].animateIn(2,13),ke.play("sl3",13),f.animateIn(0,14),ke.play("fw2",14),ke.play("redx",15),Ge.ch3_blockDeclinedSpritesheet.play(15,null,null,()=>{f.animateOut(0),ke.play("fw2")}),U.b.set(p.globalAlpha,{value:1,delay:16}),U.b.to(p.color.value,.7,{x:L[0],y:L[1],z:L[2],delay:15,yoyo:!0,repeat:3,ease:"none"}),U.b.to(p.color.value,.7,{x:B[0],y:B[1],z:B[2],delay:17,ease:"none"}),St(18,22,e.titles[6].title),w.animateIn(.5,19),Ge.ch3_coinSpritesheet.play(19,1,6),Ge.ch3_serverTransferPathIn.getPathFollowers(0)[0].animateIn(2,19,2),Ge.ch3_serverTransferPathOut.getPathFollowers(0)[0].animateIn(2,19,2),ke.play("sl3",20),w.animateOut(.5,25),si.setHoverDistance(new h.Vector3(0,0,0),25),Ge.ch3_serverTransferPathIn.animateOut(1,25),Ge.ch3_serverTransferPathOut.animateOut(1,25),Ye.hideServerRacks(26,.5),Ye.showServerBuildingWall(26.5,1),Bt(a.src,a.target,26,4),ke.play("tw2",26),ke.fadeOut("iamb",26),ke.play("city",27);const t=Ye.getCamera(6);Bt(t.src,t.target,30,5),ke.play("gr3",30),Pt(2,30)})}function wt(e,t,i,s){ke.play("ch4_music"),ke.play("cha"),ke.play("city");const a=Ge.ch4_minerPaymentPaths,n=Ge.ch4_minerPaymentPaths_reverse,o=Ge.ch4_clientParticles,r=Ge.ch4_minerParticles,l=Ge.ch4_chosenMinerParticles,c=o.getSprite(".icon-client"),u=o.getSprite(".icon-request"),d=o.getSprite(".icon-doc-black"),m=l.getSprite(".icon-coin-spin"),p=l.getSprite(".icon-miner"),g=Ge.ch4_coinSpritesheet;At(Je,0,0),Pt(0),xt(0,0);const D=Ye.getCamera(6);Bt(D.src,D.target),St(0,4,e.titles[0].title),si.setHoverDistance(new h.Vector3(-.04,.04,-.04),2,3),o.animateIn(1,.5),c.animateIn(.5,.5),c.animateOut(.5,4),u.animateIn(1,4),U.b.to(u,.7,{pinHeight:200,ease:"Power1.easeInOut",delay:4}),l.animateIn(1,5),r.animateIn(1,5),ke.play("be3",5),U.b.to(u,.7,{pinHeight:50,ease:"Power1.easeInOut",delay:7}),u.animateOut(1,7),c.animateIn(1,8),p.animateIn(1,8),St(7,11,e.titles[1].title);const y=new h.Vector3(414.49,100.8,-80.61),b=D.target.clone();b.x-=90,b.y-=30,Bt(y,b,0,20),r.animateOut(.5,8),n.animateIn(2,8),n.animateInSolid(2,10,0,e=>{e.uniforms.reverseDirection.value=1}),n.getPathFollowers(0)[0].animateIn(2,10),St(12,18,e.titles[2].title),m.animateIn(.5,12),g.play(12,1,0),m.animateOut(.5,13),n.animateOut(1,13),a.animateIn(2,13.5),a.animateInSolid(2,15.5,0,e=>{e.uniforms.reverseDirection.value=1,d.animateIn(.5)}),a.getPathFollowers(0)[0].animateIn(2,15.5),a.animateOut(2,17.5),l.animateOut(.5,17.5),d.animateOut(.5,19),o.animateOut(.5,19.5),c.animateOut(.5,19.5),p.animateOut(.5,19.5),si.setHoverDistance(new h.Vector3(0,0,0),20);Lt(new h.Vector3(D.src.x,D.src.y+200,D.src.z),D.target,20.5,1.5),ke.play("tw1",20.5),kt(20.5,1.5)}function Ct(e,t,i,s){Lt($e,$e,0,0),kt(0,0),xt(0,3),U.b.set(si.globe.rotation,{y:at.y,x:at.x}),U.b.set($t.position,{x:0,y:0,z:500}),Ft(new h.Vector3(0,0,800),$e,0,3),ke.play("gva1"),ke.play("gr1"),Pt(0),St(4,9,e.titles[3].title);const a=S===w?new h.Vector2(.21,.72):new h.Vector2(-.21,-.72),n=S===w?new h.Vector2(0,2.5):new h.Vector2(0,-1.72);U.b.to(si.globe.rotation,3,{x:at.x+a.x,y:at.y+a.y,ease:"Power2.easeInOut"}),U.b.to(si.globe.rotation,33,{y:at.y+n.y,ease:"none",delay:2.8});Ge.ch4_newyorkParticles.animateIn(1,1),ke.play("be3",1),Ge.ch4_miners1Particles.animateIn(2,3),Ge.ch4_globePaths1.animateIn(2,3,.2),Ge.ch4_globePaths1.animateInSolid(2,5,.2,(e,t)=>{e.uniforms.reverseDirection.value=1});for(let e=0;e<Ge.ch4_globePaths1.tubes.length;e++)Ge.ch4_globePaths1.getPathFollowers(e)[0].animateIn(2,5+.2*e);Ge.ch4_globePaths1.animateOut(2,7,.2),St(10,15,e.titles[4].title),U.b.to(si.globe.rotation,2,{x:-.2,ease:"Power2.easeInOut",delay:8}),U.b.to($t.position,2,{x:0,y:200,z:400,ease:"Power2.easeInOut",delay:8}),U.b.to(si.lookAtPosition,2,{x:0,y:170,z:0,ease:"Power2.easeInOut",delay:8}),ke.play("gr3",8);Ge.ch4_miners2Particles.animateIn(3,10),ke.play("be5",10),Ge.ch4_globePaths2.animateIn(2,10,.2),Ge.ch4_globePaths2.animateInSolid(2,12,.2,e=>{e.uniforms.reverseDirection.value=1});for(let e=0;e<Ge.ch4_globePaths2.tubes.length;e++)Ge.ch4_globePaths2.getPathFollowers(e)[0].animateIn(2,12+.2*e);Ge.ch4_globePaths2.animateOut(2,14,.2),St(16,21,e.titles[5].title),Ge.ch4_newyorkParticles.animateOut(1,16),U.b.to(si.globe.rotation,2,{x:-.3,ease:"Power2.easeInOut",delay:16}),U.b.to($t.position,2,{x:0,y:200,z:300,ease:"Power2.easeInOut",delay:16}),U.b.to(si.lookAtPosition,2,{x:0,y:180,z:0,ease:"Power2.easeInOut",delay:16}),ke.play("gr2",16),ke.play("gr4",20),Ge.ch4_miners3Particles.animateIn(2,16),Ge.ch4_globePaths3.animateIn(2,17,.2),Ge.ch4_globePaths3.animateInSolid(2,19,.2,e=>{e.uniforms.reverseDirection.value=1}),Ge.ch4_globePaths3.animateOut(1,21,.2),St(22,27,e.titles[6].title),Ge.ch4_clients1Particles.animateIn(3,18),Ge.ch4_globePaths4.animateIn(2,19,.2),Ge.ch4_globePaths4.animateInSolid(2,21,.2,e=>{e.uniforms.reverseDirection.value=1}),Ge.ch4_globePaths4.animateOut(1,23,.2),Ge.ch4_miners4Particles.animateIn(3,19),Ge.ch4_clients2Particles.animateIn(3,20),Ge.ch4_globePaths5.animateIn(2,21,.2),Ge.ch4_globePaths5.animateInSolid(2,23,.2,e=>{e.uniforms.reverseDirection.value=1}),Ge.ch4_globePaths5.animateOut(1,25,.2),Ge.ch4_clients3Particles.animateIn(3,24),Ge.ch4_globePaths6.animateIn(2,23,.2),Ge.ch4_globePaths6.animateInSolid(2,25,.2,e=>{e.uniforms.reverseDirection.value=1}),Ge.ch4_globePaths6.animateOut(1,27,.2),U.b.to($t.position,2,{x:0,y:0,z:700,ease:"Power2.easeInOut",delay:27}),U.b.to(si.lookAtPosition,2,{x:0,y:0,z:0,ease:"Power2.easeInOut",delay:27}),U.b.to(si.globe.rotation,2,{x:.7,ease:"Power2.easeInOut",delay:27}),ke.play("gr3",27),St(28,33,e.titles[7].title),Ge.ch4_newyorkParticles.animateOut(1,28),Ge.ch4_miners1Particles.animateOut(1,28),Ge.ch4_miners2Particles.animateOut(1,28),Ge.ch4_miners3Particles.animateOut(1,28),Ge.ch4_miners4Particles.animateOut(1,28),Ge.ch4_clients1Particles.animateOut(1,28),Ge.ch4_clients2Particles.animateOut(1,28),Ge.ch4_clients3Particles.animateOut(1,28),Ge.filecoinNetworkParticles.animateIn(1,28),ke.play("be5",28),Ge.filecoinNetworkParticles.animateOut(1,33),ke.play("gr1",33),kt(34,1.5)}function St(e,t,i){const s=l.getValue("current_section");U.b.to(s.titleExperienceEl,.6,{delay:e,opacity:1,onStart:()=>{s.titleExperienceEl.innerText=i}}),U.b.to(s.titleExperienceEl,.6,{delay:t,opacity:0})}function _t(e=2,t=0,i="Power1.easeInOut"){const s=l.getValue("timeOfDay"),a=l.getValue("globe_or_city");let n;if(s==x){n=new h.Color(Ut),U.b.to([Kt.background,Kt.fog.color],e,{r:n.r,g:n.g,b:n.b,delay:t,ease:i}),n=new h.Color(a==F?jt:Gt),U.b.to(Qt.color,e,{r:n.r,g:n.g,b:n.b,delay:t,ease:i}),n=new h.Color(Wt);const s=a==F?Xt:Yt;U.b.to(ei,e,{intensity:s,delay:t,ease:i}),U.b.to(ei.color,e,{r:n.r,g:n.g,b:n.b,delay:t,ease:i}),U.b.to(ei.position,e,{x:-1e3,y:1e3,z:1e3,delay:t,ease:i}),U.b.to(si.globe.atmosphere.material,e,{opacity:.3})}else{n=new h.Color(Ot),U.b.to([Kt.background,Kt.fog.color],e,{r:n.r,g:n.g,b:n.b,delay:t,ease:i}),n=new h.Color(a==F?qt:Nt),U.b.to(Qt.color,e,{r:n.r,g:n.g,b:n.b,delay:t,ease:i}),n=new h.Color(a==F?Vt:Ht);const s=new h.Vector3(1e3,1e3,1e3),o=a==F?zt:Rt;U.b.to(ei,e,{intensity:o,delay:t,ease:i}),U.b.to(ei.color,e,{r:n.r,g:n.g,b:n.b,delay:t,ease:i}),U.b.to(ei.position,e,{x:s.x,y:s.y,z:s.z,delay:t,ease:i}),U.b.to(si.globe.atmosphere.material,e,{opacity:.8})}}function Pt(e=2,t=0){const i=l.getValue("current_section");l.setValue("timeOfDay",x);const s="Power1.easeInOut";U.b.delayedCall(t,()=>{i.updateDOMColors()});let a=new h.Color(16777215);U.b.to([si.globe.sphereMaterial.color],e,{r:a.r,g:a.g,b:a.b,delay:t,ease:s}),si.globe.animateOutBackGlowDark(e/2,t,s),_t(e,t,s),Ye.animateMaterialColor(e,t,x)}function It(e=2,t=0){const i=l.getValue("current_section");l.setValue("timeOfDay","night");const s="Power1.easeInOut";U.b.delayedCall(t,()=>{i.updateDOMColors()});let a=new h.Color(11184810);U.b.to([si.globe.sphereMaterial.color],e,{r:a.r,g:a.g,b:a.b,delay:t,ease:s});const n=0==e?0:t+1;si.globe.animateInBackGlowDark(e/2,n,s),_t(e,t),Ye.animateMaterialColor(e,t,"night")}function Et(e=0,t=1.5){kt(e,t),xt(e+t,t)}function kt(e=0,t=1.5){si.fadeToColor(t,e,p(l.getValue("timeOfDay")==x?Ut:Ot))}function xt(e=0,t=1.5){si.fadeFromColor(t,e)}function Ft(e,t=new h.Vector3(0,0,0),i=0,s=0){let a=l.getValue("globe_or_city")!=F;l.setValue("globe_or_city",F),U.b.to($t.position,s,{delay:i,x:e.x,y:e.y,z:e.z,ease:"Power1.easeInOut",onStart:()=>{a&&_t(0),Kt.fog.far=-100,si.globe.add()}}),U.b.to(si.lookAtPosition,s,{x:t.x,y:t.y,z:t.z,delay:i,ease:"Power1.easeInOut"})}function At(e,t=0,i=0){U.b.to($t.position,i,{delay:t,z:e.z,ease:"Power1.easeInOut",onComplete:()=>{si.globe.remove()}})}function Bt(e,t,i=0,s=0,a="Power1.easeInOut"){let n="city"!=l.getValue("globe_or_city");return l.setValue("globe_or_city","city"),[U.b.to($t.position,s,{delay:i,x:e.x,y:e.y,z:e.z,ease:a,onStart:()=>{n&&_t(0),Kt.fog.far=600,Ye.add()}}),U.b.to(si.lookAtPosition,s,{x:t.x,y:t.y,z:t.z,delay:i,ease:a})]}function Lt(e,t=new h.Vector3(0,0,0),i=0,s=0){U.b.to($t.position,s,{delay:i,x:e.x,y:e.y,z:e.z,ease:"Power1.easeInOut",onComplete:()=>{Ye.remove()}}),U.b.to(si.lookAtPosition,s,{x:t.x,y:t.y,z:t.z,delay:i,ease:"Power1.easeInOut"})}var Mt=i(5),Tt=function(e,t,i,s){return new(i||(i=Promise))((function(a,n){function o(e){try{l(s.next(e))}catch(e){n(e)}}function r(e){try{l(s.throw(e))}catch(e){n(e)}}function l(e){var t;e.done?a(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(o,r)}l((s=s.apply(e,t||[])).next())}))};const Ot=461582,Nt=6710886,qt=394758,Ht=16777215,Vt=16777215,Rt=.8,zt=1,Ut=16382457,Gt=15658734,jt=15658734,Wt=16711422,Yt=.4,Xt=.2,Kt=new h.Scene,Zt=new h.Mesh(new h.Geometry),$t=new h.PerspectiveCamera(35,1,.1,3e3),Jt=new h.Object3D,Qt=new h.AmbientLight(jt),ei=new h.PointLight(Wt,Xt),ti=new Ze,ii=60;const si=new class{constructor(){this.hoverLookAt=new h.Vector3(0,0,0),this.lookAtPosition=new h.Vector3(0,0,0),this.hoverEase=ii,this.globe=new Ke,this.mouseX=0,this.mouseY=0,this.hoverDistance=new h.Vector3(0,0,0),this.hoverLookAtDistance=new h.Vector3(0,0,0),this.onMouseMove=e=>{this.mouseX=e.clientX-R.halfWidth,this.mouseY=e.clientY-R.halfHeight},this.layout=()=>{this.resizeGlobeStill(),this.renderer&&(this.dpr=R.width<=600?2:1,this.renderer.setPixelRatio(this.dpr),$t.aspect=R.width/R.height,$t.updateProjectionMatrix(),this.renderer.setSize(R.width,R.height),this.render())},this.renderLoop=()=>{this.render(),this._myReq=requestAnimationFrame(this.renderLoop)},this.resume=()=>{this.globe.normalizeRotation(),U.b.to(this.globe,1,{introIdleSpeed:0,easeAmount:1,overwrite:!0}),this.lastRootExport&&this.lastRootExport.play(),this._myReq||this.renderLoop()},this.element=document.querySelector(".hero3d"),this.iconsContainer=this.element.querySelector(".icons"),this.fadePlane=this.element.querySelector(".fade-plane"),this.webglContainer=this.element.querySelector(".webgl"),this.contentContainer=this.element.querySelector(".content"),this.globeStill=this.element.querySelector(".globe-still")}init(){if(!this.initialized){const e=document.querySelector("main");l.setValue("chapters3d",JSON.parse(e.dataset.chapters));const t={};Array.from(e.querySelectorAll(".data-asset3d")).forEach(e=>{const i=e;t[i.dataset.key]=i.dataset.src}),l.setValue("assets3d",t),l.setValue("timeOfDay",x),Mt.a.isWebGLAvailable()&&(h.Cache.enabled=!0,rt(),ti.setData(l.getValue("chapters3d")),this.globe.init($t,Zt),this.setupEnvironment(),this.initialized=!0)}this.setupEvents()}setupEnvironment(){Kt.add(Zt),this.renderer=new h.WebGLRenderer({antialias:!0}),this.webglContainer.appendChild(this.renderer.domElement),this.layout(),this.renderer.setPixelRatio(this.dpr),Kt.fog=new h.Fog(Ut,100,-100),Kt.background=new h.Color(this.bgColor),Kt.add(Qt),Jt.add($t),Kt.add(Jt),Kt.add(ei)}setupEvents(){H.on(V,this.layout),document.addEventListener("mousemove",this.onMouseMove)}reset(){Ge.hideAll(),U.b.set(this.globeStill,{scale:.95,opacity:.01}),U.b.set(this.webglContainer,{opacity:0}),ti.reset()}loadImage(){const e=l.getValue("assets3d");return this.globeStill.dataset.src=e.globe_still_url,ze.loadImage(this.globeStill)}load(){return Tt(this,void 0,void 0,(function*(){this.initialized&&(this.loaded||(yield Me.load(),yield this.globe.load(),yield Ye.load(),yield Ge.load(),yield ke.load(),this.loaded=!0,Ge.init()),this.resetHoverEase(),this.animateInWebgl())}))}animateIn(e=0,t=1){U.b.to(this.globeStill,t,{scale:1,delay:e,opacity:1,ease:"Power2.easeInOut"})}animateInWebgl(){this.loaded&&(this._myReq||this.renderLoop(),this.layout(),ct(),U.b.to(this.globeStill,1,{opacity:0,ease:"Power1.easeIn"}),U.b.to(this.webglContainer,1,{opacity:1,onComplete:()=>{U.b.to(this.globe,1,{introIdleSpeed:-.001,easeAmount:15,ease:"Power1.easeIn"}),lt()}}))}animateOut(){return ht(),new Promise(e=>{U.a.to(this.element,.5,{opacity:0,onComplete:()=>{this.hide(),e()}})})}show(){this.element.style.display="block",this.element.style.opacity="1",this.layout()}resizeGlobeStill(){let e=R.height,t=e*(16/9);this.globeStill.style.height=e+"px",this.globeStill.style.width=t+"px",this.globeStill.style.left=-(t-R.width)/2+"px"}resetHoverEase(){this.hoverEase=1,this.setHoverLookAtDistance(new h.Vector3(0,0,0)),this.setHoverDistance(new h.Vector3(0,0,0)),this.render(),this.hoverEase=ii}onChapterChange(){this.resetHoverEase(),Ye.reset(),U.b.exportRoot({},!0).kill(),Ge.hideAll()}hide(){this.element.style.display="none"}render(){Jt.position.x+=(-this.mouseX*this.hoverDistance.x-Jt.position.x)/this.hoverEase,Jt.position.z+=(-this.mouseX*this.hoverDistance.z-Jt.position.z)/this.hoverEase,Jt.position.y+=(this.mouseY*this.hoverDistance.y-Jt.position.y)/this.hoverEase,$t.lookAt(this.lookAtPosition.clone()),this.globe.render(),this.renderer.render(Kt,$t),Ge.render()}pause(){this.lastRootExport=U.b.exportRoot({},!0),this.lastRootExport.pause(),cancelAnimationFrame(this._myReq),this._myReq=null}toColor(e,t=0,i="#000000"){U.b.to(this.fadePlane,e,{delay:t,backgroundColor:i})}fadeToColor(e,t=0,i="#000000"){U.b.set(this.fadePlane,{backgroundColor:i,delay:t}),U.b.to(this.fadePlane,e,{opacity:1,delay:t,ease:"Power2.easeInOut"})}fadeFromColor(e,t=0){U.b.to(this.fadePlane,e,{opacity:0,delay:t,ease:"Power2.easeInOut"})}setHoverDistance(e,t=0,i=0){U.b.to(this.hoverDistance,i,{x:e.x,y:e.y,z:e.z,delay:t,ease:"Power2.easeInOut"})}setHoverLookAtDistance(e,t=0,i=0){U.b.to(this.hoverLookAtDistance,i,{x:e.x,y:e.y,z:e.z,delay:t,ease:"Power2.easeInOut"})}destroy(){H.off(V,this.layout),document.removeEventListener("mousemove",this.onMouseMove)}};class ai extends o.a{constructor(e){super(),this.paused=!0,this.playButtonHandler=e=>{this.paused?this.emit("event_play",{}):this.emit("event_pause",{})},this.chapterMenuClick=e=>{const t=e.currentTarget,i=Array.from(t.parentNode.children).indexOf(t)+1;this.emit("event_chapter_switch",{chapterIndex:i})},this.previousChapterButtonHandler=e=>{this.emit("event_chapter_switch",{chapterIndex:ti.currentChapterIndex-1})},this.nextChapterButtonHandler=e=>{this.emit("event_chapter_switch",{chapterIndex:ti.currentChapterIndex+1})},this.sfxToggleHandler=()=>{ke.sfxMuted=!ke.sfxMuted},this.musicToggleHandler=()=>{ke.musicMuted=!ke.musicMuted},this.audioControllerSoundToggleHandler=()=>{ke.sfxMuted?this.sfxToggle.classList.remove("active"):this.sfxToggle.classList.add("active"),ke.musicMuted?this.musicToggle.classList.remove("active"):this.musicToggle.classList.add("active")},this.element=e,this.progressBar=this.element.querySelector(".progress-bar"),this.timerRing=this.element.querySelector(".timer-ring"),this.timerRingCircle=this.element.querySelector(".timer-ring circle"),this.playButton=this.element.querySelector(".play-pause"),this.playIcon=this.playButton.querySelector(".icon-play"),this.pauseIcon=this.playButton.querySelector(".icon-pause"),this.chapterMenu=this.element.querySelector(".chapter-menu"),this.chapterMenuItems=this.element.querySelectorAll(".chapter-menu-item"),this.previousChapterButton=this.element.querySelector(".chapter-arrows .previous"),this.nextChapterButton=this.element.querySelector(".chapter-arrows .next"),this.sfxToggle=this.element.querySelector(".sfx-toggle"),this.musicToggle=this.element.querySelector(".music-toggle"),this.chapterMenuItems.forEach(e=>{e.addEventListener("click",this.chapterMenuClick)}),this.playButton.addEventListener("click",this.playButtonHandler),this.previousChapterButton.addEventListener("click",this.previousChapterButtonHandler),this.nextChapterButton.addEventListener("click",this.nextChapterButtonHandler),this.sfxToggle.addEventListener("click",this.sfxToggleHandler),this.musicToggle.addEventListener("click",this.musicToggleHandler),ke.on("music_mute_change",this.audioControllerSoundToggleHandler),ke.on("sfx_mute_change",this.audioControllerSoundToggleHandler);const t=parseInt(this.timerRingCircle.getAttribute("r"));this.strokeDashArrayLength=2*Math.PI*t,U.b.set(this.timerRing,{strokeDasharray:this.strokeDashArrayLength})}set progress(e){U.b.set(this.progressBar,{width:100*e+"%"})}startTimer(e){U.b.killTweensOf(this.timerRing),U.b.set(this.timerRing,{strokeDashoffset:this.strokeDashArrayLength}),this.timerTween=U.b.to(this.timerRing,e,{strokeDashoffset:0,ease:"none"})}animateProgressFromTo(e,t,i){this.progress=e,this.animateProgressTo(t,i)}animateProgressTo(e,t){U.b.killTweensOf(this.progressBar),this.progressBarTween=U.b.to(this.progressBar,t,{width:100*e+"%",ease:"none"})}show(e=0){this.element.style.display="block",U.b.set(this.element,{opacity:0}),U.b.to(this.element,.5,{opacity:1,delay:e})}hide(){this.element.style.display="none"}resume(){this.paused&&(this.playIcon.style.display="none",this.pauseIcon.style.display="block",this.paused=!1,this.timerTween.play(),this.progressBarTween.play())}pause(){this.paused||(this.playIcon.style.display="block",this.pauseIcon.style.display="none",this.paused=!0,this.timerTween.pause(),this.progressBarTween.pause())}updateChapterMenu(e,t){this.chapterMenuItems.forEach((t,i)=>{const s=t;i+1!=e?s.classList.remove("active"):s.classList.add("active")}),this.previousChapterButton.classList.remove("disabled"),this.nextChapterButton.classList.remove("disabled"),1==e?this.previousChapterButton.classList.add("disabled"):4==e&&this.nextChapterButton.classList.add("disabled")}}var ni=function(e,t,i,s){return new(i||(i=Promise))((function(a,n){function o(e){try{l(s.next(e))}catch(e){n(e)}}function r(e){try{l(s.throw(e))}catch(e){n(e)}}function l(e){var t;e.done?a(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(o,r)}l((s=s.apply(e,t||[])).next())}))};class oi extends ge{constructor(){super(document.querySelector("main.home"),!0),this.startButtonHandler=()=>{ke.play("clk"),this.introPlay.removeEventListener("click",this.startButtonHandler),this.start()},this.playButtonHandler=()=>{this.resume()},this.pauseButtonHandler=()=>{this.pause()},this.onBlurHandler=()=>{ti.paused||(this.resumeOnFocus=!0,this.pause())},this.onFocusHandler=()=>{this.resumeOnFocus&&(this.resumeOnFocus=!1,this.resume())},this.keyUpHandler=e=>{32==e.keyCode&&(e.preventDefault(),ti.paused?this.resume():this.pause())},this.chapterSwitchHandler=e=>{ti.currentChapterIndex!=e.chapterIndex&&(ke.stopAll(),U.b.set(this.titleExperienceEl,{opacity:0}),ti.gotoAct(e.chapterIndex,1))},this.onDragAreaDownHandler=e=>{si.globe.startDrag(e.clientX,e.clientY),this.dragArea.addEventListener("mousemove",this.onDragAreaMoveHandler)},this.onDragAreaMoveHandler=e=>{si.globe.drag(e.clientX,e.clientY)},this.onDragAreaUpHandler=e=>{this.dragArea.removeEventListener("mousemove",this.onDragAreaMoveHandler),si.globe.stopDrag(e.clientX,e.clientY)},this.onActChange=e=>{const t=e.chapter+"_"+e.act,i=l.getValue("chapters3d")[e.chapter-1],a=i.acts[e.act-1],n=ti.progress/ti.duration,o=parseInt(a.duration),r=(ti.progress+o)/ti.duration;ti.currentChapterIndex!=e.lastChapter&&(si.onChapterChange(),this.controls.startTimer(ti.getChapterDuration(ti.currentChapterIndex)),this.resume()),this.controls.updateChapterMenu(e.chapter,e.act),this.controls.animateProgressFromTo(n,r,o),s["play"+t](i,a,this)},this.updateDOMColors=()=>{l.getValue("timeOfDay")==x?(this.element.classList.remove(...N),this.element.classList.add(N[0]),j.element.classList.remove(...N),j.element.classList.add(N[0]),H.emit("events_header_color",{mode:N[0]})):(this.element.classList.remove(...N),this.element.classList.add(N[1]),j.element.classList.remove(...N),j.element.classList.add(N[1]),H.emit("events_header_color",{mode:N[1]}))},this.dragArea=document.querySelector(".drag-area"),this.menuEl=this.element.querySelector(".menu"),this.statsEl=this.element.querySelector(".stats"),this.statsItemsEl=this.element.querySelectorAll(".stats li"),this.titleInitialEl=this.element.querySelector(".title-initial"),this.titleExperienceEl=this.element.querySelector(".title-experience"),this.introControls=this.element.querySelector(".intro-controls"),this.introPlay=this.element.querySelector(".intro-play"),this.introPlayIcon=this.element.querySelector(".intro-play .icon"),this.introLoader=this.element.querySelector(".intro-loader"),this.introLoadingLabel=this.element.querySelector(".loading-label"),this.introExploreLabel=this.element.querySelector(".explore-label"),this.disclaimer=this.element.querySelector(".disclaimer"),this.controls=new ai(this.element.querySelector(".experience-controls")),Mt.a.isWebGLAvailable()||(this.introControls.style.display="none"),si.init()}setupEvents(){this.controls.on("event_play",this.playButtonHandler),this.controls.on("event_pause",this.pauseButtonHandler),this.controls.on("event_chapter_switch",this.chapterSwitchHandler),this.enableDrag(),document.body.addEventListener("keyup",this.keyUpHandler),ti.on("actChangeEvent",this.onActChange),this.introPlay.addEventListener("click",this.startButtonHandler),H.on(V,this.updateDOMColors),window.addEventListener("blur",this.onBlurHandler),window.addEventListener("focus",this.onFocusHandler)}animateIn(){return ni(this,void 0,void 0,(function*(){U.b.set(this.element,{opacity:1}),si.reset(),si.show(),yield si.loadImage();U.b.to(this.statsItemsEl,1,{opacity:1,y:0,stagger:.1,delay:.25}),si.animateIn(.75,1.5),j.animateIn(1.15,1),U.b.to(this.menuEl,1,{opacity:1,delay:1.15}),U.b.to([this.introLoader,this.introPlay,this.disclaimer],.5,{opacity:1,delay:2.05}),U.b.to(this.introLoader,3,{rotation:360,ease:"none",repeat:-1,delay:2.05}),U.b.set(this.titleInitialEl,{perspective:400,opacity:1});const e=U.b.timeline(),t=new pe(this.titleInitialEl,{type:"words, chars"}).chars;e.from(t,{duration:1,opacity:0,y:20,ease:"Power2.easeOut",delay:.95,stagger:.007,onComplete:this.animationInComplete.bind(this)})}))}animationInComplete(){return ni(this,void 0,void 0,(function*(){yield si.load(),this.setupEvents(),this.introExploreLabel.style.display="block",this.introLoadingLabel.style.display="none",U.b.to(this.introLoader,.5,{opacity:0,onComplete:()=>{U.b.killTweensOf(this.introLoader)}}),U.b.to(this.introPlayIcon,1,{opacity:1,onComplete:()=>{this.introPlay.classList.add("active")}})}))}animateOut(){return this.pause(),U.b.exportRoot().kill(),si.animateOut(),super.animateOut()}start(){!this.started&&si.loaded&&(this.introPlay.classList.remove("active"),this.started=!0,this.resume(),ht(),j.hideZoom(),this.hideMenu(.5),this.hideStats(.5),U.b.to(this.titleInitialEl,.5,{opacity:0,onComplete:()=>{this.element.classList.add("experience-started"),this.disableDrag()}}),U.b.to([this.introPlay,this.introPlayIcon,this.disclaimer],.5,{opacity:0}),this.controls.show(1))}resume(){ti.paused&&si.loaded&&this.started&&(ti.resume(),this.controls.resume(),si.resume(),ke.resumeAll())}pause(){!ti.paused&&si.loaded&&(ti.pause(),this.controls.pause(),si.pause(),ke.pauseAll())}showStats(e=0,t=0){U.b.to(this.statsEl,e,{opacity:1,delay:t})}hideStats(e=0,t=0){U.b.to(this.statsEl,e,{opacity:0,delay:t,onComplete:()=>{this.statsEl.style.display="none"}})}hideMenu(e=0,t=0){U.b.to(this.menuEl,e,{opacity:0,delay:t,onComplete:()=>{this.menuEl.style.display="none"}})}get slug(){return""}enableDrag(){this.dragArea.addEventListener("mousedown",this.onDragAreaDownHandler),window.addEventListener("mouseup",this.onDragAreaUpHandler)}disableDrag(){this.dragArea.removeEventListener("mousedown",this.onDragAreaDownHandler),window.removeEventListener("mouseup",this.onDragAreaUpHandler)}destroy(){this.controls.off("event_play",this.playButtonHandler),this.controls.off("event_pause",this.pauseButtonHandler),this.controls.off("event_chapter_switch",this.chapterSwitchHandler),this.disableDrag(),document.body.removeEventListener("keyup",this.keyUpHandler),ti.off("actChangeEvent",this.onActChange),this.introPlay.removeEventListener("click",this.startButtonHandler),H.off(V,this.updateDOMColors),window.removeEventListener("blur",this.onBlurHandler),window.removeEventListener("focus",this.onFocusHandler),si.destroy()}}class ri{constructor(e){this.currIndex=0,this.layout=()=>{},this.element=e,this.navItems=this.element.querySelectorAll(".nav li"),this.imageItems=this.element.querySelectorAll(".images-block .item"),this.copyItems=this.element.querySelectorAll(".copy-block .item"),this.btnPrev=this.element.querySelector(".prev"),this.btnNext=this.element.querySelector(".next"),this.speed=.3,this.init()}init(){this.layout(),this.addListeners(),this.showActive()}addListeners(){this.btnPrev.addEventListener("click",this.onPrevClick.bind(this)),this.btnNext.addEventListener("click",this.onNextClick.bind(this));for(const e of this.navItems)e.addEventListener("click",this.onNavClick.bind(this));H.on(V,this.layout)}removeListeners(){this.btnPrev.removeEventListener("click",this.onPrevClick.bind(this)),this.btnNext.removeEventListener("click",this.onNextClick.bind(this));for(const e of this.navItems)e.removeEventListener("click",this.onNavClick.bind(this));H.off(V,this.layout)}onPrevClick(e){this.hideCurrent(),this.currIndex=0===this.currIndex?this.navItems.length-1:this.currIndex-=1,this.showActive()}onNextClick(e){this.hideCurrent(),this.currIndex=this.currIndex===this.navItems.length-1?0:this.currIndex+=1,this.showActive()}onNavClick(e){const t=e.target.parentElement;this.hideCurrent(),this.currIndex=[...this.navItems].indexOf(t),this.showActive()}hideCurrent(){const e=[this.imageItems[this.currIndex],this.copyItems[this.currIndex]];this.navItems[this.currIndex].classList.remove("active"),U.b.to(e,{duration:this.speed,autoAlpha:0})}showActive(){const e=[this.imageItems[this.currIndex],this.copyItems[this.currIndex]];this.navItems[this.currIndex].classList.add("active"),U.b.to(e,{duration:this.speed,autoAlpha:1})}destroy(){this.removeListeners();for(const e of this.navItems)e.removeEventListener("click",this.onNavClick.bind(this))}}var li=function(e,t,i,s){return new(i||(i=Promise))((function(a,n){function o(e){try{l(s.next(e))}catch(e){n(e)}}function r(e){try{l(s.throw(e))}catch(e){n(e)}}function l(e){var t;e.done?a(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(o,r)}l((s=s.apply(e,t||[])).next())}))};class hi{constructor(e){this.animating=!1,this.reset=!0,this.tls=[],this.element=e,this.wrapper=e.querySelector(".graph-wrapper"),this.parent=e.querySelector(".parent"),this.child=e.querySelector(".child"),this.line=e.querySelector(".line"),this.lineBg=e.querySelector(".line--bg"),this.lineLength=this.line.getTotalLength()+.5,this.dots=[...e.querySelectorAll("circle.dot")],this.coins1=[...e.querySelectorAll(".coin--1")],this.coins2=[...e.querySelectorAll(".coin--2")],this.coins3=[...e.querySelectorAll(".coin--3")],this.resetProps(),this.animateIn(1)}tweenCoins(e,t,i,s){return this.tls[s]=U.b.timeline(),this.tls[s].to(e,{opacity:1,duration:.1,delay:i+.1,stagger:t/e.length+.01,ease:"expo.out"}).to(e,{opacity:0,duration:.45,stagger:t/e.length}),U.b.to(e,{duration:t,stagger:t/e.length,y:-70,delay:i,ease:"back.out(2.5)"})}animateIn(e=0){return li(this,void 0,void 0,(function*(){U.b.to(this.dots,.2,{scale:1,opacity:1,stagger:.1,delay:e}),U.b.to(this.lineBg,1.2,{strokeDashoffset:0,delay:e}),this.tweenCoins(this.coins1,1,1,1),U.b.to(this.line,{duration:1,strokeDashoffset:902,delay:1}),this.tweenCoins(this.coins2,1,3,2),U.b.to(this.line,{duration:1,strokeDashoffset:482,delay:3}),this.tweenCoins(this.coins3,1,5,3),U.b.to(this.line,{duration:1,strokeDashoffset:0,delay:5,onComplete:()=>{U.b.delayedCall(2,()=>this.resetAnimation())}}),this.reset=!1}))}resetProps(){U.b.set(this.line,{strokeDasharray:this.lineLength,strokeDashoffset:this.lineLength}),U.b.set(this.lineBg,{strokeDasharray:this.lineLength,strokeDashoffset:this.lineLength}),U.b.set(this.dots,{scale:0,opacity:0}),U.b.set(this.coins1,{opacity:0,y:0}),U.b.set(this.coins2,{opacity:0,y:0}),U.b.set(this.coins3,{opacity:0,y:0})}resetAnimation(){this.tls.forEach(e=>{e.kill()}),U.b.killTweensOf(this.line),U.b.killTweensOf(this.lineBg),U.b.killTweensOf(this.dots),U.b.killTweensOf(this.coins1),U.b.killTweensOf(this.coins2),U.b.killTweensOf(this.coins3),this.resetProps(),this.animateIn(2)}destroy(){}}class ci extends ge{constructor(){super(document.querySelector("main.provide")),this.slideshow=new ri(this.element.querySelector(".Slideshow")),this.graph=new hi(this.element.querySelector(".rewards .graph")),this.accordion=new G(this.element.querySelector(".Accordion"))}get slug(){return"provide/"}destroy(){this.slideshow.destroy(),this.graph.destroy(),this.accordion.destroy(),super.destroy()}}var ui=i(7);class di{constructor(e,t=!1){this.prevX=0,this.layout=()=>{if(this.mobileOnly&&R.width<600&&!this.enabled?this.enable():this.mobileOnly&&R.width>=600&&this.enabled&&this.disable(),this.enabled){this.itemW=this.element.getBoundingClientRect().width,this.carouselWrapper.style.width=this.itemW*this.carousel_count+"px";for(const e of this.carouselItems)e.style.width=this.itemW+"px"}},this.element=e,this.mobileOnly=t,this.initDraggable()}initDraggable(){this.activeID=0,this.carousel_count=this.element.querySelectorAll(".carousel-item").length,this.carouselWrapper=this.element.querySelector(".carousel-items"),this.carouselItems=this.element.querySelectorAll(".carousel-item"),this.navDotsWrapper=this.element.querySelector(".nav-dots"),this.btnNext=this.element.querySelector(".item-prev"),this.btnPrev=this.element.querySelector(".item-next"),this.swipeDir,this.slideSpeed=.45,this.slideMeth="Power2.EaseInOut",this.opacityDisabled=.25,this.opacitySpeed=.35,this.carousel_count<2&&(this.navDotsWrapper.style.display="none"),this.setupDraggable(),this.setupDots(),this.navigateSlide(),this.addHandlers(),this.enabled=!0,H.on(V,this.layout),this.layout(),H.emit(V,{width:R.width,height:R.height})}setupDraggable(){U.b.registerPlugin(ui.a),this.draggable=ui.a.create(this.carouselWrapper,{type:"x",edgeResistance:.9,dragResistance:0,bounds:".carousel-container",onDrag:this.updateDirections.bind(this),onThrowUpdate:this.updateDirections.bind(this),throwProps:!0,lockAxis:!0,onDragStart:function(e){},onDragEnd:()=>{"left"==this.swipeDir?this.activeID++:"right"==this.swipeDir&&this.activeID--,this.navigateSlide()}})}disable(){this.enabled=!1,this.draggable[0].kill(),this.removeHandlers(),this.carouselWrapper.style.removeProperty("width");for(const e of this.carouselItems)e.style.removeProperty("width"),e.style.removeProperty("opacity")}enable(){this.enabled=!0,this.draggable[0].enable()}setupDots(){let e;for(var t=0;t<this.carousel_count;t++)e=`<div class="nav-dot" id="dot_${t}"><span class="dot"></span></div>`,this.navDotsWrapper.insertAdjacentHTML("beforeend",e);this.navDots=this.element.querySelectorAll(".nav-dot")}navigateSlide(){this.activeID>=this.carousel_count-1&&(this.activeID=this.carousel_count-1),this.activeID<=0&&(this.activeID=0);var e=this.activeID*this.itemW*-1;U.b.to(this.carouselWrapper,{duration:this.slideSpeed,x:e,ease:this.slideMeth,overwrite:!0,onComplete:this.slideDone.bind(this)})}slideDone(){if(!this.enabled)return!1;U.b.to([this.navDots,this.carouselItems],{duration:this.opacitySpeed,opacity:this.opacityDisabled});const e=this.element.querySelector("#dot_"+this.activeID),t=this.element.querySelector(".nav-dot.active");t&&t.classList.remove("active"),e.classList.add("active"),U.b.to([e,this.carouselItems[this.activeID]],{duration:this.opacitySpeed,opacity:1,color:13369344})}updateDirections(){this.swipeDir=this.draggable[0].getDirection("velocity"),this.prevX>this.draggable[0].endX?this.swipeDir="left":this.prevX<this.draggable[0].endX&&(this.swipeDir="right"),this.prevX=this.draggable[0].endX}onNavDotClick(e){this.activeID=e.target.getAttribute("id").split("_")[1],this.navigateSlide()}onItemMouseDown(e){e.target.classList.remove("grab"),e.target.classList.add("grabbing")}onItemMouseEnter(e){e.target.classList.remove("grabbing"),e.target.classList.add("grab")}onItemMouseUp(e){e.target.classList.remove("grabbing"),e.target.classList.add("grab")}onNavDotMouseEnter(e){U.b.to(e.target,{duration:this.opacitySpeed,opacity:1})}onNavDotMouseLeave(e){if(e.target.classList.contains("active"))return!1;U.b.to(e.target,{duration:this.opacitySpeed,opacity:this.opacityDisabled})}onToggleItemClick(e){2===this.carousel_count&&(this.activeID=0===this.activeID?1:0,this.navigateSlide())}onPrevClick(e){this.activeID=this.activeID===this.carouselItems.length-1?0:this.activeID+=1,this.navigateSlide()}onNextClick(e){this.activeID=0===this.activeID?this.carouselItems.length-1:this.activeID-=1,this.navigateSlide()}addHandlers(){this.element.addEventListener("click",this.onToggleItemClick.bind(this));for(const e of this.navDots)e.addEventListener("click",this.onNavDotClick.bind(this)),e.addEventListener("mouseenter",this.onNavDotMouseEnter.bind(this)),e.addEventListener("mouseleave",this.onNavDotMouseLeave.bind(this));for(const e of this.carouselItems)e.addEventListener("mousedown",this.onItemMouseDown.bind(this)),e.addEventListener("mouseenter",this.onItemMouseEnter.bind(this)),e.addEventListener("mouseup",this.onItemMouseUp.bind(this));this.btnPrev&&this.btnNext&&(this.btnPrev.addEventListener("click",this.onPrevClick.bind(this)),this.btnNext.addEventListener("click",this.onNextClick.bind(this)))}removeHandlers(){this.element.removeEventListener("click",this.onToggleItemClick.bind(this));for(const e of this.navDots)e.removeEventListener("click",this.onNavDotClick.bind(this)),e.removeEventListener("mouseenter",this.onNavDotMouseEnter.bind(this)),e.removeEventListener("mouseleave",this.onNavDotMouseLeave.bind(this));for(const e of this.carouselItems)e.removeEventListener("mousedown",this.onItemMouseDown.bind(this)),e.removeEventListener("mouseenter",this.onItemMouseEnter.bind(this)),e.removeEventListener("mouseup",this.onItemMouseUp.bind(this));this.btnPrev&&this.btnNext&&(this.btnPrev.removeEventListener("click",this.onPrevClick.bind(this)),this.btnNext.removeEventListener("click",this.onNextClick.bind(this)))}destroy(){this.draggable[0].kill(),H.off(V,this.layout),this.removeHandlers()}}class mi{constructor(e,t){this.videoId="",this.fadeDuration=.3,this.element=e,this.mainElement=t,this.init()}init(){this.element.addEventListener("click",this.onAnchorClick.bind(this))}testURL(e){return RegExp("^((?:https?:)?\\/\\/)?((?:www|m)\\.)?((?:youtube\\.com|youtu.be))(\\/(?:[\\w\\-]+\\?v=|embed\\/|v\\/)?)([\\w\\-]+)(\\S+)?$").test(e)}onAnchorClick(e){e.preventDefault();const t=e.target.href;if(this.testURL(t)){this.videoId=t.split("v=")[1];const e=this.videoId.indexOf("&");-1!=e&&(this.videoId=this.videoId.substring(0,e)),this.openModal()}}openModal(){this.modalElement=document.createElement("div"),this.modalElement.classList.add("video-modal"),this.modalElement.innerHTML=`\n            <button class="close"><span class="span">close</span></button>\n            <div class="container">\n              <div class="ratio ratio--16x9">\n              <iframe class="iframe" width="420" height="315"src="https://www.youtube.com/embed/${this.videoId}"></iframe>\n              </div>\n            </div>`,this.modalElement.querySelector(".close").addEventListener("click",this.onCloseClick.bind(this)),this.modalElement.style.opacity="0",this.mainElement.appendChild(this.modalElement),U.b.to(this.modalElement,{duration:this.fadeDuration,opacity:1})}onCloseClick(e){U.b.to(this.modalElement,{duration:this.fadeDuration,opacity:0,onComplete:()=>{this.modalElement.remove()}})}destroy(){this.element.removeEventListener("click",this.onAnchorClick.bind(this))}}var pi=function(e,t,i,s){return new(i||(i=Promise))((function(a,n){function o(e){try{l(s.next(e))}catch(e){n(e)}}function r(e){try{l(s.throw(e))}catch(e){n(e)}}function l(e){var t;e.done?a(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(o,r)}l((s=s.apply(e,t||[])).next())}))};class gi extends ge{constructor(){super(document.querySelector("main")),this.carousels=[],this.videoOverlays=[],this.init=()=>{let e,t;for(e of this.carouselElements)e=e,t="true"==e.dataset.settingMobile,this.carousels.push(new di(e,t));for(e of this.videoOverlayElements)e=e,this.videoOverlays.push(new mi(e,this.element))},this.element=document.querySelector("main.build"),this.overlay=document.querySelector(".overlay"),this.accordionElement=this.element.querySelector(".Accordion"),this.toolsAccordion=new G(this.accordionElement,[0,1,2],!0),this.carouselElements=this.element.querySelectorAll(".Carousel"),this.videoOverlayElements=this.element.querySelectorAll(".VideoOverlay"),this.globe=this.element.querySelector(".build-globe"),console.log(this.globe),this.init()}animateIn(){const e=Object.create(null,{animateIn:{get:()=>super.animateIn}});return pi(this,void 0,void 0,(function*(){yield e.animateIn.call(this)}))}parallax(){super.parallax();d(R.lastScrollY/R.height,0,1);const e=d(R.lastScrollY/(2.5*R.height),0,1);this.overlay.style.opacity=""+e,this.globe.style.display=e>.7?"none":"block";const t=d(R.lastScrollY/(R.height/4),0,1);j.backgroundWrapper.style.opacity=""+t}get slug(){return"build/"}destroy(){this.toolsAccordion.destroy(),this.carousels.forEach(e=>{e.destroy()}),this.videoOverlays.forEach(e=>{e.destroy()}),super.destroy()}}class Di{constructor(e){this.element=e,this.grid=[8,30],this.avatars=[...e.querySelectorAll(".row img")],this.cols=[...e.querySelectorAll(".col")],U.b.set(this.cols,{opacity:0,y:10}),this.addListeners()}animateIn(e=0){this.animating||(this.animating=!0,U.b.to(this.cols,{duration:.5,delay:e,opacity:1,y:0,stagger:.1}))}addListeners(){new IntersectionObserver((e,t)=>{for(let t of e)if(t.isIntersecting){"stats-wrapper"===t.target.className&&this.animateIn()}}).observe(this.element.querySelector(".stats-wrapper"))}destroy(){}}var yi=function(e,t,i,s){return new(i||(i=Promise))((function(a,n){function o(e){try{l(s.next(e))}catch(e){n(e)}}function r(e){try{l(s.throw(e))}catch(e){n(e)}}function l(e){var t;e.done?a(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(o,r)}l((s=s.apply(e,t||[])).next())}))};class bi{constructor(e,t){this.animating=!1,this.labelsY=[],this.labelsX=[],this.element=e,this.max=Math.max(...t),this.data=t.map(e=>Object(a.a)(e,0,this.max,0,1)),this.chartWrapper=e.querySelector(".chart"),this.bars=[...e.querySelectorAll("rect")],this.lines=[...e.querySelectorAll("line")],this.count=this.bars.length,this.weekLabelsWrapper=this.element.querySelector(".labels__x"),this.commitLabelsWrapper=this.element.querySelector(".labels__y"),this.initWeekLabels(),this.initCommitLabels(),this.presetAnimation(),this.addListeners()}addListeners(){this.observer=new IntersectionObserver((e,t)=>{for(let t of e)if(t.isIntersecting){"chart"===t.target.className&&this.animateIn(0)}}),this.observer.observe(this.chartWrapper)}initWeekLabels(){for(let e=0;e<this.count;e++){let t=document.createElement("span");t.classList.add("span"),t.innerText=""+(e+1),this.weekLabelsWrapper.appendChild(t),this.labelsY.push(t)}}initCommitLabels(){let e=this.max/4;for(let t=1;t<5;t++){let i=document.createElement("span");i.classList.add("span"),i.innerText=""+Math.floor(t*e),this.commitLabelsWrapper.appendChild(i),this.labelsX.push(i)}}animateIn(e=0){return yi(this,void 0,void 0,(function*(){this.animating||(this.animating=!0,U.b.to(this.lines,{duration:1,scaleX:1,delay:e}),e+=.2,U.b.to(this.labelsY,{y:-0,opacity:1,stagger:.03,delay:e}),this.bars.forEach((t,i)=>{U.b.to(t,{duration:.6,scaleY:this.data[i],delay:e+.03*i})}),e+=2,U.b.to(this.labelsX,{duration:.6,y:0,opacity:1,stagger:.03,delay:e}))}))}presetAnimation(){U.b.set(this.bars,{scaleY:0,transformOrigin:"bottom"}),U.b.set(this.labelsY,{y:-10,opacity:0}),U.b.set(this.labelsX,{y:-10,opacity:0}),U.b.set(this.lines,{scaleX:0}),this.animating=!1}destroy(){this.observer.unobserve(this.chartWrapper)}}class vi extends ge{constructor(){let e,t;for(e of(super(document.querySelector("main")),this.carousels=[],this.element=document.querySelector("main.ecosystem"),this.avatars=new Di(this.element.querySelector("section.community")),this.fetchData().then(e=>{this.graph=new bi(this.element.querySelector("section.graph"),e)}),this.element.querySelectorAll(".Carousel")))e=e,t="true"==e.dataset.settingMobile,this.carousels.push(new di(e,t))}fetchData(){return fetch("/data/commits.json").then(e=>e.json())}get slug(){return"ecosystem/"}destroy(){this.avatars.destroy(),this.graph.destroy(),super.destroy()}}class fi{constructor(e){this.layout=()=>{this.listHeight=this.list.getBoundingClientRect().height,this.itemHeight=this.dataItems[0].getBoundingClientRect().height,this.dataItemWrapper.style.height=this.listHeight/2+"px",this.dataItems.length/2%2==0?(this.dataItemWrapper.style.top=this.itemHeight/2+"px",this.icon.style.marginTop=`-${this.itemHeight/2}px`):this.icon.style.marginTop="0px"},this.element=e,this.list=this.element.querySelector(".list"),this.dataItemWrapper=this.element.querySelector(".data-items"),this.icon=this.element.querySelector(".icon"),this.dataItems=this.element.querySelectorAll(".data-items li"),this.mediaItems=this.element.querySelectorAll(".media-items li"),this.speed=.3,this.showDuration=2,H.on(V,this.layout),this.init()}init(){this.currIndex=Math.round(this.dataItems.length/4)-1,this.dataItems[this.currIndex].classList.add("active"),this.mediaItems[this.currIndex].style.opacity="1",this.layout();for(const e of this.dataItems)e.addEventListener("click",this.onItemClick.bind(this));this.autoNext()}onItemClick(e){let t=0,i=0;this.delayedCall.kill(),this.dataItems.forEach((s,a)=>{s===e.target&&(i=a),s.classList.contains("active")&&(t=a,s.classList.remove("active"))}),e.target.classList.add("active"),this.showMedia(parseInt(e.target.dataset.index)),i<t?this.goDown(t-i):i>t&&this.goUp(i-t)}setTransitioning(e){e?this.element.classList.add("transitioning"):this.element.classList.remove("transitioning")}autoNext(){const e=[...this.dataItems].filter(e=>{if(e.classList.contains("active"))return e})[0];this.showMedia(parseInt(e.dataset.index)),this.delayedCall=U.b.delayedCall(this.showDuration,()=>{e.classList.remove("active"),e.nextElementSibling.classList.add("active"),this.goUp(1,!0)})}goUp(e,t=!1){this.setTransitioning(!0),U.b.to(this.list,{duration:this.speed,top:-this.itemHeight*e,ease:"Power4.easeOut",onComplete:()=>{this.list=this.element.querySelector(".list");for(let t=0;t<e;t++)this.dataItems=this.element.querySelectorAll(".data-items li"),this.list.appendChild(this.dataItems[0]);U.b.set(this.list,{top:0}),this.autoNext(),this.setTransitioning(!1)}})}goDown(e){this.setTransitioning(!0);for(let t=0;t<e;t++)this.list=this.element.querySelector(".list"),this.dataItems=this.element.querySelectorAll(".data-items li"),this.list.insertBefore(this.dataItems[this.dataItems.length-1],this.list.firstChild);U.b.set(this.list,{top:-this.itemHeight*e}),U.b.to(this.list,{duration:this.speed,top:0,ease:"Power4.easeOut",onComplete:()=>{this.list=this.element.querySelector(".list"),this.dataItems=this.element.querySelectorAll(".data-items li"),this.autoNext(),this.setTransitioning(!1)}})}showMedia(e){U.b.to(this.mediaItems,{duration:this.speed,opacity:0}),U.b.to(this.mediaItems[e],{duration:this.speed,opacity:1})}destroy(){H.off(V,this.layout)}}class wi extends ge{constructor(){super(document.querySelector("main")),this.carousels=[],this.storeCarousel=new fi(this.element.querySelector(".StoreCarousel")),this.slideshow=new ri(this.element.querySelector(".Slideshow"));for(const e of this.element.querySelectorAll(".Carousel"))this.carousels.push(new di(e));this.accordion=new G(this.element.querySelector(".Accordion"))}get slug(){return"store/"}destroy(){this.storeCarousel.destroy(),this.slideshow.destroy(),this.accordion.destroy(),this.carousels.forEach(e=>{e.destroy()}),super.destroy()}}class Ci{constructor(e){this.element=e,this.error=e.querySelector(".error-message"),this.form=e.querySelector("form"),this.inputEmail=e.querySelector(".email"),this.init()}init(){this.form.addEventListener("submit",this.onSubmit.bind(this)),this.inputEmail.addEventListener("focus",this.onFocus.bind(this)),this.apiKey="a1dfb670c4f1fb042e82a1f1d",this.listId="ff0bee3cae",this.url=`//protocol.us16.list-manage.com/subscribe/post-json?u=${this.apiKey}&id=${this.listId}`,window.MC_callback=e=>{if(console.log(e),"error"===e.result){if(e.msg.includes("already subscribed")){const t=e.msg.match(/href="([^"]*)/)[1];this.error.innerHTML=`Your email, ${this.inputEmail.value} is already subscribed to Filecoin News\n                    <a href="${t}">Update your preferences</a>`}else this.error.innerHTML=e.msg;this.showError()}else this.showSuccess()}}validateEmail(e){return/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(e)}showError(){this.element.classList.remove("success"),this.element.classList.add("error")}showSuccess(){this.element.classList.remove("error"),this.element.classList.add("success"),U.b.delayedCall(3,()=>{this.element.classList.remove("success"),this.inputEmail.value=""})}onFocus(e){this.element.classList.remove("success","error")}onSubmit(e){e.preventDefault();const t=this.inputEmail.value;if(!this.validateEmail(t))return this.showError(),!1;const i=document.createElement("script");i.type="text/javascript",i.src=this.url+"&c=window.MC_callback&EMAIL="+t,document.getElementsByTagName("head")[0].appendChild(i)}}const Si=new class{constructor(){this.element=document.querySelector("footer"),this.newsletter=new Ci(this.element.querySelector(".newsletter-container"))}};class _i{constructor(e){this.element=e,this.closeButton=this.element.querySelector(".close"),this.pushContent=document.body.querySelectorAll("header, .section, .hero3d"),this.closeButton.addEventListener("click",()=>{this.close()}),this.open()}open(){U.b.set(this.element,{y:0}),U.b.set(this.pushContent,{y:this.element.clientHeight})}close(){U.b.to(this.element,.25,{y:-this.element.clientHeight,clearProps:"y"}),U.b.to(this.pushContent,.25,{y:0,clearProps:"y"})}}var Pi=i(11);const Ii=[{catch:"/#community",destination:"/build/#community"}];const Ei=new class{check(){const e=window.location.href.replace(window.location.origin,"");Ii.forEach(t=>{t.catch.split("*"),e.split("/")})}redirectLang(){if("true"!=function(e){for(var t=document.cookie.split(";"),i=0;i<t.length;i++){var s=t[i].split("=");if(e==s[0].trim())return decodeURIComponent(s[1])}return null}("fc_lang")&&S!=w&&"zh"==window.navigator.language.slice(0,2))switch(window.location.pathname){case"/":window.location.href="/"+w}}};var ki=i(12),xi=i.n(ki),Fi=function(e,t,i,s){return new(i||(i=Promise))((function(a,n){function o(e){try{l(s.next(e))}catch(e){n(e)}}function r(e){try{l(s.throw(e))}catch(e){n(e)}}function l(e){var t;e.done?a(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(o,r)}l((s=s.apply(e,t||[])).next())}))};class Ai extends ge{constructor(){super(document.querySelector("main")),this.isNavOpen=!1,this.screenMode=0,this.activeDoubleClass="double-column--active",this.selectedCategory="",this.init=()=>{this.navSelected.addEventListener("click",this.onNavClick),this.navigation.addEventListener("mouseleave",this.closeNav),this.navigation.addEventListener("click",this.onFilterLinkClick);const e=parseInt(l.getValue("blog_scroll_y"));this.postsContainer.style.height=parseInt(l.getValue("blog_scroll_y"))+"px",H.on(V,this.layout),H.on("events_scroll",this.scroll),this.layout(),this.checkLazySizes(),window.scrollTo(0,e),this.postsContainer.style.height="auto"},this.scroll=()=>{this.postsContainer.getBoundingClientRect().bottom-R.height<0&&this.loadNextSet(),l.setValue("blog_scroll_y",""+R.lastScrollY)},this.layout=()=>{const e=this.screenMode;window.matchMedia("(min-width: 1440px)").matches?this.screenMode=1440:window.matchMedia("(min-width: 900px)").matches?this.screenMode=900:this.screenMode=600,e!==this.screenMode&&this.setFilterPosts()},this.onNavClick=e=>{e.preventDefault(),this.isNavOpen?(this.navSelected.classList.remove("open"),this.navigation.classList.remove("visible")):(this.navSelected.classList.add("open"),this.navigation.classList.add("visible")),this.isNavOpen=!this.isNavOpen},this.closeNav=e=>{e&&e.preventDefault(),this.isNavOpen&&(this.isNavOpen=!1,this.navSelected.classList.remove("open"),this.navigation.classList.remove("visible"))},this.onFilterLinkClick=e=>{e.preventDefault();const t=e.target;"A"===t.tagName&&(this.filterLinks.forEach(e=>e.classList.remove("active")),t.classList.add("active"),this.navSelected.innerText=t.innerText,this.selectedCategory=t.dataset.category,this.filterPosts(),this.closeNav())},this.element=document.querySelector("main.blog"),this.navSelected=this.element.querySelector(".tool-bar__filter .selected span"),this.navigation=this.element.querySelector(".tool-bar__filter .filter__nav"),this.filterLinks=[...this.element.querySelectorAll(".tool-bar__filter li a")],this.subtitle=document.querySelector(".sub-title"),this.coverFeatures=document.querySelector(".cover-features"),this.posts=this.element.querySelectorAll(".post"),this.postsContainer=this.element.querySelector(".posts-container"),this.hiddenContainer=this.element.querySelector(".hidden-container"),this.init()}setFilterPosts(){let e;this.selectedCategory=l.getValue("blog_category"),this.selectedCategory?[...this.filterLinks].forEach(e=>{e.dataset.category===this.selectedCategory?e.classList.add("active"):e.classList.remove("active")}):(e=[...this.filterLinks].filter(e=>{if(e.classList.contains("active"))return e})[0],this.selectedCategory=e.dataset.category),this.filterPosts(),this.checkLazySizes()}checkLazySizes(){window.dispatchEvent(new Event("scroll"))}loadNextSet(){let e=0;for(const t of this.postsContainer.querySelectorAll(".wrapper"))!t.classList.contains("visible")&&e<4&&(e++,t.classList.add("visible"))}animateIn(){const e=Object.create(null,{animateIn:{get:()=>super.animateIn}});return Fi(this,void 0,void 0,(function*(){yield e.animateIn.call(this),U.b.to(this.subtitle,{duration:.3,opacity:1}),U.b.to(this.coverFeatures,{duration:.3,opacity:1})}))}filterPosts(){const e=this.selectedCategory;let t=0;for(const i of this.posts)i.classList.remove(this.activeDoubleClass),i.dataset.categories.indexOf(e)>-1||""===e?(i.classList.add("visible"),i.classList.remove("hidden"),U.b.set(i,{opacity:0}),U.b.to(i,{opacity:1,duration:.3,delay:t}),t+=.15):(i.classList.add("hidden"),i.classList.remove("visible"));this.wrapPosts(),l.setValue("blog_category",e)}wrapPosts(){let e,t=0,i=0;for(const e of this.posts)e.classList.remove("double-column--active");if(1440===this.screenMode)for(const s of this.posts)0===i&&(e=document.createElement("div"),e.classList.add("div","wrapper")),s.classList.contains("visible")&&s.classList.contains("double-column")&&i<2?(s.classList.add(this.activeDoubleClass),e.appendChild(s),i+=2):s.classList.contains("visible")?(e.appendChild(s),i++):this.hiddenContainer.appendChild(s),(i>2||t===this.posts.length-1)&&(this.postsContainer.appendChild(e),i=0),t++;else if(900===this.screenMode)for(const s of this.posts)0===i&&(e=document.createElement("div"),e.classList.add("wrapper")),s.classList.contains("visible")&&s.classList.contains("double-column")&&0===i?(s.classList.add(this.activeDoubleClass),e.appendChild(s),i+=2):s.classList.contains("visible")&&s.classList.contains("double-column")||s.classList.contains("visible")?(e.appendChild(s),i++):this.hiddenContainer.appendChild(s),(i>1||t===this.posts.length-1||s.classList.contains("double-column"))&&(this.postsContainer.appendChild(e),i=0),t++;else if(600===this.screenMode){e=document.createElement("div"),e.classList.add("wrapper");for(const t of this.posts)t.classList.contains("visible")?e.appendChild(t):this.hiddenContainer.appendChild(t);this.postsContainer.appendChild(e)}i=0;for(const e of this.postsContainer.querySelectorAll(".wrapper"))e.innerHTML?i<4&&e.classList.add("visible"):e.remove(),i++;this.checkLazySizes()}get slug(){return"blog/"}destroy(){H.off(V,this.layout),H.off("events_scroll",this.scroll),this.navSelected.removeEventListener("click",this.onNavClick),this.navigation.removeEventListener("mouseleave",this.closeNav),this.navigation.removeEventListener("click",this.onFilterLinkClick),super.destroy()}}class Bi{constructor(e,t){this.element=e,this.shareCopy=t,this.facebookEl=this.element.querySelector(".facebook"),this.twitterEl=this.element.querySelector(".twitter"),this.linkedinEl=this.element.querySelector(".linkedin"),this.copyLinkEl=this.element.querySelector(".copylink"),this.copyLinkAlertEl=this.element.querySelector(".copylink .alert"),this.facebookEl.addEventListener("click",this.onFacebookClick.bind(this)),this.twitterEl.addEventListener("click",this.onTwitterClick.bind(this)),this.linkedinEl.addEventListener("click",this.onLinkedInClick.bind(this))}onFacebookClick(){const e=screen.width/2-300,t=screen.height/2-175,i=window.open("https://www.facebook.com/sharer/sharer.php?u="+document.URL,"facebook-popup","height=350,width=600,left="+e+",top="+t);return i.focus&&i.focus(),!1}onTwitterClick(){const e=screen.width/2-300,t=screen.height/2-175,i=window.open("https://twitter.com/share?url="+document.URL+"&text="+this.shareCopy,"twitter-popup","height=350,width=600,left="+e+",top="+t);return i.focus&&i.focus(),!1}onLinkedInClick(){const e=screen.width/2-300,t=screen.height/2-487.5,i=window.open("https://www.linkedin.com/shareArticle?mini=true&url="+document.URL+"&source=LinkedIn&summary="+this.shareCopy,"linkedin-popup","height=975,width=600,left="+e+",top="+t);return i.focus&&i.focus(),!1}onCopyLinkClick(){const e=document.createElement("input");e.value=this.shareCopy,this.copyLinkEl.appendChild(e),e.select();try{document.execCommand("copy")}catch(e){console.log("Oops, unable to copy",e)}return this.copyLinkEl.removeChild(e),TweenMax.to(this.copyLinkAlertEl,.3,{autoAlpha:1}),TweenMax.to(this.copyLinkAlertEl,.3,{delay:1.2,autoAlpha:0}),!1}destroy(){this.facebookEl.removeEventListener("click",this.onFacebookClick.bind(this)),this.twitterEl.removeEventListener("click",this.onTwitterClick.bind(this)),this.linkedinEl.removeEventListener("click",this.onLinkedInClick.bind(this))}}class Li extends ge{constructor(){super(document.querySelector("main")),this.speed=.5,this.init=()=>{this.toggle.addEventListener("click",this.onToggleClick),this.isSocialVisible=this.networks.classList.contains("visible")},this.onToggleClick=e=>{e.preventDefault(),this.networks.classList.contains("visible")?(this.isSocialVisible=!1,this.networks.classList.remove("visible")):(this.networks.classList.add("visible"),this.isSocialVisible=!0)},this.element=document.querySelector("main.blog-single"),this.networks=this.element.querySelector(".metadata .networks"),this.toggle=this.element.querySelector(".metadata .fold-out"),this.shareElement=this.element.querySelector(".share"),this.sharing=new Bi(this.shareElement,"hello"),this.relatedArticlesCarousel=this.element.querySelector(".Carousel"),this.relatedArticlesCarousel&&(this.carousel=new di(this.relatedArticlesCarousel,!0)),this.init()}animateIn(e=this.speed){return new Promise(e=>{U.b.to(this.element,{duration:this.speed,opacity:1,onComplete:()=>{e()}})})}get slug(){return"blog/:category/:post"}destroy(){this.toggle.removeEventListener("click",this.onToggleClick),this.sharing.destroy(),this.relatedArticlesCarousel&&this.carousel.destroy(),super.destroy()}}var Mi=function(e,t,i,s){return new(i||(i=Promise))((function(a,n){function o(e){try{l(s.next(e))}catch(e){n(e)}}function r(e){try{l(s.throw(e))}catch(e){n(e)}}function l(e){var t;e.done?a(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(o,r)}l((s=s.apply(e,t||[])).next())}))};window.App=new class{constructor(){this.clickBlocker=document.body.querySelector(".click-blocker");const e=document.body.querySelector(".alert-bar");e&&new _i(e),Ei.check(),Ei.redirectLang(),this.initListeners(),xi.a.init()}initListeners(){new R;let e=Object(n.a)(f);e.on("",()=>this.onRouteChange("")),e.on("provide/",()=>this.onRouteChange("provide/")),e.on("build/",()=>this.onRouteChange("build/")),e.on("ecosystem/",()=>this.onRouteChange("ecosystem/")),e.on("store/",()=>this.onRouteChange("store/")),e.on("blog/",()=>this.onRouteChange("blog/")),e.on("blog/:category",()=>this.onRouteChange("blog/:category")),e.on("blog/:category/:post",()=>this.onRouteChange("blog/:category/:post")),l.on("current_section",e=>Mi(this,void 0,void 0,(function*(){j.setActiveNavItem(e.current.slug),yield e.current.animateIn(),this.clicksDisabled=!1}))),e.listen()}xmlCheck(e){return e.search(".xml")>-1&&(window.location.href=e),!1}onRouteChange(e){return Mi(this,void 0,void 0,(function*(){const t=l.getValue("current_section");if(t&&e==t.slug&&e.search("/:")<0)return;if(this.clicksDisabled=!0,t){const i=window.location.pathname;j.setActiveNavItem(e),this.xmlCheck(i),yield t.animateOut(),yield Object(Pi.a)(i,"main"),this.trackPageView(i)}let i;switch(e){case"":i=new oi;break;case"provide/":i=new ci;break;case"build/":i=new gi;break;case"ecosystem/":i=new vi;break;case"store/":i=new wi;break;case"blog/":case"blog/:category":i=new Ai;break;case"blog/:category/:post":i=new Li}l.setValue("current_section",i),j.hideMobileNav(),this.rewriteRelLinks()}))}rewriteRelLinks(){b(j.element.querySelectorAll('a:not([href^="http"])'));b(Si.element.querySelectorAll('a:not([href^="http"])'))}trackPageView(e){window.ga("send","pageview",e)}set clicksDisabled(e){this.clickBlocker.style.display=e?"block":"none"}}}});
//# sourceMappingURL=bundle.js.map